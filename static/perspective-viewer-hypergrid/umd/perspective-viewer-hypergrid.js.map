{"version":3,"sources":["webpack:///packages/perspective-viewer-hypergrid/webpack/universalModuleDefinition","webpack:///packages/perspective-viewer-hypergrid/webpack/bootstrap","webpack:///node_modules/faux-hypergrid/src/features/Feature.js","webpack:///node_modules/core-js/internals/global.js","webpack:///node_modules/rectangular/index.js","webpack:///node_modules/faux-hypergrid/src/Base.js","webpack:///node_modules/lodash/_root.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/CellRenderer.js","webpack:///node_modules/core-js/internals/has.js","webpack:///node_modules/core-js/internals/fails.js","webpack:///node_modules/core-js/internals/create-non-enumerable-property.js","webpack:///node_modules/core-js/internals/an-object.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/CellEditor.js","webpack:///node_modules/lodash/_getNative.js","webpack:///node_modules/core-js/internals/well-known-symbol.js","webpack:///node_modules/lodash/isObjectLike.js","webpack:///../src/js/config/index.js","webpack:///node_modules/core-js/internals/descriptors.js","webpack:///node_modules/core-js/internals/object-define-property.js","webpack:///node_modules/core-js/internals/is-object.js","webpack:///node_modules/faux-hypergrid/src/lib/error.js","webpack:///node_modules/faux-hypergrid/images/index.js","webpack:///node_modules/lodash/isObject.js","webpack:///node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///node_modules/webpack/buildin/global.js","webpack:///node_modules/core-js/internals/to-indexed-object.js","webpack:///node_modules/core-js/internals/require-object-coercible.js","webpack:///node_modules/core-js/internals/to-integer.js","webpack:///node_modules/overrider/index.js","webpack:///node_modules/object-iterators/index.js","webpack:///node_modules/synonomous/index.js","webpack:///node_modules/faux-hypergrid/src/lib/Registry.js","webpack:///node_modules/datasaur-base/index.js","webpack:///node_modules/lodash/_ListCache.js","webpack:///node_modules/lodash/_assocIndexOf.js","webpack:///node_modules/lodash/_baseGetTag.js","webpack:///node_modules/lodash/_Symbol.js","webpack:///node_modules/lodash/_nativeCreate.js","webpack:///node_modules/lodash/_getMapData.js","webpack:///node_modules/lodash/isArray.js","webpack:///node_modules/webpack/buildin/module.js","webpack:///node_modules/lodash/_getTag.js","webpack:///node_modules/lodash/_copyObject.js","webpack:///node_modules/core-js/internals/is-pure.js","webpack:///node_modules/core-js/internals/set-global.js","webpack:///node_modules/core-js/internals/create-property-descriptor.js","webpack:///node_modules/core-js/internals/hidden-keys.js","webpack:///node_modules/core-js/internals/enum-bug-keys.js","webpack:///node_modules/core-js/internals/shared-key.js","webpack:///node_modules/core-js/internals/iterators.js","webpack:///node_modules/core-js/internals/redefine.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Textfield.js","webpack:///node_modules/extend-me/index.js","webpack:///node_modules/faux-hypergrid/src/lib/Localization.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Behavior.js","webpack:///node_modules/faux-hypergrid/src/lib/assignOrDelete.js","webpack:///node_modules/synonomous/transformers.js","webpack:///node_modules/faux-hypergrid/src/lib/dispatchGridEvent.js","webpack:///node_modules/lodash/eq.js","webpack:///node_modules/lodash/_Map.js","webpack:///node_modules/lodash/_getSymbols.js","webpack:///node_modules/lodash/keys.js","webpack:///node_modules/lodash/isBuffer.js","webpack:///node_modules/lodash/_baseUnary.js","webpack:///node_modules/lodash/_nodeUtil.js","webpack:///node_modules/lodash/_isPrototype.js","webpack:///node_modules/lodash/_cloneArrayBuffer.js","webpack:///node_modules/faux-hypergrid/src/defaults.js","webpack:///node_modules/faux-hypergrid/src/renderer/bundle-columns.js","webpack:///node_modules/datasaur-local/index.js","webpack:///node_modules/core-js/internals/regexp-exec.js","webpack:///node_modules/faux-hypergrid/src/lib/Canvas.js","webpack:///node_modules/core-js/internals/classof-raw.js","webpack:///node_modules/core-js/internals/shared.js","webpack:///node_modules/core-js/internals/shared-store.js","webpack:///node_modules/core-js/internals/ie8-dom-define.js","webpack:///node_modules/core-js/internals/document-create-element.js","webpack:///node_modules/core-js/internals/to-primitive.js","webpack:///node_modules/core-js/internals/uid.js","webpack:///node_modules/core-js/internals/native-symbol.js","webpack:///node_modules/core-js/internals/object-create.js","webpack:///node_modules/core-js/internals/object-keys-internal.js","webpack:///node_modules/core-js/internals/to-length.js","webpack:///node_modules/core-js/internals/get-built-in.js","webpack:///node_modules/core-js/internals/internal-state.js","webpack:///node_modules/core-js/internals/inspect-source.js","webpack:///node_modules/core-js/internals/export.js","webpack:///node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack:///node_modules/core-js/internals/iterators-core.js","webpack:///node_modules/core-js/internals/object-get-prototype-of.js","webpack:///node_modules/core-js/internals/to-object.js","webpack:///node_modules/core-js/internals/set-to-string-tag.js","webpack:///node_modules/faux-hypergrid/src/behaviors/rowProperties.js","webpack:///node_modules/lodash/_Stack.js","webpack:///node_modules/lodash/isFunction.js","webpack:///node_modules/lodash/_freeGlobal.js","webpack:///node_modules/lodash/_toSource.js","webpack:///node_modules/lodash/_MapCache.js","webpack:///node_modules/lodash/_equalArrays.js","webpack:///node_modules/lodash/_Uint8Array.js","webpack:///node_modules/lodash/_getAllKeys.js","webpack:///node_modules/lodash/_baseGetAllKeys.js","webpack:///node_modules/lodash/_arrayPush.js","webpack:///node_modules/lodash/stubArray.js","webpack:///node_modules/lodash/_arrayLikeKeys.js","webpack:///node_modules/lodash/isTypedArray.js","webpack:///node_modules/lodash/isLength.js","webpack:///node_modules/lodash/_overArg.js","webpack:///node_modules/lodash/isArrayLike.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/index.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/Button.js","webpack:///node_modules/lodash/_assignValue.js","webpack:///node_modules/lodash/_baseAssignValue.js","webpack:///node_modules/lodash/keysIn.js","webpack:///node_modules/lodash/_getSymbolsIn.js","webpack:///node_modules/lodash/_getPrototype.js","webpack:///node_modules/faux-hypergrid/src/lib/dynamicProperties.js","webpack:///node_modules/faux-hypergrid/src/lib/InclusiveRectangle.js","webpack:///node_modules/faux-hypergrid/src/renderer/by-columns-and-rows.js","webpack:///node_modules/faux-hypergrid/src/renderer/bundle-rows.js","webpack:///node_modules/sparse-boolean-array/index.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/columnEnum.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/modules.js","webpack:///node_modules/finbars/src/index.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/themes.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/webpack/universalModuleDefinition","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/webpack/bootstrap","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid/src/lib/Canvas\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"@finos/perspective-viewer/dist/esm/custom_styles\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid/src/cellEditors/Textfield\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"core-js/modules/web.dom-collections.iterator\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/psp-to-hypergrid.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid/src/behaviors/Behavior\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"lodash/isEqual\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid/src/cellRenderers\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"@finos/perspective-viewer/dist/esm/utils.js\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"lodash/cloneDeep\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"@finos/perspective/dist/esm/config\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"faux-hypergrid/src/Base\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"fin-hypergrid-grouped-header-plugin\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"rectangular\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"superscript-number\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"@finos/perspective/dist/esm/config/index.js\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/dist/html/hypergrid.html","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/dist/less/hypergrid.less","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/formatters.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"datasaur-local\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/node_modules/css-loader/lib/css-base.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/packages/perspective-viewer-hypergrid/external \"core-js/modules/es.string.replace\"","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/perspective-plugin.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/PerspectiveDataModel.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/styles.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/editors.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/hypergrid-tree-cell-renderer.js","webpack:///packages/perspective-viewer-hypergrid/webpack:/src/js/hypergrid.js","webpack:///node_modules/faux-hypergrid/src/lib/graphics.js","webpack:///src/js/custom_styles.js","webpack:///node_modules/core-js/internals/dom-iterables.js","webpack:///node_modules/core-js/modules/es.array.iterator.js","webpack:///node_modules/core-js/internals/indexed-object.js","webpack:///node_modules/core-js/internals/add-to-unscopables.js","webpack:///node_modules/core-js/internals/use-symbol-as-uid.js","webpack:///node_modules/core-js/internals/object-define-properties.js","webpack:///node_modules/core-js/internals/object-keys.js","webpack:///node_modules/core-js/internals/array-includes.js","webpack:///node_modules/core-js/internals/to-absolute-index.js","webpack:///node_modules/core-js/internals/html.js","webpack:///node_modules/core-js/internals/path.js","webpack:///node_modules/core-js/internals/native-weak-map.js","webpack:///node_modules/core-js/internals/define-iterator.js","webpack:///node_modules/core-js/internals/object-property-is-enumerable.js","webpack:///node_modules/core-js/internals/copy-constructor-properties.js","webpack:///node_modules/core-js/internals/own-keys.js","webpack:///node_modules/core-js/internals/object-get-own-property-names.js","webpack:///node_modules/core-js/internals/object-get-own-property-symbols.js","webpack:///node_modules/core-js/internals/is-forced.js","webpack:///node_modules/core-js/internals/create-iterator-constructor.js","webpack:///node_modules/core-js/internals/correct-prototype-getter.js","webpack:///node_modules/core-js/internals/object-set-prototype-of.js","webpack:///node_modules/core-js/internals/a-possible-prototype.js","webpack:///../src/js/config/settings.js","webpack:///packages/perspective/dist/esm/config/__node.js","webpack:///node_modules/faux-hypergrid/src/lib/deprecated.js","webpack:///node_modules/faux-hypergrid/src/lib/DOM/effects.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Column.js","webpack:///node_modules/faux-hypergrid/src/lib/toFunction.js","webpack:///node_modules/svg-themer/index.js","webpack:///node_modules/faux-hypergrid/images/images.js","webpack:///node_modules/faux-hypergrid/src/behaviors/cellProperties.js","webpack:///node_modules/faux-hypergrid/src/behaviors/columnProperties.js","webpack:///node_modules/faux-hypergrid/src/lib/cellEventFactory.js","webpack:///node_modules/faux-hypergrid/src/lib/fields.js","webpack:///node_modules/faux-hypergrid/src/features/index.js","webpack:///node_modules/faux-hypergrid/src/features/CellClick.js","webpack:///node_modules/faux-hypergrid/src/features/CellEditing.js","webpack:///node_modules/faux-hypergrid/src/features/CellSelection.js","webpack:///node_modules/faux-hypergrid/src/features/ColumnMoving.js","webpack:///node_modules/faux-hypergrid/src/features/ColumnResizing.js","webpack:///node_modules/faux-hypergrid/src/features/ColumnSelection.js","webpack:///node_modules/faux-hypergrid/src/features/ColumnSorting.js","webpack:///node_modules/faux-hypergrid/src/features/Filters.js","webpack:///node_modules/faux-hypergrid/src/features/KeyPaging.js","webpack:///node_modules/faux-hypergrid/src/features/OnHover.js","webpack:///node_modules/faux-hypergrid/src/features/RowSelection.js","webpack:///node_modules/faux-hypergrid/src/features/ThumbwheelScrolling.js","webpack:///node_modules/faux-hypergrid/src/features/TouchScrolling.js","webpack:///node_modules/faux-hypergrid/src/behaviors/gridCellProperties.js","webpack:///node_modules/faux-hypergrid/src/behaviors/dataModel.js","webpack:///node_modules/faux-hypergrid/src/behaviors/subgrids.js","webpack:///node_modules/faux-hypergrid/src/dataModels/index.js","webpack:///node_modules/faux-hypergrid/src/dataModels/HeaderSubgrid.js","webpack:///node_modules/lodash/isEqual.js","webpack:///node_modules/lodash/_baseIsEqual.js","webpack:///node_modules/lodash/_baseIsEqualDeep.js","webpack:///node_modules/lodash/_listCacheClear.js","webpack:///node_modules/lodash/_listCacheDelete.js","webpack:///node_modules/lodash/_listCacheGet.js","webpack:///node_modules/lodash/_listCacheHas.js","webpack:///node_modules/lodash/_listCacheSet.js","webpack:///node_modules/lodash/_stackClear.js","webpack:///node_modules/lodash/_stackDelete.js","webpack:///node_modules/lodash/_stackGet.js","webpack:///node_modules/lodash/_stackHas.js","webpack:///node_modules/lodash/_stackSet.js","webpack:///node_modules/lodash/_baseIsNative.js","webpack:///node_modules/lodash/_getRawTag.js","webpack:///node_modules/lodash/_objectToString.js","webpack:///node_modules/lodash/_isMasked.js","webpack:///node_modules/lodash/_coreJsData.js","webpack:///node_modules/lodash/_getValue.js","webpack:///node_modules/lodash/_mapCacheClear.js","webpack:///node_modules/lodash/_Hash.js","webpack:///node_modules/lodash/_hashClear.js","webpack:///node_modules/lodash/_hashDelete.js","webpack:///node_modules/lodash/_hashGet.js","webpack:///node_modules/lodash/_hashHas.js","webpack:///node_modules/lodash/_hashSet.js","webpack:///node_modules/lodash/_mapCacheDelete.js","webpack:///node_modules/lodash/_isKeyable.js","webpack:///node_modules/lodash/_mapCacheGet.js","webpack:///node_modules/lodash/_mapCacheHas.js","webpack:///node_modules/lodash/_mapCacheSet.js","webpack:///node_modules/lodash/_SetCache.js","webpack:///node_modules/lodash/_setCacheAdd.js","webpack:///node_modules/lodash/_setCacheHas.js","webpack:///node_modules/lodash/_arraySome.js","webpack:///node_modules/lodash/_cacheHas.js","webpack:///node_modules/lodash/_equalByTag.js","webpack:///node_modules/lodash/_mapToArray.js","webpack:///node_modules/lodash/_setToArray.js","webpack:///node_modules/lodash/_equalObjects.js","webpack:///node_modules/lodash/_arrayFilter.js","webpack:///node_modules/lodash/_baseTimes.js","webpack:///node_modules/lodash/isArguments.js","webpack:///node_modules/lodash/_baseIsArguments.js","webpack:///node_modules/lodash/stubFalse.js","webpack:///node_modules/lodash/_isIndex.js","webpack:///node_modules/lodash/_baseIsTypedArray.js","webpack:///node_modules/lodash/_baseKeys.js","webpack:///node_modules/lodash/_nativeKeys.js","webpack:///node_modules/lodash/_DataView.js","webpack:///node_modules/lodash/_Promise.js","webpack:///node_modules/lodash/_Set.js","webpack:///node_modules/lodash/_WeakMap.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/SimpleCell.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/SliderCell.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/SparkBar.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/LastSelection.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/SparkLine.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/ErrorCell.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/Tag.js","webpack:///node_modules/faux-hypergrid/src/cellRenderers/TreeCell.js","webpack:///src/js/utils.js","webpack:///node_modules/lodash/cloneDeep.js","webpack:///node_modules/lodash/_baseClone.js","webpack:///node_modules/lodash/_arrayEach.js","webpack:///node_modules/lodash/_defineProperty.js","webpack:///node_modules/lodash/_baseAssign.js","webpack:///node_modules/lodash/_baseAssignIn.js","webpack:///node_modules/lodash/_baseKeysIn.js","webpack:///node_modules/lodash/_nativeKeysIn.js","webpack:///node_modules/lodash/_cloneBuffer.js","webpack:///node_modules/lodash/_copyArray.js","webpack:///node_modules/lodash/_copySymbols.js","webpack:///node_modules/lodash/_copySymbolsIn.js","webpack:///node_modules/lodash/_getAllKeysIn.js","webpack:///node_modules/lodash/_initCloneArray.js","webpack:///node_modules/lodash/_initCloneByTag.js","webpack:///node_modules/lodash/_cloneDataView.js","webpack:///node_modules/lodash/_cloneRegExp.js","webpack:///node_modules/lodash/_cloneSymbol.js","webpack:///node_modules/lodash/_cloneTypedArray.js","webpack:///node_modules/lodash/_initCloneObject.js","webpack:///node_modules/lodash/_baseCreate.js","webpack:///node_modules/lodash/isMap.js","webpack:///node_modules/lodash/_baseIsMap.js","webpack:///node_modules/lodash/isSet.js","webpack:///node_modules/lodash/_baseIsSet.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/index.js","webpack:///node_modules/faux-hypergrid/src/lib/polyfills.js","webpack:///node_modules/inject-stylesheet-template/index.js","webpack:///node_modules/automat/index.js","webpack:///node_modules/faux-hypergrid/css/index.js","webpack:///node_modules/faux-hypergrid/src/renderer/index.js","webpack:///node_modules/faux-hypergrid/src/renderer/layer-props.js","webpack:///node_modules/faux-hypergrid/src/renderer/by-cells.js","webpack:///node_modules/faux-hypergrid/src/renderer/by-columns.js","webpack:///node_modules/faux-hypergrid/src/renderer/by-columns-discrete.js","webpack:///node_modules/faux-hypergrid/src/renderer/by-rows.js","webpack:///node_modules/faux-hypergrid/src/lib/SelectionModel.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/index.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/decorators.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/hooks.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/fallbacks.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/polyfills.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/dispatchDataModelEvent.js","webpack:///node_modules/faux-hypergrid/src/behaviors/Local/events.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/index.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Color.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Date.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Number.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Slider.js","webpack:///node_modules/faux-hypergrid/src/cellEditors/Spinner.js","webpack:///node_modules/css-injector/index.js","webpack:///node_modules/mustache/mustache.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/events.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/selection.js","webpack:///node_modules/faux-hypergrid/src/lib/SelectionRectangle.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/stash-selections.js","webpack:///node_modules/faux-hypergrid/src/Hypergrid/scrolling.js","webpack:///node_modules/fin-hypergrid-grouped-header-plugin/index.js","webpack:///node_modules/superscript-number/ssnum.js","webpack:///node_modules/core-js/modules/es.string.replace.js","webpack:///node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack:///node_modules/core-js/modules/es.regexp.exec.js","webpack:///node_modules/core-js/internals/regexp-flags.js","webpack:///node_modules/core-js/internals/regexp-sticky-helpers.js","webpack:///node_modules/core-js/internals/advance-string-index.js","webpack:///node_modules/core-js/internals/string-multibyte.js","webpack:///node_modules/core-js/internals/regexp-exec-abstract.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Feature","extend","next","detached","cursor","currentHoverCell","setNext","nextFeature","this","detachChain","attachChain","handleMouseMove","grid","event","handleMouseExit","handleMouseEnter","handleMouseDown","handleMouseUp","handleKeyDown","handleKeyUp","handleWheelMoved","handleDoubleClick","handleClick","handleMouseDrag","handleContextMenu","handleTouchStart","handleTouchMove","handleTouchEnd","moveSingleSelect","x","y","isFirstFixedRow","gridCell","isFirstFixedColumn","setCursor","beCursor","initializeOn","it","Math","check","globalThis","self","global","Function","addReadOnlyProperty","writable","configurable","Point","Number","Rectangle","width","height","plus","offset","plusXY","offsetX","offsetY","minus","min","point","max","distance","deltaX","deltaY","sqrt","equals","result","greaterThan","lessThan","greaterThanOrEqualTo","lessThanOrEqualTo","within","rect","minX","origin","maxX","extent","minY","maxY","EQ","GT","LT","GE","LE","corner","flattenXAt","flattenYAt","contains","pointOrRect","growBy","padding","shrinkBy","union","forEach","iteratee","context","x2","y2","intersect","ifNoneAction","intersects","Base","version","versionAtLeast","neededVersion","neededParts","split","map","delta","part","deprecated","HypergridError","notify","message","onerror","console","warn","alert","unwrap","mixIn","createApply","Constructor","variableArgArray","discreteArgs","discreteArgArray","Array","slice","arguments","args","concat","BoundConstructor","apply","freeGlobal","freeSelf","CellRenderer","paint","gc","config","roundRect","radius","fill","stroke","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","exec","error","DESCRIPTORS","definePropertyModule","createPropertyDescriptor","f","isObject","TypeError","String","effects","Localization","CellEditor","initialize","options","cellEditor","locale","localization","localizer","format","string","initialValue","container","document","createElement","innerHTML","templater","render","template","el","firstChild","input","errors","addEventListener","keyup","e","keyCode","preventDefault","fireSyntheticEditorKeyDownEvent","fireSyntheticEditorKeyPressEvent","onmousedown","stopPropagation","null","specialKeyups","specialKeyup","stopped","cellProps","properties","feedbackCount","keyChar","canvas","getKeyChar","repaint","mappedNavKey","ctrlKey","stopEditing","finEvent","newEvent","alt","altKey","ctrl","char","legacyChar","legacyKey","code","charCode","meta","metaKey","shift","shiftKey","identifier","editor","delegateKeyDown","fireSyntheticEditorKeyUpEvent","checkEditorPositionFlag","gridRenderedNotification","checkEditor","scrollValueChangedNotification","moveEditor","setBounds","bounds","beginEditing","fireRequestCellEdit","setEditorValue","showEditor","style","display","hideEditor","feedback","str","validateEditorValue","getEditorValue","err","fireSyntheticEditorDataChangeEvent","saveEditorValue","errorEffectBegin","cancelEditing","remove","takeFocus","effecting","spec","feedbackEffect","effect","assign","callback","errorEffectEnd","msg","expectation","test","replace","setTimeout","save","fireBeforeCellEdit","fireAfterCellEdit","parse","invalid","leftWas","left","topWas","top","scrollX","scrollY","focus","scrollTo","selectAll","cellBounds","px","isCellVisible","attachEditor","div","appendChild","baseIsNative","getValue","undefined","shared","has","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","DEFAULT_CONFIG","require","default","get_config_file","item","isArray","mergeDeep","target","sources","length","source","get_types","keys","get_config","types","get_type_config","type","props","__PERSPECTIVE_CONFIG__","override_config","fails","IE8_DOM_DEFINE","anObject","toPrimitive","nativeDefineProperty","O","P","Attributes","Error","_","svgThemer","images","each","image","element","Image","src","data","checked","unchecked","defineProperties","add","img","themeable","setSvgProps","styles","themeableRules","styleEl","querySelector","id","head","sheet","reduce","rules","styleName","selectorText","ruleIndex","findIndex","cssRules","rule","deleteRule","ruleStyles","ruleText","join","insertRule","themeableRule","push","createThemeableRules","setTheme","theme","setImgSvgProps","regex","RegExp","cssImagePropertyNames","setRuleSvgProps","checkbox","state","filter","DOMIterables","ArrayIteratorMethods","createNonEnumerableProperty","wellKnownSymbol","ITERATOR","TO_STRING_TAG","ArrayValues","values","COLLECTION_NAME","Collection","CollectionPrototype","METHOD_NAME","g","IndexedObject","requireObjectCoercible","ceil","floor","argument","isNaN","overrider","descriptor","getOwnPropertyDescriptor","mixInTo","Wrapper","originalValue","chain","wrapped","chaining","find","predicate","memo","idx","extendOwn","val","list","thisArg","transformers","REGEXP_INTEGER","optionNames","Synonomous","drilldown","collection","breadcrumbs","crumb","newBreadcrumbs","crumbs","toString","crumbsToString","injectTransformedValueIntoItem","transformation","transformer","path","transformations","pathList","propName","splice","drillDownContext","force","constructor","_propPath","_dictPath","getSynonyms","synonyms","ReferenceError","synonym","decorate","obj","propNames","drilldownContext","dictPath","decoratingObjectItself","decorateList","index","propPath","elements","decorateObject","decorateArray","Registry","items","getClassName","friendlyName","toLowerCase","addSynonym","synonymName","existingName","make","last","BaseClass","lowerName","foundName","trim","endings","ending","plural","singular","singularOf","indefArtOf","DatasaurBase","isNullObject","drillDownCharMap","true","false","DataError","handlers","install","getPrototypeOf","api","dataModel","whitelist","blacklist","blacklistAlways","indexOf","getFilteredKeys","injectable","inject","link","findMethod","dispatchEvent","nameOrEvent","handler","addListener","removeListener","removeAllListeners","dump","getRowCount","schema","getSchema","fields","cs","getHeaders","cCount","getColumnCount","viewMakesSense","row","fixIndentForTableDisplay","table","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","set","eq","array","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","nativeCreate","getNative","isKeyable","__data__","webpackPolyfill","deprecate","paths","children","DataView","Map","Promise","Set","WeakMap","baseGetTag","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","Ctor","ctorString","assignValue","baseAssignValue","customizer","isNew","newValue","bitmap","setGlobal","inspectSource","InternalStateModule","getInternalState","enforceInternalState","enforce","TEMPLATE","unsafe","simple","noTargetGet","Textfield","textAlign","halign","font","setSelectionRange","extendedClassName","prototypeAdditions","preInitialize","initializePrototypeChain","postInitialize","parent","parentConstructor","$$CLASS_NAME","postExtend","term","recur","proto","ancestorConstructorName","superMember","memberName","super","superMethod","methodName","method","callSuperMethod","Formatter","defaultLocale","Intl","NumberFormat","useGrouping","dp","substr","DateTimeFormat","date","Date","getMonth","getDate","getFullYear","NumberFormatter","mapper","demapper","demap","acceptStandardDigits","invalids","number","formattedLocalizedNumber","DateFormatter","localizeNumber","localizedDigits","digitFormatter","formatDigit","digitParser","parseDigit","YY","transformNumber","MM","DD","testDate","mm","localizedDate","localizeDate","missingDigits","localizedNumberPattern","parts","match","partsMap","yy","dd","digitTransformer","numberOptions","dateOptions","int","float","construct","localizerName","factoryOptions","constructorName","toUpperCase","chromeDate","Column","cellEventFactory","featureRegistry","ArrayDecorator","assignOrDelete","dispatchGridEvent","noExportProperties","Behavior","initializeFeatureChain","behavior","reset","constructors","featureChain","featureMap","features","getFeatureConstructor","warnBehaviorFeaturesDeprecation","FeatureConstructor","feature","dataModelChanged","resetDataModel","CellEvent","scrollPositionX","scrollPositionY","rowPropertiesPrototype","rowPropertiesPrototypeDescriptors","clearColumns","createColumns","subgrids","setData","setHeaders","headers","allColumns","header","column","dataRows","reindex","allowEvents","renderer","visibleColumns","visibleRows","showRowNumbers","rowColumnIndex","hasTreeColumn","treeColumnIndex","tc","rc","columnsCreated","treeColumnNameDefault","treeColumnHeaderDefault","rowColumnNameDefault","columns","decorateColumnArray","newColumn","propClassLayers","propClassLayersMap","NO_ROWS","resetRowHeaderColumnWidth","getActiveColumn","getActiveColumnIndex","columnOrIndexOrName","getColumn","addColumn","arrayDecorator","realImplementation","normalizeSchema","decorateSchema","decorateColumnSchema","headerify","createDataRowProxy","changed","getColumnWidth","getWidth","setColumnWidth","columnOrIndex","setWidth","stateChanged","clearObjectProperties","exportProps","getState","copy","JSON","stringify","columnProperties","clearState","setState","addState","settingState","gridProps","setAllColumnProperties","columnsHash","addAllColumnProperties","getColumns","addProperties","setColumnOrder","columnIndexes","setColumnOrderByName","columnNames","setColumnIndexes","silent","fireSyntheticOnColumnsChangedEvent","showColumns","isActiveColumnIndexes","referenceIndex","allowDuplicateColumns","activeColumns","sourceColumnList","newColumns","hideColumns","resolveProperty","lookupFeature","getFixedColumnsWidth","columnWidth","count","getFixedColumnCount","total","leftMostColIndex","contentBox","boxSizing","gridLinesVWidth","fixedLinesVWidth","fixedLinesHWidth","getFixedColumnsMaxWidth","updateCursor","onMouseMove","onClick","onContextMenu","onWheelMoved","onMouseUp","onMouseDrag","onKeyDown","onKeyUp","onDoubleClick","onTouchStart","onTouchMove","onTouchEnd","behaviorChanged","shapeChanged","behaviorShapeChanged","behaviorStateChanged","isColumnReorderable","getColumnProperties","setColumnProperties","clearAllCellProperties","X","getHiddenColumnDescriptors","indexes","labels","columnCount","getActiveColumnCount","field","fixedColumnCount","setFixedColumnCount","getFixedRowCount","getHeaderRowCount","fixedRowCount","setFixedRowCount","endDragColumnNotification","getCursorAt","setScrollPositionX","getScrollPositionX","setScrollPositionY","getScrollPositionY","getCellEditorAt","isDataColumn","highlightCellOnHover","isColumnHovered","isRowHovered","cell","swapColumns","tmp","convertViewPointToDataPoint","unscrolled","columnIndex","getSelectionMatrixFunction","selectedRows","getRowHeaderColumn","getTreeColumn","autosizeAllColumns","checkColumnAutosizing","autoSized","autoSizeRowNumberColumn","autoSizeTreeColumn","findWithNeg","rowNumberAutosizing","showTreeColumn","treeColumnAutosizing","getActiveColumns","getHiddenColumns","visible","all","hidden","sort","a","b","getSelectedRows","selectionModel","getSelectedColumns","getSelections","getIndexedData","featureNames","unregisteredFeatures","className","featureName","params","sampleCode","prefix","suffix","applyAnalytics","mixin","dest","REGEX_CAMEL_CASE_OR_UNDERSCORE","REGEX_ALL_PUNC_RUN","REGEX_ALL_PUNC_RUN_BEFORE_LETTER","WITH_UPPER_CASE","REGEX_INITIAL_DIGIT","REGEX_INITIAL_CAPITAL","WITH_LOWER_CASE","REGEXP_LOWER_CASE_LETTER","REGEXP_WORD_SEPARATORS","WITH_CAPTIAL_LETTER","REGEXP_CAPITAL_LETTERS","REGEXP_OVER_CAPITALIZED_WORDS","verbatim","toCamelCase","toAllCaps","toTitle","details","eventName","cancelable","primitiveEvent","detail","CustomEvent","time","now","dataRow","other","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","arrayLikeKeys","baseKeys","isArrayLike","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","func","freeProcess","process","nodeUtil","binding","objectProto","Uint8Array","arrayBuffer","byteLength","propClassEnum","COLUMNS","STRIPES","ROWS","CELLS","DEFAULT","defaults","themeName","noDataMessage","wheelHFactor","wheelVFactor","color","backgroundColor","foregroundSelectionFont","foregroundSelectionColor","backgroundSelectionColor","columnHeaderFont","columnHeaderColor","columnHeaderForegroundSelectionFont","columnHeaderBackgroundColor","columnHeaderForegroundSelectionColor","columnHeaderBackgroundSelectionColor","columnHeaderHalign","columnHeaderRenderer","columnHeaderFormat","rowHeaderFont","rowHeaderColor","rowHeaderBackgroundColor","rowHeaderForegroundSelectionColor","rowHeaderForegroundSelectionFont","rowHeaderBackgroundSelectionColor","backgroundColor2","treeHeaderFont","treeHeaderColor","treeHeaderBackgroundColor","treeHeaderForegroundSelectionColor","treeHeaderForegroundSelectionFont","treeHeaderBackgroundSelectionColor","filterFont","filterColor","filterBackgroundColor","filterForegroundSelectionColor","filterBackgroundSelectionColor","filterHalign","filterRenderer","filterEditor","filterable","showFilterRow","voffset","scrollbarHoverOver","scrollbarHoverOff","scrollingEnabled","vScrollbarClassPrefix","hScrollbarClassPrefix","cellPadding","iconPadding","leftIcon","centerIcon","rightIcon","renderFalsy","gridLinesH","gridLinesHWidth","gridLinesHColor","gridLinesV","gridLinesVColor","gridLinesColumnHeader","gridLinesRowHeader","gridLinesUserDataArea","gridBorder","gridBorderLeft","gridBorderRight","gridBorderTop","gridBorderBottom","fixedLinesHEdge","fixedLinesHColor","fixedLinesVEdge","fixedLinesVColor","defaultRowHeight","defaultColumnWidth","minimumColumnWidth","maximumColumnWidth","resizeColumnInPlace","repaintIntervalRate","repaintImmediately","useBitBlit","useHiDPI","navKeyMap","RETURN","RETURNSHIFT","TAB","TABSHIFT","readOnly","rowHeaderNumbers","rowHeaderCheckboxes","treeRenderer","showHeaderRow","cellSelection","columnSelection","rowSelection","singleRowSelectionMode","selectionRegionOverlayColor","selectionRegionOutlineColor","columnAutosizing","columnAutosizingMax","treeColumnAutosizingMax","headerTextWrapping","rowResize","editable","editOnDoubleClick","editOnKeydown","editOnNextCell","unsortable","sortOnDoubleClick","maxSortColumns","sortOnHiddenColumns","checkboxOnlyRowSelections","autoSelectRows","autoSelectColumns","collapseCellSelections","gridRenderer","hoverCellHighlight","enabled","hoverRowHighlight","hoverColumnHighlight","linkTarget","linkOnHover","linkColor","linkVisitedColor","linkColorOnHover","strikeThrough","multipleSelections","enableContinuousRepaint","columnsReorderable","columnGrabMargin","columnClip","rowStripes","restoreRowSelections","restoreColumnSelections","truncateTextWithEllipsis","warned","rowPropertiesDeprecationWarning","rowProperties","columnOnlyError","delete","var","navKey","reapplyCellProperties","vf","calculator","subrow","resetCellEvents","vr","pool","R","cellEventPool","forEachWithNeg","vc","bundle","columnBundles","gridPrefillColor","right","DatasaurLocal","datasaur","setSchema","newSchema","getFirstRow","getRow","setRow","getRowMetadata","__META","setRowMetadata","metadata","addRow","delRow","rowCount","rows","setValue","re1","re2","regexpFlags","stickyHelpers","nativeExec","nativeReplace","patchedExec","UPDATES_LAST_INDEX_WRONG","lastIndex","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","reCopy","re","sticky","flags","charsAdded","strCopy","multiline","bubbles","evt","createEvent","initCustomEvent","Event","paintRequest","resizeInterval","rectangular","RESIZE_POLLING_INTERVAL","paintables","resizables","charMap","empty","makeCharMap","Canvas","component","contextAttributes","dragEndtime","infoDiv","getCachedContext","bc","buffer","outline","mouseLocation","dragstart","hasMouse","isDragging","finmousemove","finmouseup","finkeydown","finkeyup","onmouseover","finfocusgained","finfocuslost","finmousedown","finmouseout","finclick","findblclick","fincontextmenu","fintouchstart","fintouchmove","fintouchend","setAttribute","resize","beginResizing","beginPainting","paintLoopFunction","paintable","tickPainter","tickNotification","requestAnimationFrame","restartPaintLoop","resizablesLoopFunction","tickResizer","restartResizeLoop","setInterval","updateCurrentKeys","keydown","fixCurrentKeys","currentKeys","pair","defKeysProp","ennumerable","SHIFT","canvasElement","getContext","makeStub","cache","restore","conditionalsStack","getOwnPropertyNames","graphicsContextAliases","alias","focuser","ctx","dirty","size","mousedown","dragging","repeatKeyCount","repeatKey","repeatKeyStartTime","dragEndTime","lastRepaintTime","currentPaintCount","currentFPS","lastFPSComputeTime","removeEventListener","stopPaintLoop","cancelAnimationFrame","stopResizeLoop","clearInterval","stopPainting","stopResizing","getCurrentFPS","tickPaint","isContinuousRepaint","fps","interval","paintNow","requestRepaint","checksize","start","stop","getDivBoundingClientRect","getBoundingClientRect","bottom","sizeNow","box","ratio","isHIDPI","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","scale","resizeNotification","dispatchNewEvent","getBounds","flushBuffer","drawImage","dispatchNewMouseKeysEvent","mouse","dispatchNewTouchEvent","touches","changedTouches","touch","getLocal","beDragging","isRightClick","mouseDownLocation","beNotDragging","finwheelmoved","hasFocus","getCharMap","repeat","repeatCount","repeatStartTime","paintLoopRunning","getMouseLocation","getOrigin","clientX","clientY","activeElement","disableDocumentElementSelection","enableDocumentElementSelection","body","cssText","setFocusable","truthy","isRightMB","which","button","setInfo","innerText","simpleText","IS_PURE","store","copyright","EXISTS","PREFERRED_STRING","fn","valueOf","postfix","random","activeXDocument","enumBugKeys","hiddenKeys","html","documentCreateElement","sharedKey","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObject","domain","ActiveXObject","iframeDocument","iframe","write","close","temp","parentWindow","NullProtoObjectViaActiveX","contentWindow","open","F","Properties","toIndexedObject","names","toInteger","aFunction","variable","namespace","NATIVE_WEAK_MAP","objectHas","wmget","wmhas","wmset","STATE","getterFor","TYPE","functionToString","redefine","copyConstructorProperties","isForced","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","forced","sham","propertyIsEnumerableModule","nativeGetOwnPropertyDescriptor","IteratorPrototype","PrototypeOfArrayIteratorPrototype","arrayIterator","BUGGY_SAFARI_ITERATORS","toObject","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","TAG","getFixedRowsHeight","subgrid","isData","getRowHeight","getRowProperties","yOrCellEvent","dataCell","__ROW","setRowProperties","addRowProperties","setRowProperty","rowProps","isHeight","hasHeight","setRowHeight","_height","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","asyncTag","funcTag","genTag","proxyTag","tag","funcToString","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","bitmask","equalFunc","stack","isPartial","arrLength","othLength","stacked","seen","arrValue","othValue","compared","othIndex","baseGetAllKeys","arrayPush","keysFunc","symbolsFunc","baseTimes","isArguments","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","baseIsTypedArray","baseUnary","nodeIsTypedArray","MAX_SAFE_INTEGER","transform","arg","isFunction","isLength","warnedBaseClass","CellRenderers","cellRenderer","emptycell","Button","arcGradient","createLinearGradient","mouseDown","addColorStop","fillStyle","fillRect","strokeStyle","ox","getTextWidth","oy","getTextHeight","descent","textBaseline","fillText","objValue","baseKeysIn","getPrototype","getSymbolsIn","overArg","warnedDoubleClickDelay","dynamicPropertyDescriptors","getTheme","applyTheme","sbHScroller","deltaXFactor","factor","sbVScroller","deltaYFactor","rendererName","setGridRenderer","rowIndex","definedProp","rowsHash","setRowPropertiesBySubgridAndRowIndex","setColumnPropertiesByColumnIndexOrName","cells","copyCellOwnProperties","getCellOwnProperties","cellsHash","setCellPropertiesByColumnNameAndRowIndex","doubleClickDelay","delay","lineColor","lineWidth","getGridBorderDescriptor","subgridName","lookup","subgridHash","columnProps","columnName","edge","border","resetGridBorder","InclusiveRectangle","bundleColumns","bundleRows","paintCellsByColumnsAndRows","prefillColor","rowPrefillColors","cellEvent","rowBundle","rowBundles","columnBundle","preferredWidth","C","cLast","viewWidth","viewHeight","clearRect","alpha","resetAllGridRenderers","rebundle","clearFill","visibleColumn","clipSave","_paintCell","renderErrorCell","visibleRow","clipRestore","round","paintGridlines","stripe","RangeSelectionModel","selection","states","storeState","sels","makeRun","overlaps","run1","run2","select","run","splicer","merge","deselect","pieces","minuend","subtrahend","m0","m1","s0","s1","subtract","clearMostRecentSelection","pop","isSelected","some","isEmpty","warnColumnEnumDeprecation","columnEnumSynchronize","_columnEnumKey","columnEnum","_columnEnum","dict","mixInShared","Scrollbar","finbars","synonomous","cssInjector","BAR_STYLE","THUMB_STYLE","FinBar","bound","_bound","handlersToBeBound","thumb","classList","onclick","shortStop","onmouseout","nav","ua","platform","browser","bar","paging","orientation","_min","_index","_max","normal","navigator","userAgent","documentMode","normals","option","validRange","contentSize","charAt","cssFinBars","cssStylesheetReferenceElement","range","_orientation","oh","orientationHashes","deltaProp","onchange","_classPrefix","increment","deltaZFactor","barStyles","objn","_auxStyles","barRect","containerRect","parentElement","oriented","axis","margins","marginLeading","marginTrailing","parseInt","_setScroll","scaled","testPanelItem","Element","_thumbMax","leading","scrollRealContent","sizeProp","maxScroll","scroll","parentNode","containerSize","_addTestPanelItem","_setThumbSize","onwheel","shortenBy","otherFinBar","shortenEndBy","foreshortenBy","whichEnd","otherStyle","getComputedStyle","ooh","thickness","thumbComp","thumbMarginLeading","thumbMargins","barSize","thumbSize","visibility","_thumbMarginLeading","_removeEvt","transitionend","testPanelElement","testPanelItemPartNames","partName","getElementsByClassName","_addEvt","evtName","spy","thumbBox","goingUp","coordinate","waitForIt","onmouseup","pinOffset","documentElement","onmousemove","buttons","MouseEvent","mac","webkit","moz","win","ms","vertical","outside","inside","trailing","horizontal","stylesWithHalign","stylers","dynamicCosmetics","defaultTheme","styler","prop","registry","themeLayer","grids","themeObject","_theme","getOwnPropertyDescriptors","initThemeLayer","sharedMixin","registerTheme","registerThemes","themeCollection","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__13__","__WEBPACK_EXTERNAL_MODULE__14__","__WEBPACK_EXTERNAL_MODULE__15__","__WEBPACK_EXTERNAL_MODULE__16__","__WEBPACK_EXTERNAL_MODULE__20__","__WEBPACK_EXTERNAL_MODULE__22__","TREE_COLUMN_INDEX","page2hypergrid","row_pivots","data_columns","firstcol","is_tree","flat_columns","data_indices","ridx","cidx","rollup","rowPath","isLeaf","__ID__","__INDEX__","psp2hypergrid","tschema","columnPaths","isTree","configuration","rowPivots","columnTypes","col","null_formatter","formatter","null_value","old","custom_formatter","set_formatters","formatters","format_function","integer","datetime","eval","formatColumnHeader","useSourceMap","sourceMap","cssMapping","btoa","sourceMapping","unescape","encodeURIComponent","sourceURLs","sourceRoot","mediaQuery","alreadyImportedModules","Borders","cellRenderersRegistry","w","h","translate","borderTop","borderRight","borderBottom","borderLeft","setPSP","payload","new_schema","columnPath","col_name","aliases","columnAliases","_config","selectable","column_pivots","_viewer","hasAttribute","get_dynamic_styles","refreshColumns","_memoized_schema","isEqual","_memoized_pivots","_data_window","schema_loaded","setColumnPropsByType","treeColumn","editorActivationKeys","get_styles","getConfig","direction","superscript","sortColumn","handled","column_sorting","column_name","viewer","item_index","already_sorted","abs_sorting","shift_pressed","new_sort_direction","_increment_sort","right_click_handler","old_event","new_event","async","getCellConfig","row_idx","col_idx","start_row","end_row","_view","to_json","row_pivots_values","__ROW_PATH__","row_filters","pivot","pivot_value","column_index","column_paths","column_filters","column_pivot_values","column_names","filters","hoverCell","getHScrollValue","getVScrollValue","asc","desc","selected","composed","rp_len","gridPoint","cellClicked","selected_rows","toggleRow","renderGrid","update_bounds","clientWidth","clientHeight","renderOverrides","renderLastSelection","isConnected","grid_element","host","dx","dy","getCellProperty","isDataCell","dCell","newPoint","extendSelection","hasCTRL","mousePoint","getMouseDown","popMouseDown","clearSelections","setMouseDown","setDragExtent","handleDOWN","getAutoScrollAcceleration","getLastSelection","dataWindow","handleUP","handleLEFT","handleRIGHT","moveShiftSelect","start_time","performance","computeCellsBounds","fetchData","needsComputeCellsBounds","get_rect","nrows","dw","newRectangle","find_row","isTreeCol","_nrows","setRowCount","_isTree","setIsTree","setDirty","_grid","synchronizeScrollingBoundaries","_dirty","isShift","is_expanded","get_row_expanded","collapse","set_depth","expand","num_rows","_update_select_index","has_cell_selections","hasSelections","has_row_selections","hasRowSelections","row_data","_selected_cell_index","_selected_row_index","_update_editor","new_index","resetGridXY","_update_selection","clearRowSelection","row_index","selectRow","getSelectedRowID","setSelectedRowID","pspFetch","selection_enabled","start_col","end_col","next_page","to_columns","_columns","base","is_cache_miss","_outstanding","req","is_error","declaredEditorName","cellEditors","_row","_table","_data","_canvas","getCell","nextRow","depthDelta","isUserDataArea","cellStyle","expanded","_type","cellRenderers","clearSelectionState","gridCellConfig","type_config","columnColorNumberPositive","columnBackgroundColorNumberPositive","borderBottomPositive","borderRightPositive","columnColorNumberNegative","columnBackgroundColorNumberNegative","borderBottomNegative","borderRightNegative","PropsBuilder","title","elem","get_properties","add_fonts","add_styles","columnHeaderSeparatorColor","add_measures","groupedHeader","flatHeight","base_grid_properties","paintBackground","columnHeaderLines","groupConfig","showCheckboxes","sortColumns","light_theme_overrides","dynamic_defaults","validateEditorValueDate","setBoundsDate","setBoundsText","setEditorValueDate","day","month","setEditorValueDatetime","hour","getHours","minute","getMinutes","ss","getSeconds","setEditorValueText","updated","mouseMoveEvent","initMouseEvent","canBubble","screenX","screenY","altKye","relatedTarget","getEditorValueText","then","colname","update","getEditorValueNumber","getEditorValueDate","_is_editing","treeLineRendererPaint","minWidth","leaf","depth","lastChild","isCellHovered","fgColor","xOffset","globalAlpha","lineHeight","arc","PI","cellTextOffset","formatted_value","formatValue","metrics","getTextWidthTruncated","yOffset","bindTemplate","set_data","hg_data","_hg_data","connectedCallback","shadowRoot","Hypergrid","DataModel","PerspectiveDataModel","removeAttribute","get_style","grid_properties","cloneDeep","installPlugins","perspectivePlugin","groupedHeaderPlugin","_old_paint","GroupedHeader","text","_hgdata","HYPERGRID_INSTANCE","get_hypergrid","getOrCreateHypergrid","perspectiveHypergridElement","suppress_paint","hypergrid","divCanvas","plugin","view","task","max_rows","max_cols","cancelled","colPivots","data_window","json","all_columns","_pad_window","_plugin_config","selectMode","deselectMode","styleElement","clear_properties","terminate","registerPlugin","API","ALPHA_REGEX","cssColorSpec","matches","fontMetrics","ELLIPSIS","fontData","sum","len","measureText","abort","truncString","truncWidth","truncAt","truncating","charWidth","textContent","block","position","verticalAlign","blockRect","textRect","ascent","removeChild","conditional","clip","ShadyCSS","getComputedStyleValue","getPropertyValue","get_measure","get_font","font_size","font_family","copy_defined","candidate","calc_rec","iter","STYLE_PROPERTIES","_staged_props","_staged_fonts","_staged_measures","_initialized","unshift","get_type_deps","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","addToUnscopables","Iterators","defineIterator","setInternalState","iterated","kind","done","Arguments","classof","UNSCOPABLES","ArrayPrototype","iterator","objectKeys","internalObjectKeys","toLength","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","fromIndex","includes","getBuiltIn","$","createIteratorConstructor","setPrototypeOf","setToStringTag","IteratorsCore","returnThis","Iterable","NAME","IteratorConstructor","IS_SET","FORCED","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","nativePropertyIsEnumerable","NASHORN_BUG","1","V","ownKeys","getOwnPropertyDescriptorModule","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","replacement","detection","normalize","POLYFILL","NATIVE","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","filter_operator","aggregate","minimumFractionDigits","maximumFractionDigits","boolean","week","year","second","log","regexIsMethod","dotProps","since","notes","memberType","warning","$$DEPRECATION_WARNED","isSimpleWarning","isMethodCall","warnings","formalArgList","argList","mapToFormalArg","argName","linkIsMethodCall","actualArgList","actualArgs","shaker","duration","computedStyle","transitions","transition","shakes","propertyName","defaultGlowerStyles","glower","styleWas","undo","was","toFunction","columnSchema","icon","treeHeader","isDataRow","resolveCalculator","Infinity","columnAutosized","getCellType","typeOf","getType","computeColumnType","headerRowCount","eachType","something","_properties","createColumnProperties","setBackgroundColor","rebundleGridRenderers","editorName","getFormatter","REGEX_ARROW_FUNC","REGEX_NAMED_FUNC","REGEX_ANON_FUNC","forColumnName","calculators","PATTERN","regexDataSvg64","regexUrlDataSvg64","MATCH_INDEX_WHOLE","MATCH_INDEX_URI","MATCH_INDEX_SCHEME","MATCH_INDEX_ENCODING","MATCH_INDEX_COMMA","MATCH_INDEX_DATA","MATCH_INDEX_SVG_FILE_URL","applyThemeToSvgData","url","httpRequest","XMLHttpRequest","onreadystatechange","readyState","HTTP_STATE_DONE","status","HTTP_STATUS_OK","responseText","send","svgMarkup","applyNow","tagName","imageData","ruleProps","matchProp","urlImageData","encoding","decodeURIComponent","firstElementChild","XMLSerializer","serializeToString","atob","svgOrImgOrRule","getCellPropertiesObject","newCellPropertiesObject","rowHeader","filterProperties","getCellProperties","setCellProperties","addCellProperties","deleteCellOwnProperties","setCellProperty","deleteCellProperty","tableState","toJSON","rowHeaderDescriptors","treeHeaderDescriptors","columnHeader","columnHeaderDescriptors","filterDescriptors","isRowSelected","isHeaderRow","allRowsSelected","isFilterRow","cellEventProperties","formattedValue","_bounds","cp","_columnProperties","cellOwnProperties","_cellOwnProperties","rowOwnProperties","getRowProperty","snapshot","resetGridCY","gridC","gridY","getVisibleColumn","getVisibleRow","gridX","resetDataXY","dataX","dataY","getVisibleDataColumn","getVisibleDataRow","resetGridXDataY","useAllCells","clone","editPoint","mousePointInClickRect","clickRect","isRowVisible","isColumnVisible","isColumnSelected","isCellSelected","isRowFixed","isColumnFixed","isCellFixed","isHandleColumn","isHandleCell","isTreeColumn","isHeader","isHeaderHandle","isHeaderCell","isFilter","isFilterHandle","isFilterCell","isSummaryRow","isSummary","isSummaryHandle","isSummaryCell","isTopTotalsRow","topTotals","isTopTotalsHandle","isTopTotalsCell","isBottomTotalsRow","bottomTotals","isBottomTotalsHandle","isBottomTotalsCell","WritablePoint","writableDescriptor","enumerableDescriptor","disabled","Decorator","REGEXP_META_PREFIX","headerifierName","decorator","getFieldNames","hash","fieldName","titleize","Features","CellClick","CellEditing","CellSelection","ColumnMoving","ColumnResizing","ColumnSelection","ColumnSorting","Filters","KeyPaging","OnHover","RowSelection","ThumbwheelScrolling","TouchScrolling","isActionableLink","openLink","linkProp","windowOpen","resetCellPropertiesCache","edit","isVisibleChar","isDeleteChar","getGridCellFromLastSelection","onEditorActivate","currentDrag","lastDragCell","sbLastAuto","sbAutoStart","checkDragScroll","handleMouseDragCellSelection","editAt","previousDragExtent","getDragExtent","newX","newY","getDataBounds","isScrollingNow","setScrollingNow","scrollDrag","dragStartedInHeaderArea","isMouseDownInHeaderArea","numFixedColumns","numFixedRows","dragEndInFixedAreaX","dragEndInFixedAreaY","dragCellOffsetX","dragCellOffsetY","scrollBy","hasSHIFT","handleDOWNSHIFT","handleUPSHIFT","handleLEFTSHIFT","handleRIGHTSHIFT","elapsed","getAutoScrollDuration","setAutoScrollStartTime","pingAutoScroll","extendSelect","dragger","draggerCTX","floatColumn","floatColumnCTX","GRAB","GRABBING","setName","floaterAnimationQueue","columnDragAutoScrollingRight","columnDragAutoScrollingLeft","dragArmed","dragCol","dragOffset","isFloatingNow","initializeAnimationSupport","abs","createDragColumn","dragColumn","endDragColumn","floatColumnTo","draggedToTheRight","floatingNow","draggerStartX","floaterStartX","scrollLeft","floaterIndex","renderOverridesCache","floater","draggerIndex","hdpiratio","draggerWidth","floaterWidth","getVisibleColumnsCount","doffset","foffset","startX","doColumnMoveAnimation","doFloaterAnimation","setCrossBrowserProperty","isWebkit","columnAnimationTime","animation","createFloatColumn","colHeight","location","hdpiRatio","getHiDPI","boxShadow","zIndex","uProperty","setProp","opacity","startIndex","autoScrollingNow","dragColumnIndex","getFinalVisibleColumnBoundary","atMin","atMax","overCol","getColumnFromPixelX","doAFloat","checkAutoScrollToLeft","checkAutoScrollToRight","_checkAutoScrollToRight","draggedIndex","newIndex","_checkAutoScrollToLeft","dragStart","dragStartWidth","getMouseValue","overAreaDivider","leftMostColumnIndex","getCursorName","dragWidth","nextWidth","nextStartWidth","nextColumn","np","gridColumnIndex","autosizeColumn","lastDragColumn","doubleClickTimer","clearTimeout","doubleClickTimerCallback","isColumnDragging","getLastSelectionType","mouseX","clearMostRecentColumnSelection","selectColumn","abortEditing","toggleSelectColumn","maxViewableColumns","maxColumns","insureModelColIsVisible","fireSyntheticColumnSortEvent","moveLaterally","moveDown","originX","selectViewportCell","commands","PAGEDOWN","pageDown","PAGEUP","pageUp","PAGELEFT","pageLeft","PAGERIGHT","pageRight","setHoverCell","moveCellSelection","fireSyntheticRowSelectionChangedEvent","leftClick","rowNumberClick","fireSyntheticRowHeaderClickedEvent","rowSelectable","toggleSelectAllRows","lastDragRow","mouseY","clearMostRecentRowSelection","toggleSelectRow","mouseCorner","selections","rowSelectionModel","lastSelection","firstOffsetY","scrollToMakeVisible","isSingleRowSelection","primEvent","sign","wheelDeltaX","wheelDeltaY","stopDeceleration","getTouchedCell","currentTouch","lastTouch","MAX_TOUCHES","timeOffset","timestamp","startTouch","decelerateY","decelerateX","getGridCellFromMousePoint","endTouch","decelerate","scroller","velocity","dir","getInitialInterval","step","getDelta","DEC_STEP_SIZE","timer","updateInterval","MAX_INTERVAL","xOrCellEvent","getData","dataModels","derefSubgridRef","ref","subgridSpecs","_subgrids","createSubgrid","decorateDataModel","getFooterRowCount","gotData","getLogicalRowCount","DataModels","HeaderSubgrid","nextDataSource","baseIsEqual","baseIsEqualDeep","isObjectLike","equalArrays","equalByTag","equalObjects","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","assocIndexOf","LARGE_ARRAY_SIZE","pairs","isMasked","reIsHostCtor","funcProto","reIsNative","nativeObjectToString","isOwn","unmasked","coreJsData","maskSrcKey","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","HASH_UNDEFINED","getMapData","setCacheAdd","setCacheHas","mapToArray","setToArray","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","byteOffset","convert","getAllKeys","objProps","objLength","skipCtor","objCtor","othCtor","resIndex","baseIsArguments","reIsUint","typedArrayTags","isPrototype","nativeKeys","WHITESPACE","SimpleCell","textColor","textFont","ixoffset","iyoffset","leftPadding","rightPadding","hover","hoverColor","selectColor","foundationColor","inheritsBackgroundColor","colors","partialRender","same","valWidth","naturalWidth","renderValue","layerColors","cleanVal","lines","findLines","words","stillFits","line","renderSingleLineText","halignOffset","valignOffset","textHeight","vMin","renderMultiLineText","hotIcon","rightX","cellBorderThickness","cellBorderStyle","textWidth","underline","Slider","bgColor","btnGradient","SparkBar","eWidth","barheight","LastSelection","visOverlay","visOutline","SparkLine","prev","ErrorCell","Tag","tagbands","tagband","TreeCell","indent","importTemplate","registerElement","templateString","styleString","child","createDocumentFragment","Node","setTemplateContent","getAttribute","_initializing","customElements","attributeChangedCallback","node","importNode","attachShadow","styleStrings","cls","_attribute","_default","old_set","attr","copy_to_clipboard","csv","execCommand","setPromise","cb","timeout","invertPromise","promise","_resolve","throttlePromise","lock","swap","elems","every","j","reverse","insertBefore","json_attribute","array_attribute","__perspective_plugins__","baseClone","CLONE_DEEP_FLAG","CLONE_SYMBOLS_FLAG","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeysIn","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","CLONE_FLAT_FLAG","cloneableTags","isDeep","isFlat","isFull","isFunc","subValue","keysIn","copyObject","nativeKeysIn","isProto","allocUnsafe","cloneArrayBuffer","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","dataView","reFlags","regexp","typedArray","baseCreate","objectCreate","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","injectCSS","Renderer","SelectionModel","behaviorJSON","EDGE_STYLES","RECT_STYLES","selectionInitialize","HTMLElement","setContainer","boundingRect","getElementById","setStyles","findOrCreateContainer","plugins","lastEdgeSelection","allowEventHandlers","dragExtent","numRows","numColumns","clearMouseDown","setFormatter","listeners","createCellEditor","initCanvas","setBehavior","loadState","mouseCatcher","boundDispatchEvent","removeAllEventListeners","hasChildNodes","attribute","Var","deepClone","vScrollValue","hScrollValue","sbPrevVScrollValue","sbPrevHScrollValue","scrollingNow","refreshProperties","preinstall","uninstallPlugins","pluginNames","uninstall","fireSyntheticOnCellExitEvent","fireSyntheticOnCellEnterEvent","saveState","space","compact","stringifyFunctions","fireSyntheticGridRenderedEvent","fireSyntheticTickEvent","checkClipboardCopy","csvData","getSelectionAsTSV","clipboardData","initScrollbars","messages","needsReindex","needsShapeChanged","needsStateChanged","deferredBehaviorChange","initContainer","initRenderer","oncontextmenu","querySelectorAll","margin","canvasContextAttributes","delegateCanvasEvents","convertDataPointToViewPoint","dataPoint","cursorName","isDataRowVisible","isDataVisible","rn","colIndex","maxCols","indexToCheck","insureModelRowIsVisible","maxRows","getBoundsOfCell","resized","begin","end","wasCellEditor","editorTakeFocus","getVisibleRows","getVisibleColumns","rowHeight","topLeftClicked","rowHeaderClicked","columnHeaderClicked","toggleHiDPI","getRenderedWidth","getRenderedHeight","repaintCell","isDraggingColumn","getRenderedData","getVisibleCellMatrix","canReceiveFocus","getVisibleRowsCount","updateSize","stopPaintThread","stopResizeThread","restartResizeThread","restartPaintThread","resetAllCellPropertiesCaches","isGridRow","columnArrayDecorations","elStyle","pleaseUse","requireString","nextKey","descriptors","automat","injectStylesheetTemplate","before","optionalArgsStartAt","stylesheet","refNode","css","append","replacements","hasReplacements","replacersRegex","encodersRegex","htmlEncoderNode","elOmitted","referenceNode","replacementsStartAt","childNodes","firstElement","layerProps","paintCellsFunctions","scrollHeight","insertionBounds","gridRenderers","paintCellsFunction","registerGridRenderer","paintCells","blackList","lastKnowRowCount","immediate","getVisibleScrollHeight","footerHeight","pixelX","isPseudoRow","isPseudoCol","vrs","vcs","firstColumn","fake","cellEventFromPool","findCell","adjust","getMinimumLeftPositionToShowColumn","targetColIdx","fixedColumnsWidth","viewportWidth","targetRight","lastFixedColumn","rowNumbersWidth","filtersWidth","leftColIdx","computedCols","isDataColumnVisible","chop","isLastColumnVisible","colWall","newWidth","handleColumnWidth","getSubrects","fetchCompletion","sm","columnSelections","columnSelectionModel","lastColumnSelection","rowSelections","lastRowSelection","vci","visibleColumnsByIndex","vri","visibleRowsByDataRowIndex","lastScrollableColumn","lastScrollableRow","firstScrollableColumn","firstScrollableRow","vcOrigin","vrOrigin","vcCorner","vrCorner","partial","override","renderOverride","targetCTX","imgData","getImageData","putImageData","getScrollTop","getScrollLeft","lastColumnIndex","getPageUpRow","scanHeight","getPageDownRow","edgeWidth","gap","C1","R1","borderBox","lastHeaderRow","firstDataRow","userDataAreaTop","lineTop","isRowHandleOrHierarchyColumn","assignProps","isCellSelectedInRow","isCellSelectedInColumn","areAllRowsSelected","isInCurrentSelectionRectangle","mouseDownState","subrows","subrenderer","colIndexOrCellEvent","fetchError","vcEd","xEd","vrEd","yEd","sgEd","isSubgridEd","Y","G","fixedWidthV","fixedGapV","fixedOverlapV","fixedWidthH","fixedGapH","fixedOverlapH","scrollableSubgrid","vx","vy","firstVX","lastVX","firstVY","lastVY","topR","scrollTop","editorCellEvent","insertionBoundsCursor","previousInsertionBoundsCursorValue","lineWidthV","lineGapV","lineWidthH","lineGapH","numOfInternalCols","fixedColumnIndex","fixedRowIndex","previousLength","fetchSubregions","orderedColumnIndexes","intComparator","xMin","cellProperties","propClassGet","assignments","propLayers","paintCellsAsNeeded","paintCellsByColumns","paintCellsByColumnsDiscrete","paintCellsByRows","drawLines","flattenedX","flattenedY","lastSelectionType","setLastSelectionType","ex","ey","newSelection","firstSelectedCell","lastSelectedCell","selectionChanged","toggleSelect","keepRowSelections","setAllRowsSelected","hasColumnSelections","_isCellSelected","rectangleContains","isRectangleSelected","x1","selectAllRows","isIt","y1","deselectColumn","deselectRow","isColumnOrRowSelected","getFlattenedYs","ti","selectRowsFromCells","selectColumnsFromCells","DefaultDataModel","decorators","dispatchDataModelEvent","Local","dataRowProxy","$y$","$rowProxy$","getNewDataModel","newDataModel","addDeprecationWarnings","addFriendlierDrillDownMapKeys","injectPolyfills","injectCode","injectDefaulthooks","setMetadataStore","hooks","fallbacks","polyfills","friendlierDrillDownMapKeys","dataSource","friendlierKey","metadataFieldName","getRowIndex","getMetadataStore","newMetadataStore","dataModelEventHandlers","REGEX_DATA_EVENT_STRING","nativeHandler","dispatched","stashRowSelections","stashColumnSelections","unstashRowSelections","unstashColumnSelections","CellEditors","Color","isChromium","chrome","winNav","vendorName","vendor","isOpera","isIEedge","isChrome","lastCharPlusOne","Spinner","ID","referenceElement","getElementsByTagName","idPrefix","styleSheet","createTextNode","mustache","escapeRegExp","hasProperty","regExpTest","nonSpaceRe","isWhitespace","testRegExp","entityMap","whiteRe","spaceRe","equalsRe","curlyRe","tagRe","Scanner","tail","pos","Context","parentContext","Writer","eos","scan","substring","scanUntil","search","lookupHit","clearCache","tags","tokens","openingTagRe","closingTagRe","closingCurlyRe","sections","spaces","hasTag","nonSpace","stripSpace","compileTags","tagsToCompile","chr","token","openSection","scanner","valueLength","nestedTokens","collector","numTokens","nestTokens","lastToken","squashedTokens","squashTokens","parseTemplate","partials","renderTokens","originalTemplate","renderSection","renderInverted","renderPartial","unescapedValue","escapedValue","rawValue","escape","defaultWriter","to_html","nodeName","listener","internal","info","addInternalEventListener","listenerList","allow","inputControl","keyEvent","oldValue","selectionDetailGetters","fireSyntheticColumnSelectionChangedEvent","fireSyntheticContextMenuEvent","selectionDetailGetterDescriptors","fireSyntheticMouseUpEvent","fireSyntheticMouseDownEvent","fireSyntheticMouseMoveEvent","fireSyntheticButtonPressedEvent","subheight","fireSyntheticKeydownEvent","fireSyntheticKeyupEvent","fireSyntheticFilterAppliedEvent","fireSyntheticClickEvent","fireSyntheticDoubleClickEvent","fireSyntheticGridResizedEvent","fireSyntheticTouchStartEvent","fireSyntheticTouchMoveEvent","fireSyntheticTouchEndEvent","fireScrollEvent","control","handleMouseEvent","decoratedEvent","clientPoint","pagePoint","mouseEvent","delegateMouseMove","delegateMouseDown","delegateClick","columnDragAutoScrolling","delegateMouseUp","delegateDoubleClick","delegateMouseDrag","delegateKeyUp","delegateWheelMoved","delegateMouseExit","delegateContextMenu","delegateTouchStart","delegateTouchMove","delegateTouchEnd","mouseDetails","SelectionRectangle","hiddenColumns","normalizeRect","cx","cy","valOrFunc","getSelectionModel","getSelectionMatrix","getMatrixSelectionAsTSV","getRowSelectionMatrix","getColumnSelectionMatrix","lastCol","whiteSpaceDelimiterForRow","getRowSelection","selectedRowIndexes","selectedRowIndex","selectedColumnIndexes","selectedColumnIndex","getColumnSelection","getSelection","rects","selectionRect","colCount","selectCell","model","alreadySelected","singleSelect","selectToViewportCell","selectToFinalCellOfCurrentRow","selectFinalCellOfCurrentRow","to","selectToFirstCellOfCurrentRow","selectFirstCellOfCurrentRow","setHScrollValue","selectFinalCell","selectCellAndScrollToMakeVisible","selectToFinalCell","getSelectedRow","topRow","moveToSingleSelect","maxViewableRows","colScrolled","rowScrolled","sel","selectedDataRowIndexes","dataRowIndexes","selectedRowCount","gridRowIndexes","gridRowIndex","selectedColumnNames","sourceColumnNames","reselectedCount","activeColumnIndex","isItNow","scrollHBy","scrollVBy","setVScrollValue","oldY","oldX","horzBar","vertBar","up","down","hPrefix","vPrefix","classPrefix","resizeScrollbars","setVScrollbarValues","setHScrollbarValues","scrollableWidth","lineGap","columnsWidth","lastPageColumnCount","scrollableHeight","rowsHeight","lastPageRowCount","hMax","vMax","rowNum","CLASS_NAME","prototypeGroupedHeader","delimiter","groupCount","prevVisCol","visCol","tree","widen","autosizeGroups","autosizeTree","stash","gcfg","isGroupLabel","stasher","overlay","decorateBackgroundWithBottomBorder","nestedHeight","gradientStops","originalMethodFromPrototype","groupedHeaderCellRenderer","levels","headerRowHeight","REGEX_EXTRACT_PX_VALUE","fontHeight","getHeight","headerDataModel","REGEX_EXTRACT_PER_CENTAGE","multiplicand","isReorderable","walkSuperior","walkSubordinate","childrenWidth","regexRGBA","groupIndex","groupHeaderDelimiter","decorateBackgroundWithLinearGradient","isTransparent","grad","num","numStr","supc","SUPERSCRIPTS","fixRegExpWellKnownSymbolLogic","advanceStringIndex","regExpExec","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","REPLACE","maybeCallNative","reason","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","REPLACE_KEEPS_$0","UNSAFE_SUBSTITUTE","searchValue","replaceValue","replacer","res","rx","S","functionalReplace","fullUnicode","unicode","results","accumulatedResult","nextSourcePosition","matched","captures","namedCaptures","groups","replacerArgs","getSubstitution","tailPos","symbols","ch","capture","regexpExec","SPECIES","REPLACE_SUPPORTS_NAMED_GROUPS","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","nativeRegExpMethod","nativeMethod","arg2","forceStringMethod","stringMethod","regexMethod","that","ignoreCase","dotAll","RE","CONVERT_TO_STRING","first","charCodeAt","codeAt"],"mappings":"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","file":"perspective-viewer-hypergrid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"perspective-viewer-hypergrid\"] = factory();\n\telse\n\t\troot[\"perspective-viewer-hypergrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 124);\n","'use strict';\n\nvar Base = require('../Base');\n\n/**\n * Instances of features are connected to one another to make a chain of responsibility for handling all the input to the hypergrid.\n * @constructor\n */\nvar Feature = Base.extend('Feature', {\n\n    /**\n     * the next feature to be given a chance to handle incoming events\n     * @type {Feature}\n     * @default null\n     * @memberOf Feature.prototype\n     */\n    next: null,\n\n    /**\n     * a temporary holding field for my next feature when I'm in a disconnected state\n     * @type {Feature}\n     * @default null\n     * @memberOf Feature.prototype\n     */\n    detached: null,\n\n    /**\n     * the cursor I want to be displayed\n     * @type {string}\n     * @default null\n     * @memberOf Feature.prototype\n     */\n    cursor: null,\n\n    /**\n     * the cell location where the cursor is currently\n     * @type {Point}\n     * @default null\n     * @memberOf Feature.prototype\n     */\n    currentHoverCell: null,\n\n    /**\n     * @memberOf Feature.prototype\n     * @desc set my next field, or if it's populated delegate to the feature in my next field\n     * @param {Feature} nextFeature - this is how we build the chain of responsibility\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    setNext: function(nextFeature) {\n        if (this.next) {\n            this.next.setNext(nextFeature);\n        } else {\n            this.next = nextFeature;\n            this.detached = nextFeature;\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @desc disconnect my child\n     */\n    detachChain: function() {\n        this.next = null;\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @desc reattach my child from the detached reference\n     */\n    attachChain: function() {\n        this.next = this.detached;\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @desc handle mouse move down the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseMove: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseMove(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseExit: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseExit(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseEnter: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseEnter(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseDown: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseUp: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleKeyDown: function(grid, event) {\n        if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        } else {\n            return true;\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleKeyUp: function(grid, event) {\n        if (this.next) {\n            this.next.handleKeyUp(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleWheelMoved: function(grid, event) {\n        if (this.next) {\n            this.next.handleWheelMoved(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleDoubleClick: function(grid, event) {\n        if (this.next) {\n            this.next.handleDoubleClick(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleClick: function(grid, event) {\n        if (this.next) {\n            this.next.handleClick(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleMouseDrag: function(grid, event) {\n        if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleContextMenu: function(grid, event) {\n        if (this.next) {\n            this.next.handleContextMenu(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleTouchStart: function(grid, event) {\n        if (this.next) {\n            this.next.handleTouchStart(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleTouchMove: function(grid, event) {\n        if (this.next) {\n            this.next.handleTouchMove(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    handleTouchEnd: function(grid, event) {\n        if (this.next) {\n            this.next.handleTouchEnd(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @desc toggle the column picker\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    moveSingleSelect: function(grid, x, y) {\n        if (this.next) {\n            this.next.moveSingleSelect(grid, x, y);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    isFirstFixedRow: function(grid, event) {\n        return event.gridCell.y < 1;\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    isFirstFixedColumn: function(grid, event) {\n        return event.gridCell.x === 0;\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    setCursor: function(grid) {\n        if (this.next) {\n            this.next.setCursor(grid);\n        }\n        if (this.cursor) {\n            grid.beCursor(this.cursor);\n        }\n    },\n\n    /**\n     * @memberOf Feature.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @private\n     * @comment Not really private but was cluttering up all the feature doc pages.\n     */\n    initializeOn: function(grid) {\n        if (this.next) {\n            this.next.initializeOn(grid);\n        }\n    }\n\n});\n\n\nmodule.exports = Feature;\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","'use strict';\n\n/* eslint-env node, browser */\n\n/**\n * Creates a new read-only property and attaches it to the provided context.\n * @private\n * @param {string} name - Name for new property.\n * @param {*} [value] - Value of new property.\n */\nfunction addReadOnlyProperty(name, value) {\n    Object.defineProperty(this, name, {\n        value: value,\n        writable: false,\n        enumerable: true,\n        configurable: false\n    });\n}\n\n/**\n * @constructor Point\n *\n * @desc This object represents a single point in an abstract 2-dimensional matrix.\n *\n * The unit of measure is typically pixels.\n * (If used to model computer graphics, vertical coordinates are typically measured downwards\n * from the top of the window. This convention however is not inherent in this object.)\n *\n * Note: This object should be instantiated with the `new` keyword.\n *\n * @param {number} x - the new point's `x` property\n * @param {number} y - the new point's `y` property\n */\nfunction Point(x, y) {\n\n    /**\n     * @name x\n     * @type {number}\n     * @summary This point's horizontal coordinate.\n     * @desc Created upon instantiation by the {@link Point|constructor}.\n     * @memberOf Point.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'x', Number(x) || 0);\n\n    /**\n     * @name y\n     * @type {number}\n     * @summary This point's vertical coordinate.\n     * @desc Created upon instantiation by the {@link Point|constructor}.\n     * @memberOf Point.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'y', Number(y) || 0);\n\n}\n\nPoint.prototype = {\n\n    /**\n     * @returns {Point} A new point which is this point's position increased by coordinates of given `offset`.\n     * @param {Point} offset - Horizontal and vertical values to add to this point's coordinates.\n     * @memberOf Point.prototype\n     */\n    plus: function(offset) {\n        return new Point(\n            this.x + offset.x,\n            this.y + offset.y\n        );\n    },\n\n    /**\n     * @returns {Point} A new point which is this point's position increased by given offsets.\n     * @param {number} [offsetX=0] - Value to add to this point's horizontal coordinate.\n     * @param {number} [offsetY=0] - Value to add to this point's horizontal coordinate.\n     * @memberOf Point.prototype\n     */\n    plusXY: function(offsetX, offsetY) {\n        return new Point(\n            this.x + (offsetX || 0),\n            this.y + (offsetY || 0)\n        );\n    },\n\n    /**\n     * @returns {Point} A new point which is this point's position decreased by coordinates of given `offset`.\n     * @param {Point} offset - Horizontal and vertical values to subtract from this point's coordinates.\n     * @memberOf Point.prototype\n     */\n    minus: function(offset) {\n        return new Point(\n            this.x - offset.x,\n            this.y - offset.y\n        );\n    },\n\n    /**\n     * @returns {Point} A new `Point` positioned to least x and least y of this point and given `offset`.\n     * @param {Point} point - A point to compare to this point.\n     * @memberOf Point.prototype\n     */\n    min: function(point) {\n        return new Point(\n            Math.min(this.x, point.x),\n            Math.min(this.y, point.y)\n        );\n    },\n\n    /**\n     * @returns {Point} A new `Point` positioned to greatest x and greatest y of this point and given `point`.\n     * @param {Point} point - A point to compare to this point.\n     * @memberOf Point.prototype\n     */\n    max: function(point) {\n        return new Point(\n            Math.max(this.x, point.x),\n            Math.max(this.y, point.y)\n        );\n    },\n\n    /**\n     * @returns {number} Distance between given `point` and this point using Pythagorean Theorem formula.\n     * @param {Point} point - A point from which to compute the distance to this point.\n     * @memberOf Point.prototype\n     */\n    distance: function(point) {\n        var deltaX = point.x - this.x,\n            deltaY = point.y - this.y;\n\n        return Math.sqrt(\n            deltaX * deltaX +\n            deltaY * deltaY\n        );\n    },\n\n    /**\n     * _(Formerly: `equal`.)_\n     * @returns {boolean} `true` iff _both_ coordinates of this point are exactly equal to those of given `point`.\n     * @param {Point} point - A point to compare to this point.\n     * @memberOf Point.prototype\n     */\n    equals: function(point) {\n        var result = false;\n\n        if (point) {\n            result =\n                this.x === point.x &&\n                this.y === point.y;\n        }\n\n        return result;\n    },\n\n    /**\n     * @returns {boolean} `true` iff _both_ coordinates of this point are greater than those of given `point`.\n     * @param {Point} point - A point to compare to this point\n     * @memberOf Point.prototype\n     */\n    greaterThan: function(point) {\n        return (\n            this.x > point.x &&\n            this.y > point.y\n        );\n    },\n\n    /**\n     * @returns {boolean} `true` iff _both_ coordinates of this point are less than those of given `point`.\n     * @param {Point} point - A point to compare to this point\n     * @memberOf Point.prototype\n     */\n    lessThan: function(point) {\n        return (\n            this.x < point.x &&\n            this.y < point.y\n        );\n    },\n\n    /**\n     * _(Formerly `greaterThanEqualTo`.)_\n     * @returns {boolean} `true` iff _both_ coordinates of this point are greater than or equal to those of given `point`.\n     * @param {Point} point - A point to compare to this point\n     * @memberOf Point.prototype\n     */\n    greaterThanOrEqualTo: function(point) {\n        return (\n            this.x >= point.x &&\n            this.y >= point.y\n        );\n    },\n\n    /**\n     * _(Formerly `lessThanEqualTo`.)_\n     * @returns {boolean} `true` iff _both_ coordinates of this point are less than or equal to those of given `point`.\n     * @param {Point} point - A point to compare to this point.\n     * @memberOf Point.prototype\n     */\n    lessThanOrEqualTo: function(point) {\n        return (\n            this.x <= point.x &&\n            this.y <= point.y\n        );\n    },\n\n    /**\n     * _(Formerly `isContainedWithinRectangle`.)_\n     * @param rect {Rectangle} - Rectangle to test this point against.\n     * @returns {boolean} `true` iff this point is within given `rect`.\n     * @memberOf Point.prototype\n     */\n    within: function(rect) {\n        var minX = rect.origin.x,\n            maxX = minX + rect.extent.x;\n        var minY = rect.origin.y,\n            maxY = minY + rect.extent.y;\n\n        if (rect.extent.x < 0) {\n            minX = maxX;\n            maxX = rect.origin.x;\n        }\n\n        if (rect.extent.y < 0) {\n            minY = maxY;\n            maxY = rect.origin.y;\n        }\n\n        return (\n            minX <= this.x && this.x < maxX &&\n            minY <= this.y && this.y < maxY\n        );\n    }\n};\n\nPoint.prototype.EQ = Point.prototype.equals;\nPoint.prototype.GT = Point.prototype.greaterThan;\nPoint.prototype.LT = Point.prototype.lessThan;\nPoint.prototype.GE = Point.prototype.greaterThanOrEqualTo;\nPoint.prototype.LE = Point.prototype.lessThanOrEqualTo;\n\n\n/**\n * @constructor Rectangle\n *\n * @desc This object represents a rectangular area within an abstract 2-dimensional matrix.\n *\n * The unit of measure is typically pixels.\n * (If used to model computer graphics, vertical coordinates are typically measured downwards\n * from the top of the window. This convention however is not inherent in this object.)\n *\n * Normally, the `x` and `y` parameters to the constructor describe the upper left corner of the rect.\n * However, negative values of `width` and `height` will be added to the given `x` and `y`. That is,\n * a negative value of the `width` parameter will extend the rect to the left of the given `x` and\n * a negative value of the `height` parameter will extend the rect above the given `y`.\n * In any case, after instantiation the following are guaranteed to always be true:\n * * The `extent`, `width`, and `height` properties _always_ give positive values.\n * * The `origin`, `top`, and `left` properties _always_ reflect the upper left corner.\n * * The `corner`, `bottom`, and `right` properties _always_ reflect the lower right corner.\n *\n * Note: This object should be instantiated with the `new` keyword.\n *\n * @param {number} [x=0] - Horizontal coordinate of some corner of the rect.\n * @param {number} [y=0] - Vertical coordinate of some corner of the rect.\n * @param {number} [width=0] - Width of the new rect. May be negative (see above).\n * @param {number} [height=0] - Height of the new rect. May be negative (see above).\n */\nfunction Rectangle(x, y, width, height) {\n\n    x = Number(x) || 0;\n    y = Number(y) || 0;\n    width = Number(width) || 0;\n    height = Number(height) || 0;\n\n    if (width < 0) {\n        x += width;\n        width = -width;\n    }\n\n    if (height < 0) {\n        y += height;\n        height = -height;\n    }\n\n    /**\n     * @name origin\n     * @type {Point}\n     * @summary Upper left corner of this rect.\n     * @desc Created upon instantiation by the {@linkplain Rectangle|constructor}.\n     * @memberOf Rectangle.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'origin', new Point(x, y));\n\n    /**\n     * @name extent\n     * @type {Point}\n     * @summary this rect's width and height.\n     * @desc Unlike the other `Point` properties, `extent` is not a global coordinate pair; rather it consists of a _width_ (`x`, always positive) and a _height_ (`y`, always positive).\n     *\n     * This object might be more legitimately typed as something like `Area` with properties `width` and `height`; however we wanted it to be able to use it efficiently with a point's `plus` and `minus` methods (that is, without those methods having to check and branch on the type of its parameter).\n     *\n     * Created upon instantiation by the {@linkplain Rectangle|constructor}.\n     * @see The {@link Rectangle#corner|corner} method.\n     * @memberOf Rectangle.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'extent', new Point(width, height));\n\n    /**\n     * @name corner\n     * @type {Point}\n     * @summary Lower right corner of this rect.\n     * @desc This is a calculated value created upon instantiation by the {@linkplain Rectangle|constructor}. It is `origin` offset by `extent`.\n     *\n     * **Note:** These coordinates actually point to the pixel one below and one to the right of the rect's actual lower right pixel.\n     * @memberOf Rectangle.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'corner', new Point(x + width, y + height));\n\n    /**\n     * @name center\n     * @type {Point}\n     * @summary Center of this rect.\n     * @desc Created upon instantiation by the {@linkplain Rectangle|constructor}.\n     * @memberOf Rectangle.prototype\n     * @abstract\n     */\n    addReadOnlyProperty.call(this, 'center', new Point(x + (width / 2), y + (height / 2)));\n\n}\n\nRectangle.prototype = {\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Minimum vertical coordinate of this rect.\n     * @memberOf Rectangle.prototype\n     */\n    get top() {\n        return this.origin.y;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Minimum horizontal coordinate of this rect.\n     * @memberOf Rectangle.prototype\n     */\n    get left() {\n        return this.origin.x;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Maximum vertical coordinate of this rect + 1.\n     * @memberOf Rectangle.prototype\n     */\n    get bottom() {\n        return this.corner.y;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Maximum horizontal coordinate of this rect + 1.\n     * @memberOf Rectangle.prototype\n     */\n    get right() {\n        return this.corner.x;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Width of this rect (always positive).\n     * @memberOf Rectangle.prototype\n     */\n    get width() {\n        return this.extent.x;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Height of this rect (always positive).\n     * @memberOf Rectangle.prototype\n     */\n    get height() {\n        return this.extent.y;\n    },\n\n    /**\n     * @type {number}\n     * @desc _(Formerly a function; now a getter.)_\n     * @summary Area of this rect.\n     * @memberOf Rectangle.prototype\n     */\n    get area() {\n        return this.width * this.height;\n    },\n\n    /**\n     * @returns {Rectangle} A copy of this rect but with horizontal position reset to given `x` and no width.\n     * @param {number} x - Horizontal coordinate of the new rect.\n     * @memberOf Rectangle.prototype\n     */\n    flattenXAt: function(x) {\n        return new Rectangle(x, this.origin.y, 0, this.extent.y);\n    },\n\n    /**\n     * @returns {Rectangle} A copy of this rect but with vertical position reset to given `y` and no height.\n     * @param {number} y - Vertical coordinate of the new rect.\n     * @memberOf Rectangle.prototype\n     */\n    flattenYAt: function(y) {\n        return new Rectangle(this.origin.x, y, this.extent.x, 0);\n    },\n\n    /**\n     * @returns {boolean} `true` iff given `point` entirely contained within this rect.\n     * @param {Point} pointOrRect - The point or rect to test for containment.\n     * @memberOf Rectangle.prototype\n     */\n    contains: function(pointOrRect) {\n        return pointOrRect.within(this);\n    },\n\n    /**\n     * _(Formerly `isContainedWithinRectangle`.)_\n     * @returns {boolean} `true` iff `this` rect is entirely contained within given `rect`.\n     * @param {Rectangle} rect - Rectangle to test against this rect.\n     * @memberOf Rectangle.prototype\n     */\n    within: function(rect) {\n        return (\n            rect.origin.lessThanOrEqualTo(this.origin) &&\n            rect.corner.greaterThanOrEqualTo(this.corner)\n        );\n    },\n\n    /**\n     * _(Formerly: `insetBy`.)_\n     * @returns {Rectangle} That is enlarged/shrunk by given `padding`.\n     * @param {number} padding - Amount by which to increase (+) or decrease (-) this rect\n     * @see The {@link Rectangle#shrinkBy|shrinkBy} method.\n     * @memberOf Rectangle.prototype\n     */\n    growBy: function(padding) {\n        return new Rectangle(\n            this.origin.x + padding,\n            this.origin.y + padding,\n            this.extent.x - padding - padding,\n            this.extent.y - padding - padding);\n    },\n\n    /**\n     * @returns {Rectangle} That is enlarged/shrunk by given `padding`.\n     * @param {number} padding - Amount by which to decrease (+) or increase (-) this rect.\n     * @see The {@link Rectangle#growBy|growBy} method.\n     * @memberOf Rectangle.prototype\n     */\n    shrinkBy: function(padding) {\n        return this.growBy(-padding);\n    },\n\n    /**\n     * @returns {Rectangle} Bounding rect that contains both this rect and the given `rect`.\n     * @param {Rectangle} rect - The rectangle to union with this rect.\n     * @memberOf Rectangle.prototype\n     */\n    union: function(rect) {\n        var origin = this.origin.min(rect.origin),\n            corner = this.corner.max(rect.corner),\n            extent = corner.minus(origin);\n\n        return new Rectangle(\n            origin.x, origin.y,\n            extent.x, extent.y\n        );\n    },\n\n    /**\n     * iterate over all points within this rect, invoking `iteratee` for each.\n     * @param {function(number,number)} iteratee - Function to call for each point.\n     * Bound to `context` when given; otherwise it is bound to this rect.\n     * Each invocation of `iteratee` is called with two arguments:\n     * the horizontal and vertical coordinates of the point.\n     * @param {object} [context=this] - Context to bind to `iteratee` (when not `this`).\n     * @memberOf Rectangle.prototype\n     */\n    forEach: function(iteratee, context) {\n        context = context || this;\n        for (var x = this.origin.x, x2 = this.corner.x; x < x2; x++) {\n            for (var y = this.origin.y, y2 = this.corner.y; y < y2; y++) {\n                iteratee.call(context, x, y);\n            }\n        }\n    },\n\n    /**\n     * @returns {Rectangle} One of:\n     * * _If this rect intersects with the given `rect`:_\n     *      a new rect representing that intersection.\n     * * _If it doesn't intersect and `ifNoneAction` defined:_\n     *      result of calling `ifNoneAction`.\n     * * _If it doesn't intersect and `ifNoneAction` undefined:_\n     *      `null`.\n     * @param {Rectangle} rect - The rectangle to intersect with this rect.\n     * @param {function(Rectangle)} [ifNoneAction] - When no intersection, invoke and return result.\n     * Bound to `context` when given; otherwise bound to this rect.\n     * Invoked with `rect` as sole parameter.\n     * @param {object} [context=this] - Context to bind to `ifNoneAction` (when not `this`).\n     * @memberOf Rectangle.prototype\n     */\n    intersect: function(rect, ifNoneAction, context) {\n        var result = null,\n            origin = this.origin.max(rect.origin),\n            corner = this.corner.min(rect.corner),\n            extent = corner.minus(origin);\n\n        if (extent.x > 0 && extent.y > 0) {\n            result = new Rectangle(\n                origin.x, origin.y,\n                extent.x, extent.y\n            );\n        } else if (typeof ifNoneAction === 'function') {\n            result = ifNoneAction.call(context || this, rect);\n        }\n\n        return result;\n    },\n\n    /**\n     * @returns {boolean} `true` iff this rect overlaps with given `rect`.\n     * @param {Rectangle} rect - The rectangle to intersect with this rect.\n     * @memberOf Rectangle.prototype\n     */\n    intersects: function(rect) {\n        return (\n            rect.corner.x > this.origin.x &&\n            rect.corner.y > this.origin.y &&\n            rect.origin.x < this.corner.x &&\n            rect.origin.y < this.corner.y\n        );\n    }\n};\n\n// Interface\nexports.Point = Point;\nexports.Rectangle = Rectangle;\n","/* globals alert */\n\n'use strict';\n\n/**\n * @constructor\n * @desc Extend from this base class using `Base.extend` per example.\n * @example\n * var prototype = { ... };\n * var descendantClass = Base.extend(prototype};\n * @classdesc This is an abstract base class available for all Hypergrid classes.\n */\nvar Base = require('extend-me').Base;\n\nObject.defineProperty(Base.prototype, 'version', {\n    enumerable: true,\n    writable: false, // read-only\n    configurable: false,\n    value: require('../package.json').version\n});\n\nBase.prototype.versionAtLeast = function(neededVersion) {\n    var neededParts = neededVersion.split('.').map(Number),\n        delta = this.version.split('.').map(function(part, i) { return Number(part) - neededParts[i]; });\n    return (\n        delta[0] > 0 ||\n        delta[0] === 0 && (\n            delta[1] > 0 ||\n            delta[1] === 0 && delta[2] >= 0\n        )\n    );\n};\n\nBase.prototype.deprecated = require('./lib/deprecated');\nBase.prototype.HypergridError = require('./lib/error');\n\nBase.prototype.notify = function(message, onerror) {\n    switch (onerror) {\n        case 'warn': console.warn(message); break;\n        case 'alert': alert(message); break; // eslint-disable-line no-alert\n        default: throw new this.HypergridError(message);\n    }\n};\n\n/**\n * Convenience function for getting the value when that value can be defined as a function that needs to be called to get the actual (primitive) value.\n * @param value\n * @returns {*}\n */\nBase.prototype.unwrap = function(value) {\n    if ((typeof value)[0] === 'f') {\n        value = value();\n    }\n    return value;\n};\n\n/**\n * @method\n * @summary Mixes source members into calling context.\n * @desc Context is typically either an instance or the (shared) prototype of a \"class\" extended from {@link Base} (see examples).\n *\n * Typically used by plug-ins.\n * @example\n * // define instance members: myGrid.fix(), etc.\n * myGrid.mixIn({ fix: function() {...}, ... });\n * @example\n * // define prototype members: Hypergrid.prototype.fix(), etc.\n * Hypergrid.prototype.mixIn({ fix: function() {...}, ... });\n * @See {@link https://joneit.github.io/overrider/module-overrider.htm#.mixIn}\n * @param {object} source\n */\nBase.prototype.mixIn = require('overrider').mixIn;\n\n\n/**\n * @method\n * @summary Instantiate an object with discrete + variable args.\n * @desc The discrete args are passed first, followed by the variable args.\n * @param {function} Constructor\n * @param {Array} variableArgArray\n * @param {...*} discreteArgs\n * @returns {object} Object of type `Constructor` newly constructor using the arguments in `arrayOfArgs`.\n */\nBase.prototype.createApply = function(Constructor, variableArgArray, discreteArgs) {\n    var discreteArgArray = Array.prototype.slice.call(arguments, 2),\n        args = [null] // null is context for `bind` call below\n            .concat(discreteArgArray) // discrete arguments\n            .concat(variableArgArray), // variable arguments\n        BoundConstructor = Constructor.bind.apply(Constructor, args);\n\n    return new BoundConstructor;\n};\n\n\nmodule.exports = Base;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","'use strict';\n\n/** @typedef {object} CellRenderer#renderConfig\n *\n * This is the renderer config object, which is:\n * 1. First passed to a {@link DataModel#getCell getCell} method implementation, which may override (most of) its values before returning.\n * 2. Then passed to the specified cell renderers' {@link CellRenderer#paint paint} function for rendering.\n *\n * #### Standard Properties\n *\n * On each render of every visible cell, this a fresh instance of an object created from (whose prototype is) a properties object as defined by layer-props.js. It therefore has all the standard properties defined in {@link module:defaults}.\n *\n * #### Additional Properties\n *\n * In addition, the config object has the following additional properties.\n *\n * Properties marked **_read-only_** may in fact be writable, but should be considered **off limits** to overriding. Do not attempt to change these properties inside a {@link DataModel#getCell getCell} method override.\n *\n * Properties marked **_write-only_** are to be defined the cell renderer for use by the caller (the grid renderer).\n *\n * @property {boolean} config.allRowsSelected\n *\n * @property {BoundingRect} config.bounds - Bounding rect of the cell or subcell to be rendered.\n *\n * @property {object} [config.clickRect] - **_Write-only._** The Cell renderer may return in this property a subrect in the cell's local coordinates that represents a click region. If defined by the cell renderer, the CellClick feature will ignore clicks outside the click region. If not defined by the cell renderer, the entire cell is clickable.\n *\n * @property {dataCellCoords} config.dataCell - **_Read-only._** Data coordinates of the cell.\n *\n * @property {dataRowObject} config.dataRow - Access to other column values in the same row.\n *\n * @property {function} config.formatValue - _For cell renderer use only. Not available in `getCell` override._ The cell's value formatter function (based on the formatter name in `config.format`, as possibly mutated by `getCell`).\n *\n * @property {gridCellCoords} config.gridCell - **_Read-only._** Grid coordinates of the cell.\n *\n * @property {string} config.halign - The cell's horizontal alignment property, as interpreted by it's cell renderer.\n *\n * @property {boolean} config.isCellHovered -\n *\n * @property {boolean} config.isCellSelected -\n *\n * @property {boolean} config.isColumnHovered -\n *\n * @property {boolean} config.isColumnSelected -\n *\n * @property {boolean} config.isDataColumn -\n *\n * @property {boolean} config.isDataRow -\n *\n * @property {boolean} config.isFilterRow -\n *\n * @property {boolean} config.isHandleColumn -\n *\n * @property {boolean} config.isHeaderRow -\n *\n * @property {boolean} config.isInCurrentSelectionRectangle -\n *\n * @property {boolean} config.isRowHovered -\n *\n * @property {boolean} config.isRowSelected -\n *\n * @property {boolean} config.isSelected -\n *\n * @property {boolean} config.isTreeColumn -\n *\n * @property {boolean} config.isUserDataArea -\n *\n * @property {number} config.minWidth - **_Write-only._** The Cell renderer should return the pixel width of the rendered contents in this property.\n *\n * @property {boolean} config.mouseDown - The last mousedown event occurred over this cell and the mouse is still down. Note, however, that the mouse may no longer be hovering over this cell when it has been dragged away.\n *\n * @property {} [config.prefillColor] - **_Write-only._** This is the color _already painted_ by the grid renderer behind the cell to be rendered. If the cell's specified background color is the same, renderer may (and should!) skip painting it. If `undefined`, this signals a \"partial render\"; cell renderers that support partial rendering can use `config.snapshot` to determine whether or not to rerender the cell.\n *\n * @property {object} [config.snapshot] - **_Write-only._** Supports _partial render._ In support of the {@link Renderer#paintCellsAsNeeded by-cells} \"partial\" grid renderer, cell renderers can save the essential render parameters in this property so that on subsequent calls, when the parameters are the same, cell renderers can skip the actual rendering. Only when the parameters have changed is the cell rendered and this property reset (with the new parameters). This object would typically include at the very least the (formatted) `value`, plus additional properties as needed to fully describe the appearance of the render, such as color, _etc._ This property is undefined the first time a cell is rendered by the `by-cells` grid renderer. See also the {@link DataModel#configObject}'s `prefillColor` property.\n *\n * @property config.value - Value to be rendered.\n *\n * The renderer has available to it the `.formatValue()` function for formatting the value. The function comes from the localizer named in the `.format` property. If there is no localizer with that name, the function defaults to the `string` localizer's formatter (which simply invokes the value's `toString()` method).\n *\n * Typically a Local primitive value, values can be any type, including objects and arrays. The specified cell renderer is expected to know how to determine the value's type and render it.\n */\n\nvar Base = require('../Base');\n\n/** @constructor\n * @desc Instances of `CellRenderer` are used to render the 2D graphics context within the bound of a cell.\n *\n * Extend this base class to implement your own cell renderer.\n *\n * @tutorial cell-renderer\n */\nvar CellRenderer = Base.extend('CellRenderer', {\n    /**\n     * @desc An empty implementation of a cell renderer, see [the null object pattern](http://c2.com/cgi/wiki?NullObject).\n     *\n     * @this {CellEditor}\n     *\n     * @param {CanvasRenderingContext2D} gc\n     *\n     * @param {CellRenderer#renderConfig} config\n     *\n     * @returns {number} Preferred pixel width of content. The content may or may not be rendered at that width depending on whether or not `config.bounds` was respected and whether or not the grid renderer is using clipping. (Clipping is generally not used due to poor performance.)\n     *\n     * @memberOf CellRenderer.prototype\n     */\n    paint: function(gc, config) {},\n\n    /**\n     * @desc A simple implementation of rounding a cell.\n     * @param {CanvasRenderingContext2D} gc\n     * @param {number} x - the x grid coordinate of my origin\n     * @param {number} y - the y grid coordinate of my origin\n     * @param {number} width - the width I'm allowed to draw within\n     * @param {number} height - the height I'm allowed to draw within\n     * @param {number} radius\n     * @param {number} fill\n     * @param {number} stroke\n     * @memberOf CellRenderer.prototype\n     */\n    roundRect: function(gc, x, y, width, height, radius, fill, stroke) {\n\n        if (!stroke) {\n            stroke = true;\n        }\n        if (!radius) {\n            radius = 5;\n        }\n        gc.beginPath();\n        gc.moveTo(x + radius, y);\n        gc.lineTo(x + width - radius, y);\n        gc.quadraticCurveTo(x + width, y, x + width, y + radius);\n        gc.lineTo(x + width, y + height - radius);\n        gc.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n        gc.lineTo(x + radius, y + height);\n        gc.quadraticCurveTo(x, y + height, x, y + height - radius);\n        gc.lineTo(x, y + radius);\n        gc.quadraticCurveTo(x, y, x + radius, y);\n        gc.closePath();\n        if (stroke) {\n            gc.stroke();\n        }\n        if (fill) {\n            gc.fill();\n        }\n        gc.closePath();\n    }\n});\n\nmodule.exports = CellRenderer;\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","/* eslint-env browser */\n\n'use strict';\n\nvar Base = require('../Base');\nvar effects = require('../lib/DOM/effects');\nvar Localization = require('../lib/Localization');\n\n/**\n * @constructor\n * @desc Displays a cell editor and handles cell editor interactions.\n *\n * > This constructor (actually `initialize`) will be called upon instantiation of this class or of any class that extends from this class. See {@link https://github.com/joneit/extend-me|extend-me} for more info.\n *\n * Instances of `CellEditor` are used to render an HTML element on top of the grid exactly within the bound of a cell for purposes of editing the cell value.\n *\n * Extend this base class to implement your own cell editor.\n *\n * @param {Hypergrid} grid\n * @param {object} options - Properties listed below + arbitrary mustache \"variables\" for merging into template.\n * @param {Point} options.editPoint - Deprecated; use `options.gridCell`.\n * @param {string} [options.format] - Name of a localizer with which to override prototype's `localizer` property.\n */\nvar CellEditor = Base.extend('CellEditor', {\n\n    initialize: function(grid, options) {\n        // Mix in all enumerable properties for mustache use, typically `column` and `format`.\n        for (var key in options) {\n            this[key] = options[key];\n        }\n\n        this.event = options;\n\n        var value = this.event.value;\n        if (value instanceof Array) {\n            value = value[1]; //it's a nested object\n        }\n\n        /**\n         * my instance of hypergrid\n         * @type {Hypergrid}\n         * @memberOf CellEditor.prototype\n         */\n        this.grid = grid;\n\n        this.grid.cellEditor = this;\n\n        this.locale = grid.localization.locale; // for template's `lang` attribute\n\n        // Only override cell editor's default 'null' localizer if the custom localizer lookup succeeds.\n        // Failure is when it returns the default ('string') localizer when 'string' is not what was requested.\n        var localizer = this.grid.localization.get(options.format); // try to get named localizer\n        if (!(localizer === Localization.prototype.string || options.format === 'string')) {\n            this.localizer = localizer;\n        }\n\n        this.initialValue = value;\n\n        var container = document.createElement('DIV');\n        container.innerHTML = this.grid.modules.templater.render(this.template, this);\n\n        /**\n         * This object's input control, one of:\n         * * *input element* - an `HTMLElement` that has a `value` attribute, such as `HTMLInputElement`, `HTMLButtonElement`, etc.\n         * * *container element* - an `HTMLElement` containing one or more input elements, only one of which contains the editor value.\n         *\n         * For access to the input control itself (which may or may not be the same as `this.el`), see `this.input`.\n         *\n         * @type {HTMLElement}\n         * @default null\n         * @memberOf CellEditor.prototype\n         */\n        this.el = container.firstChild;\n\n        this.input = this.el;\n\n        this.errors = 0;\n\n        var self = this;\n        this.el.addEventListener('keyup', this.keyup.bind(this));\n        this.el.addEventListener('keydown', function(e) {\n            if (e.keyCode === 9) {\n                // prevent TAB from leaving input control\n                e.preventDefault();\n            }\n            grid.fireSyntheticEditorKeyDownEvent(self, e);\n        });\n        this.el.addEventListener('keypress', function(e) {\n            grid.fireSyntheticEditorKeyPressEvent(self, e);\n        });\n        this.el.addEventListener('mousedown', function(e) {\n            self.onmousedown(e);\n        });\n    },\n\n    // If you override this method, be sure to call it as a final step (or call stopPropagation yourself).\n    onmousedown: function(event) {\n        event.stopPropagation(); // Catch mousedown here before it gets to the document listener defined in Hypergrid().\n    },\n\n    localizer: Localization.prototype.null,\n\n    specialKeyups: {\n        //0x08: 'clearStopEditing', // backspace\n        0x09: 'stopEditing', // tab\n        0x0d: 'stopEditing', // return/enter\n        0x1b: 'cancelEditing' // escape\n    },\n\n    keyup: function(e) {\n        var grid = this.grid,\n            cellProps = this.event.properties,\n            feedbackCount = cellProps.feedbackCount,\n            keyChar = grid.canvas.getKeyChar(e),\n            specialKeyup,\n            stopped;\n\n        // STEP 1: Call the special key handler as needed\n        if (\n            (specialKeyup = this.specialKeyups[e.keyCode]) &&\n            (stopped = this[specialKeyup](feedbackCount))\n        ) {\n            grid.repaint();\n        }\n\n        // STEP 2: If this is a possible \"nav key\" consumable by CellSelection#handleKeyDown, try to stop editing and send it along\n        if (cellProps.mappedNavKey(keyChar, e.ctrlKey)) {\n            if (\n                !specialKeyup &&\n                // We didn't try to stop editing above so try to stop it now\n                (stopped = this.stopEditing(feedbackCount))\n            ) {\n                grid.repaint();\n            }\n\n            if (stopped) {\n                // Editing successfully stopped\n                // -> send the event down the feature chain\n                var finEvent = grid.canvas.newEvent(e, 'fin-editor-keydown', {\n                    grid: grid,\n                    alt: e.altKey,\n                    ctrl: e.ctrlKey,\n                    char: keyChar,\n                    legacyChar: e.legacyKey, // decorated by getKeyChar\n                    code: e.charCode,\n                    key: e.keyCode,\n                    meta: e.metaKey,\n                    shift: e.shiftKey,\n                    identifier: e.key,\n                    editor: this\n                });\n                grid.delegateKeyDown(finEvent);\n            }\n        }\n\n        this.grid.fireSyntheticEditorKeyUpEvent(this, e);\n\n        return stopped;\n    },\n\n    /**\n     * if true, check that the editor is in the right location\n     * @type {boolean}\n     * @default false\n     * @memberOf CellEditor.prototype\n     */\n    checkEditorPositionFlag: false,\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc This function is a callback from the fin-hypergrid.   It is called after each paint of the canvas.\n     */\n    gridRenderedNotification: function() {\n        this.checkEditor();\n    },\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc scroll values have changed, we've been notified\n     */\n    scrollValueChangedNotification: function() {\n        this.checkEditorPositionFlag = true;\n    },\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc move the editor to the current editor point\n     */\n    moveEditor: function() {\n        this.setBounds(this.event.bounds);\n    },\n\n    beginEditing: function() {\n        if (this.grid.fireRequestCellEdit(this.event, this.initialValue)) {\n            this.checkEditorPositionFlag = true;\n            this.checkEditor();\n        }\n    },\n\n    /**\n     * @summary Put the value into our editor.\n     * @desc Formats the value and displays it.\n     * The localizer's {@link localizerInterface#format|format} method will be called.\n     *\n     * Override this method if your editor has additional or alternative GUI elements.\n     *\n     * @param {object} value - The raw unformatted value from the data source that we want to edit.\n     * @memberOf CellEditor.prototype\n     */\n    setEditorValue: function(value) {\n        this.input.value = this.localizer.format(value);\n    },\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc display the editor\n     */\n    showEditor: function() {\n        this.el.style.display = 'inline';\n    },\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc hide the editor\n     */\n    hideEditor: function() {\n        this.el.style.display = 'none';\n    },\n\n    /** @summary Stops editing.\n     * @desc Before saving, validates the edited value in two phases as follows:\n     * 1. Call `validateEditorValue`. (Calls the localizer's `invalid()` function, if available.)\n     * 2. Catch any errors thrown by the {@link CellEditor#getEditorValue|getEditorValue} method.\n     *\n     * **If the edited value passes both phases of the validation:**\n     * Saves the edited value by calling the {@link CellEditor#saveEditorValue|saveEditorValue} method.\n     *\n     * **On validation failure:**\n     * 1. If `feedback` was omitted, cancels editing, discarding the edited value.\n     * 2. If `feedback` was provided, gives the user some feedback (see `feedback`, below).\n     *\n     * @param {number} [feedback] What to do on validation failure. One of:\n     * * **`undefined`** - Do not show the error effect or the end effect. Just discard the value and close the editor (as if `ESC` had been typed).\n     * * **`0`** - Just shows the error effect (see the {@link CellEditor#errorEffect|errorEffect} property).\n     * * **`1`** - Shows the error feedback effect followed by the detailed explanation.\n     * * `2` or more:\n     *   1. Shows the error feedback effect\n     *   2. On every `feedback` tries, shows the detailed explanation.\n     * * If `undefined` (omitted), simply cancels editing without saving edited value.\n     * * If 0, shows the error feedback effect (see the {@link CellEditor#errorEffect|errorEffect} property).\n     * * If > 0, shows the error feedback effect _and_ calls the {@link CellEditor#errorEffectEnd|errorEffectEnd} method) every `feedback` call(s) to `stopEditing`.\n     * @returns {boolean} Truthy means successful stop. Falsy means syntax error prevented stop. Note that editing is canceled when no feedback requested and successful stop includes (successful) cancel.\n     * @memberOf CellEditor.prototype\n     */\n    stopEditing: function(feedback) {\n        var str = this.input.value;\n\n        try {\n            var error = this.validateEditorValue(str);\n            if (!error) {\n                var value = this.getEditorValue(str);\n            }\n        } catch (err) {\n            error = err;\n        }\n\n        if (!error && this.grid.fireSyntheticEditorDataChangeEvent(this, this.initialValue, value)) {\n            try {\n                this.saveEditorValue(value);\n            } catch (err) {\n                error = err;\n            }\n        }\n\n        if (!error) {\n            this.hideEditor();\n            this.grid.cellEditor = null;\n            this.el.remove();\n        } else if (feedback >= 0) { // false when `feedback` undefined\n            this.errorEffectBegin(++this.errors % feedback === 0 && error);\n        } else { // invalid but no feedback\n            this.cancelEditing();\n        }\n\n        return !error;\n    },\n\n    /** @summary Cancels editing.\n     * @returns {boolean} Successful. (Cancel is always successful.)\n     */\n    cancelEditing: function() {\n        this.setEditorValue(this.initialValue);\n        this.hideEditor();\n        this.grid.cellEditor = null;\n        this.el.remove();\n        this.grid.takeFocus();\n\n        return true;\n    },\n\n    /**\n     * Calls the effect function indicated in the {@link module:defaults.feedbackEffect|feedbackEffect} property, which triggers a series of CSS transitions.\n     * @param {boolean|string|Error} [error] - If defined, call the {@link CellEditor#errorEffectEnd|errorEffectEnd} method at the end of the last effect transition with this error.\n     * @memberOf CellEditor.prototype\n     */\n    errorEffectBegin: function(error) {\n        if (this.effecting) {\n            return;\n        }\n\n        var spec = this.grid.properties.feedbackEffect, // spec may e a string or an object with name and options props\n            effect = effects[spec.name || spec]; // if spec is a string, spec.name will be undefined\n\n        if (effect) {\n            var options = Object.assign({}, spec.options); // if spec is a string, spec.options will be undefined\n            options.callback = this.errorEffectEnd.bind(this, error);\n            this.effecting = true;\n            effect.call(this, options);\n        }\n    },\n\n    /**\n     * This function expects to be passed an error. There is no point in calling this function if there is no error. Nevertheless, if called with a falsy `error`, returns without doing anything.\n     * @this {CellEditor}\n     * @param {boolean|string|Error} [error]\n     */\n    errorEffectEnd: function(error, options) {\n        if (error) {\n            var msg =\n                'Invalid value. To resolve, do one of the following:\\n\\n' +\n                '   * Correct the error and try again.\\n' +\n                '         - or -\\n' +\n                '   * Cancel editing by pressing the \"esc\" (escape) key.';\n\n            error = error.message || error;\n\n            if (typeof error !== 'string') {\n                error = '';\n            }\n\n            if (this.localizer.expectation) {\n                error = error ? error + '\\n' + this.localizer.expectation : this.localizer.expectation;\n            }\n\n            if (error) {\n                if (/[\\n\\r]/.test(error)) {\n                    error = '\\n' + error;\n                    error = error.replace(/[\\n\\r]+/g, '\\n\\n   * ');\n                }\n                msg += '\\n\\nAdditional information about this error: ' + error;\n            }\n\n            setTimeout(function() { // allow animation to complete\n                alert(msg); // eslint-disable-line no-alert\n            });\n        }\n        this.effecting = false;\n    },\n\n    /**\n     * @desc save the new value into the behavior (model)\n     * @returns {boolean} Data changed and pre-cell-edit event was not canceled.\n     * @memberOf CellEditor.prototype\n     */\n    saveEditorValue: function(value) {\n        var save = (\n            !(value && value === this.initialValue) && // data changed\n            this.grid.fireBeforeCellEdit(this.event.gridCell, this.initialValue, value, this) // proceed\n        );\n\n        if (save) {\n            this.event.value = value;\n            this.grid.fireAfterCellEdit(this.event.gridCell, this.initialValue, value, this);\n        }\n\n        return save;\n    },\n\n    /**\n     * @summary Extract the edited value from the editor.\n     * @desc De-format the edited string back into a primitive value.\n     *\n     * The localizer's {@link localizerInterface#parse|parse} method will be called on the text box contents.\n     *\n     * Override this method if your editor has additional or alternative GUI elements. The GUI elements will influence the primitive value, either by altering the edited string before it is parsed, or by transforming the parsed value before returning it.\n     * @param {string} str - current editors input string\n     * @returns {object} the current editor's value\n     * @throws {boolean|string|Error} Throws an error on parse failure. If the error's `message` is defined, the message will eventually be displayed (every `feedbackCount`th attempt).\n     * @memberOf CellEditor.prototype\n     */\n    getEditorValue: function(str) {\n        return this.localizer.parse(str || this.input.value);\n    },\n\n    /**\n     * If there is no validator on the localizer, returns falsy (not invalid; possibly valid).\n     * @param {string} str - current editors input string\n     * @returns {boolean|string} Truthy value means invalid. If a string, this will be an error message. If not a string, it merely indicates a generic invalid result.\n     * @throws {boolean|string|Error} May throw an error on syntax failure as an alternative to returning truthy. Define the error's `message` field as an alternative to returning string.\n     * @memberOf CellEditor.prototype\n     */\n    validateEditorValue: function(str) {\n        return this.localizer.invalid && this.localizer.invalid(str || this.input.value);\n    },\n\n    /**\n     * @summary Request focus for my input control.\n     * @desc See GRID-95 \"Scrollbar moves inward\" for issue and work-around explanation.\n     * @memberOf CellEditor.prototype\n     */\n    takeFocus: function() {\n        var el = this.el,\n            leftWas = el.style.left,\n            topWas = el.style.top;\n\n        el.style.left = el.style.top = 0; // work-around: move to upper left\n\n        var x = window.scrollX, y = window.scrollY;\n        this.input.focus();\n        window.scrollTo(x, y);\n        this.selectAll();\n\n        el.style.left = leftWas;\n        el.style.top = topWas;\n    },\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc select everything\n     */\n    selectAll: nullPattern,\n\n    /**\n     * @memberOf CellEditor.prototype\n     * @desc set the bounds of my input control\n     * @param {rectangle} rectangle - the bounds to move to\n     */\n    setBounds: function(cellBounds) {\n        var style = this.el.style;\n\n        style.left = px(cellBounds.x);\n        style.top = px(cellBounds.y);\n        style.width = px(cellBounds.width);\n        style.height = px(cellBounds.height);\n    },\n\n    /**\n     * @desc check that the editor is in the correct location, and is showing/hidden appropriately\n     * @memberOf CellEditor.prototype\n     */\n    checkEditor: function() {\n        if (this.checkEditorPositionFlag) {\n            this.checkEditorPositionFlag = false;\n            if (this.event.isCellVisible) {\n                this.setEditorValue(this.initialValue);\n                this.attachEditor();\n                this.moveEditor();\n                this.showEditor();\n                this.takeFocus();\n            } else {\n                this.hideEditor();\n            }\n        }\n    },\n\n    attachEditor: function() {\n        this.grid.div.appendChild(this.el);\n    },\n\n    template: ''\n\n});\n\nfunction nullPattern() {}\nfunction px(n) { return n + 'px'; }\n\n\nmodule.exports = CellEditor;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst DEFAULT_CONFIG = require(\"./settings.js\").default;\nconst get_config_file = require(\"./__node.js\").default;\n\nmodule.exports.get_types = function() {\n    return Object.keys(module.exports.get_config().types);\n};\n\nmodule.exports.get_type_config = function(type) {\n    const config = {};\n    if (module.exports.get_config().types[type]) {\n        Object.assign(config, module.exports.get_config().types[type]);\n    }\n    if (config.type) {\n        const props = module.exports.get_type_config(config.type);\n        Object.assign(props, config);\n        return props;\n    } else {\n        return config;\n    }\n};\n\nfunction isObject(item) {\n    return item && typeof item === \"object\" && !Array.isArray(item);\n}\n\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) Object.assign(target, {[key]: {}});\n                mergeDeep(target[key], source[key]);\n            } else {\n                Object.assign(target, {[key]: source[key]});\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n\nglobal.__PERSPECTIVE_CONFIG__ = undefined;\n\nmodule.exports.override_config = function(config) {\n    if (global.__PERSPECTIVE_CONFIG__) {\n        console.warn(\"Config already initialized!\");\n    }\n    global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, config);\n};\n\nmodule.exports.get_config = function get_config() {\n    if (!global.__PERSPECTIVE_CONFIG__) {\n        global.__PERSPECTIVE_CONFIG__ = mergeDeep(DEFAULT_CONFIG, typeof window === \"undefined\" ? get_config_file() : global.__TEMPLATE_CONFIG__ || {});\n    }\n    return global.__PERSPECTIVE_CONFIG__;\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","'use strict';\n\nfunction HypergridError(message) {\n    this.message = message;\n}\n\n// extend from `Error`\nHypergridError.prototype = Object.create(Error.prototype);\n\n// override error name displayed in console\nHypergridError.prototype.name = 'HypergridError';\n\nmodule.exports = HypergridError;\n","/* eslint-env browser */\n\n/**\n * This is a registry of `HTMLImageIcon` objects.\n *\n * Hypergrid comes with a few images (see below).\n *\n * Application developer is free to register additional image objects here (see {@link module:images.add|add}).\n * @module images\n */\n\n'use strict';\n\nvar _ = require('object-iterators');\nvar svgThemer = require('svg-themer');\n\nvar images = require('./images'); // this is the file generated by gulpfile.js (and ignored by git)\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/calendar.png\">\n * @name calendar\n * @memberOf module:images\n */\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/checked.png\">\n * @name checked\n * @memberOf module:images\n */\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/unchecked.png\">\n * @name unchecked\n * @memberOf module:images\n */\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/filter-off.png\">\n * @name filter-off\n * @memberOf module:images\n */\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/filter-on.png\">\n * @name filter-on\n * @memberOf module:images\n */\n\n/**\n * <img src=\"https://raw.githubusercontent.com/fin-hypergrid/core/master/images/up-down.png\">\n * @name up-down\n * @memberOf module:images\n */\n\n_(images).each(function(image, key) {\n    var element = new Image();\n    element.src = 'data:' + image.type + ';base64,' + image.data;\n    images[key] = element;\n});\n\n/**\n * Synonym of {@link module:images.checked|checked} (unaffected if `checked` overridden).\n * @name checkbox-on\n * @memberOf module:images\n */\nimages['checkbox-on'] = images.checked;\n\n/**\n * Synonym of {@link module:images.unchecked|unchecked} (unaffected if `unchecked` overridden).\n * @name checkbox-off\n * @memberOf module:images\n */\nimages['checkbox-off'] = images.unchecked;\n\n/**\n * @method\n * @param {string} name\n * @param {HTMLImageElement} img\n * @param {boolean} [themeable] - If truthy, the image will be themed by {@link module:images.setTheme images.setTheme}, called by {@link Hypergrid.applyTheme}.\n * If falsy, the image won't be themed until `images[name].themeable` is set to `true`.\n * In any case the remaining parameters are processed.\n * @param {function} [setSvgProps=svgThemer.setSvgProps] - Optional custom theming code for this image and the rules implied by `styles`. _If omitted, `styles` is promoted 2nd parameter position._\n * @param {boolean|string[]} [styles] - Optional list style names with which to create CSS rules.\n * * If falsy (or omitted), no rules are created.\n * * Else if truthy but not an array, create a single rule:\n * ```css\n * `.hypergrid-background-image-name { background-image: url(...) }`\n * where _name_ is the value of the `name` parameter.\n * * Else if an array, create a CSS rule for each style named therein.\n *\n * For each rule thus created:\n * * Inserted into `style#injected-stylesheet-grid`.\n * * Selector is `.hypergrid-style-name` (where `style` is element value and `name` is image name).\n * (If a rule with that selector already exists, it is replaced.)\n * * Contains the named style with a value of `url(...)` where `...` is the image data.\n * Possible styles must be one of those listed in {*link https://github.com/joneit/svg-themer/blob/master/README.md#cssimagepropertynames svgThemer.cssImagePropertyNames} (which you can extend if needed).\n * * Will be automatically themed when the grid is themed (which is the whole point).\n *\n * @see {@link https://github.com/joneit/svg-themer}\n * @memberOf module:images\n */\nfunction add(name, img, themeable, setSvgProps, styles) {\n    if (/^data:image\\/svg\\+xml|\\.svg/.test(img.src)) {\n        img.themeable = !!themeable;\n        if (typeof setSvgProps === 'object') {\n            styles = setSvgProps;\n            setSvgProps = undefined;\n        }\n        if (setSvgProps) {\n            img.setSvgProps = setSvgProps;\n        }\n        if (styles) {\n            img.themeableRules = createThemeableRules(name, img, setSvgProps, styles);\n        }\n    }\n    return (images[name] = img);\n}\n\nfunction createThemeableRules(key, img, setSvgProps, styles) {\n    // find or create stylesheet as needed\n    var styleEl = document.querySelector('style#injected-stylesheet-themeables');\n    if (!styleEl) {\n        styleEl = document.createElement('style');\n        styleEl.id = 'injected-stylesheet-themeables';\n        document.head.appendChild(styleEl);\n    }\n    var sheet = styleEl.sheet;\n\n    return (styles.length ? styles : ['background-image']).reduce(function(rules, styleName) {\n        var selectorText = '.hypergrid-' + styleName + '-' + key;\n\n        // find and delete existing rule, if any\n        var ruleIndex = Array.prototype.findIndex.call(sheet.cssRules, function(rule) {\n            return rule.selectorText === selectorText;\n        });\n        if (ruleIndex !== -1) {\n            sheet.deleteRule(ruleIndex);\n        }\n\n        // create and insert new rule consisting of selector + style \"collection\"\n        var ruleStyles = {};\n\n        // add image data style\n        ruleStyles[styleName] = 'url(' + img.src + ')';\n\n        // add dimensions if known\n        if (img.width) { ruleStyles.width = img.width + 'px'; }\n        if (img.height) { ruleStyles.height = img.height + 'px'; }\n\n        // combine the above styles into a semi-colon-separated \"collection\"\n        var styleCollection = Object.keys(ruleStyles).map(function(key) {\n            return key + ':' + ruleStyles[key];\n        }).join(';');\n\n        var ruleText = '{' + styleCollection + '}';\n        sheet.insertRule(selectorText + ruleText);\n\n        var themeableRule = {\n            rule: sheet.cssRules[0]\n        };\n        if (setSvgProps) {\n            themeableRule.setSvgProps = setSvgProps;\n        }\n        rules.push(themeableRule);\n        return rules;\n    }, []);\n}\n\n/**\n * @param {object} theme\n * @memberOf module:images\n */\nfunction setTheme(theme) {\n    Object.keys(images).forEach(function(name) {\n        var img = images[name];\n        if (img.themeable) {\n            svgThemer.setImgSvgProps.call(img, theme, img.setSvgProps);\n        }\n        if (img.themeableRules) {\n            img.themeableRules.forEach(function(themeable) {\n                var selectorText = themeable.rule.selectorText;\n                // extract style name using list of possible names\n                var regex = new RegExp('^\\.hypergrid-(' + svgThemer.cssImagePropertyNames.join('|') + ')-.*$');\n                var styleName = selectorText.replace(regex, '$1');\n                svgThemer.setRuleSvgProps.call(themeable.rule, theme, img.setSvgProps, styleName);\n            });\n        }\n    });\n}\n\n/**\n * Convenience function.\n * @param {boolean} state\n * @returns {HTMLImageElement} {@link module:images.checked|checked} when `state` is truthy or {@link module:images.unchecked|unchecked} otherwise.\n * @memberOf module:images\n */\nfunction checkbox(state) {\n    return images[state ? 'checked' : 'unchecked'];\n}\n\n/**\n * Convenience function.\n * @param {boolean} state\n * @returns {HTMLImageElement} {@link module:images.filter-off|filter-off} when `state` is truthy or {@link module:images.filter-on|filter-on} otherwise.\n * @memberOf module:images\n */\nfunction filter(state) {\n    return images[state ? 'filter-on' : 'filter-off'];\n}\n\n// add methods as non-enumerable members so member images can be enumerated\nObject.defineProperties(images, {\n    add: { value: add },\n    setTheme: { value: setTheme },\n    checkbox: { value: checkbox },\n    filter: { value: filter }\n});\n\n\nmodule.exports = images;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","'use strict';\n\n/** @module overrider */\n\n/**\n * Mixes members of all `sources` into `target`, handling getters and setters properly.\n *\n * Any number of `sources` objects may be given and each is copied in turn.\n *\n * @example\n * var overrider = require('overrider');\n * var target = { a: 1 }, source1 = { b: 2 }, source2 = { c: 3 };\n * target === overrider(target, source1, source2); // true\n * // target object now has a, b, and c; source objects untouched\n *\n * @param {object} object - The target object to receive sources.\n * @param {...object} [sources] - Object(s) containing members to copy to `target`. (Omitting is a no-op.)\n * @returns {object} The target object (`target`)\n */\nfunction overrider(target, sources) { // eslint-disable-line no-unused-vars\n    for (var i = 1; i < arguments.length; ++i) {\n        mixIn.call(target, arguments[i]);\n    }\n\n    return target;\n}\n\n/**\n * Mix `this` members into `target`.\n *\n * @example\n * // A. Simple usage (using .call):\n * var mixInTo = require('overrider').mixInTo;\n * var target = { a: 1 }, source = { b: 2 };\n * target === overrider.mixInTo.call(source, target); // true\n * // target object now has both a and b; source object untouched\n *\n * @example\n * // B. Semantic usage (when the source hosts the method):\n * var mixInTo = require('overrider').mixInTo;\n * var target = { a: 1 }, source = { b: 2, mixInTo: mixInTo };\n * target === source.mixInTo(target); // true\n * // target object now has both a and b; source object untouched\n *\n * @this {object} Target.\n * @param target\n * @returns {object} The target object (`target`)\n * @memberOf module:overrider\n */\nfunction mixInTo(target) {\n    var descriptor;\n    for (var key in this) {\n        if ((descriptor = Object.getOwnPropertyDescriptor(this, key))) {\n            Object.defineProperty(target, key, descriptor);\n        }\n    }\n    return target;\n}\n\n/**\n * Mix `source` members into `this`.\n *\n * @example\n * // A. Simple usage (using .call):\n * var mixIn = require('overrider').mixIn;\n * var target = { a: 1 }, source = { b: 2 };\n * target === overrider.mixIn.call(target, source) // true\n * // target object now has both a and b; source object untouched\n *\n * @example\n * // B. Semantic usage (when the target hosts the method):\n * var mixIn = require('overrider').mixIn;\n * var target = { a: 1, mixIn: mixIn }, source = { b: 2 };\n * target === target.mixIn(source) // true\n * // target now has both a and b (and mixIn); source untouched\n *\n * @param source\n * @returns {object} The target object (`this`)\n * @memberOf overrider\n * @memberOf module:overrider\n */\nfunction mixIn(source) {\n    var descriptor;\n    for (var key in source) {\n        if ((descriptor = Object.getOwnPropertyDescriptor(source, key))) {\n            Object.defineProperty(this, key, descriptor);\n        }\n    }\n    return this;\n}\n\noverrider.mixInTo = mixInTo;\noverrider.mixIn = mixIn;\n\nmodule.exports = overrider;\n","/* object-iterators.js - Mini Underscore library\n * by Jonathan Eiten\n *\n * The methods below operate on objects (but not arrays) similarly\n * to Underscore (http://underscorejs.org/#collections).\n *\n * For more information:\n * https://github.com/joneit/object-iterators\n */\n\n'use strict';\n\n/**\n * @constructor\n * @summary Wrap an object for one method call.\n * @Desc Note that the `new` keyword is not necessary.\n * @param {object|null|undefined} object - `null` or `undefined` is treated as an empty plain object.\n * @return {Wrapper} The wrapped object.\n */\nfunction Wrapper(object) {\n    if (object instanceof Wrapper) {\n        return object;\n    }\n    if (!(this instanceof Wrapper)) {\n        return new Wrapper(object);\n    }\n    this.originalValue = object;\n    this.o = object || {};\n}\n\n/**\n * @name Wrapper.chain\n * @summary Wrap an object for a chain of method calls.\n * @Desc Calls the constructor `Wrapper()` and modifies the wrapper for chaining.\n * @param {object} object\n * @return {Wrapper} The wrapped object.\n */\nWrapper.chain = function (object) {\n    var wrapped = Wrapper(object); // eslint-disable-line new-cap\n    wrapped.chaining = true;\n    return wrapped;\n};\n\nWrapper.prototype = {\n    /**\n     * Unwrap an object wrapped with {@link Wrapper.chain|Wrapper.chain()}.\n     * @return {object|null|undefined} The value originally wrapped by the constructor.\n     * @memberOf Wrapper.prototype\n     */\n    value: function () {\n        return this.originalValue;\n    },\n\n    /**\n     * @desc Mimics Underscore's [each](http://underscorejs.org/#each) method: Iterate over the members of the wrapped object, calling `iteratee()` with each.\n     * @param {function} iteratee - For each member of the wrapped object, this function is called with three arguments: `(value, key, object)`. The return value of this function is undefined; an `.each` loop cannot be broken out of (use {@link Wrapper#find|.find} instead).\n     * @param {object} [context] - If given, `iteratee` is bound to this object. In other words, this object becomes the `this` value in the calls to `iteratee`. (Otherwise, the `this` value will be the unwrapped object.)\n     * @return {Wrapper} The wrapped object for chaining.\n     * @memberOf Wrapper.prototype\n     */\n    each: function (iteratee, context) {\n        var o = this.o;\n        Object.keys(o).forEach(function (key) {\n            iteratee.call(this, o[key], key, o);\n        }, context || o);\n        return this;\n    },\n\n    /**\n     * @desc Mimics Underscore's [find](http://underscorejs.org/#find) method: Look through each member of the wrapped object, returning the first one that passes a truth test (`predicate`), or `undefined` if no value passes the test. The function returns the value of the first acceptable member, and doesn't necessarily traverse the entire object.\n     * @param {function} predicate - For each member of the wrapped object, this function is called with three arguments: `(value, key, object)`. The return value of this function should be truthy if the member passes the test and falsy otherwise.\n     * @param {object} [context] - If given, `predicate` is bound to this object. In other words, this object becomes the `this` value in the calls to `predicate`. (Otherwise, the `this` value will be the unwrapped object.)\n     * @return {*} The found property's value, or undefined if not found.\n     * @memberOf Wrapper.prototype\n     */\n    find: function (predicate, context) {\n        var o = this.o;\n        var result;\n        if (o) {\n            result = Object.keys(o).find(function (key) {\n                return predicate.call(this, o[key], key, o);\n            }, context || o);\n            if (result !== undefined) {\n                result = o[result];\n            }\n        }\n        return result;\n    },\n\n    /**\n     * @desc Mimics Underscore's [filter](http://underscorejs.org/#filter) method: Look through each member of the wrapped object, returning the values of all members that pass a truth test (`predicate`), or empty array if no value passes the test. The function always traverses the entire object.\n     * @param {function} predicate - For each member of the wrapped object, this function is called with three arguments: `(value, key, object)`. The return value of this function should be truthy if the member passes the test and falsy otherwise.\n     * @param {object} [context] - If given, `predicate` is bound to this object. In other words, this object becomes the `this` value in the calls to `predicate`. (Otherwise, the `this` value will be the unwrapped object.)\n     * @return {*} An array containing the filtered values.\n     * @memberOf Wrapper.prototype\n     */\n    filter: function (predicate, context) {\n        var o = this.o;\n        var result = [];\n        if (o) {\n            Object.keys(o).forEach(function (key) {\n                if (predicate.call(this, o[key], key, o)) {\n                    result.push(o[key]);\n                }\n            }, context || o);\n        }\n        return result;\n    },\n\n    /**\n     * @desc Mimics Underscore's [map](http://underscorejs.org/#map) method: Produces a new array of values by mapping each value in list through a transformation function (`iteratee`). The function always traverses the entire object.\n     * @param {function} iteratee - For each member of the wrapped object, this function is called with three arguments: `(value, key, object)`. The return value of this function is concatenated to the end of the new array.\n     * @param {object} [context] - If given, `iteratee` is bound to this object. In other words, this object becomes the `this` value in the calls to `predicate`. (Otherwise, the `this` value will be the unwrapped object.)\n     * @return {*} An array containing the filtered values.\n     * @memberOf Wrapper.prototype\n     */\n    map: function (iteratee, context) {\n        var o = this.o;\n        var result = [];\n        if (o) {\n            Object.keys(o).forEach(function (key) {\n                result.push(iteratee.call(this, o[key], key, o));\n            }, context || o);\n        }\n        return result;\n    },\n\n    /**\n     * @desc Mimics Underscore's [reduce](http://underscorejs.org/#reduce) method: Boil down the values of all the members of the wrapped object into a single value. `memo` is the initial state of the reduction, and each successive step of it should be returned by `iteratee()`.\n     * @param {function} iteratee - For each member of the wrapped object, this function is called with four arguments: `(memo, value, key, object)`. The return value of this function becomes the new value of `memo` for the next iteration.\n     * @param {*} [memo] - If no memo is passed to the initial invocation of reduce, the iteratee is not invoked on the first element of the list. The first element is instead passed as the memo in the invocation of the iteratee on the next element in the list.\n     * @param {object} [context] - If given, `iteratee` is bound to this object. In other words, this object becomes the `this` value in the calls to `iteratee`. (Otherwise, the `this` value will be the unwrapped object.)\n     * @return {*} The value of `memo` \"reduced\" as per `iteratee`.\n     * @memberOf Wrapper.prototype\n     */\n    reduce: function (iteratee, memo, context) {\n        var o = this.o;\n        if (o) {\n            Object.keys(o).forEach(function (key, idx) {\n                memo = (!idx && memo === undefined) ? o[key] : iteratee(memo, o[key], key, o);\n            }, context || o);\n        }\n        return memo;\n    },\n\n    /**\n     * @desc Mimics Underscore's [extend](http://underscorejs.org/#extend) method: Copy all of the properties in each of the `source` object parameter(s) over to the (wrapped) destination object (thus mutating it). It's in-order, so the properties of the last `source` object will override properties with the same name in previous arguments or in the destination object.\n     * > This method copies own members as well as members inherited from prototype chain.\n     * @param {...object|null|undefined} source - Values of `null` or `undefined` are treated as empty plain objects.\n     * @return {Wrapper|object} The wrapped destination object if chaining is in effect; otherwise the unwrapped destination object.\n     * @memberOf Wrapper.prototype\n     */\n    extend: function (source) {\n        var o = this.o;\n        Array.prototype.slice.call(arguments).forEach(function (object) {\n            if (object) {\n                for (var key in object) {\n                    o[key] = object[key];\n                }\n            }\n        });\n        return this.chaining ? this : o;\n    },\n\n    /**\n     * @desc Mimics Underscore's [extendOwn](http://underscorejs.org/#extendOwn) method: Like {@link Wrapper#extend|extend}, but only copies its \"own\" properties over to the destination object.\n     * @param {...object|null|undefined} source - Values of `null` or `undefined` are treated as empty plain objects.\n     * @return {Wrapper|object} The wrapped destination object if chaining is in effect; otherwise the unwrapped destination object.\n     * @memberOf Wrapper.prototype\n     */\n    extendOwn: function (source) {\n        var o = this.o;\n        Array.prototype.slice.call(arguments).forEach(function (object) {\n            Wrapper(object).each(function (val, key) { // eslint-disable-line new-cap\n                o[key] = val;\n            });\n        });\n        return this.chaining ? this : o;\n    }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\nif (!Array.prototype.find) {\n    Array.prototype.find = function (predicate) { // eslint-disable-line no-extend-native\n        if (this === null) {\n            throw new TypeError('Array.prototype.find called on null or undefined');\n        }\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function');\n        }\n        var list = Object(this);\n        var length = list.length >>> 0;\n        var thisArg = arguments[1];\n        var value;\n\n        for (var i = 0; i < length; i++) {\n            value = list[i];\n            if (predicate.call(thisArg, value, i, list)) {\n                return value;\n            }\n        }\n        return undefined;\n    };\n}\n\nmodule.exports = Wrapper;\n","'use strict';\n\nvar transformers = require('./transformers');\n\nvar REGEXP_INTEGER = /^\\d+$/;\n\nvar optionNames = ['transformations', 'propPath', 'dictPath', 'force'];\n\n/**\n * @classdesc This object holds a list of transformations used by {@link Synonomous.prototype.getSynonyms} and {@link Synonomous.prototype.decorateList}.\n *\n * Additional transformer functions may be mixed into the prototype (or added to an instance).\n *\n * @param {object} [options]\n * @param {string[]} [options.transformations] - If omitted, {@link Synonomous.prototype.transformations} serves as a default.\n * @param {string|string[]} [options.propPath] - If omitted, {@link Synonomous.prototype.propPath} serves as a default.\n * @param {string|string[]} [options.dictPath] - If omitted, {@link Synonomous.prototype.dictPath} serves as a default.\n * @param {boolean} [options.force=false] - If truthy, new property values override existing values; else new values are discarded.\n * @constructor\n */\nfunction Synonomous(options) {\n    if (options) {\n        optionNames.forEach(function(key) {\n            if (options[key]) {\n                this[key] = options[key];\n            }\n        }, this);\n    }\n}\n\nSynonomous.prototype = {\n    constructor: Synonomous,\n\n    /**\n     * @summary Default list of active registered transformations by  _or_ an object whose keys name the transformations.\n     * @desc Used by {@link Synonomous.prototype.getSynonyms} and {@link Synonomous.prototype.decorateList}.\n     * When an object, the former just uses the keys, ignoring the values, while the latter uses both the keys and the values.\n     *\n     * An override may be defined on the instance, easily done by supplying as a constructor option.\n     *\n     * This is a global default; mutate only if you want to change the default for all your instances.\n     * @see {@link Synonomous.prototype.verbatim}\n     * @see {@link Synonomous.prototype.toCamelCase}\n     * @default\n     * @type {string[]|object}\n     * @memberOf Synonomous#\n     */\n    transformations: [\n        'verbatim',\n        'toCamelCase'\n    ],\n\n    /**\n     * @summary Drill down path for name to make synonyms of.\n     * @desc Used by {@link Synonomous.prototype.decorateList}.\n     *\n     * This is the default property dot-path within each list element to find the value to make synonyms of.\n     * If undefined (and no temporary override is given in the call to `decorateList`),\n     * the element value itself (coerced to a string) is used to make the synonyms.\n     *\n     * The setter accepts any falsy value to undefine; or a string of dot-separated parts; or an array of parts.\n     *\n     * The getter always returns an array with a `toString` override that returns dot-separated string when coerced to a string.\n     *\n     * An override may be defined on the instance, easily done by supplying as a constructor option.\n     *\n     * The global default for all instances can be reset using the setter with the prototype as the execution context,\n     * _e.g._ `Synonomous.prototype.propPath = newValue;`.\n     *\n     * @type {undefined|string|string[]}\n     * @memberOf Synonomous#\n     */\n    set propPath(crumbs) {\n        this._propPath = newBreadcrumbs(crumbs);\n    },\n    get propPath() {\n        return this._propPath;\n    },\n    _propPath: ['name'], // default for all instances\n\n    /**\n     * @summary Default path to property to decorate; or undefined to decorate the object itself.\n     * @desc Used by {@link Synonomous.prototype.decorate} and {@link Synonomous.prototype.decorateList}.\n     *\n     * The setter accepts any falsy value to undefine; or a string of dot-separated parts; or an array of parts.\n     *\n     * The getter always returns an array with a `toString` override that returns dot-separated string when coerced to a string.\n     *\n     * If undefined, decorations are placed in `list[this.dictPath[0]][this.dictPath[1]][etc]`; else decorations are placed directly on `list` itself.\n     *\n     * An override may be defined on the instance, easily done by supplying to as a constructor option.\n     *\n     * The global default for all instances can be reset using the setter with the prototype as the execution context,\n     * _e.g._ `Synonomous.prototype.dictPath = newValue;`.\n     *\n     * @type {undefined|string|string[]}\n     * @memberOf Synonomous#\n     */\n    set dictPath(crumbs) {\n        this._dictPath = newBreadcrumbs(crumbs);\n    },\n    get dictPath() {\n        return this._dictPath;\n    },\n    _dictPath: [], // default for all instances, settable by Synonomous.prototype.dictPath setter\n\n    /**\n     * If `name` is a string and non-blank, returns an array containing unique non-blank synonyms of `name` generated by the transformer functions named in `this.transformations`.\n     * @param {string} name - String to make synonyms of.\n     * @parma {string[]|object} transformations - When provided, temporarily overrides `this.transformations`.\n     * @memberOf Synonomous#\n     */\n    getSynonyms: function(name, transformations) {\n        var synonyms = [];\n        if (typeof name === 'string' && name) {\n            transformations = transformations || this.transformations;\n            if (!Array.isArray(transformations)) {\n                transformations = Object.keys(transformations);\n            }\n            transformations.forEach(function(key) {\n                if (typeof transformers[key] !== 'function') {\n                    throw new ReferenceError('Unknown transformer \"' + key + '\"');\n                }\n                var synonym = transformers[key](name);\n                if (synonym !== '' && !(synonym in synonyms)) {\n                    synonyms.push(synonym);\n                }\n            });\n        }\n        return synonyms;\n    },\n\n    /**\n     * Decorate an object `obj` with properties named in `propNames` all referencing `item`.\n     * @param {object} obj - The object to decorate. If `this.dictPath` is defined, then decorate `obj[this.dictPath]` instead (created as needed).\n     *\n     * @param {string[]} propNames\n     * @param item\n     * @returns {object} `obj`, now with additional properties (possibly)\n     */\n    decorate: function(obj, propNames, item) {\n        var drilldownContext = drilldown(obj, this.dictPath),\n            decoratingObjectItself = drilldownContext === obj,\n            force = this.force;\n\n        propNames.forEach(function(propName) {\n            if (\n                !(decoratingObjectItself && REGEXP_INTEGER.test(propName)) &&\n                (force || !(propName in drilldownContext))\n            ) {\n                drilldownContext[propName] = item;\n            }\n        });\n\n        return obj;\n    },\n\n    /**\n     * @summary Add dictionary synonyms to an array.\n     *\n     * @desc Adds synonyms for a single element (`index`) or the entire array, based on a given property of each element (`propPath`) or the element itself.\n     *\n     * That is, each element is either itself converted to a string; or is an object with a property named by following `propPath` which is converted to a string.\n     *\n     * For each element, all transformers named in `this.transformations` are run on that string.\n     * * _When `this.transformations` is an array:_\n     * **Create dictionary entries (synonyms) for the element.**\n     * Specifically: All the resulting unique non-blank \"synonyms\" are added as properties to the array with the value of the property being a reference to the element (if it was an object) or a copy of the element (if it was a string), subject to the following rules:\n     *    1. Duplicate synonyms are not added (unless `this.force` is truthy).\n     *    2. Blank synonyms are not added.\n     *    3. Integer synonyms are not added because they are indistinguishable from and may clash with array indexes.\n     * * _When `this.transformations` is an non-array object:_\n     * **Create a new property inside the element for each transformation.**\n     * Specifically: The keys of `this.transformations` name the transformers. The values are dot-paths (dot-separated-strings or arrays) to properties inside each element, set to the string returned by the transformer named by the key.\n     *\n     * @param {number} [index] - Index of element of `list` to add synonyms for. If omitted:\n     * 1. Adds synonyms for all elements of `list`.\n     * 2. `list` and `propPath` are promoted to the 1st and 2nd parameter positions, respectively.\n     * @param {(string|Object.<string, string>)[]} list - Array whose element(s) to make synonyms of _and_ the object to decorate. If `this.dictPath` is defined, then decorate `list[this.dictPath]` instead (created as needed).\n     * @param {string} [propPath=this.propPath] - Name of the property in each element of `list` to make synonyms of. If defined _and_ list element is an object, adds synonyms of `list[propPath]` as string; else adds synonyms of the list element itself as string.\n     * @returns {Array} `list`\n     * @memberOf Synonomous#\n     */\n    decorateList: function(index, list, propPath) {\n        var elements;\n        if (typeof index === 'number') {\n            elements = [list[index]];\n        } else {\n            // promote args\n            list = elements = arguments[0];\n            propPath = arguments[1];\n        }\n        propPath = propPath ? newBreadcrumbs(propPath) : this.propPath;\n        elements.forEach(function(item) {\n            var value = propPath !== undefined && typeof item === 'object' ? drilldown(item, propPath) : item;\n            if (Array.isArray(this.transformations)) {\n                var synonyms = this.getSynonyms(value);\n                this.decorate(list, synonyms, item);\n            } else {\n                Object.keys(this.transformations).forEach(injectTransformedValueIntoItem.bind(this, item, value));\n            }\n        }, this);\n        return list;\n    }\n};\n\n\n// a.k.a.'s:\nSynonomous.prototype.decorateObject = Synonomous.prototype.decorate;\nSynonomous.prototype.decorateArray = Synonomous.prototype.decorateList;\n\n\nfunction drilldown(collection, breadcrumbs) {\n    return breadcrumbs.reduce(function(result, crumb) {\n        return result[crumb] || (result[crumb] = Object.create(null));\n    }, collection);\n}\n\nfunction newBreadcrumbs(crumbs) {\n    if (!crumbs) {\n        crumbs = [];\n    } else if (Array.isArray(crumbs)) {\n        crumbs = crumbs.slice();\n    } else {\n        crumbs = (crumbs + '').split('.');\n    }\n\n    crumbs.toString = crumbsToString;\n\n    return crumbs;\n}\n\n/**\n * @this {Array}\n * @returns {string}\n */\nfunction crumbsToString() {\n    return this.join('.');\n}\n\nfunction injectTransformedValueIntoItem(item, value, transformation) {\n    var transformer = transformers[transformation],\n        path = this.transformations[transformation],\n        pathList = Array.isArray(path) ? path.slice() : path.split('.'),\n        propName = pathList.splice(pathList.length - 1, 1)[0],\n        drillDownContext = drilldown(item, pathList);\n\n    if (this.force || !(propName in drillDownContext)) {\n        drillDownContext[propName] = transformer(value);\n    }\n}\n\n\nmodule.exports = Synonomous;\n","'use strict';\n\nvar Base = require('../Base');\n\n/**\n * @class\n */\nvar Registry = Base.extend('Registry', {\n    initialize: function() {\n        this.items = Object.create(null);\n    },\n\n    /**\n     * @summary Register an item and return it.\n     * @desc Adds an item to the registry using the provided name (or the class name), converted to all lower case.\n     * @param {string} [name] - Case-insensitive item key. If not given, fallsback to `item.prototype.$$CLASS_NAME` or `item.prototype.name` or `item.name`.\n     * @param [item] - If unregistered or omitted, nothing is added and method returns `undefined`.\n     *\n     * > Note: `$$CLASS_NAME` is normally set by providing a string as the (optional) first parameter (`alias`) in your {@link https://www.npmjs.com/package/extend-me|extend} call.\n     *\n     * @returns Newly registered item or `undefined` if unregistered.\n     *\n     * @memberOf Registry#\n     */\n    add: function(name, item) {\n        if (arguments.length === 1) {\n            item = name;\n            name = undefined;\n        }\n\n        if (!item) {\n            return;\n        }\n\n        // getClassName defined if new item derived from extend-me\n        name = name || item.getClassName && item.getClassName();\n\n        if (!name) {\n            throw new this.HypergridError('Cannot register ' + this.friendlyName() + ' without a name.');\n        }\n\n        this.items[name] = item;\n\n        // update existing keys that differ only in case\n        name = name.toLowerCase();\n        Object.keys(this.items)\n            .filter(function(key) { return key.toLowerCase() === name; })\n            .forEach(function(key) { this.items[key] = item; }, this);\n\n        return item;\n    },\n\n    /**\n     * @summary Register a synonym for an existing item.\n     * @param {string} synonymName\n     * @param {string} existingName\n     * @returns {function|Constructor} The previously registered item this new synonym points to.\n     * @memberOf Registry#\n     */\n    addSynonym: function(synonymName, existingName) {\n        return (this.items[synonymName] = this.items[existingName]);\n    },\n\n    /**\n     * Create a new item extended from base class. For formal parameters, see {@link Registry#add add}.\n     * @memberOf Registry#\n     */\n    make: function(name, prototype) {\n        var last = arguments.length - 1;\n        arguments[last] = this.BaseClass.extend(arguments[last]);\n        this.add.apply(this, arguments);\n    },\n\n    /**\n     * Fetch a registered item.\n     * @param {string} [name]\n     * @returns {*|undefined} A registered item or `undefined` if unregistered.\n     * @memberOf Registry#\n     */\n    get: function(name) {\n        if (!name) {\n            return;\n        }\n\n        var result = this.items[name]; // for performance reasons, do not convert to lower case\n\n        if (!result) {\n            var lowerName = name.toLowerCase(); // name may differ in case only\n            var foundName = Object.keys(this.items).find(function(key) { return lowerName === key.toLowerCase(); });\n\n            result = this.items[foundName];\n\n            if (result) {\n                // Register name as a synonym for the found name for faster access next\n                // time without having to convert to lower case on every get.\n                this.addSynonym(name, foundName);\n            } else {\n                throw new this.HypergridError('Expected \"' + name + '\" to be a case-insensitive match for a registered ' + this.friendlyName() + '.');\n            }\n        }\n\n        return result;\n    },\n\n    friendlyName: function() {\n        if (this.BaseClass) {\n            var name = this.BaseClass.getClassName();\n            name = name && name.replace(/([A-Z])/g, ' $1').trim().toLowerCase();\n        } else {\n            name = singularOf(this.getClassName()).toLowerCase();\n        }\n        name = name || 'item';\n        return indefArtOf(name) + ' ' + name;\n    }\n});\n\nvar endings = [\n    { plural: /ies$/, singular: 'y' },\n    { plural: /s$/, singular: '' }\n];\n\nfunction singularOf(name) {\n    endings.find(function(ending) {\n        if (ending.plural.test(name)) {\n            name = name.replace(ending.plural, ending.singular);\n            return true;\n        }\n    });\n    return name;\n}\n\nfunction indefArtOf(name) {\n    return /^[aeiou]/.test(name) ? 'an' : 'a';\n}\n\n\nmodule.exports = Registry;\n","'use strict';\n\n/**\n * @classdesc Concatenated data model base class.\n * @param {Datasaur} [next] - Omit for origin (actual data source). Otherwise, point to source you are transforming.\n * @param {object} [options] - Not used here at this time. Define properties as needed for custom datasaurs.\n */\nvar DatasaurBase = require('extend-me').Base.extend('DatasaurBase', {\n    isNullObject: true,\n\n    drillDownCharMap: {\n        true: '\\u25bc', // BLACK DOWN-POINTING TRIANGLE aka ''\n        false: '\\u25b6', // BLACK RIGHT-POINTING TRIANGLE aka ''\n        undefined: '', // leaf rows have no control glyph\n        null: '   ' // indent\n    },\n\n    DataError: DataError,\n\n    initialize: function(next, options) {\n        if (next) {\n            this.handlers = next.handlers;\n            this.next = next;\n            while (next) {\n                this.source = next;\n                next = next.next;\n            }\n        } else {\n            this.handlers = [];\n            this.source = this;\n        }\n\n        this.install(Object.getPrototypeOf(this));\n    },\n\n    /**\n     * @implements dataModelAPI#install\n     * @see {@link https://fin-hypergrid.github.io/core/doc/dataModelAPI.html#install|install}\n     */\n    install: function(api, options) {\n        options = options || {};\n\n        var dataModel = this,\n            keys = getFilteredKeys(api),\n            injectable = options.inject && !Array.isArray(api);\n\n        keys.forEach(function(key) {\n            if (injectable) {\n                if (!findMethod(dataModel, key, options.force)) {\n                    this.source[key] = api[key];\n                }\n            }\n\n            if (!DatasaurBase.prototype[key]) {\n                DatasaurBase.prototype[key] = function() {\n                    if (this.next) {\n                        return this.next[key].apply(this.next, arguments);\n                    }\n                };\n            }\n        }, this);\n    },\n\n    dispatchEvent: function(nameOrEvent) {\n        this.handlers.forEach(function(handler) {\n            handler.call(this, nameOrEvent);\n        }, this);\n    },\n\n    addListener: function(handler) {\n        if (this.handlers.indexOf(handler) < 0) {\n            this.handlers.push(handler);\n        }\n    },\n\n    removeListener: function(handler) {\n        var index = this.handlers.indexOf(handler);\n        if (index >= 0) {\n            delete this.handlers[index];\n        }\n    },\n\n    removeAllListeners: function() {\n        this.handlers.length = 0;\n    },\n\n\n    // DEBUGGING AIDS\n\n    dump: function(max) {\n        max = Math.min(this.getRowCount(), max || Math.max(100, this.getRowCount()));\n        var data = [];\n        var schema = this.getSchema();\n        var fields = schema ? schema.map(function(cs) { return cs.name; }) : this.getHeaders();\n        var cCount = this.getColumnCount();\n        var viewMakesSense = this.viewMakesSense;\n        for (var r = 0; r < max; r++) {\n            var row = {};\n            for (var c = 0; c < cCount; c++) {\n                var val = this.getValue(c, r);\n                if (c === 0 && viewMakesSense) {\n                    val = this.fixIndentForTableDisplay(val);\n                }\n                row[fields[c]] = val;\n            }\n            data[r] = row;\n        }\n        console.table(data);\n    }\n});\n\n/**\n * Searches linked list of objects for implementation of property `key` anywhere on their prototype chain.\n * The search excludes members of `DatasaurBase.prototype` (previously installed forwarding catchers).\n * @param {object} transformer - Data model transformer list, linked backwards one to the previous one by `next` property.\n * The first transformer, the actual data source, has null `next`, meaning start-of-list.\n * @param {string} key - Property to search for.\n * @param {boolean} [remove] - Delete all implementations along prototype chains of all transformers and return falsy.\n * @returns {undefined|function} - Found method implementation or `undefined` if not found.\n */\nfunction findMethod(transformer, key, remove) {\n    do {\n        if (transformer[key]) {\n            if (remove) {\n                for (var link = transformer; link && link !== Object.prototype; link = Object.getPrototypeOf(link)) {\n                    delete link[key];\n                }\n            } else if (transformer[key] !== DatasaurBase.prototype[key]) {\n                return transformer[key];\n            }\n        }\n        transformer = transformer.next;\n    } while (transformer);\n}\n\nvar blacklistAlways = ['constructor', 'initialize', '!keys', '!!keys'];\n\n/**\n * The following keys (array elements or object keys) are filtered out:\n * * Defined as something other than a function, including an accessor (getter and/or setter)\n * * Keys missing from whitelist (not listed in string array `api['!!keys']`, when defined)\n * * Keys blacklisted (listed in string array `api['!keys']` or `blacklistAlways`)\n * @param {string[]|object} api\n * @returns {string[]}\n */\nfunction getFilteredKeys(api) {\n    var whitelist = api.hasOwnProperty('!!keys') && api['!!keys'],\n        blacklist = blacklistAlways.concat(api.hasOwnProperty('!keys') && api['!keys'] || []),\n        keys;\n\n    if (Array.isArray(api)) {\n        keys = api;\n    } else {\n        keys = Object.keys(api).filter(function(key) {\n            return typeof Object.getOwnPropertyDescriptor(api, key).value === 'function';\n        });\n    }\n\n    return keys.filter(function(key) {\n        return !(\n            whitelist && whitelist.indexOf(key) < 0 ||\n            blacklist.indexOf(key) >= 0\n        );\n    });\n}\n\n\n// DataError\n\nfunction DataError(message) {\n    this.message = message;\n}\n\n// extend from `Error'\nDataError.prototype = Object.create(Error.prototype);\n\n// override error name displayed in console\nDataError.prototype.name = 'DataError';\n\n\nmodule.exports = DatasaurBase;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","module.exports = false;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = {};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","'use strict';\n\nvar CellEditor = require('./CellEditor');\nvar Localization = require('../lib/Localization');\n\n\n/**\n * As of spring 2016:\n * Functions well in Chrome, Safari, Firefox, and Internet Explorer.\n * @constructor\n * @extends CellEditor\n */\nvar Textfield = CellEditor.extend('Textfield', {\n\n    template: '<input type=\"text\" lang=\"{{locale}}\" class=\"hypergrid-textfield\" style=\"{{style}}\">',\n\n    initialize: function() {\n        this.input.style.textAlign = this.event.properties.halign;\n        this.input.style.font = this.event.properties.font;\n    },\n\n    localizer: Localization.prototype.string,\n\n    selectAll: function() {\n        this.input.setSelectionRange(0, this.input.value.length);\n    }\n});\n\nmodule.exports = Textfield;\n","'use strict';\n\n/** @namespace extend-me **/\n\n/** @summary Extends an existing constructor into a new constructor.\n *\n * @returns {Constructor} A new constructor, extended from the given context, possibly with some prototype additions.\n *\n * @desc Extends \"objects\" (constructors), with optional additional code, optional prototype additions, and optional prototype member aliases.\n *\n * > CAVEAT: Not to be confused with Underscore-style .extend() which is something else entirely. I've used the name \"extend\" here because other packages (like Backbone.js) use it this way. You are free to call it whatever you want when you \"require\" it, such as `var inherits = require('extend')`.\n *\n * Provide a constructor as the context and any prototype additions you require in the first argument.\n *\n * For example, if you wish to be able to extend `BaseConstructor` to a new constructor with prototype overrides and/or additions, basic usage is:\n *\n * ```javascript\n * var Base = require('extend-me').Base;\n * var BaseConstructor = Base.extend(basePrototype); // mixes in .extend\n * var ChildConstructor = BaseConstructor.extend(childPrototypeOverridesAndAdditions);\n * var GrandchildConstructor = ChildConstructor.extend(grandchildPrototypeOverridesAndAdditions);\n * ```\n *\n * This function (`extend()`) is added to the new extended object constructor as a property `.extend`, essentially making the object constructor itself easily \"extendable.\" (Note: This is a property of each constructor and not a method of its prototype!)\n *\n * @this Base class being extended from (i.e., its constructor function object).\n *\n * @param {string} [extendedClassName] - This is simply added to the prototype as $$CLASS_NAME. Useful for debugging because all derived constructors appear to have the same name (\"Constructor\") in the debugger.\n *\n * @param {extendedPrototypeAdditionsObject} [prototypeAdditions] - Object with members to copy to new constructor's prototype.\n *\n * @property {boolean} [debug] - See parameter `extendedClassName` _(above)_.\n *\n * @property {object} Base - A convenient base class from which all other classes can be extended.\n *\n * @memberOf extend-me\n */\nfunction extend(extendedClassName, prototypeAdditions) {\n    switch (arguments.length) {\n        case 0:\n            prototypeAdditions = {};\n            break;\n        case 1:\n            switch (typeof extendedClassName) {\n                case 'object':\n                    prototypeAdditions = extendedClassName;\n                    extendedClassName = undefined;\n                    break;\n                case 'string':\n                    prototypeAdditions = {};\n                    break;\n                default:\n                    throw 'Single-parameter overload must be either string or object.';\n            }\n            break;\n        case 2:\n            if (typeof extendedClassName !== 'string' || typeof prototypeAdditions !== 'object') {\n                throw 'Two-parameter overload must be string, object.';\n            }\n            break;\n        default:\n            throw 'Too many parameters';\n    }\n\n    /**\n     * @class\n     */\n    function Constructor() {\n        if (this.preInitialize) {\n            this.preInitialize.apply(this, arguments);\n        }\n\n        initializePrototypeChain.apply(this, arguments);\n\n        if (this.postInitialize) {\n            this.postInitialize.apply(this, arguments);\n        }\n    }\n\n    /**\n     * @method\n     * @see {@link extend-me.extend}\n     * @desc Added to each returned extended class constructor.\n     */\n    Constructor.extend = extend;\n\n    Constructor.getClassName = getClassName;\n\n    /**\n     * @method\n     * @param {string} [ancestorConstructorName] - If given, searches up the prototype chain for constructor with matching name.\n     * @returns {function|null} Constructor of parent class; or ancestor class with matching name; or null\n     */\n    Constructor.parent = parentConstructor;\n\n    var prototype = Constructor.prototype = Object.create(this.prototype);\n    prototype.constructor = Constructor;\n\n    extendedClassName = extendedClassName || prototype.$$CLASS_NAME || prototype.name;\n    if (extendedClassName) {\n        Object.defineProperty(Constructor, 'name', { value: extendedClassName, configurable: true });\n        prototype.$$CLASS_NAME = extendedClassName;\n    }\n\n    // define each prototype addition on the prototype (including getter/setters)\n    var key, descriptor;\n    for (key in prototypeAdditions) {\n        if ((descriptor = Object.getOwnPropertyDescriptor(prototypeAdditions, key))) {\n            Object.defineProperty(prototype, key, descriptor);\n        }\n    }\n\n    if (typeof this.postExtend === 'function') {\n        this.postExtend(prototype);\n    }\n\n    return Constructor;\n}\n\nfunction Base() {}\nBase.prototype = {\n\n    constructor: Base.prototype.constructor,\n\n    getClassName: function() {\n        return (\n            this.$$CLASS_NAME ||\n            this.name ||\n            this.constructor.name // try Function.prototype.name as last resort\n        );\n    },\n\n    /**\n     * Access a member of the super class.\n     * @returns {Object}\n     */\n    get super() {\n        return Object.getPrototypeOf(Object.getPrototypeOf(this));\n    },\n\n    /**\n     * Find member on prototype chain beginning with super class.\n     * @param {string} memberName\n     * @returns {undefined|*} `undefined` if not found; value otherwise.\n     */\n    superMember: function(memberName) {\n        var parent = this.super;\n        do { parent = Object.getPrototypeOf(parent); } while (!parent.hasOwnProperty(memberName));\n        return parent && parent[memberName];\n    },\n\n    /**\n     * Find method on prototype chain beginning with super class.\n     * @param {string} methodName\n     * @returns {function}\n     */\n    superMethod: function(methodName) {\n        var method = this.superMember(methodName);\n        if (typeof method !== 'function') {\n            throw new TypeError('this.' + methodName + ' is not a function');\n        }\n        return method;\n    },\n\n    /**\n     * Find method on prototype chain beginning with super class and call it with remaining args.\n     * @param {string} methodName\n     * @returns {*}\n     */\n    callSuperMethod: function(methodName) {\n        return this.superMethod(methodName).apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n};\nBase.extend = extend;\nextend.Base = Base;\n\n/**\n * Optional static method is called with new \"class\" (constructor) after extending.\n * This permits miscellaneous tweaking and cleanup of the new class.\n * @method postExtend\n * @param {object} prototype\n * @memberOf Base\n */\n\n/** @typedef {function} extendedConstructor\n * @property prototype.super - A reference to the prototype this constructor was extended from.\n * @property [extend] - If `prototypeAdditions.extendable` was truthy, this will be a reference to {@link extend.extend|extend}.\n */\n\n/** @typedef {object} extendedPrototypeAdditionsObject\n * @desc All members are copied to the new object. The following have special meaning.\n * @property {function} [initialize] - Additional constructor code for new object. This method is added to the new constructor's prototype. Gets passed new object as context + same args as constructor itself. Called on instantiation after similar function in all ancestors called with same signature.\n * @property {function} [preInitialize] - Called before the `initialize` cascade. Gets passed new object as context + same args as constructor itself. If not defined here, the top-most (and only the top-most) definition found on the prototype chain is called.\n * @property {function} [postInitialize] - Called after the `initialize` cascade. Gets passed new object as context + same args as constructor itself. If not defined here, the top-most (and only the top-most) definition found on the prototype chain is called.\n */\n\n/** @summary Call all `initialize` methods found in prototype chain, beginning with the most senior ancestor's first.\n * @desc This recursive routine is called by the constructor.\n * 1. Walks back the prototype chain to `Object`'s prototype\n * 2. Walks forward to new object, calling any `initialize` methods it finds along the way with the same context and arguments with which the constructor was called.\n * @private\n * @memberOf extend-me\n */\nfunction initializePrototypeChain() {\n    var term = this,\n        args = arguments;\n    recur(term);\n\n    function recur(obj) {\n        var proto = Object.getPrototypeOf(obj);\n        if (proto.constructor !== Object) {\n            recur(proto);\n            if (proto.hasOwnProperty('initialize')) {\n                proto.initialize.apply(term, args);\n            }\n        }\n    }\n}\n\nfunction getClassName() {\n    return (\n        this.prototype.$$CLASS_NAME ||\n        this.prototype.name ||\n        this.name // try Function.prototype.name as last resort\n    );\n}\n\nfunction parentConstructor(ancestorConstructorName) {\n    var prototype = this.prototype;\n    if (prototype) {\n        do {\n            prototype = Object.getPrototypeOf(prototype);\n        } while (ancestorConstructorName && prototype && prototype.constructor.name !== ancestorConstructorName);\n    }\n    return prototype && prototype.constructor;\n}\n\nmodule.exports = extend;\n","/* eslint-env browser */\n\n/**\n * @module localization\n */\n\n'use strict';\n\nvar Base = require('../Base');\n\n\n/**\n * @param {string} defaultLocale\n * @param {string} [locale=defaultlocale]\n * @param {object} [options]\n * @constructor\n */\nvar Formatter = Base.extend({\n    initialize: function(defaultLocale, locale, options) {\n        if (typeof locale === 'object') {\n            options = locale;\n            locale = defaultLocale;\n        }\n\n        this.locale = locale;\n\n        if (options) {\n            if (typeof options.invalid === 'function') {\n                this.invalid = options.invalid;\n            }\n\n            if (options.expectation) {\n                this.expectation = options.expectation;\n            }\n        }\n    }\n});\n\n\n// Safari has no Intl implementation\nif (!window.Intl) {\n    window.Intl = {\n        NumberFormat: function(locale, options) {\n            var digits = '0123456789';\n            this.format = function(n) {\n                var s = n.toString();\n                if (!options || options.useGrouping === undefined || options.useGrouping) {\n                    var dp = s.indexOf('.');\n                    if (dp < 0) {\n                        dp = s.length;\n                    }\n                    while ((dp -= 3) > 0 && digits.indexOf(s[dp - 1]) >= 0) {\n                        s = s.substr(0, dp) + ',' + s.substr(dp);\n                    }\n                }\n                return s;\n            };\n        },\n        DateTimeFormat: function(locale, options) {\n            this.format = function(date) {\n                if (date != null) {\n                    if (typeof date !== 'object') {\n                        date = new Date(date);\n                    }\n                    date = date.getMonth() + 1 + '-' + date.getDate() + '-' + date.getFullYear();\n                } else {\n                    date = null;\n                }\n                return date;\n            };\n        }\n    };\n}\n\n\n/**\n * @summary Create a number localizer.\n * @implements localizerInterface\n * @desc Create an object conforming to {@link localizerInterface} for numbers, using {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat `Intl.NumberFormat`}.\n * @param {string} defaultLocale\n * @param {string} [locale=defaultLocale] - Passed to the {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat `Intl.NumberFormat`} constructor.\n * @param {object} [options] - Passed to the {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat `Intl.NumberFormat`} constructor.\n * @param {boolean} [options.acceptStandardDigits=false] - Accept standard digits and decimal point interchangeably with localized digits and decimal point. (This option is interpreted here; it is not used by {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat `Intl.NumberFormat`}.)\n * @constructor\n * @extends Formatter\n * @tutorial localization\n */\nvar NumberFormatter = Formatter.extend('NumberFormatter', {\n    initialize: function(defaultLocale, locale, options) {\n        if (typeof locale === 'object') {\n            options = locale;\n        }\n\n        options = options || {};\n\n        this.format = new Intl.NumberFormat(this.locale, options).format;\n\n        var mapperOptions = { useGrouping: false },\n            mapper = new Intl.NumberFormat(this.locale, mapperOptions).format;\n\n        this.demapper = demap.bind(this);\n\n        /**\n         * @summary A string containing the valid characters.\n         * @desc Contains all localized digits + localized decimal point.\n         * If we're accepting standard digits, will also contain all the standard digits + standard decimal point (if different than localized versions).\n         * @type {string}\n         * @private\n         * @desc Localized digits and decimal point. Will also include standardized digits and decimal point if `options.acceptStandardDigits` is truthy.\n         *\n         * For internal use by the {@link NumberFormatter#parse|parse} method.\n         * @memberOf NumberFormatter.prototype\n         */\n        this.map = mapper(10123456789.5).substr(1, 11); // localized '0123456789.'\n\n        if (options.acceptStandardDigits && this.map !== '0123456789.') {\n            this.map += '0123456789.';  // standard '0123456789.'\n        }\n\n        /** @summary A regex that tests `true` on first invalid character.\n         * @type {RegExp}\n         * @private\n         * @desc Valid characters include:\n         *\n         * * Localized digits\n         * * Localized decimal point\n         * * Standard digits (when `options.acceptStandardDigits` is truthy)\n         * * Standard decimal point (when `options.acceptStandardDigits` is truthy)\n         * * Cosmetic characters added by formatter as per `options` (for human-friendly readability).\n         *\n         * Any characters outside this set are considered invalid.\n         *\n         * Set by the constructor; consumed by the {@link module:localization~NumberFormatter#invalid|invalid} method.\n         *\n         * Testing a string against this pattern yields `true` if at least one invalid character or `false` if all characters are valid.\n         * @memberOf NumberFormatter.prototype\n         */\n        this.invalids = new RegExp(\n            '[^' +\n            this.format(11111).replace(this.map[1], '') + // thousands separator if in use\n            this.map + // digits + decimal point\n            ']'\n        );\n    },\n\n    /** @summary Tests for invalid characters.\n     * @desc Tests a localized string representation of a number that it contains any invalid characters.\n     *\n     * The number may be unformatted or it may be formatted with any of the permitted formatting characters, as implied by the constructor's `options` (passed to `Intl.NumberFormat`). Any other characters are considered invalid.\n     *\n     * However, standard digits and the standard decimal point are considered valid if the value of `options.acceptStandardDigits` as provided to the constructor was truthy. (Of course, these are always valid for locales that use them.)\n     *\n     * Use this method to:\n     * 1. Filter out invalid characters on a `onkeydown` event; or\n     * 2. Test an edited string prior to calling the {@link module:localization~NumberFormatter#parse|parse}.\n     *\n     * NOTE: This method does not check grammatical syntax; it only checks for invalid characters.\n     *\n     * @param number\n     * @returns {boolean|string} Falsy means valid which in this case means contains only valid characters.\n     * @memberOf NumberFormatter.prototype\n     */\n    invalid: function(number) {\n        return this.invalids.test(number);\n    },\n\n    expectation:\n        'Expected a number with optional commas (thousands grouping separator), optional decimal point, and an optional fractional part.\\n' +\n        'Comma separators are part of the format and will always be displayed for values >= 1000.\\n' +\n        'Edited values are always saved in their entirety even though the formatted value is rounded to the specified number of decimal places.',\n\n    /**\n     * This method will:\n     * * Convert localized digits and decimal point characters to standard digits and decimal point characters.\n     * * \"Clean\" the string by ignoring all other characters.\n     * * Coerce the string to a number primitive.\n     * @param {string} formattedLocalizedNumber - May or may not be formatted.\n     * @returns {number} Number primitive.\n     * @throws {string} Invalid number.\n     * @memberOf NumberFormatter.prototype\n     */\n    parse: function(formattedLocalizedNumber) {\n        var number = Number(\n            formattedLocalizedNumber.split('').map(this.demapper).join('')\n        );\n\n        if (isNaN(number)) {\n            throw 'Invalid Number';\n        }\n\n        return number;\n    }\n});\n\nfunction demap(c) {\n    var d = this.map.indexOf(c) % 11;\n    return d < 0 ? '' : d < 10 ? d : '.';\n}\n\n/**\n * @implements localizerInterface\n * @param {string} defaultLocale\n * @param {string} [locale=defaultlocale] - Passed to the {@link https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat `Intl.DateFormat`} constructor.\n * @param {object} [options] - Passed to the {@link https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat `Intl.DateFormat`} constructor.\n * @constructor\n * @extends Formatter\n */\nvar DateFormatter = Formatter.extend('DateFormatter', {\n    initialize: function(defaultLocale, locale, options) {\n        if (typeof locale === 'object') {\n            options = locale;\n        }\n\n        options = options || {};\n\n        /** @summary Transform a date object into human-friendly string representation.\n         * @method\n         */\n        this.format = new Intl.DateTimeFormat(this.locale, options).format;\n\n        // Get digits because may be chinese or \"real Arabic\" numerals.\n        var testOptions = { useGrouping: false, style: 'decimal' },\n            localizeNumber = new Intl.NumberFormat(this.locale, testOptions).format,\n            localizedDigits = this.localizedDigits = localizeNumber(10123456789).substr(1, 10); // all localized digits in numerical order\n\n        this.digitFormatter = formatDigit.bind(this);\n        this.digitParser = parseDigit.bind(this);\n\n        // Localize a test date with the default numeric parts to find out the resulting order of these parts.\n        var yy = 1987,\n            mm = 12,\n            dd = 30,\n            YY = this.transformNumber(this.digitFormatter, yy),\n            MM = this.transformNumber(this.digitFormatter, mm),\n            DD = this.transformNumber(this.digitFormatter, dd),\n            testDate = new Date(yy, mm - 1, dd),\n            localizeDate = new Intl.DateTimeFormat(this.locale).format,\n            localizedDate = localizeDate(testDate), // all localized digits + localized punctuation\n            missingDigits = new Intl.NumberFormat(this.locale).format(456),\n            localizedNumberPattern = this.localizedNumberPattern = new RegExp('[' + localizedDigits + ']+', 'g'),\n            parts = localizedDate.match(localizedNumberPattern);\n\n        this.partsMap = {\n            yy: parts.indexOf(YY),\n            mm: parts.indexOf(MM),\n            dd: parts.indexOf(DD)\n        };\n\n        if (options.acceptStandardDigits) {\n            missingDigits += '1234567890';\n        }\n\n        /** @summary A regex that tests `true` on first invalid character.\n         * @type {RegExp}\n         * @private\n         * @desc Valid characters include:\n         *\n         * * Localized digits\n         * * Standard digits (when `options.acceptStandardDigits` is truthy)\n         * * Localized punctuation to delimit date parts\n         *\n         * Any characters outside this set are considered invalid. Note that this only currently implemented when all three date parts are numeric\n         *\n         * Set by the constructor; consumed by the {@link NumberFormatter#valid|valid} method.\n         *\n         * Testing a string against this pattern yields `true` if at least one invalid character or `false` if all characters are valid.\n         * @memberOf DateFormatter.prototype\n         */\n        this.invalids = new RegExp(\n            '[^' +\n            localizedDate.replace(/-/g, '\\\\-') +\n            missingDigits +\n            ']'\n        );\n    },\n\n    /** @summary Tests for invalid characters.\n     * @desc Tests a localized string representation of a number that it contains any invalid characters.\n     *\n     * The date is assumed to contain localized digits and punctuation as would be returned by `Intl.DateFormat` with the given `locale` and `options`. Any other characters are considered invalid.\n     *\n     * However, standard digits and the standard decimal point are also considered valid if the value of `options.acceptStandardDigits` as provided to the constructor was truthy. (Of course, these are always valid for locales that use them.)\n     *\n     * Use this method to:\n     * 1. Filter out invalid characters on a `onkeydown` event; or\n     * 2. Test an edited string prior to calling the {@link module:localization~DateFormatter#parse|parse}.\n     *\n     * NOTE: The current implementation only supports date formats using all numerics (which is the default for `Intl.DateFormat`).\n     *\n     * NOTE: This method does not check grammatical syntax; it only checks for invalid characters.\n     *\n     * @param number\n     * @returns {boolean} Contains only valid characters.\n     * @memberOf DateFormatter.prototype\n     */\n    invalid: function(number) {\n        return this.invalids.test(number);\n    },\n\n    /**\n     * This method will:\n     * * Convert localized date to Date object.\n     * * \"Clean\" the string by ignoring all other characters.\n     * * Coerce the string to a number primitive.\n     * @param {string} localizedDate\n     * @returns {Date}\n     * @throws {string} Invalid date.\n     * @memberOf DateFormatter.prototype\n     */\n    parse: function(localizedDate) {\n        var date,\n            parts = localizedDate.match(this.localizedNumberPattern);\n\n        if (parts && parts.length === 3) {\n            var y = this.transformNumber(this.digitParser, parts[this.partsMap.yy]),\n                m = this.transformNumber(this.digitParser, parts[this.partsMap.mm]) - 1,\n                d = this.transformNumber(this.digitParser, parts[this.partsMap.dd]);\n\n            date = new Date(y, m, d);\n        } else {\n            throw 'Invalid Date';\n        }\n\n        return date;\n    },\n\n    /**\n     * Transform a number to or from a string representation with localized digits.\n     * @param {function} digitTransformer - A function bound to `this`.\n     * @param {number} number\n     * @returns {string}\n     * @private\n     * @memberOf DateFormatter.prototype\n     */\n    transformNumber: function(digitTransformer, number) {\n        return number.toString().split('').map(digitTransformer).join('');\n    }\n});\n\nfunction formatDigit(d) {\n    return this.localizedDigits[d];\n}\n\nfunction parseDigit(c) {\n    var d = this.localizedDigits.indexOf(c);\n    if (d < 0) { d = ''; }\n    return d;\n}\n\n/**\n * All members are localizers (conform to {@link localizerInterface}) with exception of `get`, `set`, and localizer constructors which are named (by convention) ending in \"Formmatter\".\n *\n * The application developer is free to add localizers and localizer factory methods. See the {@link Localization#construct|construct} convenience method which may be helpful in this regard.\n * @param locale\n * @param {object} [numberOptions]\n * @param {object} [dateOptions]\n * @constructor\n */\nfunction Localization(locale, numberOptions, dateOptions) {\n    this.locale = locale;\n\n    /**\n     * @name number\n     * @see The {@link NumberFormatter|NumberFormatter} class\n     * @memberOf Localization.prototype\n     */\n    this.int = this.float = this.construct('number', NumberFormatter, numberOptions);\n\n    /**\n     * @see The {@link DateFormatter|DateFormatter} class\n     * @memberOf Localization.prototype\n     */\n    this.construct('date', DateFormatter, dateOptions);\n}\n\nLocalization.prototype = {\n    constructor: Localization.prototype.constructor,\n    $$CLASS_NAME: 'Localization',\n\n    /** @summary Creates a localizer from a localizer factory object using the default locale.\n     * @desc Performs the following actions:\n     * 1. Binds `Constructor` to `locale`.\n     * 2. Adds the newly bound constructor to this object (for future reference) with the key \"NameFormatter\" (where \"Name\" is the localizer name, all lower case but with an initial capital).\n     * 3. Uses the newly bound constructor to create a new localized localizer with the provided options.\n     * 4. Adds new localizer to this object via {@link Localization#add|add}.\n     *\n     * @param {string} localizerName\n     * @param {Constructor\n     * @param {object} {factoryOptions}\n     * @returns {localizerInterface} The new localizer.\n     */\n    construct: function(localizerName, Constructor, factoryOptions) {\n        var constructorName = localizerName[0].toUpperCase() + localizerName.substr(1).toLowerCase() + 'Formatter',\n            BoundConstructor = Constructor.bind(null, this.locale),\n            localizer = new BoundConstructor(factoryOptions);\n\n        this[constructorName] = BoundConstructor;\n\n        return this.add(localizerName, localizer);\n    },\n\n    /** @summary Register a localizer.\n     * @desc Checks the provided localizer that it conforms to {@link localizerInterface}\n     * and adds it to the object using localizerName all lower case as the key.\n     * @param {string} name\n     * @param {localizerInterface} localizer\n     * @memberOf Localization.prototype\n     * @returns {localizerInterface} The provided localizer.\n     */\n    add: function(name, localizer) {\n        if (typeof name === 'object') {\n            localizer = name;\n            name = undefined;\n        }\n\n        if (\n            typeof localizer !== 'object' ||\n            typeof localizer.format !== 'function' ||\n            typeof localizer.parse !== 'function' ||\n            localizer.invalid && typeof localizer.invalid !== 'function' ||\n            localizer.expectation && typeof localizer.expectation !== 'string'\n        ) {\n            throw 'Expected localizer object to conform to interface.';\n        }\n\n        name = name || localizer.name;\n        name = name && name.toLowerCase();\n        this[name] = localizer;\n\n        return localizer;\n    },\n\n    /**\n     *\n     * @param localizerName\n     * @returns {localizerInterface}\n     * @memberOf Localization.prototype\n     */\n    get: function(name) {\n        return this[name && name.toLowerCase()] || this.string;\n    },\n\n    ///  ///  ///  ///  ///    LOCALIZERS    ///  ///  ///  ///  ///\n\n    // Special localizer for use by Chrome's date input control.\n    chromeDate: {\n        format: function(date) {\n            if (date != null) {\n                if (typeof date !== 'object') {\n                    date = new Date(date);\n                }\n\n                var yy = date.getFullYear(),\n                    m = date.getMonth() + 1, mm = m < 10 ? '0' + m : m,\n                    d = date.getDate(), dd = d < 10 ? '0' + d : d;\n\n                date = yy + '-' + mm + '-' + dd;\n            } else {\n                date = null;\n            }\n            return date;\n        },\n        parse: function(str) {\n            var date,\n                parts = str.split('-');\n            if (parts && parts.length === 3) {\n                date = new Date(parts[0], parts[1] - 1, parts[2]);\n            } else {\n                date = null;\n            }\n            return date;\n        }\n    },\n\n    null: {\n        format: function(value) {\n            return value;\n        },\n        parse: function(str) {\n            return str;\n        }\n    },\n\n    string: {\n        format: function(value) {\n            return value + '';\n        },\n        parse: function(str) {\n            return str + '';\n        }\n    }\n};\n\nmodule.exports = Localization;\n","'use strict';\n\nvar Point = require('rectangular').Point;\n\nvar Base = require('../Base');\nvar Column = require('./Column');\nvar cellEventFactory = require('../lib/cellEventFactory');\nvar fields = require('../lib/fields');\nvar featureRegistry = require('../features');\nvar ArrayDecorator = require('synonomous');\nvar assignOrDelete = require('../lib/assignOrDelete');\nvar dispatchGridEvent = require('../lib/dispatchGridEvent');\n\n\nvar noExportProperties = [\n    'columnHeader',\n    'columnHeaderColumnSelection',\n    'filterProperties',\n    'rowHeader',\n    'rowHeaderRowSelection',\n    'rowNumbersProperties',\n    'treeColumnProperties',\n    'treeColumnPropertiesColumnSelection',\n];\n\n/**\n * @mixes cellProperties.behaviorMixin\n * @mixes rowProperties.mixin\n * @mixes subgrids.mixin\n * @mixes dataModel.mixin\n * @constructor\n * @desc A controller for the data model.\n * > This constructor (actually `initialize`) will be called upon instantiation of this class or of any class that extends from this class. See {@link https://github.com/joneit/extend-me|extend-me} for more info.\n * @param {Hypergrid} grid\n * @param {object} [options] - _(Passed to {@link Behavior#reset reset})._\n * @param {DataModel} [options.dataModel] - _Per {@link Behavior#reset reset}._\n * @param {object} [options.metadata] - _Per {@link Behavior#reset reset}._\n * @param {function} [options.DataModel=require('datasaur-local')] - _Per {@link Behavior#reset reset}._\n * @param {function|object[]} [options.data] - _Per {@link Behavior#setData setData}._\n * @param {function|menuItem[]} [options.schema] - _Per {@link Behavior#setData setData}._\n * @param {subgridSpec[]} [options.subgrids=this.grid.properties.subgrids] - _Per {@link Behavior#setData setData}._\n * @param {boolean} [options.apply=true] - _Per {@link Behavior#setData setData}._\n * @abstract\n */\nvar Behavior = Base.extend('Behavior', {\n\n    initialize: function(grid, options) {\n        /**\n         * @type {Hypergrid}\n         * @memberOf Behavior#\n         */\n        this.grid = grid;\n\n        this.initializeFeatureChain();\n\n        this.grid.behavior = this;\n        this.reset(options);\n    },\n\n    /**\n     * @desc Create the feature chain - this is the [chain of responsibility](http://c2.com/cgi/wiki?ChainOfResponsibilityPattern) pattern.\n     * @param {Hypergrid} [grid] Unnecesary legacy parameter. May be omitted.\n     * @memberOf Behavior#\n     */\n    initializeFeatureChain: function(grid) {\n        var constructors;\n\n        /**\n         * @summary Controller chain of command.\n         * @desc Each feature is linked to the next feature.\n         * @type {Feature}\n         * @memberOf Behavior#\n         */\n        this.featureChain = undefined;\n\n        /**\n         * @summary Hash of instantiated features by class names.\n         * @desc Built here but otherwise not in use.\n         * @type {object}\n         * @memberOf Behavior#\n         */\n        this.featureMap = {};\n\n        this.featureRegistry = this.featureRegistry || featureRegistry;\n\n        if (this.grid.properties.features) {\n            var getFeatureConstructor = this.featureRegistry.get.bind(this.featureRegistry);\n            constructors = this.grid.properties.features.map(getFeatureConstructor);\n        } else if (this.features) {\n            constructors = this.features;\n            warnBehaviorFeaturesDeprecation.call(this);\n        }\n\n        constructors.forEach(function(FeatureConstructor, i) {\n            var feature = new FeatureConstructor;\n\n            this.featureMap[feature.$$CLASS_NAME] = feature;\n\n            if (i) {\n                this.featureChain.setNext(feature);\n            } else {\n                this.featureChain = feature;\n            }\n        }, this);\n\n        if (this.featureChain) {\n            this.featureChain.initializeOn(this.grid);\n        }\n    },\n\n    features: [], // override in implementing class; or provide feature names in grid.properties.features; else no features\n\n    /**\n     * Reset the behavior.\n     * @param {object} [options] - _Same as constructor's `options`._<br>\n     * _Passed to {@link Behavior#resetDataModel resetDataModel} and {@link Behavior#setData setData} (both of which see)._\n     * @memberOf Behavior#\n     */\n    reset: function(options) {\n        var dataModelChanged = this.resetDataModel(options);\n\n        if (dataModelChanged) {\n            // recreate `CellEvent` class so it can update its cached `grid`, `behavior`, and `dataModel` properties\n            this.CellEvent = cellEventFactory(this.grid);\n        }\n\n        this.scrollPositionX = this.scrollPositionY = 0;\n\n        this.rowPropertiesPrototype = Object.create(this.grid.properties,\n            require('./rowProperties').rowPropertiesPrototypeDescriptors);\n\n        this.clearColumns();\n        this.createColumns();\n\n        /**\n         * Ordered list of subgrids to render.\n         * @type {subgridSpec[]}\n         * @memberOf Hypergrid#\n         */\n        this.subgrids = options && options.subgrids ||\n            !dataModelChanged && this.subgrids ||\n            this.grid.properties.subgrids;\n\n        this.setData(options);\n    },\n\n    /**\n     * @memberOf Local#\n     * @description Set the header labels.\n     * @param {string[]|object} headers - The header labels. One of:\n     * * _If an array:_ Must contain all headers in column order.\n     * * _If a hash:_ May contain any headers, keyed by field name, in any order.\n     */\n    setHeaders: function(headers) {\n        if (headers instanceof Array) {\n            // Reset all headers\n            var allColumns = this.allColumns;\n            headers.forEach(function(header, index) {\n                allColumns[index].header = header; // setter updates header in both column and data source objects\n            });\n        } else if (typeof headers === 'object') {\n            // Adjust just the headers in the hash\n            this.allColumns.forEach(function(column) {\n                if (headers[column.name]) {\n                    column.header = headers[column.name];\n                }\n            });\n        }\n    },\n\n    /**\n     * @summary Set grid data.\n     * @desc Fails silently if `dataRows` and `options.data` are both undefined.\n     *\n     * @param {function|object[]} [dataRows=options.data] - Array of uniform data row objects or function returning same.\n     *\n     * @param {object} [options] - _(Promoted to first argument position when `dataRows` omitted.)_\n     *\n     * @param {function|object[]} [options.data] - The data when `dataRows` undefined.\n     *\n     * @param {function|menuItem[]} [options.schema] - May be:\n     * * A schema array\n     * * A function returning same. Called at filter reset time with behavior as context.\n     * * Omit to allow the data model to generate a basic schema from its data.\n     *\n     * @param {boolean} [options.apply=true] Apply data transformations to the new data.\n     *\n     * @memberOf Behavior#\n     */\n    setData: function(dataRows, options) {\n        if (!(Array.isArray(dataRows) || typeof dataRows === 'function')) {\n            options = dataRows;\n            dataRows = options && options.data;\n        }\n\n        dataRows = this.unwrap(dataRows);\n\n        if (dataRows === undefined) {\n            return;\n        }\n\n        if (!Array.isArray(dataRows)) {\n            throw 'Expected data to be an array (of data row objects).';\n        }\n\n        options = options || {};\n\n        var schema = this.unwrap(options.schema);\n\n        // Inform interested data models of data.\n        this.subgrids.forEach(function(dataModel) {\n            dataModel.setData(dataRows, schema);\n        });\n\n        if (this.grid.cellEditor) {\n            this.grid.cellEditor.cancelEditing();\n        }\n\n        if (options.apply || options.apply === undefined) { // default is `true`\n            this.reindex();\n        }\n\n        this.grid.allowEvents(this.getRowCount());\n    },\n\n    get renderedColumnCount() {\n        return this.grid.renderer.visibleColumns.length;\n    },\n\n    get renderedRowCount() {\n        return this.grid.renderer.visibleRows.length;\n    },\n\n    get leftMostColIndex() {\n        return this.grid.properties.showRowNumbers ? this.rowColumnIndex : (this.hasTreeColumn() ? this.treeColumnIndex : 0);\n    },\n\n    clearColumns: function() {\n        var schema = this.schema,\n            tc = this.treeColumnIndex,\n            rc = this.rowColumnIndex;\n\n        this.columnsCreated = false;\n\n        schema[tc] = schema[tc] || {};\n        schema[tc].index = tc;\n        if (schema[tc].name === undefined) { schema[tc].name = this.treeColumnNameDefault; }\n        if (schema[tc].header === undefined) { schema[tc].header = this.treeColumnHeaderDefault; }\n\n        schema[rc] = schema[rc] || {};\n        schema[rc].index = rc;\n        if (schema[rc].name === undefined) { schema[rc].name = this.rowColumnNameDefault; }\n        if (schema[rc].header === undefined) { schema[rc].header = ''; }\n\n        /**\n         * @type {Column[]}\n         * @memberOf Behavior#\n         */\n        this.columns = this.grid.decorateColumnArray();\n\n        /**\n         * @type {Column[]}\n         * @memberOf Behavior#\n         */\n        this.allColumns = this.grid.decorateColumnArray();\n\n        this.allColumns[tc] = this.columns[tc] = this.newColumn(schema[tc]);\n        this.allColumns[rc] = this.columns[rc] = this.newColumn(schema[rc]);\n\n        this.columns[tc].properties.propClassLayers = this.columns[rc].properties.propClassLayers = this.grid.properties.propClassLayersMap.NO_ROWS;\n\n        // Signal the renderer to size the now-reset handle column before next render\n        this.grid.renderer.resetRowHeaderColumnWidth();\n    },\n\n    getActiveColumn: function(x) {\n        return this.columns[x];\n    },\n\n    /**\n     * The \"grid index\" of an active column given a \"data index\" (number), column name (string), or column object\n     * @param {Column|number} columnOrIndex\n     * @returns {undefined|number} The grid index of the column or undefined if column not in grid.\n     * @memberOf Hypergrid#\n     */\n    getActiveColumnIndex: function(columnOrIndexOrName) {\n        var value = columnOrIndexOrName instanceof Column ? columnOrIndexOrName.index : columnOrIndexOrName,\n            key = typeof index === 'number' ? 'index' : 'name';\n\n        return this.columns.findIndex(function(column) { return column[key] === value; });\n    },\n\n    getColumn: function(x) {\n        return this.allColumns[x];\n    },\n\n    newColumn: function(options) {\n        return new Column(this, options);\n    },\n\n    addColumn: function(options) {\n        var column = this.newColumn(options),\n            arrayDecorator = new ArrayDecorator,\n            synonyms = arrayDecorator.getSynonyms(column.name);\n\n        this.columns.push(column);\n        arrayDecorator.decorateObject(this.columns, synonyms, column);\n\n        this.allColumns.push(column);\n        arrayDecorator.decorateObject(this.allColumns, synonyms, column);\n\n        return column;\n    },\n\n    createColumns: function(realImplementation) {\n        var schema = this.dataModel.getSchema();\n\n        fields.normalizeSchema(schema);\n        fields.decorateSchema(schema);\n        fields.decorateColumnSchema(schema, this.grid.properties.headerify);\n\n        this.createDataRowProxy();\n\n        this.clearColumns();\n\n        if (realImplementation) {\n            realImplementation.call(this);\n        }\n\n        this.columnsCreated = true;\n\n        this.changed();\n\n        dispatchGridEvent.call(this.grid, 'fin-hypergrid-columns-created');\n    },\n\n    createDataRowProxy: function() {\n        // concrete implementation here if behavior doesn't implement its own getRow()\n    },\n\n    getColumnWidth: function(x) {\n        var column = (x !== this.treeColumnIndex || this.hasTreeColumn()) && this.getActiveColumn(x);\n        return column ? column.getWidth() : 0;\n    },\n\n    /**\n     * @param {Column|number} columnOrIndex - The column or active column index.\n     * @param width\n     * @memberOf Hypergrid#\n     */\n    setColumnWidth: function(columnOrIndex, width) {\n        var column = columnOrIndex >= -2 ? // relation operator tests for number (index) vs column (object)\n            this.getActiveColumn(columnOrIndex) : columnOrIndex;\n        column.setWidth(width);\n        this.stateChanged();\n    },\n\n    /**\n     * @memberOf Behavior#\n     */\n    reindex: function() {\n        this.dataModel.reindex();\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc utility function to empty an object of its members\n     * @param {object} obj - the object to empty\n     * @param {boolean} [exportProps]\n     * * `undefined` (omitted) - delete *all* properties\n     * * **falsy** - delete *only* the export properties\n     * * **truthy** - delete all properties *except* the export properties\n     */\n    clearObjectProperties: function(obj, exportProps) {\n        for (var key in obj) {\n            if (\n                obj.hasOwnProperty(key) && (\n                    exportProps === undefined ||\n                    !exportProps && noExportProperties.indexOf(key) >= 0 ||\n                    exportProps && noExportProperties.indexOf(key) < 0\n                )\n            ) {\n                delete obj[key];\n            }\n        }\n    },\n\n    //this is effectively a clone, with certain things removed....\n    getState: function() {\n        var copy = JSON.parse(JSON.stringify(this.grid.properties));\n        this.clearObjectProperties(copy.columnProperties, false);\n        return copy;\n    },\n    /**\n     * @memberOf Behavior#\n     * @desc clear all table state\n     */\n    clearState: function() {\n        this.grid.clearState();\n        this.createColumns();\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Restore this table to a previous state.\n     * See the [memento pattern](http://c2.com/cgi/wiki?MementoPattern).\n     * @param {Object} properties - assignable grid properties\n     */\n    setState: function(properties) {\n        this.addState(properties, true);\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @param {Object} properties - assignable grid properties\n     * @param {boolean} [settingState] - Clear properties object before assignments.\n     */\n    addState: function(properties, settingState) {\n        if (settingState) {\n            this.clearState();\n        }\n\n        var gridProps = this.grid.properties;\n\n        gridProps.settingState = settingState;\n        assignOrDelete(gridProps, properties);\n        delete gridProps.settingState;\n\n        this.reindex();\n    },\n\n    /**\n     * @summary Sets properties for active columns.\n     * @desc Sets multiple columns' properties from elements of given array or collection. Keys may be column indexes or column names. The properties collection is cleared first. Falsy elements are ignored.\n     * @param {object[]|undefined} columnsHash - If undefined, this call is a no-op.\n     */\n    setAllColumnProperties: function(columnsHash) {\n        this.addAllColumnProperties(columnsHash, true);\n    },\n\n    /**\n     * @summary Adds properties for multiple columns.\n     * @desc Adds . The properties collection is optionally cleared first. Falsy elements are ignored.\n     * @param {object[]|undefined} columnsHash - If undefined, this call is a no-op.\n     * @param {boolean} [settingState] - Clear columns' properties objects before copying properties.\n     */\n    addAllColumnProperties: function(columnsHash, settingState) {\n        if (!columnsHash) {\n            return;\n        }\n\n        var columns = this.grid.behavior.getColumns();\n\n        Object.keys(columnsHash).forEach(function(key) {\n            var column = columns[key];\n            if (column) {\n                column.addProperties(columnsHash[key], settingState);\n            }\n        });\n    },\n\n    setColumnOrder: function(columnIndexes) {\n        if (Array.isArray(columnIndexes)){\n            var columns = this.columns,\n                allColumns = this.allColumns,\n                arrayDecorator = new ArrayDecorator;\n\n            // avoid recreating the `columns` array object to keep refs valid; just empty it\n            columns.length = 0;\n            var tc = this.treeColumnIndex.toString(), rc = this.rowColumnIndex.toString();\n            Object.keys(columns).forEach(function(key) {\n                switch (key) {\n                    case tc:\n                    case rc:\n                        break;\n                    default:\n                        delete columns[key];\n                }\n            });\n\n            columnIndexes.forEach(function(index) {\n                columns.push(allColumns[index]);\n            });\n\n            arrayDecorator.decorateArray(columns);\n        }\n    },\n\n    setColumnOrderByName: function(columnNames) {\n        if (Array.isArray(columnNames)) {\n            var allColumns = this.allColumns;\n            this.setColumnOrder(columnNames.map(function(name) { return allColumns[name].index; }));\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Rebuild the column order indexes\n     * @param {Array} columnIndexes - list of column indexes\n     * @param {Boolean} [silent=false] - whether to trigger column changed event\n     */\n    setColumnIndexes: function(columnIndexes, silent) {\n        this.grid.properties.columnIndexes = columnIndexes;\n        if (!silent) {\n            this.grid.fireSyntheticOnColumnsChangedEvent();\n        }\n    },\n\n    /**\n     * @summary Show inactive column(s) or move active column(s).\n     *\n     * @desc Adds one or several columns to the \"active\" column list.\n     *\n     * @param {boolean} [isActiveColumnIndexes=false] - Which list `columnIndexes` refers to:\n     * * `true` - The active column list. This can only move columns around within the active column list; it cannot add inactive columns (because it can only refer to columns in the active column list).\n     * * `false` - The full column list (as per column schema array). This inserts columns from the \"inactive\" column list, moving columns that are already active.\n     *\n     * @param {number|number[]} columnIndexes - Column index(es) into list as determined by `isActiveColumnIndexes`. One of:\n     * * **Scalar column index** - Adds single column at insertion point.\n     * * **Array of column indexes** - Adds multiple consecutive columns at insertion point.\n     *\n     * _This required parameter is promoted left one arg position when `isActiveColumnIndexes` omitted._\n     *\n     * @param {number} [referenceIndex=this.columns.length] - Insertion point, _i.e.,_ the element to insert before. A negative values skips the reinsert. Default is to insert new columns at end of active column list.\n     *\n     * _Promoted left one arg position when `isActiveColumnIndexes` omitted._\n     *\n     * @param {boolean} [allowDuplicateColumns=false] - Unless true, already visible columns are removed first.\n     *\n     * _Promoted left one arg position when `isActiveColumnIndexes` omitted + one position when `referenceIndex` omitted._\n     *\n     * @memberOf Behavior#\n     */\n    showColumns: function(isActiveColumnIndexes, columnIndexes, referenceIndex, allowDuplicateColumns) {\n        // Promote args when isActiveColumnIndexes omitted\n        if (typeof isActiveColumnIndexes === 'number' || Array.isArray(isActiveColumnIndexes)) {\n            allowDuplicateColumns = referenceIndex;\n            referenceIndex = columnIndexes;\n            columnIndexes = isActiveColumnIndexes;\n            isActiveColumnIndexes = false;\n        }\n\n        var activeColumns = this.columns,\n            sourceColumnList = isActiveColumnIndexes ? activeColumns : this.allColumns;\n\n        // Nest scalar index\n        if (typeof columnIndexes === 'number') {\n            columnIndexes = [columnIndexes];\n        }\n\n        var newColumns = columnIndexes\n            .map(function(index) { return sourceColumnList[index]; }) // Look up columns using provided indexes\n            .filter(function(column) { return column; }); // Remove any undefined columns\n\n        // Default insertion point is end (i.e., before (last+1)th element)\n        if (typeof referenceIndex !== 'number') {\n            allowDuplicateColumns = referenceIndex; // assume reference index was omitted when not a number\n            referenceIndex = activeColumns.length;\n        }\n\n        // Remove already visible columns and adjust insertion point\n        if (!allowDuplicateColumns) {\n            newColumns.forEach(function(column) {\n                var i = activeColumns.indexOf(column);\n                if (i >= 0) {\n                    activeColumns.splice(i, 1);\n                    if (referenceIndex > i) {\n                        --referenceIndex;\n                    }\n                }\n            });\n        }\n\n        // Insert the new columns at the insertion point\n        if (referenceIndex >= 0) {\n            activeColumns.splice.apply(activeColumns, [referenceIndex, 0].concat(newColumns));\n        }\n\n        this.grid.properties.columnIndexes = activeColumns.map(function(column) { return column.index; });\n    },\n\n    /**\n     * @summary Hide active column(s).\n     * @desc Removes one or several columns from the \"active\" column list.\n     * @param {boolean} [isActiveColumnIndexes=false] - Which list `columnIndexes` refers to:\n     * * `true` - The active column list.\n     * * `false` - The full column list (as per column schema array).\n     * @param {number|number[]} columnIndexes - Column index(es) into list as determined by `isActiveColumnIndexes`. One of:\n     * * **Scalar column index** - Adds single column at insertion point.\n     * * **Array of column indexes** - Adds multiple consecutive columns at insertion point.\n     *\n     * _This required parameter is promoted left one arg position when `isActiveColumnIndexes` omitted._\n     * @memberOf Behavior#\n     */\n    hideColumns: function(isActiveColumnIndexes, columnIndexes) {\n        var args = Array.prototype.slice.call(arguments); // Convert to array so we can add an argument (element)\n        args.push(-1); // Remove only; do not reinsert.\n        this.showColumns.apply(this, args);\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc fetch the value for a property key\n     * @returns {*} The value of the given property.\n     * @param {string} key - a property name\n     */\n    resolveProperty: function(key) {\n        // todo: remove when we remove the deprecated grid.resolveProperty\n        return this.grid.resolveProperty(key);\n    },\n\n    lookupFeature: function(key) {\n        return this.featureMap[key];\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @return {number} The width of the fixed column area in the hypergrid.\n     */\n    getFixedColumnsWidth: function() {\n        var count = this.getFixedColumnCount(),\n            columnWidth,\n            total = 0,\n            i = this.leftMostColIndex,\n            gridProps = this.grid.properties,\n            contentBox = gridProps.boxSizing !== 'border-box',\n            gridLinesVWidth = gridProps.gridLinesVWidth;\n\n        for (; i < count; i++) {\n            columnWidth = this.getColumnWidth(i);\n            if (columnWidth) {\n                total += columnWidth;\n                if (contentBox) {\n                    total += gridLinesVWidth;\n                }\n            }\n        }\n\n        // add in fixed rule thickness excess\n        if (gridProps.fixedLinesVWidth) {\n            total += gridProps.fixedLinesHWidth - gridLinesVWidth;\n        }\n\n        return total;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc This exists to support \"floating\" columns.\n     * @return {number} The total width of the fixed columns area.\n     */\n    getFixedColumnsMaxWidth: function() {\n        return this.getFixedColumnsWidth();\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate setting the cursor up the feature chain of responsibility\n     * @param {Hypergrid} grid\n     */\n    setCursor: function(grid) {\n        grid.updateCursor();\n        this.featureChain.setCursor(grid);\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling mouse move to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onMouseMove: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseMove(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling tap to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onClick: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleClick(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling tap to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onContextMenu: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleContextMenu(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling wheel moved to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onWheelMoved: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleWheelMoved(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling mouse up to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onMouseUp: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseUp(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling mouse drag to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onMouseDrag: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseDrag(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling key down to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onKeyDown: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleKeyDown(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling key up to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onKeyUp: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleKeyUp(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling double click to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    onDoubleClick: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleDoubleClick(grid, event);\n            this.setCursor(grid);\n        }\n    },\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling mouse down to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseDown(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc delegate handling mouse exit to the feature chain of responsibility\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseExit: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseExit(grid, event);\n            this.setCursor(grid);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Delegate handling touchstart to the feature chain of responsibility.\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     */\n    onTouchStart: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleTouchStart(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Delegate handling touchmove to the feature chain of responsibility.\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     */\n    onTouchMove: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleTouchMove(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Delegate handling touchend to the feature chain of responsibility.\n     * @param {Hypergrid} grid The grid instance.\n     * @param {Object} event - The event details.\n     */\n    onTouchEnd: function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleTouchEnd(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc I've been notified that the behavior has changed.\n     */\n    changed: function() { this.grid.behaviorChanged(); },\n\n    /**\n     * @memberOf Behavior#\n     * @desc The dimensions of the grid data have changed. You've been notified.\n     */\n    shapeChanged: function() { this.grid.behaviorShapeChanged(); },\n\n    /**\n     * @memberOf Behavior#\n     * @desc The dimensions of the grid data have changed. You've been notified.\n     */\n    stateChanged: function() { this.grid.behaviorStateChanged(); },\n\n    /**\n     * @memberOf Behavior#\n     * @return {boolean} Can re-order columns.\n     */\n    isColumnReorderable: function() {\n        return this.deprecated('isColumnReorderable()', 'grid.properties.columnsReorderable', '2.1.3');\n    },\n\n    /**\n     * @param {index} x - Data x coordinate.\n     * @return {Object} The properties for a specific column.\n     * @memberOf Behavior#\n     */\n    getColumnProperties: function(x) {\n        var column = (x !== this.treeColumnIndex || this.hasTreeColumn()) && this.getColumn(x);\n        return column && column.properties;\n    },\n\n    /**\n     * @param {index} x - Data x coordinate.\n     * @return {Object} The properties for a specific column.\n     * @memberOf Behavior#\n     */\n    setColumnProperties: function(x, properties) {\n        var column = this.getColumn(x);\n        if (!column) {\n            throw 'Expected column.';\n        }\n        var result = Object.assign(column.properties, properties);\n        this.changed();\n        return result;\n    },\n\n    /**\n     * Clears all cell properties of given column or of all columns.\n     * @param {number} [x] - Omit for all columns.\n     * @memberOf Behavior#\n     */\n    clearAllCellProperties: function(x) {\n        var X;\n\n        if (x === undefined) {\n            x = 0;\n            X = this.columns.length;\n        } else {\n            X = x + 1;\n        }\n\n        for (; x < X; x++) {\n            var column = this.getColumn(x);\n            if (column) {\n                column.clearAllCellProperties();\n            }\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @return {string[]} All the currently hidden column header labels.\n     */\n    getHiddenColumnDescriptors: function() {\n        var tableState = this.grid.properties;\n        var indexes = tableState.columnIndexes;\n        var labels = [];\n        var columnCount = this.getActiveColumnCount();\n        for (var i = 0; i < columnCount; i++) {\n            if (indexes.indexOf(i) === -1) {\n                var column = this.getActiveColumn(i);\n                labels.push({\n                    id: i,\n                    header: column.header,\n                    field: column.name\n                });\n            }\n        }\n        return labels;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @return {number} The number of fixed columns.\n     */\n    getFixedColumnCount: function() {\n        return this.grid.properties.fixedColumnCount;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc set the number of fixed columns\n     * @param {number} n - the integer count of how many columns to be fixed\n     */\n    setFixedColumnCount: function(n) {\n        this.grid.properties.fixedColumnCount = n;\n    },\n\n    /**\n     * @summary The number of \"fixed rows.\"\n     * @desc The number of (non-scrollable) rows preceding the (scrollable) data subgrid.\n     * @memberOf Behavior#\n     * @return {number} The sum of:\n     * 1. All rows of all subgrids preceding the data subgrid.\n     * 2. The first `fixedRowCount` rows of the data subgrid.\n     */\n    getFixedRowCount: function() {\n        return (\n            this.getHeaderRowCount() +\n            this.grid.properties.fixedRowCount\n        );\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Set the number of fixed rows, which includes (top to bottom order):\n     * 1. The header rows\n     *    1. The header labels row (optional)\n     *    2. The filter row (optional)\n     *    3. The top total rows (0 or more)\n     * 2. The non-scrolling rows (externally called \"the fixed rows\")\n     *\n     * @returns {number} Sum of the above or 0 if none of the above are in use.\n     *\n     * @param {number} The number of rows.\n     */\n    setFixedRowCount: function(n) {\n        this.grid.properties.fixedRowCount = n;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc a dnd column has just been dropped, we've been notified\n     */\n    endDragColumnNotification: function() {},\n\n    /**\n     * @memberOf Behavior#\n     * @return {null} the cursor at a specific x,y coordinate\n     * @param {number} x - the x coordinate\n     * @param {number} y - the y coordinate\n     */\n    getCursorAt: function(x, y) {\n        return null;\n    },\n\n    /**\n     * Number of _visible_ columns.\n     * @memberOf Behavior#\n     * @return {number} The total number of columns.\n     */\n    getActiveColumnCount: function() {\n        return this.columns.length;\n    },\n\n    /**\n     * @summary Column alignment of given grid column.\n     * @desc One of:\n     * * `'left'`\n     * * `'center'`\n     * * `'right'`\n     *\n     * Cascades to grid.\n     * @memberOf Behavior#\n     * @desc Quietly set the horizontal scroll position.\n     * @param {number} x - The new position in pixels.\n     */\n    setScrollPositionX: function(x) {\n        /**\n         * @memberOf Behavior#\n         * @type {number}\n         */\n        this.scrollPositionX = x;\n    },\n\n    getScrollPositionX: function() {\n        return this.scrollPositionX;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc Quietly set the vertical scroll position.\n     * @param {number} y - The new position in pixels.\n     */\n    setScrollPositionY: function(y) {\n        /**\n         * @memberOf Behavior#\n         * @type {number}\n         */\n        this.scrollPositionY = y;\n    },\n\n    getScrollPositionY: function() {\n        return this.scrollPositionY;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @return {cellEditor} The cell editor for the cell at the given coordinates.\n     * @param {CellEvent} editPoint - The grid cell coordinates.\n     */\n    getCellEditorAt: function(event) {\n        return event.isDataColumn && event.column.getCellEditorAt(event);\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @return {boolean} `true` if we should highlight on hover\n     * @param {boolean} isColumnHovered - the column is hovered or not\n     * @param {boolean} isRowHovered - the row is hovered or not\n     */\n    highlightCellOnHover: function(isColumnHovered, isRowHovered) {\n        return isColumnHovered && isRowHovered;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc this function is a hook and is called just before the painting of a cell occurs\n     * @param {Point} cell\n     */\n    set cellPropertiesPrePaintNotification(cell) {\n        throw new this.HypergridError('cellPropertiesPrePaintNotification has been deprecated as of v3.0.0. Code to inspect or mutate the render config object should be moved to the getCell hook.');\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc swap src and tar columns\n     * @param {number} src - column index\n     * @param {number} tar - column index\n     */\n    swapColumns: function(source, target) {\n        var columns = this.columns;\n        var tmp = columns[source];\n        columns[source] = columns[target];\n        columns[target] = tmp;\n        this.changed();\n    },\n\n    convertViewPointToDataPoint: function(unscrolled) {\n        return new Point(\n            this.getActiveColumn(unscrolled.x).index,\n            unscrolled.y\n        );\n    },\n\n    hasTreeColumn: function(columnIndex) {\n        return false;\n    },\n\n    getSelectionMatrixFunction: function(selectedRows) {\n        return function() {\n            return null;\n        };\n    },\n\n    getRowHeaderColumn: function() {\n        return this.allColumns[this.rowColumnIndex];\n    },\n\n    getTreeColumn: function() {\n        return this.allColumns[this.treeColumnIndex];\n    },\n\n    autosizeAllColumns: function() {\n        this.checkColumnAutosizing(true);\n        this.changed();\n    },\n\n    checkColumnAutosizing: function(force) {\n        var autoSized = this.autoSizeRowNumberColumn(force) || this.autoSizeTreeColumn(force);\n\n        this.allColumns.findWithNeg(function(column) {\n            autoSized = column.checkColumnAutosizing(force) || autoSized;\n        });\n\n        return autoSized;\n    },\n\n    autoSizeRowNumberColumn: function(force) {\n        if (this.grid.properties.showRowNumbers && this.grid.properties.rowNumberAutosizing) {\n            return this.getRowHeaderColumn().checkColumnAutosizing(force);\n        }\n    },\n\n    autoSizeTreeColumn: function(force) {\n        if (this.grid.properties.showTreeColumn && this.grid.properties.treeColumnAutosizing) {\n            return this.getTreeColumn().checkColumnAutosizing(force);\n        }\n    },\n\n    getColumns: function() {\n        return this.allColumns;\n    },\n\n    getActiveColumns: function() {\n        return this.columns;\n    },\n\n    getHiddenColumns: function() {\n        var visible = this.columns;\n        var all = this.allColumns;\n        var hidden = [];\n        for (var i = 0; i < all.length; i++) {\n            if (visible.indexOf(all[i]) === -1) {\n                hidden.push(all[i]);\n            }\n        }\n        hidden.sort(function(a, b) {\n            return a.header < b.header;\n        });\n        return hidden;\n    },\n\n    getSelectedRows: function() {\n        return this.grid.selectionModel.getSelectedRows();\n    },\n\n    getSelectedColumns: function() {\n        return this.grid.selectionModel.getSelectedColumns();\n    },\n\n    getSelections: function() {\n        return this.grid.selectionModel.getSelections();\n    },\n\n    getIndexedData: function() {\n        return this.deprecated('getIndexedData()', 'getData()', '3.0.0');\n    }\n});\n\n\n// tree and row number column defaults; define indexes as immutable (i.e., !writable)\nObject.defineProperties(Behavior.prototype, {\n    treeColumnIndex: { value: -1 },\n    treeColumnNameDefault: { value: 'Tree', writable: true },\n    treeColumnHeaderDefault: { value: 'Tree', writable: true },\n\n    rowColumnIndex: { value: -2 },\n    rowColumnNameDefault: { value: 'RowHeader', writable: true }\n});\n\n\nfunction warnBehaviorFeaturesDeprecation() {\n    var featureNames = [], unregisteredFeatures = [], n = 0;\n\n    this.features.forEach(function(FeatureConstructor) {\n        var className = FeatureConstructor.prototype.$$CLASS_NAME || FeatureConstructor.name,\n            featureName = className || 'feature' + n++;\n\n        // build list of feature names\n        featureNames.push(featureName);\n\n        // build list of unregistered features\n        if (!this.featureRegistry.get(featureName, true)) {\n            var constructorName = FeatureConstructor.name || FeatureConstructor.prototype.$$CLASS_NAME || 'FeatureConstructor' + n,\n                params = [];\n            if (!className) {\n                params.push('\\'' + featureName + '\\'');\n            }\n            params.push(constructorName);\n            unregisteredFeatures.push(params.join(', '));\n        }\n    }, this);\n\n    if (featureNames.length) {\n        var sampleCode = 'Hypergrid.defaults.features = [\\n' + join('\\t\\'', featureNames, '\\',\\n') + '];';\n\n        if (unregisteredFeatures.length) {\n            sampleCode += '\\n\\nThe following custom features are unregistered and will need to be registered prior to behavior instantiation:\\n\\n' +\n                join('Features.add(', unregisteredFeatures, ');\\n');\n        }\n\n        if (n) {\n            sampleCode += '\\n\\n(You should provide meaningful names for your custom features rather than the generated names above.)';\n        }\n\n        console.warn('`grid.behavior.features` (array of feature constructors) has been deprecated as of version 2.1.0 in favor of `grid.properties.features` (array of feature names). Remove `features` array from your behavior and add `features` property to your grid state object (or Hypergrid.defaults), e.g.:\\n\\n' + sampleCode);\n    }\n}\n\nfunction join(prefix, array, suffix) {\n    return prefix + array.join(suffix + prefix) + suffix;\n}\n\n\n// synonyms\n\n/**\n * Synonym of {@link Behavior#reindex}.\n * @name applyAnalytics\n * @deprecated\n * @memberOf Behavior#\n */\nBehavior.prototype.applyAnalytics = Behavior.prototype.reindex;\n\n\n// mix-ins\nBehavior.prototype.mixIn(require('./rowProperties').mixin);\nBehavior.prototype.mixIn(require('./gridCellProperties').mixin);\nBehavior.prototype.mixIn(require('./dataModel').mixin);\nBehavior.prototype.mixIn(require('./subgrids').mixin);\n\n\nmodule.exports = Behavior;\n","'use strict';\n\n/**\n * For each key in src:\n * * When `src[key]` is defined, assigns it to `object[key]` when the latter does not exist or is writable or is a setter\n * * When `src[key]` is undefined:\n *    * When `object[key]` is a configurable property and not an accessor, deletes it\n *    * Else when `object[key]` is writable or a setter, assigns `undefined` (setter handles deletion)\n * @param {object} dest\n * @param {object} src - Defined values set the corresponding key in `dest`. `undefined` values delete the key from `dest`.\n */\nmodule.exports = function(dest, src) {\n    Object.keys(src).forEach(function(key) {\n        var descriptor;\n        for (var obj = dest; obj; obj = Object.getPrototypeOf(obj)) {\n            if ((descriptor = Object.getOwnPropertyDescriptor(obj, key))) {\n                break;\n            }\n        }\n\n        if (src[key] !== undefined) {\n            if (!descriptor || descriptor.writable || descriptor.set) {\n                dest[key] = src[key];\n            }\n        } else if (descriptor) {\n            if (descriptor.configurable && !descriptor.set && !descriptor.get) {\n                delete dest[key];\n            } else if (descriptor.writable || descriptor.set) {\n                dest[key] = undefined;\n            }\n        } // else no descriptor so no property to delete\n    });\n};\n","'use strict';\n\n// all instances of xX or _X\nvar REGEX_CAMEL_CASE_OR_UNDERSCORE = /([^_A-Z])([A-Z]+)/g;\nvar REGEX_ALL_PUNC_RUN = /[^a-z0-9]+/gi;\n\n// all instances of _x\nvar REGEX_ALL_PUNC_RUN_BEFORE_LETTER = /[^a-z0-9]+([a-z0-9])?/ig;\nfunction WITH_UPPER_CASE(match, char) { return char === undefined ? '' : char.toUpperCase(); }\n\nvar REGEX_INITIAL_DIGIT = /^(\\d)/;\nvar WITH_DOLLAR_PREFIX = '$$$1';\n\nvar REGEX_INITIAL_CAPITAL = /^([A-Z])/;\nfunction WITH_LOWER_CASE(match, char) { return char.toLowerCase(); }\n\nvar REGEXP_LOWER_CASE_LETTER = /[a-z]/;\nvar REGEXP_WORD_SEPARATORS = /[\\s\\-_]*([^\\s\\-_])([^\\s\\-_]+)/g;\nvar WITH_CAPTIAL_LETTER = function(a, b, c) { return b.toUpperCase() + c; };\n\nvar REGEXP_CAPITAL_LETTERS = /[A-Z]+/g;\nvar WITH_PREFIXED_SPACE = ' $&';\n\nvar REGEXP_OVER_CAPITALIZED_WORDS = /([A-Z]+)([A-Z][a-z])/g;\nvar WITH_SEPARATE_WORDS = '$1 $2';\n\n/** @typedef {function} Transformer\n * @param {string} key\n * @returns {string}\n */\n\nmodule.exports = {\n    /** A transformer that returns its input converted to a string with ` + '' `.\n     * @memberOf Synonomous#\n     */\n    verbatim: function(key) {\n        return key + '';\n    },\n\n    /** A transformer that converts runs of punctuation (non-alphanumerics, actually) to \"camelCase\" by removing such runs and capitalizing the first letter of each word.\n     * The first letter of the first word is forced to lower case.\n     * Otherwise, leaves other letters' case as they were.\n     *\n     * When the result begins with a digit, it's prefixed with with `$` for two reasons:\n     * 1. To avoid conflicts with array element indexes.\n     * 2. To create an identifier that can be used to the right of the dot (`.`) dereferencing operator (identifiers cannot start with a digit but can contain a `$`).\n     *\n     * @type {Transformer}\n     * @memberOf Synonomous#\n     */\n    toCamelCase: function(key) {\n        return key\n            .replace(REGEX_ALL_PUNC_RUN_BEFORE_LETTER, WITH_UPPER_CASE)\n            .replace(REGEX_INITIAL_DIGIT, WITH_DOLLAR_PREFIX)\n            .replace(REGEX_INITIAL_CAPITAL, WITH_LOWER_CASE);\n    },\n\n    /** A transformer that converts all runs of punctuation (non-alphanumerics, actually), as well as all camel case transitions, to underscore.\n     * Results are converted to all caps.\n     *\n     * When the result begins with a digit, it's prefixed with with `$` for two reasons:\n     * 1. To avoid conflicts with array element indexes.\n     * 2. To create an identifier that can be used to the right of the dot (`.`) dereferencing operator (identifiers cannot start with a digit but can contain a `$`).\n     *\n     * @type {Transformer}\n     * @memberOf Synonomous#\n     */\n    toAllCaps: function(key) {\n        return key\n            .replace(REGEX_ALL_PUNC_RUN, '_')\n            .replace(REGEX_CAMEL_CASE_OR_UNDERSCORE, '$1_$2')\n            .replace(REGEX_INITIAL_DIGIT, WITH_DOLLAR_PREFIX)\n            .toUpperCase();\n    },\n\n    /**\n     * A transformer that separates camel case or white-space-, hyphen-, or underscore-separated-words into truly separate words and capitalizing the first letter of each.\n     *\n     * This transformer is meant to create column headers from column names. It deliberating inserts spaces so the results are unsuitable as JavaScript identifiers.\n     * @type {Transformer}\n     * @memberOf Synonomous#\n     */\n    toTitle: function(key) {\n        return (REGEXP_LOWER_CASE_LETTER.test(key) ? key : key.toLowerCase())\n            .replace(REGEXP_WORD_SEPARATORS, WITH_CAPTIAL_LETTER)\n            .replace(REGEXP_CAPITAL_LETTERS, WITH_PREFIXED_SPACE)\n            .replace(REGEXP_OVER_CAPITALIZED_WORDS, WITH_SEPARATE_WORDS)\n            .trim();\n    }\n};\n","/* globals CustomEvent */\n\n'use strict';\n\nvar details = [\n    'gridCell',\n    'dataCell',\n    'mousePoint',\n    'gridPoint',\n    'clientPoint',\n    'pagePoint',\n    'keys',\n    'row'\n];\n\n/**\n * @this {Hypergrid}\n * @param {string} eventName\n * @param {boolean} [cancelable=false] - Event implements `preventDefault()`. Must be boolean if given.\n * _If omitted, `event` and `primitiveEvent` are promoted to 2nd and 3rd argument positions, respecitvely._\n * @param {object} event\n * @param {CellEvent|MouseEvent|KeyboardEvent|object} [primitiveEvent]\n * @returns {undefined|boolean}\n */\nmodule.exports = function(eventName, cancelable, event, primitiveEvent) {\n    var detail;\n\n    if (!this.canvas) {\n        return;\n    }\n\n    if (typeof cancelable !== 'boolean') {\n        primitiveEvent = event; // propmote primitiveEvent to 3rd position\n        event = cancelable; // promote event to 2nd position\n        cancelable = false; // default when omitted\n    }\n\n    if (!event) {\n        event = {};\n    } else if (event instanceof CustomEvent) {\n        event = Object({}, event);\n    }\n\n    if (!event.type) {\n        event.type = eventName;\n    }\n\n    if (!event.detail) {\n        event = { detail: event };\n    }\n\n    detail = event.detail;\n\n    if (!detail.grid) { // CellEvent objects already have a (read-only) `grid` prop\n        detail.grid = this;\n    }\n\n    detail.time = Date.now();\n\n    if (primitiveEvent) {\n        if (!detail.primitiveEvent) {\n            detail.primitiveEvent = primitiveEvent;\n        }\n        details.forEach(function(key) {\n            if (key in primitiveEvent && !(key in detail)) {\n                detail[key] = primitiveEvent[key];\n            }\n        });\n        if ('dataRow' in primitiveEvent) {\n            // reference (without invoking) cellEvent's `dataRow` getter when available\n            Object.defineProperty(detail, 'row', { get: function() { return primitiveEvent.dataRow; } });\n        }\n    }\n\n    event.cancelable = cancelable;\n\n    return this.canvas.dispatchEvent(new CustomEvent(eventName, event));\n};\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","'use strict';\n\nvar version = require('../package.json').version;\nvar HypergridError = require('./lib/error');\n\n\nvar propClassEnum = {\n    COLUMNS: 1,\n    STRIPES: 2,\n    ROWS: 3,\n    CELLS: 4\n};\n\nvar propClassLayersMap = {\n    DEFAULT: [propClassEnum.COLUMNS, propClassEnum.STRIPES, propClassEnum.ROWS, propClassEnum.CELLS],\n    NO_ROWS: [propClassEnum.COLUMNS, propClassEnum.CELLS]\n};\n\n\n/**\n * This module lists the properties that can be set on a {@link Hypergrid} along with their default values.\n * Edit this file to override the defaults.\n * @module defaults\n */\n\nvar defaults = {\n\n    /**\n     * @summary The global theme name.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    themeName: 'default',\n\n    /**\n     * The default message to display in front of the canvas when there are no grid rows.\n     * Format is HTML.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    noDataMessage: '',\n\n    /**\n     * Multiplier for horizontal mouse wheel movement, applied to values of [`WheelEvent#deltaX`](https://developer.mozilla.org/docs/Web/API/WheelEvent/deltaX) (received by the horizontal scrollbar's listener).\n     *\n     * #### Caveat\n     * Wheel granularity depends on the OS, the input device, and possibly the browser. Any setting you choose will work differently in different environments. If you don't know the user's environment, it is probably best to give users control of this setting so they can fine tune it themselves.\n     *\n     * #### Default values\n     * This particular default value of `0.01` seems to work well on the MacBook Pro trackpad. It's slower than it was, which will greatly improve the scrolling experience since column scrolling often occurred inadvertently when the intent was to scroll in the veritcal direction only.\n     *\n     * Be aware however that the trackpad scrolling speed can be adjusted by the Mac user at the OS level (System Preferences -> Accessibility -> Mouse & Trackpad -> Trackpad Options -> Scrolling speed).\n     *\n     * Hint: You can tell if the user is using a trackpad by listening for any deltaX (since a simple mouse wheel is deltaY only); and what OS by checking user agent.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    wheelHFactor: 0.01,\n\n    /**\n     * Multiplier for vertical mouse wheel movement, applied to values of [`WheelEvent#deltaY`](https://developer.mozilla.org/docs/Web/API/WheelEvent/deltaY) (received by the vertical scrollbar's listener).\n     *\n     * #### Caveat\n     * Wheel granularity depends on the OS, the input device, and possibly the browser. Any setting you choose will work differently in different environments. If you don't know the user's environment, it is probably best to give users control of this setting so they can fine tune it themselves.\n     *\n     * #### Default values\n     * This particular default value of `0.05` is a compromise. It seems to work well on the MacBook Pro trackpad; and works acceptably (though differently) with a mouse wheel on both Mac OS and Windows.\n     *\n     * Be aware however that the trackpad scrolling speed can be adjusted by the Mac user at the OS level (System Preferences -> Accessibility -> Mouse & Trackpad -> Trackpad Options -> Scrolling speed). Mouse wheel scrolling speed is also adjustable ( _yada yada_ -> Mouse Options -> Scrolling speed; or on Windows search for \"Change mouse wheel settings\" in the Start menu).\n     *\n     * This default setting of `0.05` feels good on trackpad (2-finger drag). It's much slower than it was, but the way it was before was way to coarse and fast, scrolling hundreds of rows in a flash.\n     *\n     * With this setting, a mouse connected to a Mac, the wheel requires 5 click-stops to scroll 1 row; the same mouse connected to Windows scrolls 5 rows per click-stop. (However, I may have changed the default settings on my machines; not sure.)\n     *\n     * On Windows, the original multiplier setting (_i.e.,_ `1.0`) scrolled 100 grid rows on a single mouse wheel click-stop; the new default (`0.05`) scrolls 5 rows per click-stop. It stands to reason therefore that a setting of `0.01` will scroll 1:1 (1 row per 1 click-stop).\n     *\n     #### Hint\n     You can tell if the user is using a trackpad by listening for any deltaX (since a simple mouse wheel is deltaY only); and what OS by checking user agent.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    wheelVFactor: 0.05,\n\n    /**\n     * @summary List of subgrids by\n     * @desc Restrict usage here to strings (naming data models) or arrays consisting of such a string + constructor arguments. That is, avoid {@link subgridSpec}'s function and object overloads and {@link subgridConstructorRef} function overload.\n     * @default \"[ 'HeaderSubgrid', 'data' ]\"\n     * @type {subgridSpec[]}\n     * @memberOf module:defaults\n     */\n    subgrids: [\n        'HeaderSubgrid',\n        'data'\n    ],\n\n    /**\n     * The font for data cells.\n     * @default\n     * @type {cssFont}\n     * @memberOf module:defaults\n     */\n    font: '13px Tahoma, Geneva, sans-serif',\n\n    /**\n     * Font color for data cells.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    color: 'rgb(25, 25, 25)',\n\n    /**\n     * Background color for data cells.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    backgroundColor: 'rgb(241, 241, 241)',\n\n    /**\n     * Font style for selected cell(s).\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    foregroundSelectionFont: 'bold 13px Tahoma, Geneva, sans-serif',\n\n    /**\n     * Font color for selected cell(s).\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    foregroundSelectionColor: 'rgb(0, 0, 128)',\n    /**\n     * Background color for selected cell(s).\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    backgroundSelectionColor: 'rgba(147, 185, 255, 0.625)',\n\n\n    /********** SECTION: COLUMN HEADER COLORS **********/\n\n    // IMPORTANT CAVEAT: The code is inconsistent regarding the terminology. Is the \"column header\" section _the row_ of cells at the top (that act as headers for each column) or is it _the column_ of cells (that act as headers for each row)? Oh my.\n\n    /**\n     * @default\n     * @type {cssFont}\n     * @memberOf module:defaults\n     */\n    columnHeaderFont: '12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    columnHeaderColor: 'rgb(25, 25, 25)',\n\n    /**\n     * Font style for selected columns' headers.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    columnHeaderForegroundSelectionFont: 'bold 12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    columnHeaderBackgroundColor: 'rgb(223, 227, 232)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    columnHeaderForegroundSelectionColor: 'rgb(80, 80, 80)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    columnHeaderBackgroundSelectionColor: 'rgba(255, 220, 97, 0.45)',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    columnHeaderHalign: 'center',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    columnHeaderRenderer: 'SimpleCell',\n\n    /**\n     * There is no standard format called \"header\"; unless defined, defaults to \"string\" (pass-thru formatter).\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    columnHeaderFormat: 'header',\n\n\n    /********** SECTION: ROW HEADER COLORS **********/\n\n    /**\n     * @default\n     * @type {cssFont}\n     * @memberOf module:defaults\n     */\n    rowHeaderFont: '12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    rowHeaderColor: 'rgb(25, 25, 25)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    rowHeaderBackgroundColor: 'rgb(223, 227, 232)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    rowHeaderForegroundSelectionColor: 'rgb(80, 80, 80)',\n\n    /**\n     * Font style for selected rows' headers.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    rowHeaderForegroundSelectionFont: 'bold 12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    rowHeaderBackgroundSelectionColor: 'rgba(255, 220, 97, 0.45)',\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    backgroundColor2: 'rgb(201, 201, 201)',\n\n\n    /********** SECTION: TREE HEADER COLORS **********/\n\n    /**\n     * @default\n     * @type {cssFont}\n     * @memberOf module:defaults\n     */\n    treeHeaderFont: '12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    treeHeaderColor: 'rgb(25, 25, 25)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    treeHeaderBackgroundColor: 'rgb(223, 227, 232)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    treeHeaderForegroundSelectionColor: 'rgb(80, 80, 80)',\n\n    /**\n     * Font style for selected rows' headers.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    treeHeaderForegroundSelectionFont: 'bold 12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    treeHeaderBackgroundSelectionColor: 'rgba(255, 220, 97, 0.45)',\n    /********** SECTION: FILTER ROW COLORS **********/\n\n    /**\n     * @default\n     * @type {cssFont}\n     * @memberOf module:defaults\n     */\n    filterFont: '12px Tahoma, Geneva, sans-serif',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    filterColor: 'rgb(25, 25, 25)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    filterBackgroundColor: 'white',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    filterForegroundSelectionColor: 'rgb(25, 25, 25)',\n\n    /**\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    filterBackgroundSelectionColor: 'rgb(255, 220, 97)',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    filterHalign: 'center',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    filterRenderer: 'SimpleCell',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    filterEditor: 'TextField',\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    filterable: true,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    showFilterRow: false,\n\n    /**\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    voffset: 0,\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    scrollbarHoverOver: 'visible',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    scrollbarHoverOff: 'hidden',\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    scrollingEnabled: true,\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    vScrollbarClassPrefix: '',\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    hScrollbarClassPrefix: '',\n\n    /**\n     * Horizontal alignment of each cell as interpreted by it's cell renderer.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    halign: 'center',\n\n    /**\n     * Padding to left and right of cell value.\n     *\n     * NOTE: Right padding may not be visible if column is not sized wide enough.\n     *\n     * See also {@link module:defaults.iconPadding|iconPadding}.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    cellPadding: 5,\n\n    /**\n     * Padding to left and right of cell icons.\n     *\n     * Overrides {@link module:defaults.cellPadding|cellPadding}:\n     * * Left icon + `iconPadding` overrides left {@link module:defaults.cellPddingg|cellPddingg}.\n     * * Right icon + `iconPadding` overrides right {@link module:defaults.cellPddingg|cellPddingg}.\n     * @see {@link module:defaults.leftIcon|leftIcon}\n     * @see {@link module:defaults.centerIcon|centerIcon}\n     * @see {@link module:defaults.rightIcon|rightIcon}\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    iconPadding: 3,\n\n    /**\n     * @summary Name of image to appear at right of cell.\n     * @desc Must be a key from {@link module:images|images}.\n     *\n     * Used by {@link SimpleCell} cell renderer.\n     * @see {@link module:defaults.centerIcon|centerIcon}\n     * @see {@link module:defaults.rightIcon|rightIcon}\n     * @see {@link module:defaults.iconPadding|iconPadding}\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    leftIcon: undefined,\n\n    /**\n     * @summary Name of image to appear at right of cell.\n     * @desc Must be a key from {@link module:images|images}.\n     *\n     * Used by {@link SimpleCell} cell renderer.\n     * @see {@link module:defaults.leftIcon|leftIcon}\n     * @see {@link module:defaults.rightIcon|rightIcon}\n     * @see {@link module:defaults.iconPadding|iconPadding}\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    centerIcon: undefined,\n\n    /**\n     * @summary Name of image to appear at right of cell.\n     * @desc Must be a key from {@link module:images|images}.\n     *\n     * Used by {@link SimpleCell} cell renderer.\n     * @see {@link module:defaults.leftIcon|leftIcon}\n     * @see {@link module:defaults.centerIcon|centerIcon}\n     * @see {@link module:defaults.iconPadding|iconPadding}\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    rightIcon: undefined,\n\n    /**\n     * Set to `true` to render `0` and `false`. Otherwise these value appear as blank cells.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    renderFalsy: false,\n\n    /**\n     * The name of a transformer function defined in require('synonomous/transformers').\n     *\n     * If the named headerify function is defined, whenever the schema array changes, it is applied each element\n     * (column schema) for each column that does not already have an explicitly defined `header` property.\n     *\n     * When this property does not name a defined headerify function, undefined column headers default to their column names.\n     *\n     * @see lib/headerifiers.js\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    headerify: 'toTitle',\n\n    /**\n     * Enable rendering of horizontal grid lines.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    gridLinesH: true,\n\n    /**\n     * Thickness of horizontal grid lines (pixels).\n     * @type {number}\n     * @default\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.lineWidth lineWidth}\n     */\n    gridLinesHWidth: 1,\n\n    /**\n     * Color of horizontal grid lines.\n     * @type {string}\n     * @default\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.lineColor lineColor}\n     */\n    gridLinesHColor: 'rgb(199, 199, 199)',\n\n    /**\n     * Enable rendering of vertical grid lines.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    gridLinesV: true,\n\n    /**\n     * Thickness of vertical grid lines (pixels).\n     * @type {number}\n     * @default\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.lineWidth lineWidth}\n     */\n    gridLinesVWidth: 1,\n\n    /**\n     * Color of vertical grid lines.\n     * @type {string}\n     * @default\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.lineColor lineColor}\n     */\n    gridLinesVColor: 'rgb(199, 199, 199)',\n\n    /**\n     * When {@link module:defaults.gridLinesV} is truthy, determines if lines render in the column headers area.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    gridLinesColumnHeader: true,\n\n    /**\n     * When {@link module:defaults.gridLinesH} is truthy, determines if lines render in the row headers area.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    gridLinesRowHeader: true,\n\n    /**\n     * When {@link module:defaults.gridLinesV} or {@link module:defaults.gridLinesH} are truthy, determines if lines render in the user data area.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    gridLinesUserDataArea: true,\n\n    /**\n     * Set canvas's CSS border to this string as well as:\n     * * {@link module:dynamicProperties.gridBorderLeft gridBorderLeft}\n     * * {@link module:dynamicProperties.gridBorderRight gridBorderRight}\n     * * {@link module:dynamicProperties.gridBorderTop gridBorderTop}\n     * * {@link module:dynamicProperties.gridBorderBottom gridBorderBottom}.\n     *\n     * If set to:\n     * `true`: uses current {@link module:dynamicProperties.lineWidth lineWidth} and {@link module:dynamicProperties.lineColor lineColor}\n     * `false`: uses null\n     *\n     * Caveat: The use of `grid.canvas.canvas.style.boxSizing = 'border-box'` is _not_ recommended due to\n     * the fact that the canvas is squashed slightly to accommodate the border resulting in blurred text.\n     *\n     * @default\n     * @type {boolean|string}\n     * @memberOf module:defaults\n     */\n    gridBorder: false,\n\n    /**\n     * Set canvas's left CSS border to this string.\n     *\n     * If set to:\n     * * `true`: uses current {@link module:dynamicProperties.lineWidth lineWidth} and {@link module:dynamicProperties.lineColor lineColor}\n     * * `false`: uses null\n     * @default\n     * @type {boolean|string}\n     * @memberOf module:defaults\n     */\n    gridBorderLeft: false,\n\n    /**\n     * Set canvas's right CSS border to this string.\n     *\n     * If set to:\n     * * `true`: uses current {@link module:dynamicProperties.lineWidth lineWidth} and {@link module:dynamicProperties.lineColor lineColor}\n     * * `false`: uses null\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    gridBorderRight: false,\n\n    /**\n     * Set canvas's top CSS border to this string.\n     *\n     * If set to:\n     * * `true`: uses current {@link module:dynamicProperties.lineWidth lineWidth} and {@link module:dynamicProperties.lineColor lineColor}\n     * * `false`: uses null\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    gridBorderTop: false,\n\n    /**\n     * Set canvas's bottom CSS border to this string.\n     *\n     * If set to:\n     * * `true`: uses current {@link module:dynamicProperties.lineWidth lineWidth} and {@link module:dynamicProperties.lineColor lineColor}\n     * * `false`: uses null\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    gridBorderBottom: false,\n\n    /**\n     * Define this property to style rule lines between non-scrollable rows and scrollable rows differently from {@link module:defaults.gridLinesHWidth gridLinesHWidth}.\n     * Undefine it to show normal grid line in that position.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedLinesHWidth: 2,\n\n    /**\n     * Define this property to render just the edges of the lines between non-scrollable rows & scrollable rows, creating a double-line effect.\n     * The value is the thickness of the edges.\n     * Typical definition would be `1` in tandem with setting {@link module:defaults.fixedLinesHWidth fixedLinesHWidth} to `3`.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedLinesHEdge: undefined, // undefined means no edge effect\n\n    /**\n     * Define this property to style rule lines between fixed & scolling rows differently from {@link module:defaults.gridLinesHColor}.\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    fixedLinesHColor: 'rgb(164,164,164)', // ~21% darker than {@link module:defaults.gridLinesHColor} default\n\n    /**\n     * Define this property to style rule lines between non-scrollable columns and scrollable columns differently from {@link module:defaults.gridLinesVWidth gridLinesVWidth}.\n     * Undefine it to show normal grid line in that position.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedLinesVWidth: 2,\n\n    /**\n     * Define this property to render just the edges of the lines between fixed & scrolling columns, creating a double-line effect.\n     * The value is the thickness of the edges.\n     * Typical definition would be `1` in tandem with setting {@link module:defaults.fixedLinesVWidth fixedLinesVWidth} to `3`.\n     * @see {@link module:defaults.fixedLinesVWidth}\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedLinesVEdge: undefined, // undefined means no edge effect\n\n    /**\n     * Define this property to style rule lines between fixed & scolling columns differently from {@link module:defaults.gridLinesVColor}.\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    fixedLinesVColor: 'rgb(164,164,164)', // ~21% darker than {@link module:defaults.gridLinesVColor} default\n\n    /**\n     * Analogous to CSS {@link https://developer.mozilla.org/docs/Web/CSS/box-sizing `box-sizing`} property:\n     * * `'content-box'` _(default starting in version 3)_<br>\n     * Grid and fixed rule lines are rendered _between_ cells;\n     * cell rects are spread out to accommodate.\n     * * `'border-box'` _(default in version 2)_<br>\n     * Grid and fixed rule lines are rendered on inside right and bottom edges of each cell\n     * (except right-most and bottom-most visible cells);\n     * cell rects are contiguous.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    boxSizing: version > 2 ? 'content-box' : 'border-box',\n\n    /**\n     * @default\n     * @type {number}\n     * @see {@link module:defaults.boxSizing boxSizing}\n     * @memberOf module:defaults\n     */\n    defaultRowHeight: version > 2 ? 14 : 15,\n\n    /**\n     * This default column width is used when `width` property is undefined.\n     * (`width` is defined on column creation unless {@link module:defaults.columnAutosizing columnAutosizing} has been set to `false`.)\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    defaultColumnWidth: 100,\n\n    /**\n     * Minimum column width.\n     * Adjust this value for different fonts/sizes or exotic cell renderers.\n     * _Must be defined._\n     * The default (`5`) is enough room for an ellipsis with default font size.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    minimumColumnWidth: 5,\n\n    /**\n     * Maximum column width.\n     * _When defined,_ column width is clamped to this value by {@link Column#setWidth setWidth}).\n     * Ignored when falsy.\n     * Respects {@link module:defaults.resizeColumnInPlace resizeColumnInPlace} but may cause user confusion when\n     * user can't make column narrower due to next column having reached its maximum.\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    maximumColumnWidth: undefined,\n\n    /**\n     * Resizing a column through the UI (by clicking and dragging on the column's\n     * right border in the column header row) normally affects the width of the whole grid.\n     *\n     * Set this new property to truthy to inversely resize the next column.\n     * In other words, if user expands (say) the third column, then the fourth column will contract \n     * and _vice versa_  without therefore affecting the width of the grid.\n     *\n     * This is a _column property_ and may be set for selected columns (`myColumn.properties.resizeColumnInPlace`)\n     * or for all columns by setting it at the grid level (`myGrid.properties.resizeColumnInPlace`).\n     *\n     * Note that the implementation of this property does not allow expanding a\n     * column beyond the width it can borrow from the next column.\n     * The last column, however, is unconstrained, and resizing of course affects the total grid width.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    resizeColumnInPlace: false,\n\n    //for immediate painting, set these values to 0, true respectively\n\n    /**\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    repaintIntervalRate: 60,\n\n    /**\n     * Normally multiple calls to {@link Hypergrid#repaint grid.repaint()}, {@link Hypergrid#reindex grid.reindex()}, {@link Hypergrid#behaviorShapeChanged grid.behaviorShapeChanged()}, and/or {@link Hypergrid#behaviorStateChanged grid.behaviorStateChanged()} defer their actions until just before the next scheduled render. For debugging purposes, set `repaintImmediately` to truthy to carry out these actions immediately while leaving the paint loop running for when you resume execution. Alternatively, call {@link Canvas#stopPaintLoop grid.canvas.stopPaintLoop()}. Caveat: Both these modes are for debugging purposes only and may not render the grid perfectly for all interactions.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    repaintImmediately: false,\n\n    //enable or disable double buffering\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    useBitBlit: false,\n\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    useHiDPI: true,\n\n    /**\n     * @summary Mappings for cell navigation keys.\n     * @desc Cell navigation is handled in the {@link CellSelection} \"feature\".\n     * This property gives you control over which key presses the built-in mechanism will respond to.\n     *\n     * (If this built-in cell selection logic is insufficient for your needs, you can also listen for\n     * the various \"fin-key\" events and carry out more complex operations in your listeners.)\n     *\n     * The key press names used here are defined in Canvas.js.\n     * Note that all key presses actually have two names, a normal name and a shifted name.\n     * The latter name is used when **shift** is depressed.\n     *\n     * The built-in nav key presses are as follows:\n     * * **`UP`** _(up-arrow key)_ - Replace all selections with a single cell, one row up from the last selection.\n     * * **`DOWN`** _(down-arrow key)_ - Replace all selections with a single cell, one row down from the last selection.\n     * * **`LEFT`** _(left-arrow key)_ - Replace all selections with a single cell, one column to the left of the last selection.\n     * * **`RIGHT`** _(right-arrow key)_ - Replace all selections with a single cell, one column to the right of the last selection.\n     * * **`UPSHIFT`** _(shift + up-arrow)_ - Extend the last selection up one row.\n     * * **`DOWNSHIFT`** _(shift + down-arrow)_ - Extend the last selection down one row.\n     * * **`LEFTSHIFT`** _(shift + left-arrow)_ - Extend the last selection left one column.\n     * * **`RIGHTSHIFT`** _(shift + right-arrow)_ - Extend the last selection right one column.\n     *\n     * To alter these or add other mappings see the examples below.\n     *\n     * A note regarding the other meta keys (**ctrl**, **option**, and **command**):\n     * Although these meta keys can be detected, they do not modify the key names as **shift** does.\n     * This is because they are more for system use and generally (with the possibly exception fo **ctrl**) should not\n     * be depended upon, as system functions will take priority and your app will never see these key presses.\n     *\n     * A special accommodation has been made to the {@link module:defaults.editOnKeydown|editOnKeydown} property:\n     * * If `editOnKeydown` truthy AND mapped character is an actual (non-white-space) character, as opposed to (say)\n     * **tab** or **return**, then navigation requires the **ctrl** key to distinguish between nav and data.\n     * * If `editOnKeydown` falsy, the **ctrl** key is ignored.\n     *\n     * So if (say) `a` is mapped to `LEFT` as in the last example below, if `editOnKeydown` is ON, then `a` (without\n     * **ctrl**) would start editing the cell but **ctrl** + `a` would move the selection one column to the left.\n     *\n     * @example\n     * // To void the above build-ins:\n     * navKeyMap: {\n     *     UP: undefined,\n     *     UPSHIFT: undefined,\n     *     DOWN: undefined,\n     *     ...\n     * }\n     *\n     * @example\n     * // To map alternative nav key presses to RETURN and TAB (default mapping):\n     * navKeyMap: {\n     *     RETURN: 'DOWN',\n     *     RETURNSHIFT: 'UP',\n     *     TAB: 'RIGHT',\n     *     TABSHIFT: 'LEFT'\n     * }\n     *\n     * @example\n     * // To map alternative nav key presses to a/w/d/s and extend select to A/W/D/S:\n     * navKeyMap: {\n     *     a: 'LEFT', A: 'LEFTSHIFT',\n     *     w: 'UP', W: 'UPSHIFT',\n     *     s: 'DOWN', S: 'DOWNSHIFT',\n     *     d: 'RIGHT', D: 'RIGHTSHIFT'\n     * }\n     *\n     * @default\n     * @type {object|undefined}\n     * @memberOf module:defaults\n     */\n    navKeyMap: {\n        RETURN: 'DOWN',\n        RETURNSHIFT: 'UP',\n        TAB: 'RIGHT',\n        TABSHIFT: 'LEFT'\n    },\n\n    /** @summary Validation failure feedback.\n     * @desc Validation occurs on {@link CellEditor#stopEditing|stopEditing}, normally called on commit (`TAB`, `ENTER`, or any other keys listed in `navKeyMap`).\n     *\n     * On successful validation, the value is saved back to the data source and the editor is closed.\n     *\n     * On validation failure, feedback is shown to the user in the form of an \"error effect\" possibly followed by an \"end effect\" containing a detailed explanation.\n     *\n     * The error effect to use is named in {@link module:defaults.feedbackEffect|feedbackEffect}.\n     *\n     * The value of this property is the number of times to show the \"error effect\" on validation failure before showing the detailed explanation.\n     *\n     * `feedback` may be set to one of:\n     * * **`undefined`** - Do not show the error effect or the alert. Just discard the value and close the editor (as if `ESC` had been typed).\n     * * **`0`** - Just shows the error feedback effect (see the {@link CellEditor#errorEffect|errorEffect} property).\n     * * **`1`** - Shows the error feedback effect followed by the detailed explanation.\n     * * `2` or more:\n     *   1. Shows the error feedback effect\n     *   2. On every `feedback` tries, shows the detailed explanation.\n     * @default\n     * @type {number|undefined}\n     * @memberOf module:defaults\n     */\n    feedbackCount: 3,\n\n    /**\n     * @default\n     * @type {{name:string,options:object}|string}\n     * @memberOf module:defaults\n     * @see {@link module:defaults.feedbackCount|feedbackCount}\n     */\n    feedbackEffect: 'shaker',\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    readOnly: false,\n\n    /**\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedColumnCount: 0,\n\n    /**\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    fixedRowCount: 0,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.showRowNumbers}\n     */\n    rowHeaderNumbers: true,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     * @see {@link module:dynamicProperties.showRowNumbers}\n     */\n    rowHeaderCheckboxes: true,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    showTreeColumn: true,\n\n    /**\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    treeRenderer: 'SimpleCell',\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    showHeaderRow: true,\n\n    /** Clicking in a cell \"selects\" it; it is added to the select region and repainted with \"cell selection\" colors.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    cellSelection: true,\n\n    /** Clicking in a column header (top row) \"selects\" the column; the entire column is added to the select region and repainted with \"column selection\" colors.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    columnSelection: true,\n\n    /** Clicking in a row header (leftmost column) \"selects\" the row; the entire row is added to the select region and repainted with \"row selection\" colors.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    rowSelection: true,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    singleRowSelectionMode: true,\n\n    /**\n     * @summary Fill color for last selection overlay.\n     * @desc The color should be translucent (or transparent). Note that \"Partial\" grid renderers (such as the {@link paintCellsAsNeeded} renderer) do not draw overlay because it just gets darker and darker for non-updated cells.\n     * @default\n     * @type {cssColor}\n     * @memberOf module:defaults\n     */\n    selectionRegionOverlayColor: 'transparent', // 'rgba(0, 0, 48, 0.2)',\n\n    /**\n     * @summary Stroke color for last selection overlay.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    selectionRegionOutlineColor: 'rgb(69, 69, 69)',\n\n    /**\n     * @summary Whether to automatically expand column width to accommodate widest rendered value.\n     * @desc When truthy for a given column _and_ user has not manually resized it, column will expand to accommodate widest rendered value.\n     *\n     * What's actually happening is (`props` in the following refers to the column's properties):\n     * 1. On each grid render, for all visible columns:\n     *    1. The cell renderer reports back the width of each rendered cell contents.\n     *    2. The largest value for each column is saved (in `props.preferredWidth`).\n     * 2. At the conclusion of the grid render, the renderer calls `grid.gridRenderedNotification`, which calls `grid.behavior.checkColumnAutosizing`, which for all columns for which `props.columnAutosizing` is truthy, determines if the column needs to be widened subject to the following conditions:\n     *    1. If user has not already manually set column width (`props.columnAutosized` is still falsy)\n     *    2. If render width > current width (`props.preferredWidths > props.width`)\n     *    3. If column's max autosizing width is defined and it's greater than render width (`props.peferredWidths < props.columnAutosizingMax`)\n     * 3. If any column width has changed, re-shape the grid with the new column widths and re-render it. As this typically happens before the next monitor refresh, user only sees the final result.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    columnAutosizing: true,\n\n    /**\n     * @summary Whether to automatically expand row number column width to accommodate widest rendered row number\n     * @desc `grid.properties.rowNumberAutosizing` is the backing store for `grid.behavior.columns[-2].columnAutosizing`.\n     * Supports row number column styling via the `rowNumber_______` grid state properties.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    rowNumberAutosizing: true,\n\n    /**\n     * @summary Whether to automatically expand row number column width to accommodate widest rendered group label.\n     * @desc `grid.properties.treeColumnAutosizing` is the backing store for `grid.behavior.columns[-1].columnAutosizing`.\n     * Supports tree column styling via the `rowColumn_______` grid state properties.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    treeColumnAutosizing: true,\n\n    /**\n     * @summary The widest the column will be auto-sized to.\n     * @desc For no limit, set this property to a falsy value such as `undefined` or `0`.\n     *\n     * Note this property only specifies a maximum column width for _auto-sizing;_ it places no limit on manual resizing of column width.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    columnAutosizingMax: 400,\n\n    /**\n     * @summary The widest the tree column will be auto-sized to.\n     * @desc `grid.properties.treeColumnAutosizingMax` is the store for `grid.behavior.columns[-1].columnAutosizingMax`.\n     * Supports tree column styling via the `rowColumn_______` grid state properties.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    treeColumnAutosizingMax: 400,\n\n    /**\n     * @summary Whether text in header cells is wrapped.\n     * @desc For performance reasons, text in data cells is not wrapped. (This is a function of the supplied `SimpleCell` renderer. Override with a custom renderer if you must have wrapped text in data cells.)\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    headerTextWrapping: false,\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    rowResize: false,\n\n\n    /* CELL EDITING */\n\n    /**\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    editable: true,\n\n    /**\n     * Edit cell on double-click rather than single-click.\n     *\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    editOnDoubleClick: true,\n\n    /**\n     * Grid-level property.\n     * When user presses a \"printable\" keyboard character _or_ BACKSPACE _or_ DELETE:\n     * 1. Activate cell editor on current cell (i.e., origin of most recent selection).\n     * 2. If cell editor is a text editor:\n     *    1. Replace current value with the character the user typed; or\n     *    2. Clear it on BACKSPACE, DELETE, or other invalid character (_e.g._ when user types a letter but the cell editor only accepts digits).\n     *\n     * > In invoked, user has the option to back out by pressing the ESCAPE key.\n     *\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    editOnKeydown: true,\n\n    /**\n     * @summary Open cell editor when cell selected via keyboard navigation.\n     * @desc Keyboard navigation always includes:\n     * 1. The four arrow keys -- but only when there is no active text cell editor open\n     * 2. Additional keys mapped to the four directs in {@link module:defaults.navKeyMap}\n     *\n     * Generally set at the grid level. If set at the column (or cell) level, note that the property pertains to the cell navigated _to,_ not the cell navigated _away from._\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    editOnNextCell: false,\n\n\n    /* COLUMN SORTING */\n\n    /**\n     * Ignore sort handling in feature/ColumnSorting.js.\n     * Useful for excluding some columns but not other from participating in sorting.\n     *\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    unsortable: false,\n\n    /**\n     * Sort column on double-click rather than single-click.\n     *\n     * Used by:\n     * * feature/ColumnSorting.js to decide which event to respond to (if any, see `unsortabe`).\n     * * feature/ColumnSelection.js to decide whether or not to wait for double-click.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    sortOnDoubleClick: true,\n\n    /**\n     * **This is a standard property definition for sort plug-in use.\n     * It is not referenced in core.**\n     *\n     * The maximum number of columns that may participate in a multi-column sort (via ctrl-click headers).\n     * @default\n     * @type {number}\n     * @memberOf module:defaults\n     */\n    maxSortColumns : 3,\n\n    /**\n     * **This is a standard property definition for sort plug-in use.\n     * It is not referenced in core.**\n     *\n     * Column(s) participating and subsequently hidden still affect sort.\n     *\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    sortOnHiddenColumns: true,\n\n\n    /**\n     * @summary Retain row selections.\n     * @desc When falsy, row selections are cleared when selecting cells; when truthy, row selections are kept as is when selecting cells.\n     * @todo Deprecate in favor of something simpler like `keepRowSelections`. (The current name is misleading and has caused some confusion among both developers and users. At the very least it should have been called `checkboxOnlyRowDeselections`.)\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    checkboxOnlyRowSelections: false,\n\n    /**\n     * @summary Select cell's entire row.\n     * @desc When truthy, selecting a cell will also select the entire row it is in, subject to note #1 below.\n     *\n     * Notes:\n     * 1. Ineffectual unless `checkboxOnlyRowSelections` is set to `false`.\n     * 2. To allow auto-selection of _multiple rows,_ set `singleRowSelectionMode` to `false`.\n     *\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    autoSelectRows: false,\n\n    /**\n     * @summary Select cell's entire column.\n     * @desc When truthy, selecting a cell will also select the entire column it is in.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    autoSelectColumns: false,\n\n    /**\n     * Collapse cell selection onto next row selection.\n     * @default\n     * @type {boolean}\n     * @memberOf module:defaults\n     */\n    collapseCellSelections: false,\n\n    /** @summary Name of a formatter for cell text.\n     * @desc Unknown formatter falls back to the `string` formatter (simple conversion to string with `+ ''`).\n     * @default undefined\n     * @type {string}\n     * @memberOf module:defaults\n     * @tutorial localization\n     */\n    format: undefined,\n\n    /** @summary Name of a cell editor from the {@link module:cellEditors|cellEditors API}..\n     * @desc Not editable if named editor is does not exist.\n     * @default undefined\n     * @type {string}\n     * @memberOf module:defaults\n     * @tutorial cell-editors\n     */\n    editor: undefined,\n\n    /**\n     * Name of cell renderer from the {@link module:cellRenderers|cellRenderers API}.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    renderer: 'SimpleCell',\n\n    /**\n     * Name of grid renderer.\n     * Renderer must have been registered.\n     * @see {@link Renderer#registerGridRenderer}.\n     * @default\n     * @type {string}\n     * @memberOf module:defaults\n     */\n    gridRenderer: 'by-columns-and-rows',\n\n    /********** HOVER COLORS **********/\n\n    /** @typedef hoverColors\n     * @property {boolean} [enable=false] - `false` means not hilite on hover\n     * @property {cssColor} backgroundColor - cell, row, or column background color. Alpha channel will be respected and if given will be painted over the cells predetermined color.\n     * @property {cssColor} [header.backgroundColor=backgroundColor] - for columns and rows, this is the background color of the column or row \"handle\" (header rows or columns, respectively). (Not used for cells.)\n     */\n\n    /** On mouse hover, whether to repaint the cell background and how.\n     * @type {hoverColors}\n     * @default '{ enabled: true, background: rgba(160, 160, 40, 0.30) }'\n     * @memberOf module:defaults\n     */\n    hoverCellHighlight: {\n        enabled: true,\n        backgroundColor: 'rgba(160, 160, 40, 0.45)'\n    },\n\n    /** On mouse hover, whether to repaint the row background and how.\n     * @type {hoverColors}\n     * @default '{ enabled: true, background: rgba(100, 100, 25, 0.15) }'\n     * @memberOf module:defaults\n     */\n    hoverRowHighlight: {\n        enabled: true,\n        backgroundColor: 'rgba(100, 100, 25, 0.30)'\n\n    },\n\n    /** On mouse hover, whether to repaint the column background and how.\n     * @type {hoverColors}\n     * @default '{ enabled: true, background: rgba(60, 60, 15, 0.15) }'\n     * @memberOf module:defaults\n     */\n    hoverColumnHighlight: {\n        enabled: true,\n        backgroundColor: 'rgba(60, 60, 15, 0.15)'\n    },\n\n    /** @summary Display cell value as a link (with underline).\n     * @desc One of:\n     * * `boolean` - No action occurs on click; you would need to attach a 'fin-click' listener to the hypergrid object.\n     *   * `true` - Displays the cell as a link.\n     *   * _falsy_ - Displays the cell normally.\n     * * `string` -  The URL is decorated (see {}) and then opened in a separate window/tab. See also {@link module:defaults.linkTarget|linkTarget}.\n     *   * `'*'` - Use the cell value as the URL, ready for decorating (see {CellClick#openLink|openLink)).\n     *   * _field name_ - Fetches the string from the named field in the same row, assumed to be a URL ready for decorating. (May contain only alphanumerics and underscore; no spaces or other punctuation.)\n     *   * _otherwise_ Assumed to contains a URL ready for decorating.\n     * * `function` - A function to execute to get the URL ready for decorating. The function is passed a single parameter, `cellEvent`, from which you can get the field `name`, `dataRow`, _etc._\n     * * `Array` - An array to \"apply\" to {@link https://developer.mozilla.org/docs/Web/API/Window/open window.open} in its entirety. The first element is interpreted as above for `string` or `function`.\n     *\n     * In the case of `string` or `Array`, the link is further unpacked by {@link module:CellClick.openLink|openLink} and then sent to `grid.windowOpen`.\n     *\n     * @example\n     * // following affect upper-left data cell:\n     * grid.behavior.setCellProperty(0, 0, 'https://nytimes.com'); // absolute address using specific protocol\n     * grid.behavior.setCellProperty(0, 0, '//nytimes.com'); // absolute address using current protocol\n     * grid.behavior.setCellProperty(0, 0, '/page2.com'); // relative to current site\n     * grid.behavior.setCellProperty(0, 0, 'mypage.com'); // relative to current page\n     * grid.behavior.setCellProperty(0, 0, 'mypage.com?id=%value'); // cell's value will replace %value\n     * grid.behavior.setCellProperty(0, 0, ['//www.newyorker.com', 'ny', undefined, true]) // target='ny', replace=true\n     * @type {boolean|string|Array}\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    link: false,\n\n    /** @summary The window (or tab) in which to open the link.\n     * @desc The default ('_blank'`) will open a new window for every click.\n     *\n     * To have the first click open a new window and all subsequent clicks reuse that same window, set this to an arbitrary string.\n     *\n     * Otherwise, specific columns or cells can be set to open their links in their own window by setting the appropriate column's or cell's `linkTarget` property.\n     * @default\n     * @memberOf module:defaults\n     */\n    linkTarget: '_blank',\n\n    /** @summary Underline link on hover only.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    linkOnHover: false,\n\n    /** @summary Color for link.\n     * @desc Falsy means defer to foreground color.\n     * @type {string}\n     * @default\n     * @memberOf module:defaults\n     */\n    linkColor: 'blue',\n\n    /** @summary Color for visited link.\n     * @desc Falsy means defer to foreground color.\n     * @type {string}\n     * @default\n     * @memberOf module:defaults\n     */\n    linkVisitedColor: 'purple',\n\n    /** @summary Color link on hover only.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    linkColorOnHover: false,\n\n    /** Display cell font with strike-through line drawn over it.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    strikeThrough: false,\n\n    /** Allow multiple cell region selections.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    multipleSelections: false,\n\n    /** @summary Re-render grid at maximum speed.\n     * @desc In this mode:\n     * * The \"dirty\" flag, set by calling `grid.repaint()`, is ignored.\n     * * `grid.getCanvas().currentFPS` is a measure of the number times the grid is being re-rendered each second.\n     * * The Hypergrid renderer gobbles up CPU time even when the grid appears idle (the very scenario `repaint()` is designed to avoid). For this reason, we emphatically advise against shipping applications using this mode.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    enableContinuousRepaint: false,\n\n    /** @summary Allow user to move columns .\n     * @desc Columns can be reordered through either of two interfaces:\n     * * Column Dragging feature\n     * * behavior.columns API\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    columnsReorderable: true,\n\n    /** @summary Column grab within this number of pixels from top of cell.\n     * @type {number}\n     * @default\n     * @memberOf module:defaults\n     */\n    columnGrabMargin: 5,\n\n    /** @summary Set up a clipping region around each column before painting cells.\n     * @desc One of:\n     * * `true` - Clip column.\n     * * `false` - Do not clip column.\n     * * `null` - Clip iff last active column.\n     *\n     * Clipping prevents text that overflows to the right of the cell from being rendered.\n     * If you can guarantee that none of your text will overflow, turn column clipping off\n     * for better performance. If not, you may still be able to get away without clipping.\n     * If the background color of the next column is opaque, you don't really need to clip,\n     * although text can leak out to the right of the last column. Clipping the last column\n     * only can help this but not solve it since the leaked text from (say) the column before\n     * the last column could stretch across the entire last column and leak out anyway.\n     * The solution to this is to clip the rendered string so at most only a partial character\n     * will overflow.\n     * @type {boolean|undefined}\n     * @default\n     * @memberOf module:defaults\n     */\n    columnClip: true,\n\n    /**\n     * @summary Repeating pattern of property overrides for grid rows.\n     * @desc Notes:\n     * * \"Grid row\" refers to data rows.\n     * * Row index modulo is applied when dereferencing this array. In other words, this array represents a _repeating pattern_ of properties to be applied to the data rows.\n     * * For no row properties, specify a falsy value in place of the array.\n     * * Do not specify an empty array (will throw an error).\n     * * Each element of the array may be either:\n     *   * An object containing property overrides to be applied to every cell of the row; or\n     *   * A falsy value signifying that there are no row properties for this specific row.\n     * * Caveat: Row properties use `Object.assign()` to copy properties and therefore are not as performant as column properties which use prototype chain.\n     * * `Object.assign()` is a polyfill in older versions of Chrome (<45) and in all Internet Explorer (through 11).\n     * @type {undefined|object[]}\n     * @default\n     * @memberOf module:defaults\n     */\n    rowStripes: undefined,\n\n    // for Renderer.prototype.assignProps\n    propClassLayers: propClassLayersMap.DEFAULT,\n\n    /**\n     * Used to access registered features -- unless behavior has a non-empty `features` property (array of feature contructors).\n     */\n    features: [\n        'filters',\n        'cellselection',\n        'keypaging',\n        'columnresizing',\n        // 'rowresizing',\n        'rowselection',\n        'columnselection',\n        'columnmoving',\n        'columnsorting',\n        'cellclick',\n        'cellediting',\n        'onhover',\n        'touchscrolling'\n    ],\n\n    /** @summary Restore row selections across data transformations (`reindex` calls).\n     * @desc The restoration is based on the underlying data row indexes.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    restoreRowSelections: true,\n\n    /** @summary Restore column selections across data transformations (`reindex` calls).\n     * @desc The restoration is based on the column names.\n     * @type {boolean}\n     * @default\n     * @memberOf module:defaults\n     */\n    restoreColumnSelections: true,\n\n    /** @summary How to truncate text.\n     * @desc A \"quaternary\" value, one of:\n     * * `undefined` - Text is not truncated.\n     * * `true` (default) - Truncate sufficient characters to fit ellipsis if possible. Most acceptable option that avoids need for clipping.\n     * * `false` - Truncate *before* last partially visible character. Visibly annoying; semantically jarring.\n     * * `null` - Truncate *after* partially visible character. Less visibly annoying; still semantically confusing. Best solution when combined with either column clipping or painting over with next column's background.\n     * @type {boolean|null|undefined}\n     * @default\n     * @memberOf module:defaults\n     */\n    truncateTextWithEllipsis: true\n};\n\n\nvar warned = {};\n\nfunction rowPropertiesDeprecationWarning() {\n    if (!warned.rowProperties) {\n        warned.rowProperties = true;\n        console.warn('The `rowProperties` property has been deprecated as of v2.1.0 in favor of `rowStripes`. (Will be removed in a future release.)');\n    }\n}\n\nObject.defineProperties(defaults, {\n    rowProperties: {\n        get: function() {\n            rowPropertiesDeprecationWarning();\n            return this.rowStripes;\n        },\n        set: function(rowProperties) {\n            rowPropertiesDeprecationWarning();\n            this.rowStripes = rowProperties;\n        }\n    }\n});\n\nfunction columnOnlyError() {\n    throw new HypergridError('Attempt to set/get column-only property on a non-column properties object.');\n}\n\n['name', 'type', 'header', 'calculator'].forEach(function(key) {\n    Object.defineProperty(defaults, key, {\n        set: columnOnlyError\n    });\n});\n\n/** @typedef {string} cssColor\n * @see https://developer.mozilla.org/docs/Web/CSS/color_value\n */\n/** @typedef {string} cssFont\n * @see https://developer.mozilla.org/docs/Web/CSS/font\n */\n\n\n/**\n * Returns any value of `keyChar` that passes the following logic test:\n * 1. If a non-printable, white-space character, then nav key.\n * 2. If not (i.e., a normal character), can still be a nav key if not editing on key down.\n * 3. If not, can still be a nav key if CTRL key is down.\n *\n * Note: Callers are typcially only interested in the following values of `keyChar` and will ignore all others:\n * * `'LEFT'` and `'LEFTSHIFT'`\n * * `'RIGHT'` and `'RIGHTSHIFT'`\n * * `'UP'` and `'UPSHIFT'`\n * * `'DOWN'` and `'DOWNSHIFT'`\n *\n * @param {string} keyChar - A value from Canvas's `charMap`.\n * @param {boolean} [ctrlKey=false] - The CTRL key was down.\n * @returns {undefined|string} `undefined` means not a nav key; otherwise returns `keyChar`.\n * @memberOf module:defaults\n */\nfunction navKey(keyChar, ctrlKey) {\n    var result;\n    if (keyChar.length > 1 || !this.editOnKeydown || ctrlKey) {\n        result = keyChar; // return the mapped value\n    }\n    return result;\n}\n\n/**\n * Returns only values of `keyChar` that, when run through {@link module:defaults.navKeyMap|navKeyMap}, pass the {@link module:defaults.navKey|navKey} logic test.\n *\n * @param {string} keyChar - A value from Canvas's `charMap`, to be remapped through {@link module:defaults.navKeyMap|navKeyMap}.\n * @param {boolean} [ctrlKey=false] - The CTRL key was down.\n * @returns {undefined|string} `undefined` means not a nav key; otherwise returns `keyChar`.\n * @memberOf module:defaults\n */\nfunction mappedNavKey(keyChar, ctrlKey) {\n    keyChar = this.navKeyMap[keyChar];\n    return keyChar && this.navKey(keyChar);\n}\n\n/** @summary Reapply cell properties after `getCell`.\n * @type {boolean}\n * @default\n * @memberOf module:defaults\n */\nfunction reapplyCellProperties(value) {\n    if (!warned.reapplyCellProperties) {\n        console.warn('The `.reapplyCellProperties` property has been deprecated as of v2.1.3 in favor of using the new `.propClassLayers` property. (May be removed in a future release.) This property is now a setter which sets `.propClassLayers` to `.propClassLayersMap.DEFAULT` (grid  columns  stripes  rows  cells) on truthy or `propClassLayersMap.NO_ROWS` (grid  columns  cells) on falsy, which is what you will see on properties stringification. This will give the same effect in most cases as the former property implementation, but not in all cases due to it no longer being applied dynamically. Developers should discontinue use of this property and start specifying `.propClassLayers` instead.');\n        warned.reapplyCellProperties = true;\n    }\n    this.propClassLayers = value ? propClassLayersMap.NO_ROWS : propClassLayersMap.DEFAULT;\n}\n\nfunction deleteProp(propName) {\n    var descriptor = Object.getOwnPropertyDescriptor(this, propName);\n    if (!descriptor) {\n        return false; // own property not found\n    } else if (!descriptor.get) {\n        return delete this[propName]; // non-accessor property found (returns !descriptor.configurable)\n    } else if (descriptor.get.toString().indexOf('.var.')) {\n        this.var[propName] = Object.getPrototypeOf(this)[propName];\n    } else {\n        return true; // property not deletable\n    }\n    this.grid.repaint();\n    return false; // delete was successful\n}\n\n/**\n * @summary Execute value if \"calculator\" (function) or if column has calculator.\n * @desc This function is referenced here so:\n * 1. It will be available to the cell renderers\n * 2. Its context will naturally be the `config` object\n * @default {@link module:defaults.exec|exec}\n * @method\n * @param vf - Value or function.\n * @memberOf module:defaults\n */\nfunction exec(vf) {\n    if (this.dataRow) {\n        var calculator = (typeof vf)[0] === 'f' && vf || this.calculator;\n        if (calculator) {\n            vf = calculator(this.dataRow, this.name, this.subrow);\n        }\n    }\n    return vf;\n}\n\n// Add \"utility\" props so they will be available wherever props are available but make them non-enumerable because they are not real props.\nObject.defineProperties(defaults, {\n    mixIn: { value: require('overrider').mixIn },\n    delete: { value: deleteProp },\n    propClassEnum: { value: propClassEnum },\n    propClassLayersMap: { value: propClassLayersMap },\n    navKey: { value: navKey },\n    mappedNavKey: { value: mappedNavKey },\n    reapplyCellProperties: { set: reapplyCellProperties },\n    exec: { value: exec }\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nfunction bundleColumns(resetCellEvents) {\n    var gridProps = this.grid.properties,\n        vr, visibleRows = this.visibleRows,\n        r, R = visibleRows.length, pool;\n\n    if (resetCellEvents) {\n        pool = this.cellEventPool;\n        var p = 0;\n        this.visibleColumns.forEachWithNeg(function(vc) {\n            for (r = 0; r < R; r++, p++) {\n                vr = visibleRows[r];\n                // reset pool member to reflect coordinates of cell in newly shaped grid\n                pool[p].reset(vc, vr);\n            }\n        });\n    }\n\n    var bundle,\n        columnBundles = [],\n        gridPrefillColor = gridProps.backgroundColor,\n        backgroundColor;\n\n    this.visibleColumns.forEachWithNeg(function(vc) {\n        backgroundColor = vc.column.properties.backgroundColor;\n        if (bundle && bundle.backgroundColor === backgroundColor) {\n            bundle.right = vc.right;\n        } else if (backgroundColor === gridPrefillColor) {\n            bundle = undefined;\n        } else {\n            bundle = {\n                backgroundColor: backgroundColor,\n                left: vc.left,\n                right: vc.right\n            };\n            columnBundles.push(bundle);\n        }\n    });\n\n    this.columnBundles = columnBundles;\n}\n\nmodule.exports = bundleColumns;\n","/* eslint-env browser */\n\n'use strict';\n\nvar DatasaurBase = require('datasaur-base');\n\n/** @typedef {object} columnSchemaObject\n * @property {string} name - The required column name.\n * @property {string} [header] - An override for derived header\n * @property {function} [calculator] - A function for a computed column. Undefined for normal data columns.\n * @property {string} [type] - Used for sorting when and only when comparator not given.\n * @property {object} [comparator] - For sorting, both of following required:\n * @property {function} comparator.asc - ascending comparator\n * @property {function} comparator.desc - descending comparator\n */\n\n\n/**\n * @param {object} [options]\n * @param {object[]} [options.data]\n * @param {object[]} [options.schema]\n * @constructor\n */\nvar DatasaurLocal = DatasaurBase.extend('DatasaurLocal',  {\n\n    initialize: function(datasaur, options) {\n        this.reset();\n    },\n\n    reset: function() {\n        /**\n         * @summary The array of column schema objects.\n         * @name schema\n         * @type {columnSchemaObject[]}\n         * @memberOf DatasaurLocal#\n         */\n        this.schema = [];\n\n        /**\n         * @summary The array of uniform data objects.\n         * @name data\n         * @type {object[]}\n         * @memberOf DatasaurLocal#\n         */\n        this.data = [];\n    },\n\n    /**\n     * Establish new data and schema.\n     * If no data provided, data will be set to 0 rows.\n     * If no schema provided AND no previously set schema, new schema will be derived from data.\n     * @param {object[]} [data=[]] - Array of uniform objects containing the grid data.\n     * @param {columnSchemaObject[]} [schema=[]]\n     * @memberOf DatasaurLocal#\n     */\n    setData: function(data, schema) {\n        /**\n         * @summary The array of uniform data objects.\n         * @name data\n         * @type {object[]}\n         * @memberOf DatasaurLocal#\n         */\n        this.data = data || [];\n\n        if (schema) {\n            this.setSchema(schema);\n        } else if (this.data.length && !this.schema.length) {\n            this.setSchema([]);\n        }\n\n        this.dispatchEvent('fin-hypergrid-data-loaded');\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#getSchema}\n     * @memberOf DatasaurLocal#\n     */\n    getSchema:  function(){\n        return this.schema;\n    },\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#setSchema}\n     * @memberOf DatasaurLocal#\n     */\n    setSchema: function(newSchema){\n        if (!newSchema.length) {\n            var dataRow = this.getFirstRow();\n            if (dataRow) {\n                newSchema = Object.keys(dataRow);\n            }\n        }\n\n        this.schema = newSchema;\n        this.dispatchEvent('fin-hypergrid-schema-loaded');\n    },\n\n    /**\n     * @summary Find first extant AND defined element.\n     * @desc Uses for...in to find extant rows plus a truthiness test to return only a defined row.\n     * @returns {dataRow|undefined} Returns undefined if there are no such rows.\n     */\n    getFirstRow: function() {\n        for (var i in this.data) {\n            if (this.data[i]) {\n                return this.data[i];\n            }\n        }\n    },\n\n    /**\n     * @param y\n     * @returns {dataRowObject}\n     * @memberOf DatasaurLocal#\n     */\n    getRow: function(y) {\n        return this.data[y];\n    },\n\n    /**\n     * Update or blank row in place.\n     *\n     * _Note parameter order is the reverse of `addRow`._\n     * @param {number} y\n     * @param {object} [dataRow] - if omitted or otherwise falsy, row renders as blank\n     * @memberOf DatasaurLocal#\n     */\n    setRow: function(y, dataRow) {\n        this.data[y] = dataRow || undefined;\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#getRowMetadata}\n     * @memberOf DatasaurLocal#\n     */\n    getRowMetadata: function(y, prototype) {\n        var dataRow = this.data[y];\n        return dataRow && (dataRow.__META || (prototype !== undefined && (dataRow.__META = Object.create(prototype))));\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#setRowMetadata}\n     * @memberOf DatasaurLocal#\n     */\n    setRowMetadata: function(y, metadata) {\n        var dataRow = this.data[y];\n        if (dataRow) {\n            if (metadata) {\n                dataRow.__META = metadata;\n            } else {\n                delete dataRow.__META;\n            }\n        }\n        return !!dataRow;\n    },\n\n    /**\n     * Insert or append a new row.\n     *\n     * _Note parameter order is the reverse of `setRow`._\n     * @param {object} dataRow\n     * @param {number} [y=Infinity] - The index of the new row. If `y` >= row count, row is appended to end; otherwise row is inserted at `y` and row indexes of all remaining rows are incremented.\n     * @memberOf DatasaurLocal#\n     */\n    addRow: function(y, dataRow) {\n        if (arguments.length === 1) {\n            dataRow = arguments[0];\n            y = undefined;\n        }\n        if (y === undefined || y >= this.getRowCount()) {\n            this.data.push(dataRow);\n        } else {\n            this.data.splice(y, 0, dataRow);\n        }\n        this.dispatchEvent('fin-hypergrid-data-shape-changed');\n    },\n\n    /**\n     * Rows are removed entirely and no longer render.\n     * Indexes of all remaining rows are decreased by `rowCount`.\n     * @param {number} y\n     * @param {number} [rowCount=1]\n     * @returns {dataRowObject[]}\n     * @memberOf DatasaurLocal#\n     */\n    delRow: function(y, rowCount) {\n        var rows = this.data.splice(y, rowCount === undefined ? 1 : rowCount);\n        if (rows.length) {\n            this.dispatchEvent('fin-hypergrid-data-shape-changed');\n        }\n        return rows;\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#getValue}\n     * @memberOf DatasaurLocal#\n     */\n    getValue: function(x, y) {\n        var row = this.data[y];\n        if (!row) {\n            return null;\n        }\n        return row[this.schema[x].name];\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#setValue}\n     * @memberOf DatasaurLocal#\n     */\n    setValue: function(x, y, value) {\n        this.data[y][this.schema[x].name] = value;\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#getRowCount}\n     * @memberOf DatasaurLocal#\n     */\n    getRowCount: function() {\n        return this.data.length;\n    },\n\n    /**\n     * @see {@link https://fin-hypergrid.github.io/3.0.0/doc/dataModelAPI#getColumnCount}\n     * @memberOf DatasaurLocal#\n     */\n    getColumnCount: function() {\n        return this.schema.length;\n    }\n});\n\nmodule.exports = DatasaurLocal;\n","'use strict';\nvar regexpFlags = require('./regexp-flags');\nvar stickyHelpers = require('./regexp-sticky-helpers');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","/* eslint-env browser */\n\n'use strict';\n\nif (typeof window.CustomEvent !== 'function') {\n    window.CustomEvent = function(event, params) {\n        params = params || { bubbles: false, cancelable: false, detail: undefined };\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    };\n\n    window.CustomEvent.prototype = window.Event.prototype;\n}\n\nvar rectangular = require('rectangular');\n\nvar RESIZE_POLLING_INTERVAL = 200,\n    paintables = [],\n    resizables = [],\n    paintRequest,\n    resizeInterval,\n    charMap = makeCharMap();\n\nfunction Canvas(div, component, contextAttributes) {\n    var self = this;\n\n    // create the containing <div>...</div>\n    this.div = div;\n    this.component = component;\n\n    this.dragEndtime = Date.now();\n\n    // create and append the info <div>...</div> (to be displayed when there are no data rows)\n    this.infoDiv = document.createElement('div');\n    this.infoDiv.className = 'info';\n    this.div.appendChild(this.infoDiv);\n\n    // create and append the canvas\n    this.gc = getCachedContext(this.canvas = document.createElement('canvas'), contextAttributes);\n    this.bc = getCachedContext(this.buffer = document.createElement('canvas'), contextAttributes);\n\n    this.div.appendChild(this.canvas);\n\n    this.canvas.style.outline = 'none';\n\n    this.mouseLocation = new rectangular.Point(-1, -1);\n    this.dragstart = new rectangular.Point(-1, -1);\n    //this.origin = new rectangular.Point(0, 0);\n    this.bounds = new rectangular.Rectangle(0, 0, 0, 0);\n    this.hasMouse = false;\n\n    document.addEventListener('mousemove', function(e) {\n        if (self.hasMouse || self.isDragging()) {\n            self.finmousemove(e);\n        }\n    });\n    document.addEventListener('mouseup', function(e) {\n        self.finmouseup(e);\n    });\n    document.addEventListener('keydown', function(e) {\n        self.finkeydown(e);\n    });\n    document.addEventListener('keyup', function(e) {\n        self.finkeyup(e);\n    });\n\n    this.canvas.onmouseover = function() {\n        self.hasMouse = true;\n    };\n    this.addEventListener('focus', function(e) {\n        self.finfocusgained(e);\n    });\n    this.addEventListener('blur', function(e) {\n        self.finfocuslost(e);\n    });\n    this.addEventListener('mousedown', function(e) {\n        self.finmousedown(e);\n    });\n    this.addEventListener('mouseout', function(e) {\n        self.hasMouse = false;\n        self.finmouseout(e);\n    });\n    this.addEventListener('click', function(e) {\n        self.finclick(e);\n    });\n    this.addEventListener('dblclick', function(e) {\n        self.findblclick(e);\n    });\n    this.addEventListener('contextmenu', function(e) {\n        self.fincontextmenu(e);\n        e.preventDefault();\n        return false;\n    });\n\n    this.addEventListener('touchstart', function(e) {\n        self.fintouchstart(e);\n    });\n\n    this.addEventListener('touchmove', function(e) {\n        self.fintouchmove(e);\n    });\n\n    this.addEventListener('touchend', function(e) {\n        self.fintouchend(e);\n    });\n\n    this.canvas.setAttribute('tabindex', 0);\n\n    this.resize();\n\n    this.beginResizing();\n    this.beginPainting();\n}\n\nCanvas.prototype = {\n    constructor: Canvas.prototype.constructor,\n    div: null,\n    component: null,\n    canvas: null,\n    focuser: null,\n    buffer: null,\n    ctx: null,\n    mouseLocation: null,\n    dragstart: null,\n    origin: null,\n    bounds: null,\n    dirty: false,\n    size: null,\n    mousedown: false,\n    dragging: false,\n    repeatKeyCount: 0,\n    repeatKey: null,\n    repeatKeyStartTime: 0,\n    currentKeys: [],\n    hasMouse: false,\n    dragEndTime: 0,\n    lastRepaintTime: 0,\n    currentPaintCount: 0,\n    currentFPS: 0,\n    lastFPSComputeTime: 0,\n\n    addEventListener: function(name, callback) {\n        this.canvas.addEventListener(name, callback);\n    },\n\n    removeEventListener: function(name, callback) {\n        this.canvas.removeEventListener(name, callback);\n    },\n\n    stopPaintLoop: stopPaintLoop,\n    restartPaintLoop: restartPaintLoop,\n\n    stopResizeLoop: stopResizeLoop,\n    restartResizeLoop: restartResizeLoop,\n\n    detached: function() {\n        this.stopPainting();\n        this.stopResizing();\n    },\n\n    getCurrentFPS:function() {\n        return this.currentFPS;\n    },\n\n\n    tickPaint: function(now) {\n        var isContinuousRepaint = this.component.properties.enableContinuousRepaint,\n            fps = this.component.properties.repaintIntervalRate;\n        if (fps === 0) {\n            return;\n        }\n        var interval = 1000 / fps;\n\n        var elapsed = now - this.lastRepaintTime;\n        if (elapsed > interval && (isContinuousRepaint || this.dirty)) {\n            this.paintNow();\n            this.lastRepaintTime = now;\n            /* - (elapsed % interval);*/\n            if (isContinuousRepaint) {\n                this.currentPaintCount++;\n                if (now - this.lastFPSComputeTime >= 1000) {\n                    this.currentFPS = (this.currentPaintCount * 1000) / (now - this.lastFPSComputeTime);\n                    this.currentPaintCount = 0;\n                    this.lastFPSComputeTime = now;\n                }\n            }\n        }\n    },\n\n    beginPainting: function() {\n        var self = this;\n        this.requestRepaint();\n        this.tickPainter = function(now) {\n            self.tickPaint(now);\n        };\n        paintables.push(this);\n    },\n\n    stopPainting: function() {\n        paintables.splice(paintables.indexOf(this), 1);\n    },\n\n    beginResizing: function() {\n        var self = this;\n        this.tickResizer = function() {\n            self.checksize();\n        };\n        resizables.push(this);\n    },\n\n    stopResizing: function() {\n        resizables.splice(resizables.indexOf(this), 1);\n    },\n\n    start: function() {\n        this.beginPainting();\n        this.beginResizing();\n    },\n\n    stop: function() {\n        this.stopPainting();\n        this.stopResizing();\n    },\n\n    getDivBoundingClientRect: function() {\n        // Make sure our canvas has integral dimensions\n        var rect = this.div.getBoundingClientRect();\n        var top = Math.floor(rect.top),\n            left = Math.floor(rect.left),\n            width = Math.ceil(rect.width),\n            height = Math.ceil(rect.height);\n\n        return {\n            top: top,\n            right: left + width,\n            bottom: top + height,\n            left: left,\n            width: width,\n            height: height,\n            x: rect.x,\n            y: rect.y\n        };\n    },\n\n    checksize: function() {\n        //this is expensive lets do it at some modulo\n        var sizeNow = this.getDivBoundingClientRect();\n        if (sizeNow.width !== this.size.width || sizeNow.height !== this.size.height) {\n            this.resize();\n        }\n    },\n\n    resize: function() {\n        var box = this.size = this.getDivBoundingClientRect();\n\n        this.width = box.width;\n        this.height = box.height;\n\n        //fix ala sir spinka, see\n        //http://www.html5rocks.com/en/tutorials/canvas/hidpi/\n        //just add 'hdpi' as an attribute to the fin-canvas tag\n        var ratio = 1;\n        var isHIDPI = window.devicePixelRatio && this.component.properties.useHiDPI;\n        if (isHIDPI) {\n            var devicePixelRatio = window.devicePixelRatio || 1;\n            var backingStoreRatio = this.gc.webkitBackingStorePixelRatio ||\n                this.gc.mozBackingStorePixelRatio ||\n                this.gc.msBackingStorePixelRatio ||\n                this.gc.oBackingStorePixelRatio ||\n                this.gc.backingStorePixelRatio || 1;\n\n            ratio = devicePixelRatio / backingStoreRatio;\n            //this.canvasCTX.scale(ratio, ratio);\n        }\n\n        this.buffer.width = this.canvas.width = this.width * ratio;\n        this.buffer.height = this.canvas.height = this.height * ratio;\n\n        this.canvas.style.width = this.buffer.style.width = this.width + 'px';\n        this.canvas.style.height = this.buffer.style.height = this.height + 'px';\n\n        this.bc.scale(ratio, ratio);\n        if (isHIDPI && !this.component.properties.useBitBlit) {\n            this.gc.scale(ratio, ratio);\n        }\n\n        this.bounds = new rectangular.Rectangle(0, 0, this.width, this.height);\n        this.component.setBounds(this.bounds);\n        this.resizeNotification();\n        this.paintNow();\n    },\n\n    resizeNotification: function() {\n        this.dispatchNewEvent(undefined, 'fin-canvas-resized', {\n            width: this.width,\n            height: this.height\n        });\n    },\n\n    getBounds: function() {\n        return this.bounds;\n    },\n\n    paintNow: function() {\n        var useBitBlit = this.component.properties.useBitBlit,\n            gc = useBitBlit ? this.bc : this.gc;\n\n        try {\n            gc.cache.save();\n            this.dirty = false;\n            this.component.paint(gc);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            gc.cache.restore();\n        }\n\n        if (useBitBlit) {\n            this.flushBuffer();\n        }\n    },\n\n    flushBuffer: function() {\n        if (this.buffer.width > 0 && this.buffer.height > 0) {\n            this.gc.drawImage(this.buffer, 0, 0);\n        }\n    },\n\n    newEvent: function(primitiveEvent, name, detail) {\n        var event = {\n            detail: detail || {}\n        };\n        if (primitiveEvent) {\n            event.detail.primitiveEvent = primitiveEvent;\n        }\n        return new CustomEvent(name, event);\n    },\n\n    dispatchNewEvent: function(primitiveEvent, name, detail) {\n        return this.canvas.dispatchEvent(this.newEvent(primitiveEvent, name, detail));\n    },\n\n    dispatchNewMouseKeysEvent: function(event, name, detail) {\n        detail = detail || {};\n        detail.mouse = this.mouseLocation;\n        defKeysProp.call(this, event, 'keys', detail);\n        return this.dispatchNewEvent(event, name, detail);\n    },\n\n    dispatchNewTouchEvent: function(event, name, detail) {\n        detail = detail || {};\n\n        var touches = [].slice.call(event.changedTouches);\n        detail.touches = touches.map(function(touch) {\n            return this.getLocal(touch);\n        }, this);\n\n        return this.dispatchNewEvent(event, name, detail);\n    },\n\n    finmousemove: function(e) {\n        if (!this.isDragging() && this.mousedown) {\n            this.beDragging();\n            this.dispatchNewMouseKeysEvent(e, 'fin-canvas-dragstart', {\n                isRightClick: this.isRightClick(e),\n                dragstart: this.dragstart\n            });\n            this.dragstart = new rectangular.Point(this.mouseLocation.x, this.mouseLocation.y);\n        }\n        this.mouseLocation = this.getLocal(e);\n        //console.log(this.mouseLocation);\n        if (this.isDragging()) {\n            this.dispatchNewMouseKeysEvent(e, 'fin-canvas-drag', {\n                dragstart: this.dragstart,\n                isRightClick: this.isRightClick(e)\n            });\n        }\n        if (this.bounds.contains(this.mouseLocation)) {\n            this.dispatchNewMouseKeysEvent(e, 'fin-canvas-mousemove');\n        }\n    },\n\n    finmousedown: function(e) {\n        this.mouseLocation = this.mouseDownLocation = this.getLocal(e);\n        this.mousedown = true;\n\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-mousedown', {\n            isRightClick: this.isRightClick(e)\n        });\n        this.takeFocus();\n    },\n\n    finmouseup: function(e) {\n        if (!this.mousedown) {\n            // ignore document:mouseup unless preceded by a canvas:mousedown\n            return;\n        }\n        if (this.isDragging()) {\n            this.dispatchNewMouseKeysEvent(e, 'fin-canvas-dragend', {\n                dragstart: this.dragstart,\n                isRightClick: this.isRightClick(e)\n            });\n            this.beNotDragging();\n            this.dragEndtime = Date.now();\n        }\n        this.mousedown = false;\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-mouseup', {\n            dragstart: this.dragstart,\n            isRightClick: this.isRightClick(e)\n        });\n        //this.mouseLocation = new rectangular.Point(-1, -1);\n    },\n\n    finmouseout: function(e) {\n        if (!this.mousedown) {\n            this.mouseLocation = new rectangular.Point(-1, -1);\n        }\n        this.repaint();\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-mouseout', {\n            dragstart: this.dragstart\n        });\n    },\n\n    finwheelmoved: function(e) {\n        if (this.isDragging() || !this.hasFocus()) {\n            return;\n        }\n        e.preventDefault();\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-wheelmoved', {\n            isRightClick: this.isRightClick(e)\n        });\n    },\n\n    finclick: function(e) {\n        this.mouseLocation = this.getLocal(e);\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-click', {\n            isRightClick: this.isRightClick(e)\n        });\n    },\n\n    findblclick: function(e) {\n        this.mouseLocation = this.getLocal(e);\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-dblclick', {\n            isRightClick: this.isRightClick(e)\n        });\n    },\n\n    getCharMap: function() {\n        return charMap;\n    },\n\n    getKeyChar: function(e) {\n        var keyCode = e.keyCode || e.detail.key,\n            shift = e.shiftKey || e.detail.shift,\n            key = e.key;\n\n        e.legacyKey = charMap[keyCode] && charMap[keyCode][shift ? 1 : 0];\n\n        if (typeof key === 'string' && key.length === 1) {\n            return key;\n        }\n\n        return (\n            e.legacyKey || // legacy unprintable char string\n            key // modern unprintable char string when no such legacy string\n        );\n    },\n\n    finkeydown: function(e) {\n        if (!this.hasFocus()) {\n            return;\n        }\n\n        var keyChar = updateCurrentKeys.call(this, e, true);\n\n        if (e.repeat) {\n            if (this.repeatKey === keyChar) {\n                this.repeatKeyCount++;\n            } else {\n                this.repeatKey = keyChar;\n                this.repeatKeyStartTime = Date.now();\n            }\n        } else {\n            this.repeatKey = null;\n            this.repeatKeyCount = 0;\n            this.repeatKeyStartTime = 0;\n        }\n\n        this.dispatchNewEvent(e, 'fin-canvas-keydown', defKeysProp.call(this, e, 'currentKeys', {\n            alt: e.altKey,\n            ctrl: e.ctrlKey,\n            char: keyChar,\n            legacyChar: e.legacyKey,\n            code: e.charCode,\n            key: e.keyCode,\n            meta: e.metaKey,\n            repeatCount: this.repeatKeyCount,\n            repeatStartTime: this.repeatKeyStartTime,\n            shift: e.shiftKey,\n            identifier: e.key\n        }));\n    },\n\n    finkeyup: function(e) {\n        if (!this.hasFocus()) {\n            return;\n        }\n\n        var keyChar = updateCurrentKeys.call(this, e, false);\n\n        this.repeatKeyCount = 0;\n        this.repeatKey = null;\n        this.repeatKeyStartTime = 0;\n        this.dispatchNewEvent(e, 'fin-canvas-keyup', defKeysProp.call(this, e, 'currentKeys', {\n            alt: e.altKey,\n            ctrl: e.ctrlKey,\n            char: keyChar,\n            legacyChar: e.legacyKey,\n            code: e.charCode,\n            key: e.keyCode,\n            meta: e.metaKey,\n            repeat: e.repeat,\n            shift: e.shiftKey,\n            identifier: e.key,\n            currentKeys: this.currentKeys.slice(0)\n        }));\n    },\n\n    finfocusgained: function(e) {\n        this.dispatchNewEvent(e, 'fin-canvas-focus-gained');\n    },\n\n    finfocuslost: function(e) {\n        this.dispatchNewEvent(e, 'fin-canvas-focus-lost');\n    },\n\n    fincontextmenu: function(e) {\n        if (e.ctrlKey && this.currentKeys.indexOf('CTRL') === -1) {\n            this.currentKeys.push('CTRL');\n        }\n\n        this.dispatchNewMouseKeysEvent(e, 'fin-canvas-context-menu', {\n            isRightClick: this.isRightClick(e)\n        });\n    },\n\n    fintouchstart: function(e) {\n        this.dispatchNewTouchEvent(e, 'fin-canvas-touchstart');\n    },\n\n    fintouchmove: function(e) {\n        this.dispatchNewTouchEvent(e, 'fin-canvas-touchmove');\n    },\n\n    fintouchend: function(e) {\n        this.dispatchNewTouchEvent(e, 'fin-canvas-touchend');\n    },\n\n    paintLoopRunning: function() {\n        return !!paintRequest;\n    },\n\n    requestRepaint: function() {\n        this.dirty = true;\n    },\n\n    repaint: function() {\n        this.requestRepaint();\n        if (!paintRequest || this.component.properties.repaintIntervalRate === 0) {\n            this.paintNow();\n        }\n    },\n\n    getMouseLocation: function() {\n        return this.mouseLocation;\n    },\n\n    getOrigin: function() {\n        var rect = this.canvas.getBoundingClientRect();\n        var p = new rectangular.Point(rect.left, rect.top);\n        return p;\n    },\n\n    getLocal: function(e) {\n        var rect = this.canvas.getBoundingClientRect();\n        var p = new rectangular.Point(e.clientX - rect.left, e.clientY - rect.top);\n        return p;\n    },\n\n    hasFocus: function() {\n        return document.activeElement === this.canvas;\n    },\n\n    takeFocus: function() {\n        var self = this;\n        if (!this.hasFocus()) {\n            setTimeout(function() {\n                self.canvas.focus();\n            }, 10);\n        }\n    },\n\n    beDragging: function() {\n        this.dragging = true;\n        this.disableDocumentElementSelection();\n    },\n\n    beNotDragging: function() {\n        this.dragging = false;\n        this.enableDocumentElementSelection();\n    },\n\n    isDragging: function() {\n        return this.dragging;\n    },\n\n    disableDocumentElementSelection: function() {\n        var style = document.body.style;\n        style.cssText = style.cssText + '-webkit-user-select: none';\n    },\n\n    enableDocumentElementSelection: function() {\n        var style = document.body.style;\n        style.cssText = style.cssText.replace('-webkit-user-select: none', '');\n    },\n\n    setFocusable: function(truthy) {\n        this.focuser.style.display = truthy ? '' : 'none';\n    },\n\n    isRightClick: function(e) {\n        var isRightMB;\n        e = e || window.event;\n\n        if ('which' in e) { // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n            isRightMB = e.which === 3;\n        } else if ('button' in e) { // IE, Opera\n            isRightMB = e.button === 2;\n        }\n        return isRightMB;\n    },\n\n    dispatchEvent: function(e) {\n        return this.canvas.dispatchEvent(e);\n    },\n\n    setInfo: function(message, width) {\n        if (message) {\n            if (width !== undefined) {\n                if (width && !isNaN(Number(width))) {\n                    width += 'px';\n                }\n                this.infoDiv.style.width = width;\n            }\n\n            if (message.indexOf('<')) {\n                this.infoDiv.innerHTML = message;\n            } else {\n                this.infoDiv.innerText = message;\n            }\n        }\n\n        this.infoDiv.style.display = message ? 'block' : 'none';\n    }\n};\n\nfunction paintLoopFunction(now) {\n    if (paintRequest) {\n        paintables.forEach(function(paintable) {\n            try {\n                paintable.tickPainter(now);\n            } catch (e) {\n                console.error(e);\n            }\n\n            if (paintable.component.tickNotification) {\n                paintable.component.tickNotification();\n            }\n        });\n        paintRequest = requestAnimationFrame(paintLoopFunction);\n    }\n}\nfunction restartPaintLoop() {\n    paintRequest = paintRequest || requestAnimationFrame(paintLoopFunction);\n}\nfunction stopPaintLoop() {\n    if (paintRequest) {\n        cancelAnimationFrame(paintRequest);\n        paintRequest = undefined;\n    }\n}\nrestartPaintLoop();\n\nfunction resizablesLoopFunction(now) {\n    if (resizeInterval) {\n        for (var i = 0; i < resizables.length; i++) {\n            try {\n                resizables[i].tickResizer(now);\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}\nfunction restartResizeLoop() {\n    resizeInterval = resizeInterval || setInterval(resizablesLoopFunction, RESIZE_POLLING_INTERVAL);\n}\nfunction stopResizeLoop() {\n    if (resizeInterval) {\n        clearInterval(resizeInterval);\n        resizeInterval = undefined;\n    }\n}\nrestartResizeLoop();\n\nfunction makeCharMap() {\n    var map = [];\n\n    var empty = ['', ''];\n\n    for (var i = 0; i < 256; i++) {\n        map[i] = empty;\n    }\n\n    map[27] = ['ESC', 'ESCSHIFT'];\n    map[192] = ['`', '~'];\n    map[49] = ['1', '!'];\n    map[50] = ['2', '@'];\n    map[51] = ['3', '#'];\n    map[52] = ['4', '$'];\n    map[53] = ['5', '%'];\n    map[54] = ['6', '^'];\n    map[55] = ['7', '&'];\n    map[56] = ['8', '*'];\n    map[57] = ['9', '('];\n    map[48] = ['0', ')'];\n    map[189] = ['-', '_'];\n    map[187] = ['=', '+'];\n    map[8] = ['BACKSPACE', 'BACKSPACESHIFT'];\n    map[46] = ['DELETE', 'DELETESHIFT'];\n    map[9] = ['TAB', 'TABSHIFT'];\n    map[81] = ['q', 'Q'];\n    map[87] = ['w', 'W'];\n    map[69] = ['e', 'E'];\n    map[82] = ['r', 'R'];\n    map[84] = ['t', 'T'];\n    map[89] = ['y', 'Y'];\n    map[85] = ['u', 'U'];\n    map[73] = ['i', 'I'];\n    map[79] = ['o', 'O'];\n    map[80] = ['p', 'P'];\n    map[219] = ['[', '{'];\n    map[221] = [']', '}'];\n    map[220] = ['\\\\', '|'];\n    map[220] = ['CAPSLOCK', 'CAPSLOCKSHIFT'];\n    map[65] = ['a', 'A'];\n    map[83] = ['s', 'S'];\n    map[68] = ['d', 'D'];\n    map[70] = ['f', 'F'];\n    map[71] = ['g', 'G'];\n    map[72] = ['h', 'H'];\n    map[74] = ['j', 'J'];\n    map[75] = ['k', 'K'];\n    map[76] = ['l', 'L'];\n    map[186] = [';', ':'];\n    map[222] = ['\\'', '|'];\n    map[13] = ['RETURN', 'RETURNSHIFT'];\n    map[16] = ['SHIFT', 'SHIFT'];\n    map[90] = ['z', 'Z'];\n    map[88] = ['x', 'X'];\n    map[67] = ['c', 'C'];\n    map[86] = ['v', 'V'];\n    map[66] = ['b', 'B'];\n    map[78] = ['n', 'N'];\n    map[77] = ['m', 'M'];\n    map[188] = [',', '<'];\n    map[190] = ['.', '>'];\n    map[191] = ['/', '?'];\n    map[16] = ['SHIFT', 'SHIFT'];\n    map[17] = ['CTRL', 'CTRLSHIFT'];\n    map[18] = ['ALT', 'ALTSHIFT'];\n    map[91] = ['COMMANDLEFT', 'COMMANDLEFTSHIFT'];\n    map[32] = ['SPACE', 'SPACESHIFT'];\n    map[93] = ['COMMANDRIGHT', 'COMMANDRIGHTSHIFT'];\n    map[18] = ['ALT', 'ALTSHIFT'];\n    map[38] = ['UP', 'UPSHIFT'];\n    map[37] = ['LEFT', 'LEFTSHIFT'];\n    map[40] = ['DOWN', 'DOWNSHIFT'];\n    map[39] = ['RIGHT', 'RIGHTSHIFT'];\n\n    map[33] = ['PAGEUP', 'PAGEUPSHIFT'];\n    map[34] = ['PAGEDOWN', 'PAGEDOWNSHIFT'];\n    map[35] = ['PAGERIGHT', 'PAGERIGHTSHIFT']; // END\n    map[36] = ['PAGELEFT', 'PAGELEFTSHIFT']; // HOME\n\n    map[112] = ['F1', 'F1SHIFT'];\n    map[113] = ['F2', 'F2SHIFT'];\n    map[114] = ['F3', 'F3SHIFT'];\n    map[115] = ['F4', 'F4SHIFT'];\n    map[116] = ['F5', 'F5SHIFT'];\n    map[117] = ['F6', 'F6SHIFT'];\n    map[118] = ['F7', 'F7SHIFT'];\n    map[119] = ['F8', 'F8SHIFT'];\n    map[120] = ['F9', 'F9SHIFT'];\n    map[121] = ['F10', 'F10SHIFT'];\n    map[122] = ['F11', 'F11SHIFT'];\n    map[123] = ['F12', 'F12SHIFT'];\n\n    return map;\n}\n\nfunction updateCurrentKeys(e, keydown) {\n    var keyChar = this.getKeyChar(e);\n\n    // prevent TAB from moving focus off the canvas element\n    switch (keyChar) {\n        case 'TAB':\n        case 'TABSHIFT':\n        case 'Tab':\n            e.preventDefault();\n    }\n\n    fixCurrentKeys.call(this, keyChar, keydown);\n\n    return keyChar;\n}\n\nfunction fixCurrentKeys(keyChar, keydown) {\n    var index = this.currentKeys.indexOf(keyChar);\n\n    if (!keydown && index >= 0) {\n        this.currentKeys.splice(index, 1);\n    }\n\n    if (keyChar === 'SHIFT') {\n        // on keydown, replace unshifted keys with shifted keys\n        // on keyup, vice-versa\n        this.currentKeys.forEach(function(key, index, currentKeys) {\n            var pair = charMap.find(function(pair) {\n                return pair[keydown ? 0 : 1] === key;\n            });\n            if (pair) {\n                currentKeys[index] = pair[keydown ? 1 : 0];\n            }\n        });\n    }\n\n    if (keydown && index < 0) {\n        this.currentKeys.push(keyChar);\n    }\n}\n\nfunction defKeysProp(event, propName, object) {\n    var canvas = this;\n    Object.defineProperty(object, propName, {\n        configurable: true,\n        ennumerable: true,\n        get: function() {\n            var shiftKey;\n            if ('shiftKey' in event) {\n                fixCurrentKeys.call(canvas, 'SHIFT', shiftKey = event.shiftKey);\n            } else {\n                shiftKey = canvas.currentKeys.indexOf('SHIFT') >= 0;\n            }\n            var SHIFT = shiftKey ? 'SHIFT' : '';\n            if ('ctrlKey' in event) {\n                fixCurrentKeys.call(canvas, 'CTRL' + SHIFT, event.ctrlKey);\n            }\n            if ('altKey' in event) {\n                fixCurrentKeys.call(canvas, 'ALT' + SHIFT, event.altKey);\n            }\n            return canvas.currentKeys.slice();\n        }\n    });\n    return object;\n}\n\nfunction getCachedContext(canvasElement, contextAttributes) {\n    var gc = canvasElement.getContext('2d', contextAttributes),\n        props = {},\n        values = {};\n\n    // Stub out all the prototype members of the canvas 2D graphics context:\n    Object.keys(Object.getPrototypeOf(gc)).forEach(makeStub);\n\n    // Some older browsers (e.g., Chrome 40) did not have all members of canvas\n    // 2D graphics context in the prototype so we make this additional call:\n    Object.keys(gc).forEach(makeStub);\n\n    function makeStub(key) {\n        if (\n            !(key in props) &&\n            !/^(webkit|moz|ms|o)[A-Z]/.test(key) &&\n            typeof gc[key] !== 'function'\n        ) {\n            Object.defineProperty(props, key, {\n                get: function() {\n                    return (values[key] = values[key] || gc[key]);\n                },\n                set: function(value) {\n                    if (value !== values[key]) {\n                        gc[key] = values[key] = value;\n                    }\n                }\n            });\n        }\n    }\n\n    gc.cache = props;\n\n    gc.cache.save = function() {\n        gc.save();\n        values = Object.create(values);\n    };\n\n    gc.cache.restore = function() {\n        gc.restore();\n        values = Object.getPrototypeOf(values);\n    };\n\n    gc.conditionalsStack = [];\n\n    Object.getOwnPropertyNames(Canvas.graphicsContextAliases).forEach(function(alias) {\n        gc[alias] = gc[Canvas.graphicsContextAliases[alias]];\n    });\n\n    return Object.assign(gc, require('./graphics'));\n}\n\nCanvas.graphicsContextAliases = {\n    simpleText: 'fillText'\n};\n\n\nmodule.exports = Canvas;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.4',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","'use strict';\n\n/**\n * Behavior.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n    /**\n     * @summary The total height of the \"fixed rows.\"\n     * @desc The total height of all (non-scrollable) rows preceding the (scrollable) data subgrid.\n     * @memberOf Behavior#\n     * @return {number} The height in pixels of the fixed rows area of the hypergrid, the total height of:\n     * 1. All rows of all subgrids preceding the data subgrid.\n     * 2. The first `fixedRowCount` rows of the data subgrid.\n     */\n    getFixedRowsHeight: function() {\n        var subgrid, isData, r, R,\n            subgrids = this.subgrids,\n            height = 0,\n            gridProps = this.grid.properties,\n            contentBox = gridProps.boxSizing !== 'border-box',\n            gridLinesHWidth = gridProps.gridLinesHWidth;\n\n        for (var i = 0; i < subgrids.length && !isData; ++i) {\n            subgrid = subgrids[i];\n            isData = subgrid.isData;\n            R = isData ? gridProps.fixedRowCount : subgrid.getRowCount();\n            for (r = 0; r < R; ++r) {\n                height += this.getRowHeight(r, subgrid);\n                if (contentBox) {\n                    height += gridLinesHWidth;\n                }\n            }\n            // add in fixed rule thickness excess\n            if (isData && gridProps.fixedLinesHWidth) {\n                height += gridProps.fixedLinesHWidth - gridLinesHWidth;\n            }\n        }\n\n        return height;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @param {number|CellEvent} yOrCellEvent - Data row index local to `dataModel`; or a `CellEvent` object.\n     * @param {boolean} [prototype] - Prototype for a new properties object when one does not already exist. If you don't define this and one does not already exist, this call will return `undefined`.\n     * Typical defined value is `null`, which creates a plain object with no prototype, or `Object.prototype` for a more \"natural\" object.\n     * _(Required when 3rd param provided.)_\n     * @param {DataModel} [dataModel=this.dataModel] - This is the subgrid. You only need to provide the subgrid when it is not the data subgrid _and_ you did not give a `CellEvent` object in the first param (which already knows what subgrid it's in).\n     * @returns {object|undefined} The row properties object which will be one of:\n     * * object - existing row properties object or new row properties object created from `prototype`; else\n     * * `false` - row found but no existing row properties object and `prototype` was not defined; else\n     * * `undefined` - no such row\n     */\n    getRowProperties: function(yOrCellEvent, prototype, dataModel) {\n        if (typeof yOrCellEvent === 'object') {\n            dataModel = yOrCellEvent.subgrid;\n            yOrCellEvent = yOrCellEvent.dataCell.y;\n        }\n\n        var metadata = (dataModel || this.dataModel).getRowMetadata(yOrCellEvent, prototype === undefined ? undefined : null);\n        return metadata && (metadata.__ROW || prototype !== undefined && (metadata.__ROW = Object.create(prototype)));\n    },\n\n    /**\n     * Reset the row properties in its entirety to the given row properties object.\n     * @memberOf Behavior#\n     * @param {number|CellEvent} yOrCellEvent - Data row index local to `dataModel`; or a `CellEvent` object.\n     * @param {object|undefined} properties - The new row properties object. If `undefined`, this call is a no-op.\n     * @param {DataModel} [dataModel=this.dataModel] - This is the subgrid. You only need to provide the subgrid when it is not the data subgrid _and_ you did not give a `CellEvent` object in the first param (which already knows what subgrid it's in).\n     */\n    setRowProperties: function(yOrCellEvent, properties, dataModel) {\n        if (!properties) {\n            return;\n        }\n\n        if (typeof yOrCellEvent === 'object') {\n            dataModel = yOrCellEvent.subgrid;\n            yOrCellEvent = yOrCellEvent.dataCell.y;\n        }\n\n        var metadata = (dataModel || this.dataModel).getRowMetadata(yOrCellEvent, null);\n        if (metadata) {\n            metadata.__ROW = Object.create(this.rowPropertiesPrototype);\n            this.addRowProperties(yOrCellEvent, properties, dataModel, metadata.__ROW);\n            this.stateChanged();\n        }\n    },\n\n    /**\n     * Sets a single row property on a specific individual row.\n     * @memberOf Behavior#\n     * @param {number|CellEvent} yOrCellEvent - Data row index local to `dataModel`; or a `CellEvent` object.\n     * @param {string} key - The property name.\n     * @param value - The new property value.\n     * @param {DataModel} [dataModel=this.dataModel] - This is the subgrid. You only need to provide the subgrid when it is not the data subgrid _and_ you did not give a `CellEvent` object in the first param (which already knows what subgrid it's in).\n     */\n    setRowProperty: function(yOrCellEvent, key, value, dataModel) {\n        var rowProps;\n        var isHeight = (key === 'height');\n\n        if (value !== undefined) {\n            rowProps = this.getRowProperties(yOrCellEvent, this.rowPropertiesPrototype, dataModel);\n            rowProps[key] = value;\n        } else {\n            // only try to undefine key if row props object exists; no point in creating it just to delete a non-existant key\n            rowProps = this.getRowProperties(yOrCellEvent, undefined, dataModel);\n            if (rowProps) {\n                delete rowProps[isHeight ? '_height' : key];\n            }\n        }\n\n        if (isHeight) {\n            this.shapeChanged();\n        } else {\n            this.stateChanged();\n        }\n    },\n\n    /**\n     * Add all the properties in the given row properties object to the row properties.\n     * @memberOf Behavior#\n     * @param {number|CellEvent} yOrCellEvent - Data row index local to `dataModel`; or a `CellEvent` object.\n     * @param {object|undefined} properties - An object containing new property values(s) to assign to the row properties. If `undefined`, this call is a no-op.\n     * @param {DataModel} [dataModel=this.dataModel] - This is the subgrid. You only need to provide the subgrid when it is not the data subgrid _and_ you did not give a `CellEvent` object in the first param (which already knows what subgrid it's in).\n     */\n    addRowProperties: function(yOrCellEvent, properties, dataModel, rowProps) {\n        if (!properties) {\n            return;\n        }\n\n        var isHeight, hasHeight;\n\n        rowProps = rowProps || this.getRowProperties(yOrCellEvent, this.rowPropertiesPrototype, dataModel);\n\n        if (rowProps) {\n            Object.keys(properties).forEach(function(key) {\n                var value = properties[key];\n                if (value !== undefined) {\n                    rowProps[key] = value;\n                } else {\n                    isHeight = key === 'height';\n                    delete rowProps[isHeight ? '_height' : key];\n                    hasHeight = hasHeight || isHeight;\n                }\n            });\n\n            if (hasHeight) {\n                this.shapeChanged();\n            } else {\n                this.stateChanged();\n            }\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @param {number} yOrCellEvent - Data row index local to `dataModel`.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @returns {number} The row height in pixels.\n     */\n    getRowHeight: function(yOrCellEvent, dataModel) {\n        var rowProps = this.getRowProperties(yOrCellEvent, undefined, dataModel);\n        return rowProps && rowProps.height || this.grid.properties.defaultRowHeight;\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc set the pixel height of a specific row\n     * @param {number} yOrCellEvent - Data row index local to dataModel.\n     * @param {number} height - pixel height\n     * @param {DataModel} [dataModel=this.dataModel]\n     */\n    setRowHeight: function(yOrCellEvent, height, dataModel) {\n        this.setRowProperty(yOrCellEvent, 'height', height, dataModel);\n    }\n};\n\n\nexports.rowPropertiesPrototypeDescriptors = {\n    height: {\n        enumerable: true,\n        get: function() {\n            return this._height || this.defaultRowHeight;\n        },\n        set: function(height) {\n            height = Math.max(5, Math.ceil(height));\n            if (isNaN(height)) {\n                height = undefined;\n            }\n            if (height !== this._height) {\n                if (!height) {\n                    delete this._height;\n                } else {\n                    // Define `_height` as non-enumerable so won't be included in output of saveState.\n                    // (Instead the `height` getter is explicitly invoked and the result is included.)\n                    Object.defineProperty(this, '_height', { value: height, configurable: true });\n                }\n                this.grid.behaviorStateChanged();\n            }\n        }\n    }\n};\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","'use strict';\n\nvar Registry = require('../lib/Registry');\n\n\nvar warnedBaseClass;\n\n/**\n * @classdesc Registry of cell renderer singletons.\n * @constructor\n */\nvar CellRenderers = Registry.extend('CellRenderers', {\n\n    BaseClass: require('./CellRenderer'), // abstract base class\n\n    initialize: function() {\n        // preregister the standard cell renderers\n        this.add(require('./Button'));\n        this.add(require('./SimpleCell'));\n        this.add(require('./SliderCell'));\n        this.add(require('./SparkBar'));\n        this.add(require('./LastSelection'));\n        this.add(require('./SparkLine'));\n        this.add(require('./ErrorCell'));\n        this.add(require('./Tag'));\n        this.add(require('./TreeCell'));\n        this.add('emptycell', this.BaseClass); // remove this when deprecation below retired\n    },\n\n    // for better performance, instantiate at add time rather than render time.\n    add: function(name, Constructor) {\n        if (arguments.length === 1) {\n            Constructor = name;\n            return Registry.prototype.add.call(this, new Constructor);\n        } else {\n            return Registry.prototype.add.call(this, name, new Constructor);\n        }\n    },\n\n    get: function(name) {\n        if (name.map) {\n            return name.map(function(name) {\n                return Registry.prototype.get.call(this, name);\n            }, this);\n        }\n\n        var cellRenderer = Registry.prototype.get.call(this, name);\n        if (cellRenderer === this.items.emptycell) {\n            if (!warnedBaseClass) {\n                console.warn('grid.cellRenderers.get(\"' + name + '\").constructor has been deprecated as of v2.1.0 in favor of grid.cellRenderers.BaseClass property. (Will be removed in a future release.)');\n                warnedBaseClass = true;\n            }\n            this.BaseClass.constructor = this.BaseClass;\n        }\n        return cellRenderer;\n    }\n\n});\n\nmodule.exports = new CellRenderers;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * The default cell rendering function for a button cell.\n * @constructor\n * @extends CellRenderer\n */\nvar Button = CellRenderer.extend('Button', {\n    paint: function(gc, config) {\n        var val = config.value,\n            bounds = config.bounds,\n            x = bounds.x + 1,\n            y = bounds.y + 1,\n            width = bounds.width - 2,\n            height = bounds.height - 2,\n            radius = height / 2,\n            arcGradient = gc.createLinearGradient(x, y, x, y + height);\n\n        if (config.boxSizing === 'border-box') {\n            width -= config.gridLinesVWidth;\n            height -= config.gridLinesHWidth;\n        }\n\n        if (config.mouseDown) {\n            arcGradient.addColorStop(0, '#B5CBED');\n            arcGradient.addColorStop(1, '#4d74ea');\n        } else {\n            arcGradient.addColorStop(0, '#ffffff');\n            arcGradient.addColorStop(1, '#aaaaaa');\n        }\n\n        // draw the background\n        gc.cache.fillStyle = config.backgroundColor;\n        gc.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n        // draw the capsule\n        gc.cache.fillStyle = arcGradient;\n        gc.cache.strokeStyle = '#000000';\n        this.roundRect(gc, x, y, width, height, radius, arcGradient, true);\n\n        var ox = (width - gc.getTextWidth(val)) / 2;\n        var oy = (height - gc.getTextHeight(gc.cache.font).descent) / 2;\n\n        // draw the text\n        gc.cache.textBaseline = 'middle';\n        gc.cache.fillStyle = '#333333';\n        gc.cache.font = height - 2 + 'px sans-serif';\n        config.backgroundColor = 'rgba(0,0,0,0)';\n        gc.fillText(val, x + ox, y + oy);\n    }\n});\n\nmodule.exports = Button;\n\n\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","'use strict';\n\nvar warnedDoubleClickDelay;\n\n/**\n * @summary Dynamic grid property getter/setters.\n * @desc  Dynamic grid properties can make use of a _backing store._\n * This backing store is created in the same layer (the grid properties layer) by {@link Hypergrid#clearState|clearState} and backs grid-only properties. We currently do not create one for descendant objects, such as column and cell properties objects.\n * The members of the backing store have the same names as the dynamic properties that utilize them.\n * They are initialized by {@link Hypergrid#clearState|clearState} to the default values from {@link module:defaults|defaults} object members, (also) of the same name.\n *\n * Note that dynamic properties must enumerable to be visible to {@link Hypergrid#saveState}.\n * @module dynamicProperties\n */\nvar dynamicPropertyDescriptors = {\n    /**\n     * @returns {string|undefined|object} One of:\n     * * **string:** When theme name is registered (except 'default').\n     * * **undefined:** When theme layer is empty (or theme name is 'default').\n     * * **object:** When theme name is not registered.\n     * @memberOf module:dynamicProperties\n     */\n    theme: {\n        enumerable: true,\n        get: function() {\n            return this.grid.getTheme();\n        },\n        set: function(theme) {\n            this.grid.applyTheme(theme);\n        }\n    },\n\n    wheelHFactor: {\n        enumerable: true,\n        get: function() {\n            return this.grid.sbHScroller.deltaXFactor;\n        },\n        set: function(factor) {\n            this.grid.sbHScroller.deltaXFactor = factor;\n        }\n    },\n\n    wheelVFactor: {\n        enumerable: true,\n        get: function() {\n            return this.grid.sbVScroller.deltaYFactor;\n        },\n        set: function(factor) {\n            this.grid.sbVScroller.deltaYFactor = factor;\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    subgrids: {\n        enumerable: true,\n        get: function() {\n            return this.var.subgrids;\n        },\n        set: function(subgrids) {\n            this.var.subgrids = subgrids.slice();\n\n            if (this.grid.behavior) {\n                this.grid.behavior.subgrids = subgrids;\n            }\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    features: {\n        enumerable: true,\n        get: function() {\n            return this.var.features;\n        },\n        set: function(features) {\n            this.var.features = features.slice();\n            if (this.grid.behavior) {\n                this.grid.behavior.initializeFeatureChain(features);\n                this.grid.allowEvents(this.grid.getRowCount());\n            }\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    gridRenderer: {\n        enumerable: true,\n        get: function() {\n            return this.var.gridRenderer;\n        },\n        set: function(rendererName) {\n            this.var.gridRenderer = rendererName;\n            this.grid.renderer.setGridRenderer(rendererName);\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    columnIndexes: {\n        enumerable: true,\n        get: function() {\n            return this.grid.behavior.getActiveColumns().map(function(column) {\n                return column.index;\n            });\n        },\n        set: function(columnIndexes) {\n            this.grid.behavior.setColumnOrder(columnIndexes);\n            this.grid.behavior.changed();\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    columnNames: {\n        enumerable: true,\n        get: function() {\n            return this.grid.behavior.getActiveColumns().map(function(column) {\n                return column.name;\n            });\n        },\n        set: function(columnNames) {\n            this.grid.behavior.setColumnOrderByName(columnNames);\n            this.grid.behavior.changed();\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    rows: {\n        enumerable: true,\n        get: getRowPropertiesBySubgridAndRowIndex,\n        set: function(rowsHash) {\n            if (rowsHash) {\n                setRowPropertiesBySubgridAndRowIndex.call(this, rowsHash);\n                this.grid.behavior.changed();\n            }\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    columns: {\n        enumerable: true,\n        get: getColumnPropertiesByColumnIndexOrName,\n        set: function(columnsHash) {\n            if (columnsHash) {\n                setColumnPropertiesByColumnIndexOrName.call(this, columnsHash);\n                this.grid.behavior.changed();\n            }\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    cells: {\n        enumerable: true,\n        get: getCellPropertiesByColumnNameAndRowIndex,\n        set: function(cellsHash) {\n            if (cellsHash) {\n                setCellPropertiesByColumnNameAndRowIndex.call(this, cellsHash);\n                this.grid.behavior.changed();\n            }\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    rowHeaderCheckboxes: {\n        enumerable: true,\n        get: function() {\n            return this.var.rowHeaderCheckboxes;\n        },\n        set: function(enabled) {\n            this.var.rowHeaderCheckboxes = enabled;\n            this.grid.renderer.resetRowHeaderColumnWidth();\n        }\n    },\n\n    /**\n     * @memberOf module:dynamicProperties\n     */\n    rowHeaderNumbers: {\n        enumerable: true,\n        get: function() {\n            return this.var.rowHeaderNumbers;\n        },\n        set: function(enabled) {\n            this.var.rowHeaderNumbers = enabled;\n            this.grid.renderer.resetRowHeaderColumnWidth();\n        }\n    },\n\n    /**\n     * Legacy property; now points to both `rowHeaderFeatures` props.\n     * @memberOf module:dynamicProperties\n     */\n    showRowNumbers: {\n        enumerable: false,\n        get: function() {\n            return this.rowHeaderCheckboxes || this.rowHeaderNumbers;\n        },\n        set: function(enabled) {\n            this.rowHeaderCheckboxes = this.rowHeaderNumbers = enabled;\n        }\n    },\n\n    // remove to expire warning:\n    doubleClickDelay: {\n        enumerable: true,\n        get: function() {\n            return this.var.doubleClickDelay;\n        },\n        set: function(delay) {\n            if (!warnedDoubleClickDelay) {\n                warnedDoubleClickDelay = true;\n                console.warn('The doubleClickDelay property has been deprecated as of v2.1.0. Setting this property no longer has any effect. Set double-click speed in your system\\'s mouse preferences. (This warning will be removed in a future release.)');\n            }\n            this.var.doubleClickDelay = delay;\n        }\n    },\n\n    /** @summary Grid line color.\n     * @desc This is a Legacy property. It is now implemented as a dynamic property accessor:\n     * * Getting its value returns the current value of the new (as of 2.1.0) {@link module:defaults.gridLinesHColor gridLinesHColor} property.\n     * * Setting its value sets {@link module:defaults.gridLinesHColor gridLinesHColor} and {@link module:defaults.gridLinesVColor gridLinesVColor}.\n     * * It is non-enumerable; it is not output with `grid.saveState()`; the accessed properties are output instead.\n     * @memberOf module:dynamicProperties\n     */\n    lineColor: {\n        get: function() { return this.gridLinesHColor; },\n        set: function(color) { this.gridLinesHColor = this.gridLinesVColor = color; }\n    },\n\n    /** @summary Grid line width.\n     * @desc This is a Legacy property. It is now implemented as a dynamic property accessor:\n     * * Getting its value returns the current value of the new (as of 2.1.0) {@link module:defaults.gridLinesHColor gridLinesHColor} property.\n     * * Setting its value sets {@link module:defaults.gridLinesHColor gridLinesHColor} and {@link module:defaults.gridLinesVColor gridLinesVColor}.\n     * * It is non-enumerable; it is not output with `grid.saveState()`; the accessed properties are output instead.\n     * @memberOf module:dynamicProperties\n     */\n    lineWidth: {\n        get: function() { return this.gridLinesHWidth; },\n        set: function(width) { this.gridLinesHWidth = this.gridLinesVWidth = width; }\n    },\n\n    gridBorder: getGridBorderDescriptor(),\n    gridBorderLeft: getGridBorderDescriptor('Left'),\n    gridBorderRight: getGridBorderDescriptor('Right'),\n    gridBorderTop: getGridBorderDescriptor('Top'),\n    gridBorderBottom: getGridBorderDescriptor('Bottom')\n};\n\n/**\n * @name module:dynamicProperties.columnProperties\n */\ndynamicPropertyDescriptors.columnProperties = dynamicPropertyDescriptors.columns;\n\n\nfunction getRowPropertiesBySubgridAndRowIndex() { // to be called with grid.properties as context\n    var subgrids = {};\n    var behavior = this.grid.behavior;\n    var defaultRowHeight = this.grid.properties.defaultRowHeight;\n    behavior.subgrids.forEach(function(dataModel) {\n        var key = dataModel.name || dataModel.type;\n        for (var rowIndex = 0, rowCount = dataModel.getRowCount(); rowIndex < rowCount; ++rowIndex) {\n            var rowProps = behavior.getRowProperties(rowIndex, undefined, dataModel);\n            if (rowProps) {\n                // create height mixin by invoking `height` getter\n                var height = { height: rowProps.height };\n                if (height.height === defaultRowHeight) {\n                    height = undefined;\n                }\n\n                // clone it and mix in height\n                rowProps = Object.assign({}, rowProps, height);\n\n                // only include if at least one defined prop\n                if (Object.getOwnPropertyNames(rowProps).find(definedProp)) {\n                    var subgrid = subgrids[key] || (subgrids[key] = {});\n                    subgrid[rowIndex] = rowProps;\n                }\n            }\n        }\n        function definedProp(key) { return rowProps[key] !== undefined; }\n    });\n    return subgrids;\n}\n\nfunction setRowPropertiesBySubgridAndRowIndex(rowsHash) { // to be called with grid.properties as context\n    var behavior = this.grid.behavior,\n        methodName = this.settingState ? 'setRowProperties' : 'addRowProperties';\n\n    Object.keys(rowsHash).forEach(function(subgridName) {\n        var subgrid = behavior.subgrids.lookup[subgridName];\n        if (subgrid) {\n            var subgridHash = rowsHash[subgridName];\n            Object.keys(subgridHash).forEach(function(rowIndex) {\n                var properties = subgridHash[rowIndex];\n                behavior[methodName](rowIndex, properties, subgrid);\n            });\n        }\n    });\n}\n\nfunction getColumnPropertiesByColumnIndexOrName() { // to be called with grid.properties as context\n    var columns = this.grid.behavior.getColumns(),\n        headerify = this.grid.headerify;\n    return columns.reduce(function(obj, column) {\n        var properties = Object.keys(column.properties).reduce(function(properties, key) {\n            switch (key) {\n                case 'preferredWidth': // not a public property\n                    break;\n                case 'header':\n                    if (headerify && column.properties.header === headerify(column.properties.name)) {\n                        break;\n                    }\n                    // fallthrough\n                default:\n                    properties[key] = column.properties[key];\n            }\n            return properties;\n        }, {});\n        if (Object.keys(properties).length) {\n            obj[column.name] = properties;\n        }\n        return obj;\n    }, {});\n}\n\nfunction setColumnPropertiesByColumnIndexOrName(columnsHash) { // to be called with grid.properties as context\n    this.grid.behavior.addAllColumnProperties(columnsHash, this.settingState);\n}\n\nfunction getCellPropertiesByColumnNameAndRowIndex() {\n    var behavior = this.grid.behavior,\n        columns = behavior.getColumns(),\n        subgrids = {};\n\n    behavior.subgrids.forEach(function(dataModel) {\n        var key = dataModel.name || dataModel.type;\n\n        for (var rowIndex = 0, rowCount = dataModel.getRowCount(); rowIndex < rowCount; ++rowIndex) {\n            columns.forEach(copyCellOwnProperties);\n        }\n\n        function copyCellOwnProperties(column) {\n            var properties = behavior.getCellOwnProperties(column.index, rowIndex, dataModel);\n            if (properties) {\n                var subgrid = subgrids[key] = subgrids[key] || {},\n                    row = subgrid[rowIndex] = subgrid[rowIndex] = {};\n                row[column.name] = Object.assign({}, properties);\n            }\n        }\n    });\n\n    return subgrids;\n}\n\nfunction setCellPropertiesByColumnNameAndRowIndex(cellsHash) { // to be called with grid.properties as context\n    var subgrids = this.grid.behavior.subgrids,\n        columns = this.grid.behavior.getColumns(),\n        methodName = this.settingState ? 'setCellProperties' : 'addCellProperties';\n\n    Object.keys(cellsHash).forEach(function(subgridName) {\n        var subgrid = subgrids.lookup[subgridName];\n        if (subgrid) {\n            var subgridHash = cellsHash[subgridName];\n            Object.keys(subgridHash).forEach(function(rowIndex) {\n                var columnProps = subgridHash[rowIndex];\n                Object.keys(columnProps).forEach(function(columnName) {\n                    var properties = columnProps[columnName];\n                    if (properties) {\n                        var column = columns.find(function(column) {\n                            return column.name === columnName;\n                        });\n                        if (column) {\n                            column[methodName](rowIndex, properties, subgrid);\n                        }\n                    }\n                });\n            });\n        }\n    });\n}\n\nfunction getGridBorderDescriptor(edge) {\n    var propName = 'gridBorder' + (edge || '');\n\n    return {\n        enumerable: true,\n        get: function() {\n            return this.var[propName];\n        },\n        set: function(border) {\n            this.var[propName] = border;\n\n            if (!edge) {\n                this.var.gridBorderLeft = this.var.gridBorderRight = this.var.gridBorderTop = this.var.gridBorderBottom = border;\n            }\n\n            this.grid.resetGridBorder(edge);\n        }\n    };\n}\n\nmodule.exports = dynamicPropertyDescriptors;\n","'use strict';\n\nvar Rectangle = require('rectangular').Rectangle;\n\n/*\n * The Hypergrid selection model defines a rectangle's bottom and right as inclusive rather than exclusive.\n * This definition works fine so long as it is used consistently. It does however throw off `Rectangle`'s\n * `width`, `height`, and `area` properties, all of which are getters which assume an exclusive model.\n * The following `SelectionModel` object extends (subclasses) `Rectangle` to correct this problem so that\n * those properties return accurate results.\n */\nfunction InclusiveRectangle(x, y, width, height) {\n    Rectangle.call(this, x, y, width - 1, height - 1);\n}\nInclusiveRectangle.prototype = Object.create(Rectangle.prototype, {\n    width: {\n        get: function() {\n            return this.extent.x + 1;\n        }\n    },\n    height: {\n        get: function() {\n            return this.extent.y + 1;\n        }\n    }\n});\n\nmodule.exports = InclusiveRectangle;\n","'use strict';\n\nvar bundleColumns = require('./bundle-columns');\nvar bundleRows = require('./bundle-rows');\n\n/** @summary Render the grid with consolidated row OR column rects.\n * @desc Paints all the cells of a grid, one column at a time.\n *\n * First, a background rect is drawn using the grid background color.\n *\n * Then, if there are any rows with their own background color _that differs from the grid background color,_ these are consolidated and the consolidated groups of row backgrounds are all drawn before iterating through cells. These row backgrounds get priority over column backgrounds.\n *\n * If there are no such row background rects to draw, the column rects are consolidated and drawn instead (again, before the cells). Note that these column rects are _not_ suitable for clipping overflow text from previous columns. If you have overflow text, either turn on clipping (big performance hit) or turn on one of the `truncateTextWithEllipsis` options.\n *\n * `try...catch` surrounds each cell paint in case a cell renderer throws an error.\n * The error message is error-logged to console AND displayed in cell.\n *\n * Each cell to be rendered is described by a {@link CellEvent} object. For performance reasons, to avoid constantly instantiating these objects, we maintain a pool of these. When the grid shape changes, we reset their coordinates by setting {@link CellEvent#reset|reset} on each.\n *\n * See also the discussion of clipping in {@link Renderer#paintCellsByColumns|paintCellsByColumns}.\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @memberOf Renderer.prototype\n */\nfunction paintCellsByColumnsAndRows(gc) {\n    var grid = this.grid,\n        gridProps = grid.properties,\n        prefillColor, rowPrefillColors, gridPrefillColor = gridProps.backgroundColor,\n        cellEvent,\n        rowBundle, rowBundles,\n        columnBundle, columnBundles,\n        visibleColumns = this.visibleColumns,\n        visibleRows = this.visibleRows,\n        c, C = visibleColumns.length,\n        cLast = C - 1,\n        r, R = visibleRows.length,\n        pool = this.cellEventPool,\n        preferredWidth,\n        columnClip,\n        // clipToGrid,\n        viewWidth = C ? visibleColumns[C - 1].right : 0,\n        viewHeight = R ? visibleRows[R - 1].bottom : 0;\n\n    gc.clearRect(0, 0, this.bounds.width, this.bounds.height);\n\n    if ((!C && !visibleColumns[-1]) || !R) { return; }\n\n    if (gc.alpha(gridPrefillColor) > 0) {\n        gc.cache.fillStyle = gridPrefillColor;\n        gc.fillRect(0, 0, viewWidth, viewHeight);\n    }\n\n    if (this.gridRenderer.reset) {\n        this.resetAllGridRenderers();\n        this.gridRenderer.reset = false;\n        bundleRows.call(this, false);\n        bundleColumns.call(this, true);\n    } else if (this.gridRenderer.rebundle) {\n        this.gridRenderer.rebundle = false;\n        bundleColumns.call(this);\n    }\n\n    rowBundles = this.rowBundles;\n    if (rowBundles.length) {\n        rowPrefillColors = this.rowPrefillColors;\n        for (r = rowBundles.length; r--;) {\n            rowBundle = rowBundles[r];\n            gc.clearFill(0, rowBundle.top, viewWidth, rowBundle.bottom - rowBundle.top, rowBundle.backgroundColor);\n        }\n    } else {\n        for (columnBundles = this.columnBundles, c = columnBundles.length; c--;) {\n            columnBundle = columnBundles[c];\n            gc.clearFill(columnBundle.left, 0, columnBundle.right - columnBundle.left, viewHeight, columnBundle.backgroundColor);\n        }\n    }\n\n    // gc.clipSave(clipToGrid, 0, 0, viewWidth, viewHeight);\n\n    // For each column...\n    var p = 0;\n    this.visibleColumns.forEachWithNeg(function(vc, c) {\n\n        cellEvent = pool[p];\n        vc = cellEvent.visibleColumn;\n\n        if (!rowPrefillColors) {\n            prefillColor = cellEvent.column.properties.backgroundColor;\n        }\n\n        // Optionally clip to visible portion of column to prevent text from overflowing to right.\n        columnClip = vc.column.properties.columnClip;\n        gc.clipSave(columnClip || columnClip === null && c === cLast, 0, 0, vc.right, viewHeight);\n\n        // For each row of each subgrid (of each column)...\n        for (preferredWidth = r = 0; r < R; r++, p++) {\n            // if (!pool[p].disabled) {\n                if (rowPrefillColors) {\n                    prefillColor = rowPrefillColors[r];\n                }\n\n                try {\n                    preferredWidth = Math.max(preferredWidth, this._paintCell(gc, pool[p], prefillColor));\n                } catch (e) {\n                    this.renderErrorCell(e, gc, vc, pool[p].visibleRow);\n                }\n            // }\n        }\n\n        gc.clipRestore(columnClip);\n\n        cellEvent.column.properties.preferredWidth = Math.round(preferredWidth);\n    }, this);\n\n    // gc.clipRestore(clipToGrid);\n\n    this.paintGridlines(gc);\n}\n\npaintCellsByColumnsAndRows.key = 'by-columns-and-rows';\npaintCellsByColumnsAndRows.rebundle = true; // see rebundleGridRenderers\n\nmodule.exports = paintCellsByColumnsAndRows;\n","'use strict';\n\nfunction bundleRows(resetCellEvents) {\n    var gridProps = this.grid.properties,\n        vr, visibleRows = this.visibleRows,\n        r, R = visibleRows.length,\n        p, pool;\n\n    if (resetCellEvents) {\n        pool = this.cellEventPool;\n        for (p = 0, r = 0; r < R; r++) {\n            vr = visibleRows[r];\n            this.visibleColumns.forEachWithNeg(function(vc) { // eslint-disable-line no-loop-func\n                p++;\n                // reset pool member to reflect coordinates of cell in newly shaped grid\n                pool[p].reset(vc, vr);\n            });\n        }\n    }\n\n    var bundle, rowBundles = [],\n        gridPrefillColor = gridProps.backgroundColor,\n        rowStripes = gridProps.rowStripes,\n        rowPrefillColors = Array(R),\n        stripe, backgroundColor;\n\n    for (r = 0; r < R; r++) {\n        vr = visibleRows[r]; // first cell in row r\n        stripe = vr.subgrid.isData && rowStripes && rowStripes[vr.rowIndex % rowStripes.length];\n        backgroundColor = rowPrefillColors[r] = stripe && stripe.backgroundColor || gridPrefillColor;\n        if (bundle && bundle.backgroundColor === backgroundColor) {\n            bundle.bottom = vr.bottom;\n        } else if (backgroundColor === gridPrefillColor) {\n            bundle = undefined;\n        } else {\n            bundle = {\n                backgroundColor: backgroundColor,\n                top: vr.top,\n                bottom: vr.bottom\n            };\n            rowBundles.push(bundle);\n        }\n    }\n\n    this.rowBundles = rowBundles;\n    this.rowPrefillColors = rowPrefillColors;\n}\n\nmodule.exports = bundleRows;\n","'use strict';\n\n/* eslint-env node, browser */\n\n(function (module) {  // eslint-disable-line no-unused-expressions\n\n    // This closure supports NodeJS-less client side includes with <script> tags. See https://github.com/joneit/mnm.\n\n    /**\n     * @constructor RangeSelectionModel\n     *\n     * @desc This object models selection of \"cells\" within an abstract single-dimensional matrix.\n     *\n     * Disjoint selections can be built with calls to the following methods:\n     * * {@link RangeSelectionModel#select|select(start, stop)} - Add a range to the matrix.\n     * * {@link RangeSelectionModel#deselect|deselect(start, stop)} - Remove a range from the matrix.\n     *\n     * Two more methods are available:\n     * * Test a cell to see if it {@link RangeSelectionModel#isSelected|isSelected(cell)}\n     * * {@link RangeSelectionModel#clear|clear()} the matrix\n     *\n     * Internally, the selection is run-length-encoded. It is therefore a \"sparse\" matrix\n     * with undefined bounds. A single data property called `selection` is an array that\n     * contains all the \"runs\" (ranges) of selected cells albeit in no particular order.\n     * This property should not normally need to be accessed directly.\n     *\n     * Note: This object should be instantiated with the `new` keyword.\n     *\n     * @returns {RangeSelectionModel} Self (i.e., `this` object).\n     */\n    function RangeSelectionModel() {\n        /**\n         * @name selection\n         * @type {Array.Array.number}\n         * @summary Unordered list of runs.\n         * @desc A \"run\" is defined as an Array(2) where:\n         * * element [0] is the beginning of the run\n         * * element [1] is the end of the run (inclusive) and is always >= element [0]\n         * The order of the runs within is undefined.\n         * @memberOf RangeSelectionModel.prototype\n         * @abstract\n         */\n        this.selection = [];\n\n        //we need to be able to go back in time\n        //the states field\n        this.states = [];\n\n        //clone and store my current state\n        //so we can unwind changes if need be\n        this.storeState = function () {\n            var sels = this.selection;\n            var state = [];\n            var copy;\n            for (var i = 0; i < sels.length; i++) {\n                copy = [].concat(sels[i]);\n                state.push(copy);\n            }\n            this.states.push(state);\n        };\n    }\n\n    RangeSelectionModel.prototype = {\n\n        /**\n         * @summary Add a contiguous run of points to the selection.\n         * @desc Insert a new run into `this.selection`.\n         * The new run will be merged with overlapping and adjacent runs.\n         *\n         * The two parameters may be given in either order.\n         * The start and stop elements in the resulting run will however always be ordered.\n         * (However, note that the order of the runs within `this.selection` is itself always unordered.)\n         *\n         * Note that `this.selection` is updated in place, preserving validity of any external references.\n         * @param {number} start - Start of run. May be greater than `stop`.\n         * @param {number} [stop=stop] - End of run (inclusive). May be less than `start`.\n         * @returns {RangeSelectionModel} Self (i.e., `this`), for chaining.\n         * @memberOf RangeSelectionModel.prototype\n         */\n        select: function (start, stop) {\n            this.storeState();\n            var run = makeRun(start, stop);\n            var splicer = [0, 1];\n            this.selection.forEach(function (each) {\n                if (overlaps(each, run) || abuts(each, run)) {\n                    run = merge(each, run);\n                } else {\n                    splicer.push(each);\n                }\n            });\n            splicer.push(run);\n            splicer[1] = this.selection.length;\n            this.selection.splice.apply(this.selection, splicer); // update in place to preserve external references\n            return this;\n        },\n\n        /**\n         * @summary Remove a contiguous run of points from the selection.\n         * @desc Truncate and/or remove run(s) from `this.selection`.\n         * Removing part of existing runs will (correctly) shorten them or break them into two fragments.\n         *\n         * The two parameters may be given in either order.\n         *\n         * Note that `this.selection` is updated in place, preserving validity of any external references.\n         * @param {number} start - Start of run. May be greater than `stop`.\n         * @param {number} [stop=stop] - End of run (inclusive). May be less than `start`.\n         * @returns {RangeSelectionModel} Self (i.e., `this`), for chaining.\n         * @memberOf RangeSelectionModel.prototype\n         */\n        deselect: function (start, stop) {\n            var run = makeRun(start, stop);\n            var splicer = [0, 0];\n            this.selection.forEach(function (each) {\n                if (overlaps(each, run)) {\n                    var pieces = subtract(each, run);\n                    splicer = splicer.concat(pieces);\n                } else {\n                    splicer.push(each);\n                }\n            });\n            splicer[1] = this.selection.length;\n            this.selection.splice.apply(this.selection, splicer); // update in place to preserve external references\n            return this;\n        },\n\n        /**\n         * @summary Empties `this.selection`, effectively removing all runs.\n         * @returns {RangeSelectionModel} Self (i.e., `this`), for chaining.\n         * @memberOf RangeSelectionModel.prototype\n         */\n        clear: function () {\n            this.states.length = 0;\n            this.selection.length = 0;\n            return this;\n        },\n\n        clearMostRecentSelection: function () {\n            if (this.states.length === 0) {\n                return;\n            }\n            this.selection = this.states.pop();\n        },\n\n        /**\n         * @summary Determines if the given `cell` is selected.\n         * @returns {boolean} `true` iff given `cell` is within any of the runs in `this.selection`.\n         * @param {number} cell - The cell to test for inclusion in the selection.\n         * @memberOf RangeSelectionModel.prototype\n         */\n        isSelected: function (cell) {\n            return this.selection.some(function (each) {\n                return each[0] <= cell && cell <= each[1];\n            });\n        },\n\n        isEmpty: function (){\n            return this.selection.length === 0;\n        },\n\n        /**\n         * @summary Return the indexes that are selected.\n         * @desc Return the indexes that are selected.\n         * @returns {Array.Array.number}\n         * @memberOf RangeSelectionModel.prototype\n         */\n        getSelections: function (){\n            var result = [];\n            this.selection.forEach(function (each) {\n                for (var i = each[0]; i <= each[1]; i++) {\n                    result.push(i);\n                }\n            });\n            result.sort(function (a, b){\n                return a - b;\n            });\n            return result;\n        }\n\n    };\n\n    /**\n     * @private\n     * @summary Preps `start` and `stop` params into order array\n     * @function makeRun\n     * @desc Utility function called by both `select()` and `deselect()`.\n     * @param {number|number[]} start - Start of run. if array, `start` and `stop` are taken from first two elements.\n     * @param {number} [stop=start] - End of run (inclusive).\n     */\n    function makeRun(start, stop) {\n        return (\n            start instanceof Array\n                ? makeRun.apply(this, start) // extract params from given array\n                : stop === undefined\n                ? [ start, start ] // single param is a run that stops where it starts\n                : start <= stop\n                ? [ start, stop ]\n                : [ stop, start ] // reverse descending params into ascending order\n        );\n    }\n\n    /**\n     * @private\n     * @function overlaps\n     * @returns {boolean} `true` iff `run1` overlaps `run2`\n     * @summary Comparison operator that determines if given runs overlap with one another.\n     * @desc Both parameters are assumed to be _ordered_ arrays.\n     *\n     * Overlap is defined to include the case where one run completely contains the other.\n     *\n     * Note: This operator is commutative.\n     * @param {number[]} run1 - first run\n     * @param {number[]} run2 - second run\n     */\n    function overlaps(run1, run2) {\n        return (\n            run1[0] <= run2[0] && run2[0] <= run1[1] || // run2's start is within run1 OR...\n            run1[0] <= run2[1] && run2[1] <= run1[1] || // run2's stop is within run1 OR...\n            run2[0] <  run1[0] && run1[1] <  run2[1]    // run2 completely contains run1\n        );\n    }\n\n    /**\n     * @private\n     * @function abuts\n     * @summary Comparison operator that determines if given runs are consecutive with one another.\n     * @returns {boolean} `true` iff `run1` is consecutive with `run2`\n     * @desc Both parameters are assumed to be _ordered_ arrays.\n     *\n     * Note: This operator is commutative.\n     * @param {number[]} run1 - first run\n     * @param {number[]} run2 - second run\n     */\n    function abuts(run1, run2) {\n        return (\n            run1[1] === run2[0] - 1 || // run1's top immediately precedes run2's start OR...\n            run2[1] === run1[0] - 1    // run2's top immediately precedes run1's start\n        );\n    }\n\n    /**\n     * @private\n     * @function subtract\n     * @summary Operator that subtracts one run from another.\n     * @returns {Array.Array.number} The remaining pieces of `minuend` after removing `subtrahend`.\n     * @desc Both parameters are assumed to be _ordered_ arrays.\n     *\n     * This function _does not assumes_ that `overlap()` has already been called with the same runs and has returned `true`.\n     *\n     * Returned array contains 0, 1, or 2 runs which are the portion(s) of `minuend` that do _not_ include `subtrahend`.\n     *\n     * Caveat: This operator is *not* commutative.\n     * @param {number[]} minuend - a run from which to \"subtract\" `subtrahend`\n     * @param {number[]} subtrahend - a run to \"subtracted\" from `minuend`\n     */\n    function subtract(minuend, subtrahend) {\n        var m0 = minuend[0];\n        var m1 = minuend[1];\n        var s0 = subtrahend[0];\n        var s1 = subtrahend[1];\n        var result = [];\n\n        if (s0 <= m0 && s1 < m1) {\n            //subtrahend extends before minuend: return remaining piece of `minuend`\n            result.push([s1 + 1, m1]);\n        } else if (s0 > m0 && s1 >= m1) {\n            //subtrahend extends after minuend: return remaining piece of `minuend`\n            result.push([m0, s0 - 1]);\n        } else if (m0 < s0 && s1 < m1) {\n            //completely inside: return 2 smaller pieces resulting from the hole\n            result.push([m0, s0 - 1]);\n            result.push([s1 + 1, m1]);\n        } else if (s1 < m0 || s0 > m1) {\n            // completely outside: return `minuend` untouched\n            result.push(minuend);\n        }\n\n        //else subtrahend must completely overlap minuend so return no pieces\n\n        return result;\n    }\n\n\n    // Local utility functions\n\n    /**\n     * @private\n     * @function merge\n     * @summary Operator that merges given runs.\n     * @returns {number[]} A single merged run.\n     * @desc Both parameters are assumed to be _ordered_ arrays.\n     *\n     * The runs are assumed to be overlapping or adjacent to one another.\n     *\n     * Note: This operator is commutative.\n     * @param {number[]} run1 - a run to merge with `run2`\n     * @param {number[]} run2 - a run to merge with `run1`\n     */\n    function merge(run1, run2) {\n        var min = Math.min(Math.min.apply(Math, run1), Math.min.apply(Math, run2));\n        var max = Math.max(Math.max.apply(Math, run1), Math.max.apply(Math, run2));\n        return [min, max];\n    }\n\n    // Interface\n    module.exports = RangeSelectionModel;\n})(\n    typeof module === 'object' && module || (window.RangeSelectionModel = {}),\n    typeof module === 'object' && module.exports || (window.RangeSelectionModel.exports = {})\n) || (\n    typeof module === 'object' || (window.RangeSelectionModel = window.RangeSelectionModel.exports)\n);\n\n/* About the above IIFE:\n * This file is a \"modified node module.\" It functions as usual in Node.js *and* is also usable directly in the browser.\n * 1. Node.js: The IIFE is superfluous but innocuous.\n * 2. In the browser: The IIFE closure serves to keep internal declarations private.\n * 2.a. In the browser as a global: The logic in the actual parameter expressions + the post-invocation expression\n * will put your API in `window.RangeSelectionModel`.\n * 2.b. In the browser as a module: If you predefine a `window.module` object, the results will be in `module.exports`.\n * The bower component `mnm` makes this easy and also provides a global `require()` function for referencing your module\n * from other closures. In either case, this works with both NodeJs-style export mechanisms -- a single API assignment,\n * `module.exports = yourAPI` *or* a series of individual property assignments, `module.exports.property = property`.\n *\n * Before the IIFE runs, the actual parameter expressions are executed:\n * 1. If `window` object undefined, we're in NodeJs so assume there is a `module` object with an `exports` property\n * 2. If `window` object defined, we're in browser\n * 2.a. If `module` object predefined, use it\n * 2.b. If `module` object undefined, create a `RangeSelectionModel` object\n *\n * After the IIFE returns:\n * Because it always returns undefined, the expression after the || will execute:\n * 1. If `window` object undefined, then we're in NodeJs so we're done\n * 2. If `window` object defined, then we're in browser\n * 2.a. If `module` object predefined, we're done; results are in `moudule.exports`\n * 2.b. If `module` object undefined, redefine`RangeSelectionModel` to be the `RangeSelectionModel.exports` object\n */\n","'use strict';\n\n// `columnEnum` et al, have been deprecated as of 3.0.0 in favor of accessing column schema\n// through .schema, .columns, and .allColumns, all of which now sport self-referential dictionaries.\n// To finally remove, delete this file and all lines using `_columnEnum`\n\nvar ArrayDecorator = require('synonomous');\nvar transformers = require('synonomous/transformers');\n\nvar warned = {};\n\nfunction warnColumnEnumDeprecation(method, msg) {\n    if (!warned[method]) {\n        console.warn('.' + method + ' has been deprecated as of v3.0.0. (Will be removed in a future release.) ' + (msg || ''));\n        warned[method] = true;\n    }\n}\n\nexports.mixin = {\n    columnEnumSynchronize: function() {\n        this._columnEnumKey = this._columnEnumKey || 'toAllCaps';\n\n        var columnEnum = this._columnEnum || (this._columnEnum = {}),\n            allColumns = this.allColumns,\n            arrayDecorator = new ArrayDecorator({ transformations: [this._columnEnumKey] }),\n            dict = arrayDecorator.decorateArray(allColumns.slice());\n\n        dict.length = 0;\n        Object.keys(dict).reduce(function(columnEnum, key) {\n            columnEnum[key] = dict[key].index;\n            return columnEnum;\n        }, columnEnum);\n\n        // clean up\n        Object.keys(columnEnum).forEach(function(key) {\n            if (!(key in dict)) {\n                delete columnEnum[key];\n            }\n        });\n    },\n\n    get columnEnum() {\n        if (!warned.columnEnum) {\n            console.warn('.columnEnum[propName] has been deprecated as of v3.0.0 in favor of either .getColumns()[propName].index or .schema[propName].index. (Will be removed in a future release.)');\n            warned.columnEnum = true;\n        }\n        return this._columnEnum;\n    },\n\n    get columnEnumKey() {\n        warnColumnEnumDeprecation('columnEnumKey');\n        return this._columnEnumKey === 'verbatim' ? 'passThrough' : this._columnEnumKey;\n    },\n    set columnEnumKey(transformer) {\n        warnColumnEnumDeprecation('columnEnumKey');\n        var type = typeof transformer,\n            keys = Object.keys(transformers);\n        switch (type) {\n            case 'string':\n                if (transformer === 'passThrough') {\n                    transformer = 'verbatim';\n                } else if (!(transformer in transformers)) {\n                    throw new this.HypergridError('Expected registered transformer for .columnEnumKey value from: ' + keys);\n                }\n                this._columnEnumKey = transformer;\n                break;\n            case 'function':\n                this._columnEnumKey = keys.find(function(key) { return transformer === transformers[key]; });\n                if (!this._columnEnumKey) {\n                    throw new this.HypergridError('.columnEnumKey has been deprecated as of v3.0.0 and now accepts a function reference (or string key) from require(\"synonmous/transformers\"): ' + keys);\n                }\n                break;\n            default:\n                throw new this.HypergridError('Expected string or function for .columnEnumKey assignment but received ' + type + '.');\n        }\n    }\n};\n\nexports.mixInShared = {\n    get columnEnumDecorators() {\n        warnColumnEnumDeprecation('columnEnumDecorators');\n        return transformers;\n    }\n};\n","'use strict';\n\n/*\n * This module is the namespace of loaded external modules known to `Hypergrid.require`,\n * which may include loaded application modules, datasource modules, and plug-in modules.\n *\n * Applications can override the \"overridable\" modules. For example, to override `finbars` with\n * a compatible module (that conforms to the same interface), just assign it like so:\n * ```js\n * Hypergrid.modules.Scrollbar = myFinbarReplacement;\n * ```\n */\n\n// overridable modules\n// Hypergrid vectors through here for these modules\nmodule.exports = {\n    Scrollbar: require('finbars'),\n    templater: require('mustache') // mustache interface: { render: function(template, context) }\n};\n\n// non-overridable modules\n// Access via `Hypergrid.require`\n// For users of pre-bundled build file (others should use `require`)\n// These are NOT overridable so non-configurable, non-writable\nObject.defineProperties(module.exports, {\n    'datasaur-base': { value: require('datasaur-base') }, // may be removed in a future release\n    'datasaur-local': { value: require('datasaur-local') }, // may be removed in a future release\n    'extend-me': {value: require('extend-me') },\n    finbars: { value: require('finbars') },\n    'object-iterators': { value: require('object-iterators') },\n    overrider: { value: require('overrider') },\n    rectangular: { value: require('rectangular') },\n    'sparse-boolean-array': { value: require('sparse-boolean-array') },\n    synonomous: { value: require('synonomous') }\n});\n","'use strict';\n\n/* eslint-env node, browser */\n\nvar cssInjector = require('css-injector');\n\n// Following is the sole style requirement for bar and thumb elements.\n// Maintained in code so not dependent being in stylesheet.\nvar BAR_STYLE = 'position: absolute;';\nvar THUMB_STYLE = 'position: absolute;';\n\n/**\n * @constructor FinBar\n * @summary Create a scrollbar object.\n * @desc Creating a scrollbar is a three-step process:\n *\n * 1. Instantiate the scrollbar object by calling this constructor function. Upon instantiation, the DOM element for the scrollbar (with a single child element for the scrollbar \"thumb\") is created but is not insert it into the DOM.\n * 2. After instantiation, it is the caller's responsibility to insert the scrollbar, {@link FinBar#bar|this.bar}, into the DOM.\n * 3. After insertion, the caller must call {@link FinBar#resize|resize()} at least once to size and position the scrollbar and its thumb. After that, `resize()` should also be called repeatedly on resize events (as the content element is being resized).\n *\n * Suggested configurations:\n * * _**Unbound**_<br/>\n * The scrollbar serves merely as a simple range (slider) control. Omit both `options.onchange` and `options.content`.\n * * _**Bound to virtual content element**_<br/>\n * Virtual content is projected into the element using a custom event handler supplied by the programmer in `options.onchange`. A typical use case would be to handle scrolling of the virtual content. Other use cases include data transformations, graphics transformations, _etc._\n * * _**Bound to real content**_<br/>\n * Set `options.content` to the \"real\" content element but omit `options.onchange`. This will cause the scrollbar to use the built-in event handler (`this.scrollRealContent`) which implements smooth scrolling of the content element within the container.\n *\n * @param {finbarOptions} [options={}] - Options object. See the type definition for member details.\n */\nfunction FinBar(options) {\n\n    // make bound versions of all the mouse event handler\n    var bound = this._bound = {};\n    Object.keys(handlersToBeBound).forEach(function (key) {\n        bound[key] = handlersToBeBound[key].bind(this);\n    }, this);\n\n    /**\n     * @name thumb\n     * @summary The generated scrollbar thumb element.\n     * @desc The thumb element's parent element is always the {@link FinBar#bar|bar} element.\n     *\n     * This property is typically referenced internally only. The size and position of the thumb element is maintained by `_calcThumb()`.\n     * @type {Element}\n     * @memberOf FinBar.prototype\n     */\n    var thumb = this.thumb = document.createElement('div');\n    thumb.classList.add('thumb');\n    thumb.setAttribute('style', THUMB_STYLE);\n    thumb.onclick = bound.shortStop;\n    thumb.onmouseover = bound.onmouseover;\n    thumb.onmouseout = this._bound.onmouseout;\n\n    /**\n     * @name bar\n     * @summary The generated scrollbar element.\n     * @desc The caller inserts this element into the DOM (typically into the content container) and then calls its {@link FinBar#resize|resize()} method.\n     *\n     * Thus the node tree is typically:\n     * * A **content container** element, which contains:\n     *   * The content element(s)\n     *   * This **scrollbar element**, which in turn contains:\n     *     * The **thumb element**\n     *\n     * @type {Element}\n     * @memberOf FinBar.prototype\n     */\n    var bar = this.bar = document.createElement('div');\n     bar.classList.add('finbar-vertical');\n    bar.setAttribute('style', BAR_STYLE);\n    bar.onmousedown = this._bound.onmousedown;\n    if (this.paging) { bar.onclick = bound.onclick; }\n    bar.appendChild(thumb);\n\n    options = options || {};\n\n    // presets\n    this.orientation = 'vertical';\n    this._min = this._index = 0;\n    this._max = 100;\n\n    /**\n     * Wheel metric normalization, applied equally to all three axes.\n     *\n     * This value is overridden with a platform- and browser-specific wheel factor when available in {@link FinBar.normals}.\n     *\n     * To suppress, delete `FinBar.normals` before instantiation or override this instance variable (with `1.0`) after instantiation.\n     * @type {number}\n     * @memberOf FinBar.prototype\n     */\n    this.normal = getNormal() || 1.0;\n\n    // options\n    Object.keys(options).forEach(function (key) {\n        var option = options[key];\n        if (option !== undefined) {\n            switch (key) {\n\n                case 'index':\n                    this._index = option;\n                    break;\n\n                case 'range':\n                    validRange(option);\n                    this._min = option.min;\n                    this._max = option.max;\n                    this.contentSize = option.max - option.min + 1;\n                    break;\n\n                default:\n                    if (\n                        key.charAt(0) !== '_' &&\n                        typeof FinBar.prototype[key] !== 'function'\n                    ) {\n                        // override prototype defaults for standard ;\n                        // extend with additional properties (for use in onchange event handlers)\n                        this[key] = option;\n                    }\n                    break;\n\n            }\n        }\n    }, this);\n\n    cssInjector(cssFinBars, 'finbar-base', options.cssStylesheetReferenceElement);\n}\n\nFinBar.prototype = {\n\n    /**\n     * @summary The scrollbar orientation.\n     * @desc Set by the constructor to either `'vertical'` or `'horizontal'`. See the similarly named property in the {@link finbarOptions} object.\n     *\n     * Useful values are `'vertical'` (the default) or `'horizontal'`.\n     *\n     * Setting this property resets `this.oh` and `this.deltaProp` and changes the class names so as to reposition the scrollbar as per the CSS rules for the new orientation.\n     * @default 'vertical'\n     * @type {string}\n     * @memberOf FinBar.prototype\n     */\n    set orientation(orientation) {\n        if (orientation === this._orientation) {\n            return;\n        }\n\n        this._orientation = orientation;\n\n        /**\n         * @readonly\n         * @name oh\n         * @summary <u>O</u>rientation <u>h</u>ash for this scrollbar.\n         * @desc Set by the `orientation` setter to either the vertical or the horizontal orientation hash. The property should always be synchronized with `orientation`; do not update directly!\n         *\n         * This object is used internally to access scrollbars' DOM element properties in a generalized way without needing to constantly query the scrollbar orientation. For example, instead of explicitly coding `this.bar.top` for a vertical scrollbar and `this.bar.left` for a horizontal scrollbar, simply code `this.bar[this.oh.leading]` instead. See the {@link orientationHashType} definition for details.\n         *\n         * This object is useful externally for coding generalized {@link finbarOnChange} event handler functions that serve both horizontal and vertical scrollbars.\n         * @type {orientationHashType}\n         * @memberOf FinBar.prototype\n         */\n        this.oh = orientationHashes[this._orientation];\n\n        if (!this.oh) {\n            error('Invalid value for `options._orientation.');\n        }\n\n        /**\n         * @name deltaProp\n         * @summary The name of the `WheelEvent` property this scrollbar should listen to.\n         * @desc Set by the constructor. See the similarly named property in the {@link finbarOptions} object.\n         *\n         * Useful values are `'deltaX'`, `'deltaY'`, or `'deltaZ'`. A value of `null` means to ignore mouse wheel events entirely.\n         *\n         * The mouse wheel is one-dimensional and only emits events with `deltaY` data. This property is provided so that you can override the default of `'deltaX'` with a value of `'deltaY'` on your horizontal scrollbar primarily to accommodate certain \"panoramic\" interface designs where the mouse wheel should control horizontal rather than vertical scrolling. Just give `{ deltaProp: 'deltaY' }` in your horizontal scrollbar instantiation.\n         *\n         * Caveat: Note that a 2-finger drag on an Apple trackpad emits events with _both_ `deltaX ` and `deltaY` data so you might want to delay making the above adjustment until you can determine that you are getting Y data only with no X data at all (which is a sure bet you on a mouse wheel rather than a trackpad).\n\n         * @type {object|null}\n         * @memberOf FinBar.prototype\n         */\n        this.deltaProp = this.oh.delta;\n\n        this.bar.className = this.bar.className.replace(/(vertical|horizontal)/g, orientation);\n\n        if (this.bar.style.cssText !== BAR_STYLE || this.thumb.style.cssText !== THUMB_STYLE) {\n            this.bar.setAttribute('style', BAR_STYLE);\n            this.thumb.setAttribute('style', THUMB_STYLE);\n            this.resize();\n        }\n    },\n    get orientation() {\n        return this._orientation;\n    },\n\n    /**\n     * @summary Callback for scroll events.\n     * @desc Set by the constructor via the similarly named property in the {@link finbarOptions} object. After instantiation, `this.onchange` may be updated directly.\n     *\n     * This event handler is called whenever the value of the scrollbar is changed through user interaction. The typical use case is when the content is scrolled. It is called with the `FinBar` object as its context and the current value of the scrollbar (its index, rounded) as the only parameter.\n     *\n     * Set this property to `null` to stop emitting such events.\n     * @type {function(number)|null}\n     * @memberOf FinBar.prototype\n     */\n    onchange: null,\n\n    /**\n     * @summary Add a CSS class name to the bar element's class list.\n     * @desc Set by the constructor. See the similarly named property in the {@link finbarOptions} object.\n     *\n     * The bar element's class list will always include `finbar-vertical` (or `finbar-horizontal` based on the current orientation). Whenever this property is set to some value, first the old prefix+orientation is removed from the bar element's class list; then the new prefix+orientation is added to the bar element's class list. This property causes _an additional_ class name to be added to the bar element's class list. Therefore, this property will only add at most one additional class name to the list.\n     *\n     * To remove _classname-orientation_ from the bar element's class list, set this property to a falsy value, such as `null`.\n     *\n     * > NOTE: You only need to specify an additional class name when you need to have mulltiple different styles of scrollbars on the same page. If this is not a requirement, then you don't need to make a new class; you would just create some additional rules using the same selectors in the built-in stylesheet (../css/finbars.css):\n     * *`div.finbar-vertical` (or `div.finbar-horizontal`) for the scrollbar\n     * *`div.finbar-vertical > div` (or `div.finbar-horizontal > div`) for the \"thumb.\"\n     *\n     * Of course, your rules should come after the built-ins.\n     * @type {string}\n     * @memberOf FinBar.prototype\n     */\n    set classPrefix(prefix) {\n        if (this._classPrefix) {\n            this.bar.classList.remove(this._classPrefix + this.orientation);\n        }\n\n        this._classPrefix = prefix;\n\n        if (prefix) {\n            this.bar.classList.add(prefix + '-' + this.orientation);\n        }\n    },\n    get classPrefix() {\n        return this._classPrefix;\n    },\n\n    /**\n     * @name increment\n     * @summary Number of scrollbar index units representing a pageful. Used exclusively for paging up and down and for setting thumb size relative to content size.\n     * @desc Set by the constructor. See the similarly named property in the {@link finbarOptions} object.\n     *\n     * Can also be given as a parameter to the {@link FinBar#resize|resize} method, which is pertinent because content area size changes affect the definition of a \"pageful.\" However, you only need to do this if this value is being used. It not used when:\n     * * you define `paging.up` and `paging.down`\n     * * your scrollbar is using `scrollRealContent`\n     * @type {number}\n     * @memberOf FinBar.prototype\n     */\n    increment: 1,\n\n    /**\n     * Default value of multiplier for `WheelEvent#deltaX` (horizontal scrolling delta).\n     * @default\n     * @memberOf FinBar.prototype\n     */\n    deltaXFactor: 1,\n\n    /**\n     * Default value of multiplier for `WheelEvent#deltaY` (vertical scrolling delta).\n     * @default\n     * @memberOf FinBar.prototype\n     */\n    deltaYFactor: 1,\n\n    /**\n     * Default value of multiplier for `WheelEvent#deltaZ` (delpth scrolling delta).\n     * @default\n     * @memberOf FinBar.prototype\n     */\n    deltaZFactor: 1,\n\n    /**\n     * @name barStyles\n     * @summary Scrollbar styles to be applied by {@link FinBar#resize|resize()}.\n     * @desc Set by the constructor. See the similarly named property in the {@link finbarOptions} object.\n     *\n     * This is a value to be assigned to {@link FinBar#styles|styles} on each call to {@link FinBar#resize|resize()}. That is, a hash of values to be copied to the scrollbar element's style object on resize; or `null` for none.\n     *\n     * @see {@link FinBar#style|style}\n     * @type {finbarStyles|null}\n     * @memberOf FinBar.prototype\n     */\n    barStyles: null,\n\n    /**\n     * @name style\n     * @summary Additional scrollbar styles.\n     * @desc See type definition for more details. These styles are applied directly to the scrollbar's `bar` element.\n     *\n     * Values are adjusted as follows before being applied to the element:\n     * 1. Included \"pseudo-property\" names from the scrollbar's orientation hash, {@link FinBar#oh|oh}, are translated to actual property names before being applied.\n     * 2. When there are margins, percentages are translated to absolute pixel values because CSS ignores margins in its percentage calculations.\n     * 3. If you give a value without a unit (a raw number), \"px\" unit is appended.\n     *\n     * General notes:\n     * 1. It is always preferable to specify styles via a stylesheet. Only set this property when you need to specifically override (a) stylesheet value(s).\n     * 2. Can be set directly or via calls to the {@link FinBar#resize|resize} method.\n     * 3. Should only be set after the scrollbar has been inserted into the DOM.\n     * 4. Before applying these new values to the element, _all_ in-line style values are reset (by removing the element's `style` attribute), exposing inherited values (from stylesheets).\n     * 5. Empty object has no effect.\n     * 6. Falsey value in place of object has no effect.\n     *\n     * > CAVEAT: Do not attempt to treat the object you assign to this property as if it were `this.bar.style`. Specifically, changing this object after assigning it will have no effect on the scrollbar. You must assign it again if you want it to have an effect.\n     *\n     * @see {@link FinBar#barStyles|barStyles}\n     * @type {finbarStyles}\n     * @memberOf FinBar.prototype\n     */\n    set style(styles) {\n        var keys = Object.keys(styles = extend({}, styles, this._auxStyles));\n\n        if (keys.length) {\n            var bar = this.bar,\n                barRect = bar.getBoundingClientRect(),\n                container = this.container || bar.parentElement,\n                containerRect = container.getBoundingClientRect(),\n                oh = this.oh;\n\n            // Before applying new styles, revert all styles to values inherited from stylesheets\n            bar.setAttribute('style', BAR_STYLE);\n\n            keys.forEach(function (key) {\n                var val = styles[key];\n\n                if (key in oh) {\n                    key = oh[key];\n                }\n\n                if (!isNaN(Number(val))) {\n                    val = (val || 0) + 'px';\n                } else if (/%$/.test(val)) {\n                    // When bar size given as percentage of container, if bar has margins, restate size in pixels less margins.\n                    // (If left as percentage, CSS's calculation will not exclude margins.)\n                    var oriented = axis[key],\n                        margins = barRect[oriented.marginLeading] + barRect[oriented.marginTrailing];\n                    if (margins) {\n                        val = parseInt(val, 10) / 100 * containerRect[oriented.size] - margins + 'px';\n                    }\n                }\n\n                bar.style[key] = val;\n            });\n        }\n    },\n\n    /**\n     * @readonly\n     * @name paging\n     * @summary Enable page up/dn clicks.\n     * @desc Set by the constructor. See the similarly named property in the {@link finbarOptions} object.\n     *\n     * If truthy, listen for clicks in page-up and page-down regions of scrollbar.\n     *\n     * If an object, call `.paging.up()` on page-up clicks and `.paging.down()` will be called on page-down clicks.\n     *\n     * Changing the truthiness of this value after instantiation currently has no effect.\n     * @type {boolean|object}\n     * @memberOf FinBar.prototype\n     */\n    paging: true,\n\n    /**\n     * @name range\n     * @summary Setter for the minimum and maximum scroll values.\n     * @desc Set by the constructor. These values are the limits for {@link FooBar#index|index}.\n     *\n     * The setter accepts an object with exactly two numeric properties: `.min` which must be less than `.max`. The values are extracted and the object is discarded.\n     *\n     * The getter returns a new object with `.min` and '.max`.\n     *\n     * @type {rangeType}\n     * @memberOf FinBar.prototype\n     */\n    set range(range) {\n        validRange(range);\n        this._min = range.min;\n        this._max = range.max;\n        this.contentSize = range.max - range.min + 1;\n        this.index = this.index; // re-clamp\n    },\n    get range() {\n        return {\n            min: this._min,\n            max: this._max\n        };\n    },\n\n    /**\n     * @summary Index value of the scrollbar.\n     * @desc This is the position of the scroll thumb.\n     *\n     * Setting this value clamps it to {@link FinBar#min|min}..{@link FinBar#max|max}, scroll the content, and moves thumb.\n     *\n     * Getting this value returns the current index. The returned value will be in the range `min`..`max`. It is intentionally not rounded.\n     *\n     * Use this value as an alternative to (or in addition to) using the {@link FinBar#onchange|onchange} callback function.\n     *\n     * @see {@link FinBar#_setScroll|_setScroll}\n     * @type {number}\n     * @memberOf FinBar.prototype\n     */\n    set index(idx) {\n        idx = Math.min(this._max, Math.max(this._min, idx)); // clamp it\n        this._setScroll(idx);\n        // this._setThumbSize();\n    },\n    get index() {\n        return this._index;\n    },\n\n    /**\n     * @private\n     * @summary Move the thumb.\n     * @desc Also displays the index value in the test panel and invokes the callback.\n     * @param idx - The new scroll index, a value in the range `min`..`max`.\n     * @param [scaled=f(idx)] - The new thumb position in pixels and scaled relative to the containing {@link FinBar#bar|bar} element, i.e., a proportional number in the range `0`..`thumbMax`. When omitted, a function of `idx` is used.\n     * @memberOf FinBar.prototype\n     */\n    _setScroll: function (idx, scaled) {\n        this._index = idx;\n\n        // Display the index value in the test panel\n        if (this.testPanelItem && this.testPanelItem.index instanceof Element) {\n            this.testPanelItem.index.innerHTML = Math.round(idx);\n        }\n\n        // Call the callback\n        if (this.onchange) {\n            this.onchange.call(this, Math.round(idx));\n        }\n\n        // Move the thumb\n        if (scaled === undefined) {\n            scaled = (idx - this._min) / (this._max - this._min) * this._thumbMax;\n        }\n        this.thumb.style[this.oh.leading] = scaled + 'px';\n    },\n\n    scrollRealContent: function (idx) {\n        var containerRect = this.content.parentElement.getBoundingClientRect(),\n            sizeProp = this.oh.size,\n            maxScroll = Math.max(0, this.content[sizeProp] - containerRect[sizeProp]),\n            //scroll = Math.min(idx, maxScroll);\n            scroll = (idx - this._min) / (this._max - this._min) * maxScroll;\n        //console.log('scroll: ' + scroll);\n        this.content.style[this.oh.leading] = -scroll + 'px';\n    },\n\n    /**\n     * @summary Recalculate thumb position.\n     *\n     * @desc This method recalculates the thumb size and position. Call it once after inserting your scrollbar into the DOM, and repeatedly while resizing the scrollbar (which typically happens when the scrollbar's parent is resized by user.\n     *\n     * > This function shifts args if first arg omitted.\n     *\n     * @param {number} [increment=this.increment] - Resets {@link FooBar#increment|increment} (see).\n     *\n     * @param {finbarStyles} [barStyles=this.barStyles] - (See type definition for details.) Scrollbar styles to be applied to the bar element.\n     *\n     * Only specify a `barStyles` object when you need to override stylesheet values. If provided, becomes the new default (`this.barStyles`), for use as a default on subsequent calls.\n     *\n     * It is generally the case that the scrollbar's new position is sufficiently described by the current styles. Therefore, it is unusual to need to provide a `barStyles` object on every call to `resize`.\n     *\n     * @returns {FinBar} Self for chaining.\n     * @memberOf FinBar.prototype\n     */\n    resize: function (increment, barStyles) {\n        var bar = this.bar;\n\n        if (!bar.parentNode) {\n            return; // not in DOM yet so nothing to do\n        }\n\n        var container = this.container || bar.parentElement,\n            containerRect = container.getBoundingClientRect();\n\n        // shift args if if 1st arg omitted\n        if (typeof increment === 'object') {\n            barStyles = increment;\n            increment = undefined;\n        }\n\n        this.style = this.barStyles = barStyles || this.barStyles;\n\n        // Bound to real content: Content was given but no onchange handler.\n        // Set up .onchange, .containerSize, and .increment.\n        // Note this only makes sense if your index unit is pixels.\n        if (this.content) {\n            if (!this.onchange) {\n                this.onchange = this.scrollRealContent;\n                this.contentSize = this.content[this.oh.size];\n                this._min = 0;\n                this._max = this.contentSize - 1;\n            }\n        }\n        if (this.onchange === this.scrollRealContent) {\n            this.containerSize = containerRect[this.oh.size];\n            this.increment = this.containerSize / (this.contentSize - this.containerSize) * (this._max - this._min);\n        } else {\n            this.containerSize = 1;\n            this.increment = increment || this.increment;\n        }\n\n        var index = this.index;\n        this.testPanelItem = this.testPanelItem || this._addTestPanelItem();\n        this._setThumbSize();\n        this.index = index;\n\n        if (this.deltaProp !== null) {\n            container.addEventListener('wheel', this._bound.onwheel);\n        }\n\n        return this;\n    },\n\n    /**\n     * @summary Shorten trailing end of scrollbar by thickness of some other scrollbar.\n     * @desc In the \"classical\" scenario where vertical scroll bar is on the right and horizontal scrollbar is on the bottom, you want to shorten the \"trailing end\" (bottom and right ends, respectively) of at least one of them so they don't overlay.\n     *\n     * This convenience function is an programmatic alternative to hardcoding the correct style with the correct value in your stylesheet; or setting the correct style with the correct value in the {@link FinBar#barStyles|barStyles} object.\n     *\n     * @see {@link FinBar#foreshortenBy|foreshortenBy}.\n     *\n     * @param {FinBar|null} otherFinBar - Other scrollbar to avoid by shortening this one; `null` removes the trailing space\n     * @returns {FinBar} For chaining\n     */\n    shortenBy: function (otherFinBar) { return this.shortenEndBy('trailing', otherFinBar); },\n\n    /**\n     * @summary Shorten leading end of scrollbar by thickness of some other scrollbar.\n     * @desc Supports non-classical scrollbar scenarios where vertical scroll bar may be on left and horizontal scrollbar may be on top, in which case you want to shorten the \"leading end\" rather than the trailing end.\n     * @see {@link FinBar#shortenBy|shortenBy}.\n     * @param {FinBar|null} otherFinBar - Other scrollbar to avoid by shortening this one; `null` removes the trailing space\n     * @returns {FinBar} For chaining\n     */\n    foreshortenBy: function (otherFinBar) { return this.shortenEndBy('leading', otherFinBar); },\n\n    /**\n     * @summary Generalized shortening function.\n     * @see {@link FinBar#shortenBy|shortenBy}.\n     * @see {@link FinBar#foreshortenBy|foreshortenBy}.\n     * @param {string} whichEnd - a CSS style property name or an orientation hash name that translates to a CSS style property name.\n     * @param {FinBar|null} otherFinBar - Other scrollbar to avoid by shortening this one; `null` removes the trailing space\n     * @returns {FinBar} For chaining\n     */\n    shortenEndBy: function (whichEnd, otherFinBar) {\n        if (!otherFinBar) {\n            delete this._auxStyles;\n        } else if (otherFinBar instanceof FinBar && otherFinBar.orientation !== this.orientation) {\n            var otherStyle = window.getComputedStyle(otherFinBar.bar),\n                ooh = orientationHashes[otherFinBar.orientation];\n            this._auxStyles = {};\n            this._auxStyles[whichEnd] = otherStyle[ooh.thickness];\n        }\n        return this; // for chaining\n    },\n\n    /**\n     * @private\n     * @summary Sets the proportional thumb size and hides thumb when 100%.\n     * @desc The thumb size has an absolute minimum of 20 (pixels).\n     * @memberOf FinBar.prototype\n     */\n    _setThumbSize: function () {\n        var oh = this.oh,\n            thumbComp = window.getComputedStyle(this.thumb),\n            thumbMarginLeading = parseInt(thumbComp[oh.marginLeading]),\n            thumbMarginTrailing = parseInt(thumbComp[oh.marginTrailing]),\n            thumbMargins = thumbMarginLeading + thumbMarginTrailing,\n            barSize = this.bar.getBoundingClientRect()[oh.size],\n            thumbSize = Math.max(20, barSize * this.containerSize / this.contentSize);\n\n        if (this.containerSize < this.contentSize) {\n            this.bar.style.visibility = 'visible';\n            this.thumb.style[oh.size] = thumbSize + 'px';\n        } else {\n            this.bar.style.visibility = 'hidden';\n        }\n\n        /**\n         * @private\n         * @name _thumbMax\n         * @summary Maximum offset of thumb's leading edge.\n         * @desc This is the pixel offset within the scrollbar of the thumb when it is at its maximum position at the extreme end of its range.\n         *\n         * This value takes into account the newly calculated size of the thumb element (including its margins) and the inner size of the scrollbar (the thumb's containing element, including _its_ margins).\n         *\n         * NOTE: Scrollbar padding is not taken into account and assumed to be 0 in the current implementation and is assumed to be `0`; use thumb margins in place of scrollbar padding.\n         * @type {number}\n         * @memberOf FinBar.prototype\n         */\n        this._thumbMax = barSize - thumbSize - thumbMargins;\n\n        this._thumbMarginLeading = thumbMarginLeading; // used in mousedown\n    },\n\n    /**\n     * @summary Remove the scrollbar.\n     * @desc Unhooks all the event handlers and then removes the element from the DOM. Always call this method prior to disposing of the scrollbar object.\n     * @memberOf FinBar.prototype\n     */\n    remove: function () {\n        this.bar.onmousedown = null;\n        this._removeEvt('mousemove');\n        this._removeEvt('mouseup');\n\n        (this.container || this.bar.parentElement)._removeEvt('wheel');\n\n        this.bar.onclick =\n            this.thumb.onclick =\n                this.thumb.onmouseover =\n                    this.thumb.transitionend =\n                        this.thumb.onmouseout = null;\n\n        this.bar.remove();\n    },\n\n    /**\n     * @private\n     * @function _addTestPanelItem\n     * @summary Append a test panel element.\n     * @desc If there is a test panel in the DOM (typically an `<ol>...</ol>` element) with class names of both `this.classPrefix` and `'test-panel'` (or, barring that, any element with class name `'test-panel'`), an `<li>...</li>` element will be created and appended to it. This new element will contain a span for each class name given.\n     *\n     * You should define a CSS selector `.listening` for these spans. This class will be added to the spans to alter their appearance when a listener is added with that class name (prefixed with 'on').\n     *\n     * (This is an internal function that is called once by the constructor on every instantiation.)\n     * @returns {Element|undefined} The appended `<li>...</li>` element or `undefined` if there is no test panel.\n     * @memberOf FinBar.prototype\n     */\n    _addTestPanelItem: function () {\n        var testPanelItem,\n            testPanelElement = document.querySelector('.' + this._classPrefix + '.test-panel') || document.querySelector('.test-panel');\n\n        if (testPanelElement) {\n            var testPanelItemPartNames = [ 'mousedown', 'mousemove', 'mouseup', 'index' ],\n                item = document.createElement('li');\n\n            testPanelItemPartNames.forEach(function (partName) {\n                item.innerHTML += '<span class=\"' + partName + '\">' + partName.replace('mouse', '') + '</span>';\n            });\n\n            testPanelElement.appendChild(item);\n\n            testPanelItem = {};\n            testPanelItemPartNames.forEach(function (partName) {\n                testPanelItem[partName] = item.getElementsByClassName(partName)[0];\n            });\n        }\n\n        return testPanelItem;\n    },\n\n    _addEvt: function (evtName) {\n        var spy = this.testPanelItem && this.testPanelItem[evtName];\n        if (spy) { spy.classList.add('listening'); }\n        window.addEventListener(evtName, this._bound['on' + evtName]);\n    },\n\n    _removeEvt: function (evtName) {\n        var spy = this.testPanelItem && this.testPanelItem[evtName];\n        if (spy) { spy.classList.remove('listening'); }\n        window.removeEventListener(evtName, this._bound['on' + evtName]);\n    }\n};\n\nfunction extend(obj) {\n    for (var i = 1; i < arguments.length; ++i) {\n        var objn = arguments[i];\n        if (objn) {\n            for (var key in objn) {\n                obj[key] = objn[key];\n            }\n        }\n    }\n    return obj;\n}\n\nfunction validRange(range) {\n    var keys = Object.keys(range),\n        valid =  keys.length === 2 &&\n            typeof range.min === 'number' &&\n            typeof range.max === 'number' &&\n            range.min <= range.max;\n\n    if (!valid) {\n        error('Invalid .range object.');\n    }\n}\n\n/**\n * @private\n * @name handlersToBeBound\n * @type {object}\n * @desc The functions defined in this object are all DOM event handlers that are bound by the FinBar constructor to each new instance. In other words, the `this` value of these handlers, once bound, refer to the FinBar object and not to the event emitter. \"Do not consume raw.\"\n */\nvar handlersToBeBound = {\n    shortStop: function (evt) {\n        evt.stopPropagation();\n    },\n\n    onwheel: function (evt) {\n        this.index += evt[this.deltaProp] * this[this.deltaProp + 'Factor'] * this.normal;\n        evt.stopPropagation();\n        evt.preventDefault();\n    },\n\n    onclick: function (evt) {\n        var thumbBox = this.thumb.getBoundingClientRect(),\n            goingUp = evt[this.oh.coordinate] < thumbBox[this.oh.leading];\n\n        if (typeof this.paging === 'object') {\n            this.index = this.paging[goingUp ? 'up' : 'down'](Math.round(this.index));\n        } else {\n            this.index += goingUp ? -this.increment : this.increment;\n        }\n\n        // make the thumb glow momentarily\n        this.thumb.classList.add('hover');\n        var self = this;\n        this.thumb.addEventListener('transitionend', function waitForIt() {\n            this.removeEventListener('transitionend', waitForIt);\n            self._bound.onmouseup(evt);\n        });\n\n        evt.stopPropagation();\n    },\n\n    onmouseover: function () {\n        this.thumb.classList.add('hover');\n    },\n\n    onmouseout: function () {\n        if (!this.dragging) {\n            this.thumb.classList.remove('hover');\n        }\n    },\n\n    onmousedown: function (evt) {\n        var thumbBox = this.thumb.getBoundingClientRect();\n        this.pinOffset = evt[this.oh.axis] - thumbBox[this.oh.leading] + this.bar.getBoundingClientRect()[this.oh.leading] + this._thumbMarginLeading;\n        document.documentElement.style.cursor = 'default';\n\n        this.dragging = true;\n\n        this._addEvt('mousemove');\n        this._addEvt('mouseup');\n\n        evt.stopPropagation();\n        evt.preventDefault();\n    },\n\n    onmousemove: function (evt) {\n        if (!(evt.buttons & 1)) {\n            // mouse button may have been released without `onmouseup` triggering (see\n            window.dispatchEvent(new MouseEvent('mouseup', evt));\n            return;\n        }\n\n        var scaled = Math.min(this._thumbMax, Math.max(0, evt[this.oh.axis] - this.pinOffset));\n        var idx = scaled / this._thumbMax * (this._max - this._min) + this._min;\n\n        this._setScroll(idx, scaled);\n\n        evt.stopPropagation();\n        evt.preventDefault();\n    },\n\n    onmouseup: function (evt) {\n        this._removeEvt('mousemove');\n        this._removeEvt('mouseup');\n\n        this.dragging = false;\n\n        document.documentElement.style.cursor = 'auto';\n\n        var thumbBox = this.thumb.getBoundingClientRect();\n        if (\n            thumbBox.left <= evt.clientX && evt.clientX <= thumbBox.right &&\n            thumbBox.top <= evt.clientY && evt.clientY <= thumbBox.bottom\n        ) {\n            this._bound.onmouseover(evt);\n        } else {\n            this._bound.onmouseout(evt);\n        }\n\n        evt.stopPropagation();\n        evt.preventDefault();\n    }\n};\n\n/**\n * Table of wheel normals to webkit.\n *\n * This object is a dictionary of platform dictionaries, keyed by:\n * * `mac`  macOS\n * * `win`  Window\n *\n * Each platform dictionary is keyed by:\n * * `webkit`  Chrome, Opera, Safari\n * * `moz`  Firefox\n * * `ms`  IE 11 _(Windows only)_\n * * `edge`  Edge _(Windows only)_\n *\n * @todo add `linux` platform\n * @type {object}\n */\nFinBar.normals = {\n    mac: {\n        webkit: 1.0,\n        moz: 35\n    },\n    win: {\n        webkit: 2.6,\n        moz: 85,\n        ms: 2.9,\n        edge: 2\n    }\n};\n\nfunction getNormal() {\n    var nav = window.navigator, ua = nav.userAgent;\n    var platform = nav.platform.substr(0, 3).toLowerCase();\n    var browser = /Edge/.test(ua) ? 'edge' :\n        /Opera|OPR|Chrome|Safari/.test(ua) ? 'webkit' :\n            /Firefox/.test(ua) ? 'moz' :\n                document.documentMode ? 'ms' : // internet explorer\n                    undefined;\n    var platformDictionary = FinBar.normals[platform] || {};\n    return platformDictionary[browser];\n}\n\nvar orientationHashes = {\n    vertical: {\n        coordinate:     'clientY',\n        axis:           'pageY',\n        size:           'height',\n        outside:        'right',\n        inside:         'left',\n        leading:        'top',\n        trailing:       'bottom',\n        marginLeading:  'marginTop',\n        marginTrailing: 'marginBottom',\n        thickness:      'width',\n        delta:          'deltaY'\n    },\n    horizontal: {\n        coordinate:     'clientX',\n        axis:           'pageX',\n        size:           'width',\n        outside:        'bottom',\n        inside:         'top',\n        leading:        'left',\n        trailing:       'right',\n        marginLeading:  'marginLeft',\n        marginTrailing: 'marginRight',\n        thickness:      'height',\n        delta:          'deltaX'\n    }\n};\n\nvar axis = {\n    top:    'vertical',\n    bottom: 'vertical',\n    height: 'vertical',\n    left:   'horizontal',\n    right:  'horizontal',\n    width:  'horizontal'\n};\n\nvar cssFinBars; // definition inserted by gulpfile between following comments\n/* inject:css */\ncssFinBars = 'div.finbar-horizontal,div.finbar-vertical{margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}';\n/* endinject */\n\nfunction error(msg) {\n    throw 'finbars: ' + msg;\n}\n\n// Interface\nmodule.exports = FinBar;\n","'use strict';\n\n// This file creates the Hypergrid theme registry, exposed via:\n// shared methods `Hypergrid.registerTheme` and `Hypergrid.applyTheme`\n// and instance methods `myGrid.applyTheme`.\n// The initial registry consists of a single theme ('default').\n// Application developers can add additional themes to this registry.\n\nvar _ = require('object-iterators'); // fyi: installs the Array.prototype.find polyfill, as needed\n\nvar defaults = require('../defaults');\nvar dynamicPropertyDescriptors = require('../lib/dynamicProperties');\nvar HypergridError = require('../lib/error');\nvar images = require('../../images');\n\nvar styles = [\n    'BackgroundColor',\n    'Color',\n    'Font'\n];\n\nvar stylesWithHalign = styles.concat([\n    'Halign'\n]);\n\nvar dataCellStyles = stylesWithHalign.concat([\n    'cellPadding',\n    'iconPadding'\n]);\n\nvar stylers = [\n    { prefix: '',                                props: dataCellStyles },\n    { prefix: 'foregroundSelection',             props: styles },\n    { prefix: 'columnHeader',                    props: stylesWithHalign },\n    { prefix: 'columnHeaderForegroundSelection', props: styles },\n    { prefix: 'rowHeader',                       props: styles },\n    { prefix: 'rowHeaderForegroundSelection',    props: styles }\n];\n\nvar dynamicCosmetics = {\n    rowHeaderCheckboxes: defaults.rowHeaderCheckboxes,\n    rowHeaderNumbers: defaults.rowHeaderNumbers,\n    gridBorder: defaults.gridBorder,\n    gridBorderTop: defaults.gridBorderTop,\n    gridBorderRight: defaults.gridBorderRight,\n    gridBorderBottom: defaults.gridBorderBottom,\n    gridBorderLeft: defaults.gridBorderLeft,\n    gridRenderer: defaults.gridRenderer\n};\n\n// Create the `defaultTheme` theme by copying over the theme props,\n// which is a subset of all the props defined in defaults.js, beginning with\n// they dynamic cosmetics and `themeName`...\nvar defaultTheme = Object.assign({}, dynamicCosmetics, {\n    themeName: defaults.themeName\n});\n\n// ...and then adding non-dynamic cosmetics into `defaultTheme`, by combining the above\n// prefixes with their styles to get prop names and then copy those props from `defaults`.\nstylers.reduce(function(theme, styler) {\n    return styler.props.reduce(function(theme, prop) {\n        prop = styler.prefix + prop;\n        prop = prop.replace('ForegroundSelectionBackground', 'BackgroundSelection'); // unfortunate!\n        prop = prop[0].toLowerCase() + prop.substr(1);\n        theme[prop] = defaults[prop];\n        return theme;\n    }, theme);\n}, defaultTheme);\n\n/**\n * @summary The Hypergrid theme registry.\n * @desc The standard registry consists of a single theme, `default`, built from values in defaults.js.\n */\nvar registry = Object.create(null, {\n    default: { value: defaultTheme }\n});\n\nfunction applyTheme(theme) {\n    var themeLayer, grids, props, themeObject;\n\n    if (theme && typeof theme === 'object' && !Object.getOwnPropertyNames(theme).length) {\n        theme = null;\n    }\n\n    if (this._theme) {\n        grids = [this];\n        themeLayer = this._theme;\n        props = this.properties;\n\n        // If removing theme, reset props to defaults\n        if (!theme) {\n            // Delete (non-dynamic) grid props named in this theme, revealing defaults\n            Object.keys(themeLayer).forEach(function(key) {\n                if (!(key in dynamicPropertyDescriptors)) {\n                    delete props[key];\n                }\n            });\n\n            // Reset dynamic cosmetic props to defaults\n            Object.keys(dynamicCosmetics).forEach(function(key) {\n                props.var[key] = defaults[key];\n            });\n        }\n\n        // Delete all own props from this grid instance's theme layer (defined by an eariler call)\n        Object.keys(themeLayer).forEach(function(key) {\n            delete themeLayer[key];\n        });\n    } else {\n        grids = this.grids;\n        themeLayer = defaults; // global theme layer\n        theme = theme || 'default';\n    }\n\n    if (typeof theme === 'object') {\n        themeObject = theme;\n    } else if (!registry[theme]) {\n        throw new HypergridError('Unknown theme \"' + theme + '\"');\n    } else {\n        themeObject = registry[theme];\n    }\n\n    if (themeObject) {\n        // When no theme name, set it to explicit `undefined` (to mask defaults.themeName).\n        if (!themeObject.themeName) {\n            themeObject.themeName = undefined;\n        }\n\n        Object.keys(themeObject).forEach(function(key) {\n            if (key in dynamicPropertyDescriptors) {\n                if (key in dynamicCosmetics) {\n                    grids.forEach(function(grid) {\n                        grid.properties[key] = themeObject[key];\n                    });\n                } else {\n                    // Dynamic properties are defined on properties layer; defining these\n                    // r-values on the theme layer is ineffective so let's not allow it.\n                    switch (key) {\n                        case 'lineColor':\n                            themeObject.gridLinesHColor = themeObject.gridLinesVColor = themeObject[key];\n                            break;\n                        default:\n                            console.warn('Ignoring unexpected dynamic property ' + key + ' from theme object.');\n                    }\n                    // delete themeObject[key];\n                }\n            }\n        });\n\n        // No .assign() because themeName is read-only in defaults layer\n        Object.defineProperties(themeLayer, Object.getOwnPropertyDescriptors(themeObject));\n    }\n\n    grids.forEach(function(grid) {\n        grid.repaint();\n    });\n\n    return themeObject;\n}\n\n\n/**\n * @summary Instance theme support.\n * @desc Additions to `Hypergrid.prototype` for setting an instance theme.\n *\n * All members are documented on the {@link Hypergrid} page.\n * @mixin themes.mixin\n */\nvar mixin = {\n    initThemeLayer: function() {\n        /**\n         * Descends from {@link module:defaults|defaults}.\n         * @memberOf Hypergrid#\n         * @private\n         */\n        this._theme = Object.create(defaults);\n\n        return Object.create(this._theme, dynamicPropertyDescriptors);\n    },\n\n    /**\n     * @summary Apply a grid theme.\n     * @desc Apply props from the given theme object to the grid instance,\n     * the instance's `myGrid.themeLayer` layer in the properties hierarchy.\n     * @this {Hypergrid}\n     * @param {object|string} [theme] - One of:\n     * * **string:** A registered theme name.\n     * * **object:** An anonymous (unregistered) theme object. Empty object removes grid theme, exposing global theme.\n     * * _falsy value:_ Also removes grid theme (like empty object).\n     * @param {string|undefined} [theme.themeName=undefined]\n     * @memberOf Hypergrid#\n     */\n    applyTheme: applyTheme,\n\n    /**\n     * @summary Get currently active theme.\n     * @desc May return a theme name or a theme object.\n     * @returns {string|undefined|object} One of:\n     * * **string:** Theme name (registered theme).\n     * * **object:** Theme object (unregistered anonymous theme).\n     * * **undefined:** No theme (i.e., the default theme).\n     * @memberOf Hypergrid#\n     */\n    getTheme: function() {\n        var themeLayer = this._theme,\n            themeName = themeLayer.themeName;\n        return themeName === 'default' || !Object.getOwnPropertyNames(themeLayer).length\n            ? undefined // default theme or no theme\n            : themeName in registry\n                ? themeName // registered theme name\n                : themeLayer; // unregistered theme object\n    }\n};\nObject.defineProperty(mixin, 'theme', {\n    enumerable: true,\n    set: applyTheme,\n    get: mixin.getTheme\n});\n\n\n/**\n * @summary Theme registration and global theme support.\n * @desc Shared properties of `Hypergrid` \"class\" (_i.e.,_ \"static\" properties of constructor function) for registering themes and setting a global theme.\n *\n * All members are documented on the {@link Hypergrid} page (annotated as \"(static)\").\n * @mixin themes.sharedMixin\n */\nvar sharedMixin = {\n    /**\n     * @param {string} [name] - A registry name for the new theme. May be omitted if the theme has an embedded name (in `theme.themeName`).\n     * _If omitted, the 2nd parameter (`theme`) is promoted to first position._\n     * @param {HypergridThemeObject} [theme]\n     * To build a Hypergrid theme object from a loaded {@link https://polymerthemes.com Polymer Theme} CSS stylesheet:\n     * ```javascript\n     * var myTheme = require('fin-hypergrid-themes').buildTheme();\n     * ```\n     * If omitted, unregister the theme named in the first parameter.\n     *\n     * Grid instances that have previously applied the named theme are unaffected by this action (whether re-registering or unregistering).\n     * @memberOf Hypergrid.\n     */\n    registerTheme: function(name, theme) {\n        if (typeof name === 'object') {\n            theme = name;\n            name = theme.themeName;\n        }\n\n        if (!name) {\n            throw new HypergridError('Cannot register an anonymous theme.');\n        }\n\n        if (name === 'default') {\n            throw new HypergridError('Cannot register or unregister the \"default\" theme.');\n        }\n\n        if (theme) {\n            theme.themeName = name;\n            registry[name] = theme;\n        } else {\n            delete registry[name];\n        }\n    },\n\n    /**\n     * App developers are free to add in additional themes, such as those in {@link https://github.com/fin-hypergrid/themes/tree/master/js}:\n     * ```javascript\n     * Hypergrind.registerThemes(require('fin-hypergrid-themes'));\n     * ```\n     * @param {object} themeCollection\n     * @memberOf Hypergrid.\n     */\n    registerThemes: function(themeCollection) {\n        if (themeCollection) {\n            _(themeCollection).each(function(theme, name) {\n                this.registerTheme(name, theme);\n            }, this);\n        } else {\n            Object.keys(registry).forEach(function(themeName) {\n                this.registerTheme(themeName);\n            }, this);\n        }\n    },\n\n    /**\n     * @summary Apply global theme.\n     * @desc Apply props from the given theme object to the global theme object,\n     * the `defaults` layer at the bottom of the properties hierarchy.\n     * @param {object|string} [theme=registry.default] - One of:\n     * * **string:** A registered theme name.\n     * * **object:** A theme object. Empty object removes global them, restoring defaults.\n     * * _falsy value:_ Also restores defaults.\n     * @param {string|undefined} [theme.themeName=undefined]\n     * @memberOf Hypergrid.\n     */\n    applyTheme: function(theme) {\n        var themeObject = applyTheme.call(this, theme);\n        images.setTheme(themeObject);\n    }\n};\nObject.defineProperty(sharedMixin, 'theme', { // global theme setter/getter\n    enumerable: true,\n    set: sharedMixin.applyTheme,\n    get: function() { return defaults; } // the defaults layer *is* the global theme layer\n});\n\n\nmodule.exports = {\n    mixin: mixin,\n    sharedMixin: sharedMixin\n};\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"faux-hypergrid/src/lib/Canvas\"), require(\"@finos/perspective-viewer/dist/esm/custom_styles\"), require(\"faux-hypergrid/src/cellEditors/Textfield\"), require(\"core-js/modules/web.dom-collections.iterator\"), require(\"faux-hypergrid/src/behaviors/Behavior\"), require(\"lodash/isEqual\"), require(\"faux-hypergrid/src/cellRenderers\"), require(\"@finos/perspective-viewer/dist/esm/utils.js\"), require(\"lodash/cloneDeep\"), require(\"@finos/perspective/dist/esm/config\"), require(\"faux-hypergrid\"), require(\"faux-hypergrid/src/Base\"), require(\"fin-hypergrid-grouped-header-plugin\"), require(\"rectangular\"), require(\"superscript-number\"), require(\"@finos/perspective/dist/esm/config/index.js\"), require(\"datasaur-local\"), require(\"core-js/modules/es.string.replace\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"faux-hypergrid/src/lib/Canvas\", \"@finos/perspective-viewer/dist/esm/custom_styles\", \"faux-hypergrid/src/cellEditors/Textfield\", \"core-js/modules/web.dom-collections.iterator\", \"faux-hypergrid/src/behaviors/Behavior\", \"lodash/isEqual\", \"faux-hypergrid/src/cellRenderers\", \"@finos/perspective-viewer/dist/esm/utils.js\", \"lodash/cloneDeep\", \"@finos/perspective/dist/esm/config\", \"faux-hypergrid\", \"faux-hypergrid/src/Base\", \"fin-hypergrid-grouped-header-plugin\", \"rectangular\", \"superscript-number\", \"@finos/perspective/dist/esm/config/index.js\", \"datasaur-local\", \"core-js/modules/es.string.replace\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"perspective-viewer-hypergrid\"] = factory(require(\"faux-hypergrid/src/lib/Canvas\"), require(\"@finos/perspective-viewer/dist/esm/custom_styles\"), require(\"faux-hypergrid/src/cellEditors/Textfield\"), require(\"core-js/modules/web.dom-collections.iterator\"), require(\"faux-hypergrid/src/behaviors/Behavior\"), require(\"lodash/isEqual\"), require(\"faux-hypergrid/src/cellRenderers\"), require(\"@finos/perspective-viewer/dist/esm/utils.js\"), require(\"lodash/cloneDeep\"), require(\"@finos/perspective/dist/esm/config\"), require(\"faux-hypergrid\"), require(\"faux-hypergrid/src/Base\"), require(\"fin-hypergrid-grouped-header-plugin\"), require(\"rectangular\"), require(\"superscript-number\"), require(\"@finos/perspective/dist/esm/config/index.js\"), require(\"datasaur-local\"), require(\"core-js/modules/es.string.replace\"));\n\telse\n\t\troot[\"perspective-viewer-hypergrid\"] = factory(root[\"faux-hypergrid/src/lib/Canvas\"], root[\"@finos/perspective-viewer/dist/esm/custom_styles\"], root[\"faux-hypergrid/src/cellEditors/Textfield\"], root[\"core-js/modules/web.dom-collections.iterator\"], root[\"faux-hypergrid/src/behaviors/Behavior\"], root[\"lodash/isEqual\"], root[\"faux-hypergrid/src/cellRenderers\"], root[\"@finos/perspective-viewer/dist/esm/utils.js\"], root[\"lodash/cloneDeep\"], root[\"@finos/perspective/dist/esm/config\"], root[\"faux-hypergrid\"], root[\"faux-hypergrid/src/Base\"], root[\"fin-hypergrid-grouped-header-plugin\"], root[\"rectangular\"], root[\"superscript-number\"], root[\"@finos/perspective/dist/esm/config/index.js\"], root[\"datasaur-local\"], root[\"core-js/modules/es.string.replace\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__10__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__13__, __WEBPACK_EXTERNAL_MODULE__14__, __WEBPACK_EXTERNAL_MODULE__15__, __WEBPACK_EXTERNAL_MODULE__16__, __WEBPACK_EXTERNAL_MODULE__20__, __WEBPACK_EXTERNAL_MODULE__22__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nconst COLUMN_SEPARATOR_STRING = \"|\";\n\nconst TREE_COLUMN_INDEX = require(\"faux-hypergrid/src/behaviors/Behavior\").prototype.treeColumnIndex;\n\nfunction page2hypergrid(data, row_pivots, columns) {\n    const data_columns = Object.keys(data);\n    const firstcol = data_columns.length > 0 ? data_columns[0] : undefined;\n    if (typeof firstcol === \"undefined\") {\n        return [];\n    }\n\n    const is_tree = !!row_pivots.length;\n    const flat_columns = row_pivots.length ? columns.filter(x => x !== \"__ROW_PATH__\") : columns;\n    const data_indices = data_columns.map(x => flat_columns.indexOf(x));\n    const rows = [];\n\n    for (let ridx = 0; ridx < data[firstcol].length; ridx++) {\n        const dataRow = {};\n\n        for (const cidx in data_columns) {\n            const columnName = data_columns[cidx];\n            dataRow[data_indices[cidx]] = data[columnName][ridx];\n        }\n\n        if (is_tree) {\n            if (data[\"__ROW_PATH__\"][ridx] === undefined) {\n                data[\"__ROW_PATH__\"][ridx] = [];\n            }\n\n            let name = data[\"__ROW_PATH__\"][ridx][data[\"__ROW_PATH__\"][ridx].length - 1];\n            if (name === undefined && ridx === 0) {\n                name = \"TOTAL\";\n            }\n\n            dataRow[TREE_COLUMN_INDEX] = {\n                rollup: name,\n                rowPath: [\"ROOT\"].concat(data[\"__ROW_PATH__\"][ridx]),\n                isLeaf: data[\"__ROW_PATH__\"][ridx].length >= row_pivots.length\n            };\n        }\n\n        if (data.__ID__) {\n            dataRow[\"__ID__\"] = data[\"__ID__\"][ridx].join(\"|\");\n        }\n\n        if (data.__INDEX__) {\n            dataRow[\"__INDEX__\"] = data[\"__INDEX__\"][ridx][0];\n        }\n\n        rows.push(dataRow);\n    }\n\n    return rows;\n}\n\nfunction psp2hypergrid(data, schema, tschema, row_pivots, columns) {\n    const flat_columns = row_pivots.length ? columns.filter(x => x !== \"__ROW_PATH__\") : columns;\n    const columnPaths = flat_columns.map(row => row.split(COLUMN_SEPARATOR_STRING));\n    const is_tree = !!row_pivots.length;\n    const rows = page2hypergrid(data, row_pivots, columns);\n\n    return {\n        rows: rows,\n        isTree: is_tree,\n        configuration: {},\n        rowPivots: row_pivots,\n        columnPaths: (is_tree ? [[\" \"]] : []).concat(columnPaths),\n        columnTypes: (is_tree ? [row_pivots.map(x => tschema[x])] : []).concat(columnPaths.map(col => schema[col[col.length - 1]]))\n    };\n}\n\nmodule.exports = {psp2hypergrid, page2hypergrid};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","module.exports = __WEBPACK_EXTERNAL_MODULE__14__;","module.exports = __WEBPACK_EXTERNAL_MODULE__15__;","module.exports = __WEBPACK_EXTERNAL_MODULE__16__;","module.exports = \"<!--\\n   \\n   Copyright (c) 2017, the Perspective Authors.\\n   \\n   This file is part of the Perspective library, distributed under the terms of\\n   the Apache License 2.0.  The full license can be found in the LICENSE file.\\n\\n-->\\n\\n<template id='perspective-hypergrid'>\\n    <div id='gridWrapper'>\\n        <div id='mainGrid'></div>\\n    </div>\\n</template>\";","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{position:absolute;outline:0;top:0;left:0;bottom:0;right:0}:host table{font:12px \\\"Open Sans\\\",helvetica,sans-serif}:host td.hover{background-color:#eee}:host tr.hover{background-color:#f6f6f6}:host td.positive{color:#1078d1}:host td.negative{color:#de3838}:host input.hypergrid-textfield{position:absolute;outline:0;border:1px solid var(--hypergrid-editor--border-color,rgba(0,0,0,.4));color:var(--hypergrid--color,inherit);background:var(--hypergrid--background,#fff);box-sizing:border-box;padding:0 4px 3px 5px}:host #gridWrapper{box-sizing:border-box;width:100%;height:100%;margin:0;padding:var(--hypergrid--padding,0)}:host #mainGrid{position:relative;width:100%;height:100%;margin:0;padding:0}:host #mainGrid>div{position:absolute;width:100%;height:100%;overflow:hidden}:host #mainGrid input{margin:0}:host div.finbar-vertical{margin:0!important;width:15px!important;box-shadow:0 0 0 #000,0 0 0 #000,0 0 0 #000}:host div.finbar-vertical div.thumb{width:var(--hypergrid-scrollbar--width,13px);right:-1px;background-color:#9e9e9e;box-shadow:0 0 0 #000,0 0 0 #000,0 0 0 #000;margin:0!important;border-radius:var(--hypergrid-scrollbar--border-radius,0)}:host div.finbar-horizontal{margin:0!important;height:15px!important;box-shadow:0 0 0 #000,0 0 0 #000,0 0 0 #000}:host div.finbar-horizontal div.thumb{margin:-3px 2px;height:var(--hypergrid-scrollbar--width,13px);bottom:4px;background-color:#9e9e9e;box-shadow:0 0 0 #000,0 0 0 #000,0 0 0 #000;border-radius:var(--hypergrid-scrollbar--border-radius,0)}\", \"\"]);\n\n// exports\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {get_type_config, get_types} from \"@finos/perspective/dist/esm/config\";\n\nfunction null_formatter(formatter, null_value = \"\") {\n    let old = formatter.format.bind(formatter);\n    formatter.format = val => {\n        if (typeof val === \"string\") {\n            return val;\n        }\n        if (null_value === val) {\n            return \"-\";\n        }\n        let x = old(val);\n        if (x === \"\") {\n            return \"-\";\n        }\n        return x;\n    };\n\n    return formatter;\n}\n\nfunction custom_formatter(formatter, f) {\n    let old = formatter.format.bind(formatter);\n    formatter.format = val => {\n        val = f(old(val));\n        if (!val) {\n            return \"-\";\n        }\n        return val;\n    };\n\n    return formatter;\n}\n\nexport function set_formatters(grid) {\n    const formatters = {};\n    for (const type of get_types()) {\n        const config = get_type_config(type);\n        const format_function = {\n            float: grid.localization.NumberFormatter,\n            integer: grid.localization.NumberFormatter,\n            datetime: grid.localization.DateFormatter,\n            date: grid.localization.DateFormatter\n        }[config.type || type];\n        if (format_function) {\n            if (typeof config.format === \"string\") {\n                formatters[type] = custom_formatter(new format_function(\"en-us\"), eval(config.format));\n            } else {\n                formatters[type] = null_formatter(new format_function(\"en-us\", config.format), config.null_value);\n            }\n            grid.localization.add(`perspective-${type}`, formatters[type]);\n        }\n    }\n\n    grid.localization.header = {\n        format: value => grid.behavior.formatColumnHeader(value)\n    };\n\n    grid.localization.add(\"FinanceTree\", {\n        format: function(val, type) {\n            const f = formatters[type];\n            if (f) {\n                return f.format(val);\n            }\n            return val;\n        },\n        parse: x => x\n    });\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport rectangular from \"rectangular\";\nimport superscript from \"superscript-number\";\nimport isEqual from \"lodash/isEqual\";\n\nimport cellRenderersRegistry from \"faux-hypergrid/src/cellRenderers\";\n\nvar Borders = cellRenderersRegistry.BaseClass.extend(\"Borders\", {\n    paint: function(gc, config) {\n        var bounds = config.bounds,\n            x = bounds.x,\n            y = bounds.y,\n            w = bounds.width,\n            h = bounds.height - 1;\n        var color;\n\n        gc.save();\n        gc.translate(-0.5, 0.5); // paint \"sharp\" lines on pixels instead of \"blurry\" lines between pixels\n        gc.cache.lineWidth = 1;\n\n        color = config.borderTop;\n        if (color) {\n            gc.beginPath();\n            gc.moveTo(x, y);\n            gc.lineTo(x + w, y);\n            gc.cache.strokeStyle = color;\n            gc.stroke();\n        }\n\n        color = config.borderRight;\n        if (color) {\n            gc.beginPath();\n            gc.moveTo(x + w, y);\n            gc.lineTo(x + w, y + h);\n            gc.cache.strokeStyle = color;\n            gc.stroke();\n        }\n\n        color = config.borderBottom;\n        if (color) {\n            gc.beginPath();\n            gc.moveTo(x, y + h);\n            gc.lineTo(x + w, y + h);\n            gc.cache.strokeStyle = color;\n            gc.stroke();\n        }\n\n        color = config.borderLeft;\n        if (color) {\n            gc.beginPath();\n            gc.moveTo(x, y);\n            gc.lineTo(x, y + h);\n            gc.cache.strokeStyle = color;\n            gc.stroke();\n        }\n\n        gc.restore();\n    }\n});\n\ncellRenderersRegistry.add(Borders);\n\n/**\n * @this {Behavior}\n * @param payload\n */\nfunction setPSP(payload, force = false) {\n    const new_schema = [];\n\n    if (payload.isTree) {\n        new_schema[this.treeColumnIndex] = {\n            name: this.treeColumnIndex.toString(),\n            header: \" \" // space char because empty string defaults to `name`\n        };\n    }\n\n    payload.columnPaths.forEach(function(columnPath, columnIndex) {\n        const col_name = columnPath.join(\"|\"),\n            aliases = payload.configuration.columnAliases,\n            header = (aliases && aliases[col_name]) || col_name,\n            name = columnIndex.toString(),\n            type = payload.columnTypes[columnIndex];\n\n        if (payload.isTree && columnIndex === 0) {\n            new_schema[-1] = {name, header, type};\n        } else {\n            new_schema.push({name, header, type, index: columnIndex - (payload.isTree ? 1 : 0)});\n        }\n    });\n\n    this.grid.properties.showTreeColumn = payload.isTree;\n\n    const config = this.grid.behavior.dataModel._config;\n    const column_only = config.row_pivots.length === 0 && config.column_pivots.length > 0;\n    const selectable = !column_only && this.grid.behavior.dataModel._viewer.hasAttribute(\"selectable\");\n    this.grid.addProperties(this.grid.get_dynamic_styles(selectable));\n\n    // Following call to setData signals the grid to call createColumns and\n    // dispatch the fin-hypergrid-schema-loaded event (in that order). Here we\n    // inject a createColumns override into `this` (behavior instance) to\n    // complete the setup before the event is dispatched.\n    this.createColumns = createColumns;\n    this.refreshColumns = refreshColumns;\n\n    if (\n        !force &&\n        this._memoized_schema &&\n        isEqual(this._memoized_schema.slice(0, this._memoized_schema.length), new_schema.slice(0, new_schema.length)) &&\n        isEqual(payload.rowPivots, this._memoized_pivots)\n    ) {\n        this.grid.sbVScroller.index = 0;\n        this.grid.behavior.dataModel.data = payload.rows;\n        this.grid.behavior.dataModel._data_window = undefined;\n    } else {\n        this.grid.sbVScroller.index = 0;\n        this.grid.sbHScroller.index = 0;\n        this.grid.selectionModel.clear();\n        this.grid.setData({\n            data: payload.rows,\n            schema: new_schema\n        });\n    }\n    this._memoized_schema = new_schema;\n    this._memoized_pivots = payload.rowPivots;\n}\n\n/**\n * @this {Behavior}\n */\nfunction createColumns() {\n    Object.getPrototypeOf(this).createColumns.call(this);\n    this.refreshColumns();\n    this.setHeaders(); // grouped-header override that sets all header cell renderers and header row height\n    this.schema_loaded = true;\n}\n\nfunction refreshColumns() {\n    this.getActiveColumns().forEach(function(column) {\n        setColumnPropsByType.call(this, column);\n    }, this);\n\n    let treeColumn = this.getTreeColumn();\n    if (treeColumn) {\n        setColumnPropsByType.call(this, treeColumn);\n    }\n}\n\n/**\n * @this {Behavior}\n */\nfunction setColumnPropsByType(column) {\n    const props = column.properties;\n    if (column.index === this.treeColumnIndex) {\n        props.format = \"FinanceTree\";\n    } else {\n        props.format = `perspective-${column.type}`;\n    }\n    const config = this.grid.behavior.dataModel._config;\n    const isEditable = this.grid.behavior.dataModel._viewer.hasAttribute(\"editable\");\n    if (isEditable && config.row_pivots.length === 0 && config.column_pivots.length === 0) {\n        props.editor = {\n            integer: \"perspective-number\",\n            string: \"perspective-text\",\n            date: \"perspective-date\",\n            datetime: \"perspective-datetime\",\n            float: \"perspective-number\"\n        }[column.type];\n        Object.assign(props, {\n            editable: true,\n            editOnKeydown: true,\n            editOnNextCell: false,\n            editOnDoubleClick: true,\n            editorActivationKeys: [\"alt\", \"esc\"],\n            cellSelection: true\n        });\n    }\n    const styles = this.grid.get_styles();\n    if (styles[column.type]) {\n        Object.assign(props, styles[column.type]);\n    }\n}\n\n/**\n * @this {Behavior}\n */\nfunction formatColumnHeader(value) {\n    const config = this.dataModel.getConfig();\n    const index = config.sort.findIndex(item => item[0] === value.trim());\n\n    if (index > -1) {\n        const direction = config.sort[index][1];\n\n        if (direction in this.charMap) {\n            value = `${value} ${this.charMap[direction]}${config.sort.length > 1 ? superscript(index + 1) : \"\"}`;\n        }\n    }\n\n    return value;\n}\n\nfunction addSortChars(charMap) {\n    Object.assign(charMap, {\n        asc: \"\\u2191\",\n        desc: \"\\u2193\",\n        \"asc abs\": \"\\u21E7\",\n        \"desc abs\": \"\\u21E9\",\n        \"col asc\": \"\\u2192\",\n        \"col desc\": \"\\u2190\",\n        \"col asc abs\": \"\\u21E8\",\n        \"col desc abs\": \"\\u21E6\"\n    });\n}\n\nfunction sortColumn(event) {\n    event.preventDefault();\n    event.handled = true;\n    const config = this.behavior.dataModel.getConfig();\n    const column = this.behavior.getColumn(event.detail.column);\n    let column_sorting, column_name;\n\n    if (config.column_pivots.length > 0) {\n        column_sorting = true;\n        column_name = column.header.split(\"|\")[config.column_pivots.length]; // index of last column is always the length of the column pivots\n    } else {\n        column_sorting = false;\n        column_name = column.header;\n    }\n\n    const viewer = this.behavior.dataModel._viewer;\n\n    const item_index = config.sort.findIndex(item => item[0] === column_name.trim());\n    const already_sorted = item_index > -1;\n\n    // shift key to enable abs sorting alt key to not remove already sorted\n    // columns\n    const abs_sorting = event.detail.keys && (event.detail.keys.indexOf(\"ALTSHIFT\") > -1 || event.detail.keys.indexOf(\"ALT\") > -1) && column.type !== \"string\";\n    const shift_pressed = event.detail.keys && (event.detail.keys.indexOf(\"ALTSHIFT\") > -1 || event.detail.keys.indexOf(\"SHIFT\") > -1);\n    let new_sort_direction;\n\n    // if the column is already sorted we increment the sort\n    if (already_sorted) {\n        const item = config.sort[item_index];\n        const direction = item[1];\n        new_sort_direction = viewer._increment_sort(direction, column_sorting, abs_sorting);\n        item[1] = new_sort_direction;\n    } else {\n        new_sort_direction = viewer._increment_sort(\"none\", column_sorting, abs_sorting);\n    }\n\n    //if alt pressed and column is already sorted, we change the sort for the\n    //column and leave the rest as is\n    if (shift_pressed && already_sorted) {\n        if (new_sort_direction === \"none\") {\n            config.sort.splice(item_index, 1);\n        }\n        viewer.sort = JSON.stringify(config.sort);\n    } else if (shift_pressed) {\n        // if alt key is pressed and column is NOT already selected, append the\n        // new sort column\n        config.sort.push([column_name, new_sort_direction]);\n        viewer.sort = JSON.stringify(config.sort);\n    } else {\n        viewer.sort = JSON.stringify([[column_name, new_sort_direction]]);\n    }\n}\n\nconst right_click_handler = e => {\n    const old_event = e.detail.primitiveEvent;\n    const new_event = new MouseEvent(old_event.type, old_event);\n    e.target.parentElement.parentElement.parentElement.dispatchEvent(new_event);\n};\n\nasync function getCellConfig(row_idx, col_idx) {\n    const config = this.dataModel.getConfig();\n    const row_pivots = config.row_pivots;\n    const column_pivots = config.column_pivots;\n    const start_row = row_idx >= 0 ? row_idx : 0;\n    const end_row = start_row + 1;\n    const r = await this.dataModel._view.to_json({start_row, end_row});\n    const row_paths = r.map(x => x.__ROW_PATH__);\n    const row_pivots_values = row_paths[0] || [];\n    const row_filters = row_pivots\n        .map((pivot, index) => {\n            const pivot_value = row_pivots_values[index];\n            return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n        })\n        .filter(x => x);\n    const column_index = row_pivots.length > 0 ? col_idx + 1 : col_idx;\n    const column_paths = Object.keys(r[0])[column_index];\n    const result = {row: r[0]};\n    let column_filters = [];\n    if (column_paths) {\n        const column_pivot_values = column_paths.split(\"|\");\n        result.column_names = [column_pivot_values[column_pivot_values.length - 1]];\n        column_filters = column_pivots\n            .map((pivot, index) => {\n                const pivot_value = column_pivot_values[index];\n                return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n            })\n            .filter(x => x)\n            .filter(([, , value]) => value !== \"__ROW_PATH__\");\n    }\n\n    const filters = config.filter.concat(row_filters).concat(column_filters);\n    result.config = {filters};\n    return result;\n}\n// `install` makes this a Hypergrid plug-in\nexport const install = function(grid) {\n    addSortChars(grid.behavior.charMap);\n\n    Object.getPrototypeOf(grid.behavior).setPSP = setPSP;\n\n    Object.getPrototypeOf(grid.behavior).formatColumnHeader = formatColumnHeader;\n\n    grid.addEventListener(\"fin-column-sort\", sortColumn.bind(grid));\n\n    grid.addEventListener(\"fin-canvas-context-menu\", right_click_handler);\n    grid.addEventListener(\"fin-row-selection-changed\", async function(event) {\n        const rows = event.detail.rows;\n\n        const selected = rows.length > 0;\n        const detail = selected ? await getCellConfig.call(event.detail.grid.behavior, rows[0]) : {config: {filters: []}};\n\n        event.detail.grid.canvas.dispatchEvent(\n            new CustomEvent(\"perspective-select\", {\n                bubbles: true,\n                composed: true,\n                detail: {selected, ...detail}\n            })\n        );\n    });\n\n    Object.getPrototypeOf(grid.behavior).getCursorAt = function(x, y, event) {\n        const rp_len = this.dataModel.data[y - 1]?.[-1]?.rowPath?.length;\n        const is_select = !!this.grid.properties.rowSelection;\n        if (is_select) {\n            if (x === -1 && rp_len <= this.dataModel._config.row_pivots.length && event?.gridPoint.x <= rp_len * 15 + 10) {\n                return \"pointer\";\n            }\n        } else {\n            if (x === -1 && rp_len <= this.dataModel._config.row_pivots.length) {\n                return \"pointer\";\n            }\n        }\n    };\n\n    function updateCursor(event) {\n        var cursor = this.behavior.getCursorAt(-1, -1);\n        var hoverCell = this.hoverCell;\n        if (hoverCell && hoverCell.x > -2 && hoverCell.y > -1) {\n            var x = hoverCell.x + this.getHScrollValue();\n            cursor = this.behavior.getCursorAt(x, hoverCell.y + this.getVScrollValue(), event);\n        }\n        this.beCursor(cursor);\n    }\n\n    Object.getPrototypeOf(grid.behavior).onMouseMove = function(grid, event) {\n        if (this.featureChain) {\n            this.featureChain.handleMouseMove(grid, event);\n            updateCursor.call(grid, event);\n            this.featureChain.setCursor(grid);\n        }\n    };\n\n    Object.getPrototypeOf(grid.behavior).cellClicked = async function(event) {\n        event.primitiveEvent.preventDefault();\n        event.handled = true;\n        const {x, y} = event.dataCell;\n        const config = this.dataModel.getConfig();\n        const row_pivots = config.row_pivots;\n        const column_pivots = config.column_pivots;\n        const start_row = y >= 0 ? y : 0;\n        const end_row = start_row + 1;\n        const r = await this.dataModel._view.to_json({start_row, end_row});\n        const row_paths = r.map(x => x.__ROW_PATH__);\n        const row_pivots_values = row_paths[0] || [];\n        const row_filters = row_pivots\n            .map((pivot, index) => {\n                const pivot_value = row_pivots_values[index];\n                return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n            })\n            .filter(x => x);\n        const column_index = row_pivots.length > 0 ? x + 1 : x;\n        const column_paths = Object.keys(r[0])[column_index];\n        let column_filters = [];\n        let column_names;\n        if (column_paths) {\n            const column_pivot_values = column_paths.split(\"|\");\n            column_names = [column_pivot_values[column_pivot_values.length - 1]];\n            column_filters = column_pivots\n                .map((pivot, index) => {\n                    const pivot_value = column_pivot_values[index];\n                    return pivot_value ? [pivot, \"==\", pivot_value] : undefined;\n                })\n                .filter(x => x)\n                .filter(([, , value]) => value !== \"__ROW_PATH__\");\n        }\n\n        const filters = config.filter.concat(row_filters).concat(column_filters);\n\n        // this only works for single row select (which is all we support\n        // right now)\n        if (this.grid.properties.rowSelection) {\n            const selected_rows = this.grid.getSelectedRows();\n            const selected = selected_rows[0] === y;\n            if (selected_rows.length === 0) {\n                delete this.dataModel[\"_selected_row_index\"];\n            }\n            this.grid.canvas.dispatchEvent(\n                new CustomEvent(\"perspective-select\", {\n                    bubbles: true,\n                    composed: true,\n                    detail: {\n                        selected,\n                        config: {filters: selected ? filters : []},\n                        column_names,\n                        row: r[0]\n                    }\n                })\n            );\n        }\n        this.grid.canvas.dispatchEvent(\n            new CustomEvent(\"perspective-click\", {\n                bubbles: true,\n                composed: true,\n                detail: await getCellConfig.call(this, y, x)\n            })\n        );\n\n        const rp_len = this.dataModel.data[y]?.[-1]?.rowPath?.length;\n        const is_toggle = !this.grid.properties.rowSelection || event?.gridPoint.x <= rp_len * 15 + 10;\n\n        if (is_toggle) {\n            return this.dataModel.toggleRow(event.dataCell.y, event.dataCell.x, event);\n        }\n    };\n\n    // Prevents flashing of cell selection on scroll\n    const renderGrid = grid.renderer.renderGrid;\n    grid.renderer.renderGrid = function(gc) {\n        renderGrid.call(this, gc);\n        this.renderOverrides(gc);\n        this.renderLastSelection(gc);\n    };\n\n    grid.canvas.canvas.addEventListener(\"mousewheel\", e => {\n        if (e.shiftKey) {\n            e.stopPropagation();\n        }\n    });\n\n    // Corrects for deselection behavior on keyiup due to shadow-dom\n    grid.canvas.hasFocus = function() {\n        if (!grid.div?.isConnected) {\n            return;\n        }\n        const grid_element = grid.div.parentNode.parentNode.host;\n        const view_shadow_root = grid_element.parentNode.parentNode.parentNode.parentNode.parentNode;\n        return view_shadow_root.activeElement === grid_element;\n    };\n\n    // Disable cell selection dragging\n    grid.lookupFeature(\"CellSelection\").handleMouseDown = function(grid, event) {\n        var dx = event.gridCell.x,\n            dy = event.dataCell.y,\n            isSelectable = grid.behavior.getCellProperty(event.dataCell.x, event.gridCell.y, \"cellSelection\");\n\n        if (isSelectable && event.isDataCell && !event.primitiveEvent.detail.isRightClick) {\n            var dCell = grid.newPoint(dx, dy),\n                primEvent = event.primitiveEvent,\n                keys = primEvent.detail.keys;\n            this.extendSelection(grid, dCell, keys);\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    };\n\n    // Disable cell selection by shift-click\n    grid.lookupFeature(\"CellSelection\").extendSelection = function(grid, gridCell, keys) {\n        var hasCTRL = keys.indexOf(\"CTRL\") >= 0,\n            hasSHIFT = false,\n            mousePoint = grid.getMouseDown(),\n            x = gridCell.x, // - numFixedColumns + scrollLeft;\n            y = gridCell.y; // - numFixedRows + scrollTop;\n\n        //were outside of the grid do nothing\n        if (x < 0 || y < 0) {\n            return;\n        }\n\n        //we have repeated a click in the same spot deslect the value from last\n        //time\n        if (hasCTRL && x === mousePoint.x && y === mousePoint.y) {\n            grid.clearMostRecentSelection();\n            grid.popMouseDown();\n            grid.repaint();\n            return;\n        }\n\n        if (!hasCTRL && !hasSHIFT) {\n            grid.clearSelections();\n        }\n\n        if (hasSHIFT) {\n            grid.clearMostRecentSelection();\n            grid.select(mousePoint.x, mousePoint.y, x - mousePoint.x, y - mousePoint.y);\n            grid.setDragExtent(grid.newPoint(x - mousePoint.x, y - mousePoint.y));\n        } else {\n            grid.select(x, y, 0, 0);\n            grid.setMouseDown(grid.newPoint(x, y));\n            grid.setDragExtent(grid.newPoint(0, 0));\n        }\n        grid.repaint();\n    };\n\n    // Prevent multiple cell moves while pressing navigation keys while editing.\n    grid.lookupFeature(\"CellSelection\").handleDOWN = function(grid, event) {\n        event.primitiveEvent.preventDefault();\n        if (!grid.cellEditor) {\n            const count = this.getAutoScrollAcceleration();\n            let {x, y} = grid.selectionModel.getLastSelection().origin;\n            const max = grid.renderer.dataWindow.origin.y + grid.renderer.dataWindow.extent.y - 2;\n            if (y + count > max) {\n                grid.sbVScroller.index++;\n            }\n            y = Math.min(grid.behavior.dataModel.getRowCount() - 1, y + count);\n            grid.selectionModel.select(x, y, 0, 0);\n            grid.repaint();\n        }\n    };\n\n    grid.lookupFeature(\"CellSelection\").handleUP = function(grid, event) {\n        event.primitiveEvent.preventDefault();\n        if (!grid.cellEditor) {\n            const count = this.getAutoScrollAcceleration();\n            let {x, y} = grid.selectionModel.getLastSelection().origin;\n            const min = grid.renderer.dataWindow.origin.y;\n            if (y - count < min) {\n                grid.sbVScroller.index--;\n            }\n            y = Math.max(0, y - count);\n            grid.selectionModel.select(x, y, 0, 0);\n            grid.repaint();\n        }\n    };\n\n    grid.lookupFeature(\"CellSelection\").handleLEFT = function(grid, event) {\n        event.primitiveEvent.preventDefault();\n        if (!grid.cellEditor) {\n            const count = this.getAutoScrollAcceleration();\n            let {x, y} = grid.selectionModel.getLastSelection().origin;\n            const min = grid.renderer.dataWindow.origin.x;\n            if (x - count < min) {\n                grid.sbHScroller.index--;\n            }\n            x = Math.max(0, x - 1);\n            grid.selectionModel.select(x, y, 0, 0);\n            grid.repaint();\n        }\n    };\n\n    grid.lookupFeature(\"CellSelection\").handleRIGHT = function(grid, event) {\n        event.primitiveEvent.preventDefault();\n        if (!grid.cellEditor) {\n            const count = this.getAutoScrollAcceleration();\n            let {x, y} = grid.selectionModel.getLastSelection().origin;\n            const max = grid.renderer.dataWindow.origin.x + grid.renderer.dataWindow.extent.x - 1;\n            if (x + count > max) {\n                grid.sbHScroller.index++;\n            }\n            x = Math.min(grid.behavior.schema.length - 1, x + count);\n            grid.selectionModel.select(x, y, 0, 0);\n            grid.repaint();\n        }\n    };\n\n    grid.lookupFeature(\"CellSelection\").moveShiftSelect = function(grid, offsetX, offsetY) {\n        grid.moveSingleSelect(offsetX, offsetY);\n    };\n\n    function update_bounds() {\n        this.width = Math.floor(this.div.clientWidth);\n        this.height = Math.floor(this.div.clientHeight);\n        this.bounds = new rectangular.Rectangle(0, 0, this.width, this.height);\n        this.component.setBounds(this.bounds);\n    }\n\n    grid.canvas.resize = async function(force) {\n        //fix ala sir spinka, see\n        //http://www.html5rocks.com/en/tutorials/canvas/hidpi/ just add 'hdpi'\n        //as an attribute to the fin-canvas tag\n        let ratio = 1;\n        const isHIDPI = window.devicePixelRatio && this.component.properties.useHiDPI;\n        if (isHIDPI) {\n            const devicePixelRatio = window.devicePixelRatio || 1;\n            const backingStoreRatio =\n                this.gc.webkitBackingStorePixelRatio || this.gc.mozBackingStorePixelRatio || this.gc.msBackingStorePixelRatio || this.gc.oBackingStorePixelRatio || this.gc.backingStorePixelRatio || 1;\n\n            ratio = devicePixelRatio / backingStoreRatio;\n        }\n\n        update_bounds.call(this);\n\n        let render = true;\n        const start_time = performance.now();\n        const dataModel = this.component.grid.behavior.dataModel;\n        if (this.height * ratio !== this.canvas.height || this.width * ratio !== this.canvas.width || force) {\n            while (dataModel._view && render) {\n                if (performance.now() - start_time > 3000) {\n                    throw new Error(\"Timeout\");\n                }\n                if (typeof render === \"object\") {\n                    // If we are awaiting this grid's initialization, yield\n                    // until it is ready.\n                    await new Promise(setTimeout);\n                }\n                grid.renderer.computeCellsBounds(true);\n                render = await new Promise(resolve => dataModel.fetchData(undefined, resolve));\n            }\n        }\n\n        this.buffer.width = this.canvas.width = this.width * ratio;\n        this.buffer.height = this.canvas.height = this.height * ratio;\n\n        this.canvas.style.width = this.buffer.style.width = this.width + \"px\";\n        this.canvas.style.height = this.buffer.style.height = this.height + \"px\";\n\n        this.bc.scale(ratio, ratio);\n        if (isHIDPI && !this.component.properties.useBitBlit) {\n            this.gc.scale(ratio, ratio);\n        }\n        if (dataModel._view) {\n            this.resizeNotification();\n        }\n        this.component.grid.renderer.needsComputeCellsBounds = false;\n        grid.canvas.paintNow();\n    };\n};\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport Behavior from \"faux-hypergrid/src/behaviors/Behavior\";\nimport {get_type_config} from \"@finos/perspective/dist/esm/config/index.js\";\nimport {page2hypergrid} from \"./psp-to-hypergrid\";\n\nconst {\n    prototype: {treeColumnIndex: TREE_COLUMN_INDEX}\n} = Behavior;\n\nfunction get_rect(nrows) {\n    if (!this.dataWindow) {\n        return [];\n    }\n    const dw = this.dataWindow;\n    return this.grid.newRectangle(dw.left, dw.top, dw.width, nrows ? Math.min(nrows - dw.top, dw.height) : dw.height); // convert from InclusiveRect\n}\n\nfunction find_row(rows, index) {\n    for (let ridx in rows) {\n        if (rows[ridx].__ID__ === index) {\n            return parseInt(ridx);\n        }\n    }\n    return -1;\n}\n\nconst _wrapper = function(f) {\n    return async function(_, resolve) {\n        let is_error;\n        try {\n            is_error = await f.call(this);\n        } catch (e) {\n            resolve(e);\n            return;\n        }\n        resolve(is_error);\n    };\n};\n\nfunction pad_data_window(rect, rowPivots = [], selection = false) {\n    const range = {\n        start_row: rect.origin.y,\n        end_row: rect.corner.y + 1,\n        start_col: rect.origin.x,\n        end_col: rect.corner.x + 3\n    };\n    range.end_col += rowPivots && rowPivots.length > 0 ? 1 : 0;\n    range.id = selection;\n    return range;\n}\n\nexport default require(\"datasaur-local\").extend(\"PerspectiveDataModel\", {\n    isTreeCol: function(x) {\n        return x === TREE_COLUMN_INDEX && this.isTree();\n    },\n\n    getValue: function(x, y) {\n        var row = this.data[y];\n        return row ? row[x] : null;\n    },\n\n    getRowCount: function() {\n        return this._nrows || 0;\n    },\n\n    getConfig: function() {\n        return this._config;\n    },\n\n    setRowCount: function(count) {\n        this._nrows = count || 0;\n    },\n\n    isTree: function() {\n        return this._isTree;\n    },\n\n    setIsTree: function(isTree) {\n        this._isTree = isTree;\n    },\n\n    setDirty: function(nrows) {\n        if (!this._grid) {\n            return;\n        }\n        if (nrows !== this._nrows) {\n            this._nrows = nrows;\n            this._grid.synchronizeScrollingBoundaries();\n        }\n        this._dirty = true;\n    },\n\n    // Called when clicking on a row group expand\n    toggleRow: async function(row, col, event) {\n        if (this.isTreeCol(col)) {\n            let isShift = false;\n            if (event.primitiveEvent.detail.primitiveEvent) {\n                isShift = !!event.primitiveEvent.detail.primitiveEvent.shiftKey; // typecast to boolean\n            }\n            let is_expanded = await this._view.get_row_expanded(row);\n            if (isShift) {\n                if (is_expanded) {\n                    if (this.data[row][col].rowPath.length === 1) {\n                        this._view.collapse(row);\n                    } else {\n                        this._view.set_depth(this.data[row][col].rowPath.length - 2);\n                    }\n                } else {\n                    this._view.set_depth(this.data[row][col].rowPath.length - 1);\n                }\n            } else {\n                if (is_expanded) {\n                    this._view.collapse(row);\n                } else {\n                    this._view.expand(row);\n                }\n            }\n            let nrows = await this._view.num_rows();\n            this.setDirty(nrows);\n            this._grid.canvas.paintNow();\n        }\n    },\n\n    _update_select_index: function() {\n        const has_cell_selections = this._grid.selectionModel.hasSelections();\n        const has_row_selections = this._grid.selectionModel.hasRowSelections();\n        if (has_cell_selections) {\n            const row_data = this.data[this._grid.selectionModel.getLastSelection().origin.y];\n            if (row_data) {\n                this._selected_cell_index = row_data.__ID__;\n            }\n        }\n        if (has_row_selections) {\n            const row_data = this.data[this._grid.getSelectedRows()[0]];\n            if (row_data) {\n                this._selected_row_index = row_data.__ID__;\n            }\n        }\n    },\n\n    _update_editor: function(rect) {\n        const editor = this._grid.cellEditor;\n        let new_index;\n        if (editor) {\n            new_index = find_row(this.data, editor._index);\n            editor.event.resetGridXY(editor.event.dataCell.x, new_index - rect.origin.y + 1);\n            editor.moveEditor();\n        }\n        return new_index;\n    },\n\n    _update_selection: function(new_index) {\n        const has_cell_selections = this._grid.selectionModel.hasSelections();\n        if (has_cell_selections) {\n            new_index = new_index || find_row(this.data, this._selected_cell_index);\n            if (new_index !== -1) {\n                const col = this._grid.selectionModel.getLastSelection().origin.x;\n                this._grid.selectionModel.select(col, new_index, 0, 0);\n            }\n        }\n        if (this._selected_row_index) {\n            this._grid.selectionModel.clearRowSelection();\n            const row_index = new_index || find_row(this.data, this._selected_row_index);\n            if (row_index !== -1) {\n                this._grid.selectionModel.selectRow(row_index);\n            }\n        }\n    },\n\n    getSelectedRowID() {\n        if (this._grid.selectionModel.hasRowSelections()) {\n            const row_data = this.data[this._grid.getSelectedRows()[0]];\n            if (row_data) {\n                return row_data.__ID__;\n            }\n        }\n    },\n\n    setSelectedRowID(index) {\n        if (this._grid.properties.rowSelection) {\n            this._selected_row_index = index;\n            this._update_selection();\n        }\n    },\n\n    pspFetch: async function(rect) {\n        const selection_enabled = this._grid.properties.rowSelection || this._viewer.hasAttribute(\"editable\");\n        const range = pad_data_window(rect, this._config.row_pivots, selection_enabled);\n        const next_page = await this._view.to_columns(range);\n        this.data = [];\n        const rows = page2hypergrid(next_page, this._config.row_pivots, this._columns);\n        const base = range.start_row;\n        const data = this.data;\n        rows.forEach((row, offset) => (data[base + offset] = row));\n    },\n\n    fetchData: _wrapper(async function() {\n        if (this._view === undefined) {\n            return true;\n        }\n\n        let rect = get_rect.call(this._grid.renderer);\n\n        if (!this._dirty && !is_cache_miss(rect, this._data_window)) {\n            return;\n        }\n\n        this._grid.renderer.needsComputeCellsBounds = true;\n\n        if (this._outstanding && !is_cache_miss(rect, this._outstanding.rect)) {\n            await this._outstanding.req;\n            this._grid.renderer.needsComputeCellsBounds = true;\n            return true;\n        }\n\n        this._dirty = false;\n        const req = this.pspFetch(rect);\n        this._outstanding = {rect, req};\n        this._update_select_index();\n\n        try {\n            await req;\n        } finally {\n            this._outstanding = undefined;\n            this._grid.renderer.needsComputeCellsBounds = true;\n        }\n\n        this._data_window = rect;\n        this._update_selection(this._update_editor(rect));\n\n        rect = get_rect.call(this._grid.renderer);\n        const ret = is_cache_miss(rect, this._data_window);\n        return ret;\n    }),\n\n    getCellEditorAt: function(columnIndex, rowIndex, declaredEditorName, options) {\n        if (!declaredEditorName) {\n            return;\n        }\n        const offset = this._grid.renderer.dataWindow.top;\n        const editor = this._grid.cellEditors.create(declaredEditorName, options);\n        this._grid.selectionModel.select(columnIndex, rowIndex + offset - 1);\n        editor.el.addEventListener(\"blur\", () => setTimeout(() => editor.cancelEditing()));\n        const args = {\n            start_row: rowIndex + offset - 1,\n            end_row: rowIndex + offset,\n            start_col: columnIndex,\n            end_col: columnIndex + 1,\n            index: true\n        };\n        editor._row = this._view.to_json(args);\n        editor._table = this._table;\n        editor._data = this.data;\n        editor._canvas = this._grid.canvas.canvas;\n        editor._index = this.data[rowIndex + offset - 1].__ID__;\n        return editor;\n    },\n\n    getCell: function(config, rendererName) {\n        var nextRow, depthDelta;\n        if (config.isUserDataArea) {\n            cellStyle.call(this, config, rendererName);\n        } else if (config.dataCell.x === TREE_COLUMN_INDEX && config.value) {\n            nextRow = this.getRow(config.dataCell.y + 1);\n            depthDelta = nextRow ? config.value.rowPath.length - nextRow[TREE_COLUMN_INDEX].rowPath.length : 1;\n            config.last = depthDelta !== 0;\n            config.expanded = depthDelta < 0;\n            config._type = this.schema[-1].type[config.value.rowPath.length - 2];\n        }\n        return config.grid.cellRenderers.get(rendererName);\n    },\n\n    clearSelectionState: function() {\n        this._selected_row_index = undefined;\n        this._selected_cell_index = undefined;\n        this._grid.selectionModel.clear();\n    }\n});\n\nfunction is_cache_miss(req, cache) {\n    return !cache || req.top !== cache.top || req.top + req.height !== cache.top + cache.height || req.left !== cache.left || req.left + req.width !== cache.left + cache.width;\n}\n\nfunction cellStyle(gridCellConfig) {\n    if (gridCellConfig.value === null || gridCellConfig.value === undefined) {\n        gridCellConfig.value = \"-\";\n    } else {\n        let type = this.schema[gridCellConfig.dataCell.x].type;\n        const type_config = get_type_config(type);\n        if (type_config.type) {\n            type = type_config.type;\n        }\n        if ([\"number\", \"float\", \"integer\"].indexOf(type) > -1) {\n            if (gridCellConfig.value === 0) {\n                gridCellConfig.value = type === \"float\" ? \"0.00\" : \"0\";\n            } else if (isNaN(gridCellConfig.value)) {\n                gridCellConfig.value = \"-\";\n            } else {\n                if (gridCellConfig.value > 0) {\n                    gridCellConfig.color = gridCellConfig.columnColorNumberPositive || \"rgb(160,207,255)\";\n                    gridCellConfig.backgroundColor = gridCellConfig.columnBackgroundColorNumberPositive ? gridCellConfig.columnBackgroundColorNumberPositive : gridCellConfig.backgroundColor;\n                    gridCellConfig.borderBottom = gridCellConfig.borderBottomPositive ? gridCellConfig.borderBottomPositive : gridCellConfig.borderBottom;\n                    gridCellConfig.borderRight = gridCellConfig.borderRightPositive ? gridCellConfig.borderRightPositive : gridCellConfig.borderRight;\n                } else {\n                    gridCellConfig.color = gridCellConfig.columnColorNumberNegative || \"rgb(255,136,136)\";\n                    gridCellConfig.backgroundColor = gridCellConfig.columnBackgroundColorNumberNegative ? gridCellConfig.columnBackgroundColorNumberNegative : gridCellConfig.backgroundColor;\n                    gridCellConfig.borderBottom = gridCellConfig.borderBottomNegative ? gridCellConfig.borderBottomNegative : gridCellConfig.borderBottom;\n                    gridCellConfig.borderRight = gridCellConfig.borderRightNegative ? gridCellConfig.borderRightNegative : gridCellConfig.borderRight;\n                }\n            }\n        } else if (type === \"boolean\") {\n            gridCellConfig.value = String(gridCellConfig.value);\n        }\n    }\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {PropsBuilder, get_style} from \"@finos/perspective-viewer/dist/esm/custom_styles\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nconst properties = new PropsBuilder();\nconst title = `--hypergrid`;\n\nproperties.add_fonts({\n    font: title,\n    columnHeaderFont: `${title}-header`,\n    columnHeaderForegroundSelectionFont: `${title}-header`,\n    foregroundSelectionFont: `${title}-header`,\n    treeHeaderForegroundSelectionFont: [`${title}-tree-header-selection`, `${title}-header`],\n    rowHeaderFont: title,\n    treeHeaderFont: title\n});\n\nproperties.add_styles({\n    treeHeaderBackgroundColor: `${title}-tree-header--background`,\n    backgroundColor: `${title}--background`,\n    treeHeaderColor: `${title}-tree-header--color`,\n    treeHeaderForegroundSelectionColor: [`${title}-tree-header-selection--color`, `${title}--color`],\n    treeHeaderBackgroundSelectionColor: [`${title}-tree-header-selection--background`, `${title}-selection--background`],\n    backgroundSelectionColor: `${title}-selection--background`,\n    foregroundSelectionColor: [`${title}--color`, `color`],\n    borderBottom: `${title}--border-bottom-color`,\n    borderRight: `${title}--border-right-color`,\n    borderBottomPositive: `${title}-positive--border-bottom-color`,\n    borderBottomNegative: `${title}-negative--border-bottom-color`,\n    borderRightPositive: `${title}-positive--border-right-color`,\n    borderRightNegative: `${title}-negative--border-right-color`,\n    color: [`${title}--color`, `color`],\n    columnHeaderBackgroundColor: `${title}-header--background`,\n    columnHeaderSeparatorColor: `${title}-separator--color`,\n    columnHeaderColor: `${title}-header--color`,\n    columnHeaderForegroundSelectionColor: `${title}-header--color`,\n    columnColorNumberPositive: `${title}-positive--color`,\n    columnColorNumberNegative: `${title}-negative--color`,\n    columnBackgroundColorNumberPositive: `${title}-positive--background`,\n    columnBackgroundColorNumberNegative: `${title}-negative--background`,\n    selectionRegionOverlayColor: `${title}-editor--background`,\n    selectionRegionOutlineColor: `${title}-editor--border-color`,\n    gridLinesVColor: `${title}-gridline--color`,\n    gridLinesHColor: `${title}-gridline--color`,\n    lineColor: `${title}-gridline--color`,\n    fixedLinesVColor: `${title}-gridline--color`,\n    fixedLinesHColor: `${title}-gridline--color`,\n    halign: `${title}--text-align`,\n    columnHeaderHalign: `${title}--text-align`,\n    hoverCellHighlight: {\n        enabled: true,\n        backgroundColor: `${title}-cell-hover--background`,\n        color: `${title}-cell-hover--color`\n    }\n});\n\nproperties.add_measures({\n    defaultRowHeight: `${title}-row--height`,\n    groupedHeader: {\n        flatHeight: `${title}-row--height`\n    },\n    width: `${title}--width`,\n    minimumColumnWidth: `${title}--min-width`,\n    maximumColumnWidth: `${title}--max-width`\n});\n\nproperties.add_styles({\n    hoverRowHighlight: {\n        enabled: true,\n        backgroundColor: `${title}-row-hover--background`,\n        color: `${title}-row-hover--color`\n    }\n});\n\nexport function get_styles(elem) {\n    return properties.get_properties(elem);\n}\n\nexport function clear_styles(elem) {\n    return properties.clear_properties(elem);\n}\n\nconst COLUMN_HEADER_FONT = \"12px Helvetica, sans-serif\";\nconst GROUP_LABEL_FONT = \"12px Open Sans, sans-serif\";\n\nconst base_grid_properties = {\n    autoSelectRows: false,\n    cellPadding: 5,\n    cellSelection: false,\n    columnSelection: false,\n    rowSelection: false,\n    checkboxOnlyRowSelections: false,\n    columnClip: true,\n    treeHeaderBackgroundSelectionColor: \"rgba(147, 185, 255, 0.625)\", // same as default hypergrid backgroundSelectionColor\n    columnHeaderFont: COLUMN_HEADER_FONT,\n    columnHeaderForegroundSelectionFont: COLUMN_HEADER_FONT,\n    columnHeaderBackgroundSelectionColor: undefined,\n    columnsReorderable: false,\n    defaultRowHeight: 24,\n    enableContinuousRepaint: false,\n    feedbackCount: 1000000,\n    fixedColumnCount: 0,\n    fixedRowCount: 0,\n    fixedLinesHWidth: 1,\n    fixedLinesVWidth: 1,\n    font: '12px \"Arial\", Helvetica, sans-serif',\n    foregroundSelectionFont: '12px \"Arial\", Helvetica, sans-serif',\n    gridLinesH: false,\n    gridLinesV: true, // except: due to groupedHeaderPlugin's `clipRuleLines: true` option, only header row displays these lines\n    gridLinesUserDataArea: false, // restricts vertical rule line rendering to header row only\n    groupedHeader: {\n        flatHeight: \"30\",\n        paintBackground: null, // no group header label decoration\n        columnHeaderLines: false, // only draw vertical rule lines between group labels\n        groupConfig: [\n            {\n                halign: \"center\", // center group labels\n                font: GROUP_LABEL_FONT\n            }\n        ]\n    },\n    halign: \"left\",\n    headerTextWrapping: false,\n    hoverColumnHighlight: {enabled: false},\n    hoverRowHighlight: {\n        enabled: true,\n        backgroundColor: \"#555\"\n    },\n    hoverCellHighlight: {\n        enabled: true,\n        backgroundColor: \"#333\"\n    },\n    noDataMessage: \"\",\n    minimumColumnWidth: 50,\n    multipleSelections: false,\n    renderFalsy: false,\n    rowHeaderFont: \"12px Arial, Helvetica, sans-serif\",\n    rowHeaderForegroundSelectionFont: '12px \"Arial\", Helvetica, sans-serif',\n    rowResize: true,\n    scrollbarHoverOff: \"visible\",\n    rowHeaderCheckboxes: false,\n    rowHeaderNumbers: false,\n    selectionRegionOverlayColor: \"transparent\",\n    selectionRegionOutlineColor: \"rgba(0,0,0,0.2)\",\n    showFilterRow: true,\n    showHeaderRow: true,\n    showTreeColumn: false,\n    showRowNumbers: false,\n    showCheckboxes: false,\n    singleRowSelectionMode: false,\n    //    navKeyMap: {},\n    sortColumns: [],\n    sortOnDoubleClick: true,\n    treeRenderer: \"TreeCell\",\n    treeHeaderFont: \"12px Arial, Helvetica, sans-serif\",\n    treeHeaderForegroundSelectionFont: '12px \"Arial\", Helvetica, sans-serif',\n    useBitBlit: false,\n    vScrollbarClassPrefix: \"\",\n    voffset: 0\n};\n\nconst light_theme_overrides = {\n    backgroundColor: \"#ffffff\",\n    color: \"#666\",\n    font: '12px \"Open Sans\", Helvetica, sans-serif',\n    columnHeaderColor: \"#666\",\n    columnHeaderHalign: \"left\", // except: group header labels always 'center'; numbers always 'right' per `setPSP`\n    columnHeaderBackgroundColor: \"#fff\",\n    columnHeaderForegroundSelectionColor: \"#333\",\n    rowHeaderForegroundSelectionFont: \"12px Arial, Helvetica, sans-serif\",\n    treeHeaderColor: \"#666\",\n    treeHeaderBackgroundColor: \"#fff\",\n    hoverCellHighlight: {\n        enabled: true,\n        backgroundColor: \"#eeeeee\"\n    },\n    hoverRowHighlight: {\n        enabled: true,\n        backgroundColor: \"#f6f6f6\"\n    }\n};\n\nconst dynamic_defaults = {\n    rowBackgroundSelectionColor: \"rgba(147, 185, 255, 0.625)\",\n    cellBackgroundSelectionColor: \"#fff\",\n    rowSelectionRegionOutlineColor: \"transparent\",\n    cellSelectionRegionOutlineColor: \"rgba(0,0,0,0.2)\"\n};\n\nexport function get_dynamic_styles(elem, selectable) {\n    const properties = {\n        singleRowSelectionMode: selectable,\n        autoSelectRows: selectable,\n        rowSelection: selectable\n    };\n\n    if (selectable) {\n        properties.selectionRegionOutlineColor = get_style(elem, `${title}-selection--border-color`) || dynamic_defaults.rowSelectionRegionOutlineColor;\n        properties.backgroundSelectionColor = get_style(elem, `${title}-selection--background`) || dynamic_defaults.rowBackgroundSelectionColor;\n    } else {\n        properties.selectionRegionOutlineColor = get_style(elem, `${title}-editor--border-color`) || dynamic_defaults.cellSelectionRegionOutlineColor;\n        properties.backgroundSelectionColor = dynamic_defaults.rowSelectionRegionOutlineColor;\n    }\n    return properties;\n}\n\nexport function default_grid_properties() {\n    const properties = Object.assign({}, cloneDeep(base_grid_properties), cloneDeep(light_theme_overrides));\n    return properties;\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport Textfield from \"faux-hypergrid/src/cellEditors/Textfield\";\n\nfunction px(n) {\n    return n + \"px\";\n}\n\nfunction validateEditorValueDate(x) {\n    const d = new Date(x);\n    return !(d instanceof Date && !isNaN(d));\n}\n\nfunction setBoundsDate(cellBounds) {\n    const style = this.el.style;\n    style.left = px(cellBounds.x - 1);\n    style.top = px(cellBounds.y - 1);\n    style.width = px(cellBounds.width + 52);\n    style.height = px(cellBounds.height + 2);\n}\n\nfunction setBoundsText(cellBounds) {\n    const style = this.el.style;\n    style.left = px(cellBounds.x - 1);\n    style.top = px(cellBounds.y - 1);\n    style.width = px(cellBounds.width + 2);\n    style.height = px(cellBounds.height + 2);\n}\n\nfunction setEditorValueDate(x) {\n    if (x === null) {\n        return;\n    }\n    const now = new Date(x);\n    const day = (\"0\" + now.getDate()).slice(-2);\n    const month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n    this.input.value = `${now.getFullYear()}-${month}-${day}`;\n    this.input.addEventListener(\"keydown\", keydown.bind(this));\n}\n\nfunction setEditorValueDatetime(x) {\n    if (x === null) {\n        return;\n    }\n    const now = new Date(x);\n    const day = (\"0\" + now.getDate()).slice(-2);\n    const month = (\"0\" + (now.getMonth() + 1)).slice(-2);\n    const hour = (\"0\" + now.getHours()).slice(-2);\n    const minute = (\"0\" + now.getMinutes()).slice(-2);\n    const ss = (\"0\" + now.getSeconds()).slice(-2);\n    this.input.value = `${now.getFullYear()}-${month}-${day}T${hour}:${minute}:${ss}`;\n    this.input.addEventListener(\"keydown\", keydown.bind(this));\n}\n\nfunction setEditorValueText(updated) {\n    // Move keyup so nav and edit don't conflict\n    this.input.addEventListener(\"keydown\", keydown.bind(this));\n    // refire mouseover so hover does not go away when mouse stays over edit\n    // cell\n    this.input.addEventListener(\"mouseover\", event => {\n        var mouseMoveEvent = document.createEvent(\"MouseEvents\");\n        mouseMoveEvent.initMouseEvent(\n            \"mouseover\",\n            event.canBubble,\n            event.cancelable,\n            window,\n            event.detail,\n            event.screenX,\n            event.screenY,\n            event.clientX,\n            event.clientY,\n            event.ctrlKey,\n            event.altKye,\n            event.shiftKey,\n            event.metaKey,\n            event.button,\n            event.relatedTarget\n        );\n        this._canvas.dispatchEvent(mouseMoveEvent);\n    });\n    if (updated === null) {\n        return \"\";\n    } else {\n        this.input.value = this.localizer.format(updated);\n        return updated;\n    }\n}\n\nfunction getEditorValueText(updated) {\n    this._row.then(([old]) => {\n        const index = old.__INDEX__;\n        delete old[\"__INDEX__\"];\n        const colname = Object.keys(old)[0];\n        this._table.update([{__INDEX__: index, [colname]: updated}]);\n    });\n    return this.localizer.format(updated);\n}\n\nfunction getEditorValueNumber(updated) {\n    this._row.then(([old]) => {\n        const index = old.__INDEX__;\n        delete old[\"__INDEX__\"];\n        const colname = Object.keys(old)[0];\n        this._table.update([{__INDEX__: index, [colname]: Number(updated.replace(/,/g, \"\"))}]);\n    });\n    return this.localizer.format(updated);\n}\n\nfunction getEditorValueDate(updated) {\n    updated = new Date(updated);\n    this._row.then(([old]) => {\n        const index = old.__INDEX__;\n        delete old[\"__INDEX__\"];\n        const colname = Object.keys(old)[0];\n        this._table.update([{__INDEX__: index, [colname]: updated}]);\n    });\n    return this.localizer.format(updated);\n}\n\nfunction saveEditorValue(x) {\n    var save = !(x && x === this.initialValue) && this.grid.fireBeforeCellEdit(this.event.gridCell, this.initialValue, x, this);\n    if (save) {\n        const row = this.event.gridCell.y + this.grid.renderer.dataWindow.top - 1;\n        const col = this.event.gridCell.x;\n        this._data[row][col] = x;\n        this.grid.canvas.paintNow();\n    }\n}\n\nfunction keyup() {}\n\nfunction keydown(e) {\n    e.stopPropagation();\n    let grid = this.grid,\n        cellProps = this.event.properties,\n        feedbackCount = cellProps.feedbackCount,\n        keyChar = grid.canvas.getKeyChar(e),\n        specialKeyup,\n        stopped;\n\n    if ((specialKeyup = this.specialKeyups[e.keyCode]) && (stopped = this[specialKeyup](feedbackCount))) {\n        grid.repaint();\n    }\n\n    if (cellProps.mappedNavKey(keyChar, e.ctrlKey)) {\n        if (!specialKeyup && (stopped = this.stopEditing(feedbackCount))) {\n            grid.repaint();\n        }\n    }\n\n    this.grid.fireSyntheticEditorKeyUpEvent(this, e);\n\n    return stopped;\n}\n\nfunction stopEditing(feedback) {\n    var str = this.input.value;\n\n    try {\n        var error = this.validateEditorValue(str);\n        if (!error) {\n            var value = this.getEditorValue(str);\n        }\n    } catch (err) {\n        error = err;\n    }\n\n    if (!error && this.grid.fireSyntheticEditorDataChangeEvent(this, this.initialValue, value)) {\n        try {\n            this.saveEditorValue(value);\n        } catch (err) {\n            error = err;\n        }\n    }\n\n    if (!error) {\n        const {x, y} = this.grid.selectionModel.getLastSelection().origin;\n        this.grid.selectionModel.select(x, y + 1, 0, 0);\n        this.hideEditor();\n        this.grid.cellEditor = null;\n        this.grid._is_editing = true;\n        this.el.remove();\n        this.grid._is_editing = false;\n        this.grid.div.parentNode.parentNode.host.focus();\n    } else if (feedback >= 0) {\n        // false when `feedback` undefined\n        this.errorEffectBegin(++this.errors % feedback === 0 && error);\n    } else {\n        // invalid but no feedback\n        this.cancelEditing();\n    }\n\n    return !error;\n}\n\nfunction cancelEditing() {\n    this.setEditorValue(this.initialValue);\n    this.hideEditor();\n    this.grid.cellEditor = null;\n    this.grid._is_editing = true;\n    this.el.remove();\n    this.grid._is_editing = false;\n    this.grid.takeFocus();\n\n    return true;\n}\n\nexport function set_editors(grid) {\n    const date = Textfield.extend(\"perspective-date\", {\n        localizer: grid.localization.get(\"chromeDate\"),\n        template: \"<input class='hypergrid-textfield' type='date'>\",\n        getEditorValue: getEditorValueDate,\n        setEditorValue: setEditorValueDate,\n        validateEditorValue: validateEditorValueDate,\n        setBounds: setBoundsDate,\n        selectAll: () => {},\n        saveEditorValue,\n        keyup,\n        stopEditing,\n        cancelEditing\n    });\n\n    const datetime = Textfield.extend(\"perspective-datetime\", {\n        localizer: grid.localization.get(\"chromeDate\"),\n        template: \"<input class='hypergrid-textfield' type='datetime-local'>\",\n        getEditorValue: getEditorValueDate,\n        setEditorValue: setEditorValueDatetime,\n        validateEditorValue: validateEditorValueDate,\n        setBounds: setBoundsDate,\n        selectAll: () => {},\n        saveEditorValue,\n        keyup,\n        stopEditing,\n        cancelEditing\n    });\n\n    const text = Textfield.extend(\"perspective-text\", {\n        setBounds: setBoundsText,\n        setEditorValue: setEditorValueText,\n        getEditorValue: getEditorValueText,\n        saveEditorValue,\n        keyup,\n        stopEditing,\n        cancelEditing\n    });\n\n    const number = Textfield.extend(\"perspective-number\", {\n        setBounds: setBoundsText,\n        setEditorValue: setEditorValueText,\n        getEditorValue: getEditorValueNumber,\n        validateEditorValue: x => isNaN(Number(x.replace(/,/g, \"\"))),\n        saveEditorValue,\n        keyup,\n        stopEditing,\n        cancelEditing\n    });\n\n    grid.cellEditors.add(number);\n    grid.cellEditors.add(date);\n    grid.cellEditors.add(datetime);\n    grid.cellEditors.add(text);\n}\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nexport function treeLineRendererPaint(gc, config) {\n    var x = config.bounds.x;\n    var y = config.bounds.y;\n    var width = config.bounds.width;\n    var height = config.bounds.height;\n\n    config.minWidth = 1;\n    if (config.value === null) {\n        return;\n    }\n\n    var value = config.value.rollup;\n    var leaf = config.value.isLeaf;\n    var depth = config.value.rowPath.length - 1;\n    var parent = config.expanded;\n    var lastChild = config.last;\n\n    var backgroundColor = config.backgroundColor;\n    if (config.isSelected) {\n        backgroundColor = config.backgroundSelectionColor;\n    }\n    if (config.isRowHovered && config.hoverRowHighlight.enabled && !config.isCellHovered) {\n        backgroundColor = config.hoverRowHighlight.backgroundColor;\n    } else if (config.isCellHovered && config.hoverCellHighlight.enabled) {\n        backgroundColor = config.hoverCellHighlight.backgroundColor;\n    }\n\n    gc.save();\n    gc.cache.fillStyle = backgroundColor;\n    gc.rect(x, y, width, height);\n    gc.fillRect(x, y, width, height);\n\n    var fgColor = config.gridLinesHColor; //config.isSelected ? config.foregroundSelectionColor : config.lineColor;\n    gc.cache.strokeStyle = fgColor;\n    gc.cache.fillStyle = fgColor;\n    var xOffset = x;\n    var lineNodeSpace = 16;\n    var nodeRadius = 3;\n\n    // Draw vertical line\n    gc.globalAlpha = 0.7;\n    gc.strokeStyle = fgColor;\n\n    gc.beginPath();\n    for (var i = 1; i <= depth; i++) {\n        xOffset += lineNodeSpace;\n        var lineHeight = lastChild && !parent ? height / 2 : height;\n        gc.moveTo(xOffset, y);\n        gc.lineTo(xOffset, y);\n        gc.lineTo(xOffset, y + lineHeight);\n        if (i === depth) {\n            gc.moveTo(xOffset, y + height / 2);\n            gc.lineTo(xOffset, y + height / 2);\n            gc.lineTo(xOffset + lineNodeSpace - nodeRadius, y + height / 2);\n        } else {\n            gc.lineTo(xOffset, y + height);\n        }\n    }\n\n    // Draw node circle\n    if (!leaf) {\n        gc.moveTo(xOffset + lineNodeSpace + nodeRadius, y + height / 2);\n        gc.arc(xOffset + lineNodeSpace, y + height / 2, nodeRadius, 0, 2 * Math.PI);\n        if (config.isCellHovered) {\n            gc.globalAlpha = 1.0;\n            gc.fill();\n            gc.globalAlpha = 0.7;\n        }\n    } else {\n        gc.lineTo(xOffset + lineNodeSpace + nodeRadius, y + height / 2);\n    }\n\n    if (parent && !leaf) {\n        gc.globalAlpha = 0.5;\n        gc.fill();\n        gc.moveTo(xOffset + lineNodeSpace, y + height / 2 + nodeRadius);\n        gc.lineTo(xOffset + lineNodeSpace, y + height);\n        gc.globalAlpha = 0.7;\n    }\n\n    gc.stroke();\n    gc.closePath();\n\n    // render message text\n\n    gc.globalAlpha = 1.0;\n    gc.fillStyle = config.isSelected ? config.foregroundSelectionColor : config.color;\n    gc.textAlign = \"start\";\n    gc.textBaseline = \"middle\";\n    gc.font = config.isSelected ? config.foregroundSelectionFont : config.treeHeaderFont;\n    var cellTextOffset = xOffset + lineNodeSpace + 2 * nodeRadius + 3;\n    let formatted_value = config.formatValue(value, config._type);\n    config.minWidth = cellTextOffset + gc.getTextWidth(formatted_value) + 15;\n    var metrics = gc.getTextWidthTruncated(formatted_value, width - cellTextOffset + (x - 3), true);\n    var yOffset = y + height / 2;\n    gc.fillText(metrics.string ? metrics.string : formatted_value, cellTextOffset, yOffset);\n    gc.restore();\n}\n","/******************************************************************************\r\n *\r\n * Copyright (c) 2017, the Perspective Authors.\r\n *\r\n * This file is part of the Perspective library, distributed under the terms of\r\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\r\n *\r\n */\r\n\r\nimport Hypergrid from \"faux-hypergrid\";\r\nimport Base from \"faux-hypergrid/src/Base\";\r\nimport Canvas from \"faux-hypergrid/src/lib/Canvas\";\r\nimport groupedHeaderPlugin from \"fin-hypergrid-grouped-header-plugin\";\r\n\r\nimport * as perspectivePlugin from \"./perspective-plugin\";\r\nimport PerspectiveDataModel from \"./PerspectiveDataModel\";\r\nimport {psp2hypergrid} from \"./psp-to-hypergrid\";\r\n\r\nimport {bindTemplate, registerPlugin} from \"@finos/perspective-viewer/dist/esm/utils.js\";\r\n\r\nimport TEMPLATE from \"../html/hypergrid.html\";\r\n\r\nimport style from \"../less/hypergrid.less\";\r\nimport {get_styles, clear_styles, get_dynamic_styles, default_grid_properties} from \"./styles.js\";\r\nimport {set_formatters} from \"./formatters.js\";\r\nimport {set_editors} from \"./editors.js\";\r\nimport {treeLineRendererPaint} from \"./hypergrid-tree-cell-renderer\";\r\n\r\nCanvas.prototype.stopResizeLoop();\r\nCanvas.prototype.stopPaintLoop();\r\n\r\nbindTemplate(\r\n    TEMPLATE,\r\n    style\r\n)(\r\n    class HypergridElement extends HTMLElement {\r\n        set_data(data, schema, tschema, row_pivots, columns, force = false) {\r\n            const hg_data = psp2hypergrid(data, schema, tschema, row_pivots, columns);\r\n            if (this.grid) {\r\n                this.grid.behavior.setPSP(hg_data, force);\r\n            } else {\r\n                this._hg_data = hg_data;\r\n            }\r\n        }\r\n\r\n        connectedCallback() {\r\n            if (!this.grid) {\r\n                const host = this.shadowRoot.querySelector(\"#mainGrid\");\r\n\r\n                host.setAttribute(\"hidden\", true);\r\n                Canvas.prototype.restartPaintLoop();\r\n                this.grid = new Hypergrid(host, {DataModel: PerspectiveDataModel});\r\n                Canvas.prototype.stopPaintLoop();\r\n                host.removeAttribute(\"hidden\");\r\n                this.grid.get_styles = () => get_styles(this);\r\n                this.grid.get_dynamic_styles = (...args) => get_dynamic_styles(this, ...args);\r\n\r\n                const grid_properties = default_grid_properties();\r\n                const styles = get_styles(this);\r\n                grid_properties.renderer = [\"SimpleCell\", \"Borders\"];\r\n\r\n                // Handle grouped header plugin bugs\r\n                Object.assign(grid_properties.groupedHeader, styles[\"\"].groupedHeader);\r\n                if (typeof grid_properties.groupedHeader.flatHeight === \"number\") {\r\n                    grid_properties.groupedHeader.flatHeight = grid_properties.groupedHeader.flatHeight.toString();\r\n                }\r\n\r\n                this.grid.installPlugins([perspectivePlugin, [groupedHeaderPlugin, grid_properties.groupedHeader]]);\r\n\r\n                // Broken in fin-hypergrid-grouped-header 0.1.2\r\n                let _old_paint = this.grid.cellRenderers.items.GroupedHeader.paint;\r\n                this.grid.cellRenderers.items.GroupedHeader.paint = function(gc, config) {\r\n                    this.visibleColumns = config.grid.renderer.visibleColumns;\r\n                    return _old_paint.call(this, gc, config);\r\n                };\r\n\r\n                this.grid.addProperties(grid_properties);\r\n                this.grid.addProperties(styles[\"\"]);\r\n\r\n                set_formatters(this.grid);\r\n                set_editors(this.grid);\r\n\r\n                // Add tree cell renderer\r\n                this.grid.cellRenderers.add(\"TreeCell\", Base.extend({paint: treeLineRendererPaint}));\r\n\r\n                if (this._hg_data) {\r\n                    this.grid.behavior.setPSP(this._hg_data);\r\n                    delete this._hgdata;\r\n                }\r\n            }\r\n        }\r\n    }\r\n);\r\n\r\nconst HYPERGRID_INSTANCE = Symbol(\"Hypergrid private\");\r\n\r\nasync function grid_update(div, view, task) {\r\n    const nrows = await view.num_rows();\r\n    if (task.cancelled) {\r\n        return;\r\n    }\r\n    const hypergrid = get_hypergrid.call(this);\r\n    if (!hypergrid) {\r\n        return;\r\n    }\r\n    const dataModel = hypergrid.behavior.dataModel;\r\n    dataModel._view = view;\r\n    dataModel._table = this._table;\r\n    dataModel.setDirty(nrows);\r\n    hypergrid.behaviorChanged();\r\n    hypergrid.canvas.paintNow();\r\n}\r\n\r\nfunction style_element() {\r\n    if (this[HYPERGRID_INSTANCE]) {\r\n        const element = this[HYPERGRID_INSTANCE];\r\n        clear_styles(element);\r\n        const styles = get_styles(element);\r\n        if (element.grid) {\r\n            element.grid.addProperties(styles[\"\"]);\r\n        }\r\n        element.grid.behavior.createColumns();\r\n        element.grid.canvas.paintNow();\r\n    }\r\n}\r\n\r\nfunction get_hypergrid() {\r\n    return this[HYPERGRID_INSTANCE] ? this[HYPERGRID_INSTANCE].grid : undefined;\r\n}\r\n\r\n/**\r\n * Create a new <perspective-hypergrid> web component, and attach it to the DOM.\r\n *\r\n * @param {HTMLElement} div Attachment point.\r\n */\r\nasync function getOrCreateHypergrid(div) {\r\n    let perspectiveHypergridElement;\r\n    if (!get_hypergrid.call(this)) {\r\n        perspectiveHypergridElement = this[HYPERGRID_INSTANCE] = document.createElement(\"perspective-hypergrid\");\r\n        perspectiveHypergridElement.setAttribute(\"tabindex\", 1);\r\n        perspectiveHypergridElement.addEventListener(\"blur\", () => {\r\n            if (perspectiveHypergridElement.grid && !perspectiveHypergridElement.grid._is_editing) {\r\n                perspectiveHypergridElement.grid.selectionModel.clear(true); //keepRowSelections = true\r\n                perspectiveHypergridElement.grid.paintNow();\r\n            }\r\n        });\r\n    } else {\r\n        perspectiveHypergridElement = this[HYPERGRID_INSTANCE];\r\n    }\r\n\r\n    if (!perspectiveHypergridElement.isConnected) {\r\n        div.innerHTML = \"\";\r\n        div.appendChild(perspectiveHypergridElement);\r\n        await new Promise(resolve => setTimeout(resolve));\r\n        perspectiveHypergridElement.grid.canvas.resize(false);\r\n    }\r\n    return perspectiveHypergridElement;\r\n}\r\n\r\nfunction suppress_paint(hypergrid, f) {\r\n    const canvas = hypergrid.divCanvas;\r\n    hypergrid.divCanvas = undefined;\r\n    f();\r\n    hypergrid.divCanvas = canvas;\r\n}\r\n\r\nasync function grid_create(div, view, task, max_rows, max_cols, force) {\r\n    let hypergrid = get_hypergrid.call(this);\r\n    if (hypergrid) {\r\n        hypergrid.behavior.dataModel._view = undefined;\r\n        hypergrid.behavior.dataModel._table = undefined;\r\n        suppress_paint(hypergrid, () => hypergrid.allowEvents(false));\r\n    }\r\n\r\n    const config = await view.get_config();\r\n\r\n    if (task.cancelled) {\r\n        return;\r\n    }\r\n    const colPivots = config.column_pivots;\r\n    const rowPivots = config.row_pivots;\r\n    const data_window = {\r\n        start_row: 0,\r\n        end_row: 1,\r\n        id: rowPivots.length === 0 && colPivots.length === 0\r\n    };\r\n\r\n    const [nrows, json, schema, tschema, all_columns] = await Promise.all([view.num_rows(), view.to_columns(data_window), view.schema(), this._table.schema(), view.column_paths()]);\r\n\r\n    if (task.cancelled) {\r\n        return;\r\n    }\r\n\r\n    let perspectiveHypergridElement = await getOrCreateHypergrid.call(this, div);\r\n    hypergrid = get_hypergrid.call(this);\r\n\r\n    if (task.cancelled) {\r\n        return;\r\n    }\r\n\r\n    const columns = all_columns.filter(x => x !== \"__INDEX__\");\r\n    const dataModel = hypergrid.behavior.dataModel;\r\n    dataModel._grid = hypergrid;\r\n\r\n    dataModel.setIsTree(rowPivots.length > 0);\r\n    dataModel.setDirty(nrows);\r\n    dataModel.clearSelectionState();\r\n    dataModel._view = view;\r\n    dataModel._table = this._table;\r\n    dataModel._config = config;\r\n    dataModel._viewer = this;\r\n    dataModel._columns = columns;\r\n    dataModel._pad_window = this.hasAttribute(\"settings\");\r\n\r\n    hypergrid.renderer.needsComputeCellsBounds = true;\r\n    suppress_paint(hypergrid, () => perspectiveHypergridElement.set_data(json, schema, tschema, rowPivots, columns, force));\r\n    if (hypergrid.behavior.dataModel._outstanding) {\r\n        await hypergrid.behavior.dataModel._outstanding.req;\r\n    }\r\n\r\n    if (this._plugin_config) {\r\n        suppress_paint(hypergrid, () => dataModel.setSelectedRowID(this._plugin_config.selected));\r\n        delete this._plugin_config;\r\n    }\r\n\r\n    await hypergrid.canvas.resize(true);\r\n    hypergrid.allowEvents(true);\r\n}\r\n\r\nconst plugin = {\r\n    name: \"Grid\",\r\n    create: grid_create,\r\n    selectMode: \"toggle\",\r\n    update: grid_update,\r\n    deselectMode: \"pivots\",\r\n    styleElement: style_element,\r\n    save: function() {\r\n        const hypergrid = get_hypergrid.call(this);\r\n        if (hypergrid && hypergrid.selectionModel.hasRowSelections()) {\r\n            return {selected: hypergrid.behavior.dataModel.getSelectedRowID()};\r\n        }\r\n    },\r\n    restore: function(config) {\r\n        this._plugin_config = config;\r\n    },\r\n    resize: async function() {\r\n        const hypergrid = get_hypergrid.call(this);\r\n        if (hypergrid) {\r\n            let nrows = await this._view.num_rows();\r\n            hypergrid.behavior.dataModel.setDirty(nrows);\r\n            await hypergrid.canvas.resize(true);\r\n        }\r\n    },\r\n    delete: function() {\r\n        const hypergrid = get_hypergrid.call(this);\r\n        if (hypergrid) {\r\n            hypergrid.terminate();\r\n            hypergrid.div = undefined;\r\n            hypergrid.canvas.div = undefined;\r\n            hypergrid.canvas.canvas = undefined;\r\n            hypergrid.sbVScroller = undefined;\r\n            hypergrid.sbHScroller = undefined;\r\n            delete this[HYPERGRID_INSTANCE];\r\n        }\r\n    }\r\n};\r\n\r\nregisterPlugin(\"hypergrid\", plugin);\r\n","/* eslint-env browser */\n\n'use strict';\n\nvar API;\n\nfunction clearFill(x, y, width, height, color) {\n    var a = alpha(color);\n    if (a < 1) {\n        // If background is translucent, we must clear the rect before the fillRect\n        // below to prevent mixing with previous frame's render of this cell.\n        this.clearRect(x, y, width, height);\n    }\n    if (a > 0) {\n        this.cache.fillStyle = color;\n        this.fillRect(x, y, width, height);\n    }\n}\n\nvar ALPHA_REGEX = /^(transparent|((RGB|HSL)A\\(.*,\\s*([\\d\\.]+)\\)))$/i;\n// Tried using an `alphaCache` here but it didn't make a measurable difference.\nfunction alpha(cssColorSpec) {\n    var matches, result;\n\n    if (!cssColorSpec) {\n        // undefined so not visible; treat as transparent\n        result = 0;\n    } else if ((matches = cssColorSpec.match(ALPHA_REGEX)) === null) {\n        // an opaque color (a color spec with no alpha channel)\n        result = 1;\n    } else if (matches[4] === undefined) {\n        // cssColorSpec must have been 'transparent'\n        result = 0;\n    } else {\n        result = Number(matches[4]);\n    }\n\n    return result;\n}\n\nvar fontMetrics = {};\n\n/**\n * Accumulates width of string in pixels, character by character, by chaching character widths and reusing those values when previously cached.\n *\n * NOTE: There is a minor measuring error when taking the sum of the pixel widths of individual characters that make up a string vs. the pixel width of the string taken as a whole. This is possibly due to kerning or rounding. The error is typically about 0.1%.\n * @memberOf module:defaults\n * @param {CanvasRenderingContext2D} gc\n * @param {string} string - Text to measure.\n * @returns {nubmer} Width of string in pixels.\n */\nfunction getTextWidth(string) {\n    var metrics = fontMetrics[this.cache.font] = fontMetrics[this.cache.font] || {};\n    string += '';\n    for (var i = 0, sum = 0, len = string.length; i < len; ++i) {\n        var c = string[i];\n        sum += metrics[c] = metrics[c] || this.measureText(c).width;\n    }\n    return sum;\n}\n\nvar ELLIPSIS = '\\u2026'; // The \"\" (dot-dot-dot) character\n\n/**\n * Similar to `getTextWidth` except:\n * 1. Aborts accumulating when sum exceeds given `width`.\n * 2. Returns an object containing both the truncated string and the sum (rather than a number primitive containing the sum alone).\n * @param {CanvasRenderingContext2D} gc\n * @param {string} string - Text to measure.\n * @param {number} width - Width of target cell; overflow point.\n * @param {boolean|null|undefined} truncateTextWithEllipsis - _Per {@link module:defaults.truncateTextWithEllipsis}._\n * @param {boolean} [abort=false] - Abort measuring upon overflow. Returned `width` sum will reflect truncated string rather than untruncated string. Note that returned `string` is truncated in either case.\n * @returns {{string:string,width:number}}\n * * `object.string` - `undefined` if it fits; truncated version of provided `string` if it does not.\n * * `object.width` - Width of provided `string` if it fits; width of truncated string if it does not.\n */\nfunction getTextWidthTruncated(string, width, truncateTextWithEllipsis, abort) {\n    var metrics = fontMetrics[this.cache.font],\n        truncating = truncateTextWithEllipsis !== undefined,\n        truncString, truncWidth, truncAt;\n\n    if (!metrics) {\n        metrics = fontMetrics[this.cache.font] = {};\n        metrics[ELLIPSIS] = this.measureText(ELLIPSIS).width;\n    }\n\n    string += ''; // convert to string\n    width += truncateTextWithEllipsis === false ? 2 : -1; // fudge for inequality\n    for (var i = 0, sum = 0, len = string.length; i < len; ++i) {\n        var char = string[i];\n        var charWidth = metrics[char] = metrics[char] || this.measureText(char).width;\n        sum += charWidth;\n        if (!truncString && truncating && sum > width) {\n            truncAt = i;\n            switch (truncateTextWithEllipsis) {\n                case true: // truncate sufficient characters to fit ellipsis if possible\n                    truncWidth = sum - charWidth + metrics[ELLIPSIS];\n                    while (truncAt && truncWidth > width) {\n                        truncWidth -= metrics[string[--truncAt]];\n                    }\n                    truncString = truncWidth > width\n                        ? '' // not enough room even for ellipsis\n                        : truncString = string.substr(0, truncAt) + ELLIPSIS;\n                    break;\n                case false: // truncate *before* last partially visible character\n                    truncString = string.substr(0, truncAt);\n                    break;\n                default: // truncate *after* partially visible character\n                    if (++truncAt < string.length) {\n                        truncString = string.substr(0, truncAt);\n                    }\n            }\n            if (abort) { break; }\n        }\n    }\n    return {\n        string: truncString,\n        width: sum\n    };\n}\n\nvar fontData = {};\n\n/**\n * @memberOf module:defaults\n * @param font\n * @returns {*}\n */\nfunction getTextHeight(font) {\n    var result = fontData[font];\n\n    if (!result) {\n        result = {};\n\n        var text = document.createElement('span');\n        text.textContent = 'Hg';\n        text.style.font = font;\n\n        var block = document.createElement('div');\n        block.style.display = 'inline-block';\n        block.style.width = '1px';\n        block.style.height = '0px';\n\n        var div = document.createElement('div');\n        div.appendChild(text);\n        div.appendChild(block);\n\n        div.style.position = 'absolute';\n        document.body.appendChild(div);\n\n        try {\n\n            block.style.verticalAlign = 'baseline';\n\n            var blockRect = block.getBoundingClientRect();\n            var textRect = text.getBoundingClientRect();\n\n            result.ascent = blockRect.top - textRect.top;\n\n            block.style.verticalAlign = 'bottom';\n            result.height = blockRect.top - textRect.top;\n\n            result.descent = result.height - result.ascent;\n\n        } finally {\n            document.body.removeChild(div);\n        }\n        if (result.height !== 0) {\n            fontData[font] = result;\n        }\n    }\n\n    return result;\n}\n\nfunction clipSave(conditional, x, y, width, height) {\n    this.conditionalsStack.push(conditional);\n    if (conditional) {\n        this.cache.save();\n        this.beginPath();\n        this.rect(x, y, width, height);\n        this.clip();\n    }\n}\n\nfunction clipRestore(conditional) {\n    if (this.conditionalsStack.pop()) {\n        this.cache.restore(); // Remove clip region\n    }\n}\n\nAPI = {\n    clearFill: clearFill,\n    alpha: alpha,\n    getTextWidth: getTextWidth,\n    getTextWidthTruncated: getTextWidthTruncated,\n    getTextHeight: getTextHeight,\n    clipSave: clipSave,\n    clipRestore: clipRestore,\n    truncateTextWithEllipsis: true\n};\n\nmodule.exports = API;\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\nimport {get_type_config, get_types} from \"@finos/perspective/dist/esm/config\";\n\nexport function get_style(elem, name) {\n    let value;\n    if (window.ShadyCSS) {\n        value = window.ShadyCSS.getComputedStyleValue(elem, name);\n    } else {\n        value = getComputedStyle(elem).getPropertyValue(name);\n    }\n    if (value.trim() === \"\") {\n        return undefined;\n    }\n    return value;\n}\n\nfunction get_measure(elem, name) {\n    let value;\n    if (window.ShadyCSS) {\n        value = window.ShadyCSS.getComputedStyleValue(elem, name);\n    } else {\n        value = getComputedStyle(elem).getPropertyValue(name);\n    }\n    if (value.trim() === \"\") {\n        return undefined;\n    }\n    return parseInt(value);\n}\n\nfunction get_font(elem, title) {\n    if (title.length > 0) {\n        title += \"--\";\n    }\n    const font_size = get_style(elem, `${title}font-size`);\n    const font_family = get_style(elem, `${title}font-family`);\n\n    // FIXME this sucks but it is difficult to partially apply fonts in\n    // Hypergrid's API Fonts will not be picked up unless both font-size and\n    // font-family are defined for a specific scope.\n    if (!font_size || !font_family) {\n        return undefined;\n    }\n    return `${font_size} ${font_family}`;\n}\n\nfunction copy_defined(source, dest, f) {\n    for (const key of Object.keys(source)) {\n        const val = source[key];\n        if (Array.isArray(val) && f) {\n            for (const candidate of val) {\n                const style = f(candidate);\n                if (style !== undefined) {\n                    dest[key] = style;\n                    break;\n                }\n            }\n        } else if (typeof val === \"string\" && f) {\n            const style = f(val);\n            if (style !== undefined) {\n                dest[key] = style;\n            }\n        } else if (typeof val === \"object\") {\n            dest[key] = dest[key] || {};\n            copy_defined(val, dest[key], f);\n        } else {\n            dest[key] = val;\n        }\n    }\n}\n\nfunction calc_rec(result, type, elem, types, iter, f) {\n    result[type] = result[type] || {};\n    for (const props of iter) {\n        copy_defined(props, result[type], name => f(elem, name));\n        for (const parent of types[type]) {\n            copy_defined(props, result[type], name => f(elem, `--${parent}${name}`));\n        }\n    }\n}\n\nfunction get_type_deps() {\n    const types = {\"\": []};\n    for (const type of get_types()) {\n        types[type] = [];\n        let parent = type;\n        while (parent && parent.length) {\n            types[type].unshift(parent);\n            parent = get_type_config(parent).type;\n        }\n    }\n    return types;\n}\n\nconst STYLE_PROPERTIES = Symbol(\"Perspective Style Properties\");\n\nexport class PropsBuilder {\n    constructor() {\n        this._staged_props = [];\n        this._staged_fonts = [];\n        this._staged_measures = [];\n    }\n\n    add_measures(props) {\n        this._staged_measures.push(props);\n        this._initialized = false;\n    }\n\n    add_styles(props) {\n        this._staged_props.push(props);\n        this._initialized = false;\n    }\n\n    add_fonts(props) {\n        this._staged_fonts.push(props);\n        this._initialized = false;\n    }\n\n    clear_properties(elem) {\n        delete elem[STYLE_PROPERTIES];\n    }\n\n    get_properties(elem) {\n        if (!elem[STYLE_PROPERTIES]) {\n            const types = get_type_deps();\n            const result = (elem[STYLE_PROPERTIES] = {});\n            calc_rec(result, \"\", elem, types, this._staged_measures, get_measure);\n            calc_rec(result, \"\", elem, types, this._staged_props, get_style);\n            calc_rec(result, \"\", elem, types, this._staged_fonts, get_font);\n            for (const type of get_types()) {\n                calc_rec(result, type, elem, types, this._staged_measures, get_measure);\n                calc_rec(result, type, elem, types, this._staged_props, get_style);\n                calc_rec(result, type, elem, types, this._staged_fonts, get_font);\n            }\n        }\n        return elem[STYLE_PROPERTIES];\n    }\n}\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * The default settings which populate `perspective.config.js`.\n */\nmodule.exports.default = {\n    /**\n     * `types` are the type-specific configuration options.  Each key is the\n     * name of a perspective type; their values are configuration objects for\n     * that type.\n     */\n    types: {\n        float: {\n            /**\n             * Which filter operator should be the default when a column of this\n             * type is pivotted.\n             */\n            filter_operator: \"==\",\n\n            /**\n             * Which aggregate should be the default when a column of this type\n             * is pivotted.\n             */\n            aggregate: \"sum\",\n\n            /**\n             * The format object for this type.  Can be either an\n             * `toLocaleString()` `options` object for this type (or supertype),\n             * or a function which returns the formatted string for this type.\n             */\n            format: {\n                style: \"decimal\",\n                minimumFractionDigits: 2,\n                maximumFractionDigits: 2\n            }\n        },\n        string: {\n            filter_operator: \"==\",\n            aggregate: \"count\"\n        },\n        integer: {\n            filter_operator: \"==\",\n            aggregate: \"sum\",\n            format: {}\n        },\n        boolean: {\n            filter_operator: \"==\",\n            aggregate: \"count\"\n        },\n        datetime: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                week: \"numeric\",\n                year: \"numeric\",\n                month: \"numeric\",\n                day: \"numeric\",\n                hour: \"numeric\",\n                minute: \"numeric\",\n                second: \"numeric\"\n            },\n            null_value: -1\n        },\n        date: {\n            filter_operator: \"==\",\n            aggregate: \"count\",\n            format: {\n                week: \"numeric\",\n                year: \"numeric\",\n                month: \"numeric\",\n                day: \"numeric\"\n            },\n            null_value: -1\n        }\n    }\n};\n","module.exports.default = function() {}","'use strict';\n\n// console.warn polyfill as needed\n// used for deprecation warnings\nif (!console.warn) {\n    console.warn = function() {\n        console.log.apply(console, ['WARNING:'].concat(Array.prototype.slice.call(arguments)));\n    };\n}\n\nvar regexIsMethod = /^[\\w\\.]+\\(.*\\)$/;\n\n/**\n * User is warned and new property is returned or new method is called and the result is returned.\n * @param {string} methodName - Warning key paired with arbitrary warning in `dotProps` OR deprecated method name with parentheses containing optional argument list paired with replacement property or method in `dotProps`.\n * @param {string} dotProps - Arbitrary warning paired with warning key in `methodName` OR dot-separated new property name to invoke or method name to call. Method names are indicated by including parentheses with optional argument list. The arguments in each list are drawn from the arguments presented in the `methodName` parameter.\n * @param {string} since - Version in which the name was deprecated.\n * @param {Arguments|Array} [args] - The actual arguments in the order listed in `methodName`. Only needed when arguments need to be forwarded.\n * @param {string} [notes] - Notes to add to message.\n * @returns {*} Return value of new property or method call.\n */\nvar deprecated = function(methodName, dotProps, since, args, notes) {\n    if (typeof args === 'string') {\n        // `args` omitted\n        notes = args;\n        args = undefined;\n    }\n\n    var chain = dotProps.split('.'),\n        warned = this.$$DEPRECATION_WARNED = this.$$DEPRECATION_WARNED || {},\n        result = this,\n        isSimpleWarning = dotProps.indexOf(' ') >= 0,\n        isMethodCall = regexIsMethod.test(methodName),\n        memberType,\n        warning;\n\n    if (!(methodName in warned)) {\n        warned[methodName] = deprecated.warnings;\n    }\n\n    if (isMethodCall) {\n        if (isSimpleWarning) {\n            throw 'Expected replacement method or property in 2nd parameter of deprecated() call.';\n        } else if (warned[methodName]) {\n            --warned[methodName];\n            memberType = regexIsMethod.test(dotProps) ? 'method' : 'property';\n            warning = 'The .' + methodName + ' method has been deprecated as of v' + since +\n                ' in favor of the .' + chain.join('.') + ' ' + memberType + '.' +\n                ' (Will be removed in a future release.)';\n\n            if (notes) {\n                warning += ' ' + notes;\n            }\n\n            console.warn(warning);\n        }\n    } else if (isSimpleWarning) {\n        if (warned[methodName]) {\n            --warned[methodName];\n            console.warn(dotProps);\n        }\n        return;\n    } else {\n        throw 'Expected method name with parentheses in 1st parameter OR simple warning (containing one or more spaces) in 2nd parameter of deprecated() call.';\n    }\n\n    var formalArgList = argList(methodName);\n\n    function mapToFormalArg(argName) {\n        var index = formalArgList.indexOf(argName);\n        if (index === -1) {\n            throw 'Actual arg \"' + argName + '\" not found in formal arg list ' + formalArgList;\n        }\n        return args[index];\n    }\n\n    for (var i = 0, last = chain.length - 1; i <= last; ++i) {\n        var link = chain[i],\n            name = link.match(/\\w+/)[0],\n            linkIsMethodCall = regexIsMethod.test(link),\n            actualArgList = linkIsMethodCall ? argList(link) : undefined,\n            actualArgs = [];\n\n        if (actualArgList) {\n            actualArgs = actualArgList.map(mapToFormalArg);\n            result = result[name].apply(result, actualArgs);\n        } else if (linkIsMethodCall) {\n            result = result[name]();\n        } else {\n            result = result[name];\n        }\n    }\n\n    return result;\n};\n\ndeprecated.warnings = 1; // 3 or 5 would get more attention\n\nfunction argList(s) {\n    return s.match(/^\\w+\\((.*)\\)$/)[1].match(/(\\w+)/g);\n}\n\nmodule.exports = deprecated;\n","/* eslint-env browser */\n\n/** @module effects */\n\n/** @typedef {function} effectFunction\n * @desc Element to perform transitions upon is `options.el` if defined or `this.el`.\n * @param {object} [options]\n * @param {HTMLElement} [options.el=this.el]\n * @param {function} [options.callback] Function to call at conclusion of transitions.\n * @param {string} [options.duration='0.065s'] - Duration of each transition.\n * @param {object} [options.styles=defaultGlowerStyles] - Hash of CSS styles and values to transition. (For {@link effects~glower|glower} only.\n */\n\n'use strict';\n\n/**\n * Shake element back and fourth a few times as if to say, \"Nope!\"\n * @type {effectFunction}\n * @memberOf module:effects\n */\nexports.shaker = function(options) {\n    options = options || {};\n    var context = this,\n        el = options.el || context.el,\n        duration = options.duration || '0.065s',\n        computedStyle = window.getComputedStyle(el),\n        transitions = computedStyle.transition.split(','),\n        position = computedStyle.position,\n        x = parseInt(computedStyle.left),\n        dx = -3,\n        shakes = 6;\n\n    transitions.push('left ' + duration);\n    el.style.transition = transitions.join(',');\n    el.addEventListener('transitionend', shaker);\n    shaker();\n    function shaker(event) {\n        if (!event || event.propertyName === 'left') {\n            el.style.left = x + dx + 'px';\n            if (!shakes--) {\n                el.removeEventListener('transitionend', shaker);\n                transitions.pop();\n                el.style.transition = transitions.join(',');\n                el.style.position = position;\n                if (options.callback) {\n                    options.callback.call(context, options);\n                }\n            }\n            dx = shakes ? -dx : 0;\n        }\n    }\n};\n\nvar defaultGlowerStyles = {\n    'background-color': 'yellow',\n    'box-shadow': '0 0 10px red'\n};\n\n/**\n * Transition styles on element for a moment and revert as if to say, \"Whoa!.\"\n * @type {effectFunction}\n * @memberOf module:effects\n */\nexports.glower = function(options) {\n    options = options || {};\n    var context = this,\n        el = options.el || context.el,\n        duration = options.duration || '0.25s',\n        styles = options.styles || defaultGlowerStyles,\n        values = styles.length,\n        computedStyle = window.getComputedStyle(el),\n        styleWas = {},\n        transition = computedStyle.transition,\n        transitions = transition.split(',');\n\n    Object.keys(styles).forEach(function(style) {\n        styleWas[style] = {\n            style: computedStyle[style],\n            undo: true\n        };\n        transitions.push(style + ' ' + duration);\n    });\n\n    el.style.transition = transitions.join(',');\n    el.addEventListener('transitionend', glower);\n    Object.keys(styles).forEach(function(style) {\n        el.style[style] = styles[style];\n    });\n\n    function glower(event) {\n        var was = styleWas[event.propertyName];\n        if (was.undo) {\n            el.style[event.propertyName] = was.style;\n            was.undo = false;\n        } else if (!--values) {\n            el.removeEventListener('transitionend', glower);\n            el.style.transition = transition;\n            if (options.callback) {\n                options.callback.call(context, options);\n            }\n        }\n    }\n};\n","/* eslint-env browser */\n\n'use strict';\n\nvar overrider = require('overrider');\n\nvar toFunction = require('../lib/toFunction');\nvar assignOrDelete = require('../lib/assignOrDelete');\nvar HypergridError = require('../lib/error');\nvar images = require('../../images');\n\n\nvar warned = {};\n\n\n/** @summary Create a new `Column` object.\n * @mixes cellProperties.columnMixin\n * @mixes columnProperties.mixin\n * @constructor\n * @param {Behavior} behavior\n * @param {object} columnSchema\n * @param {number} columnSchema.index\n * @param {string} columnSchema.name\n * @param {string} [columnSchema.header] - Displayed in column headers. If not defined, name is used.\n * @param {function} [columnSchema.calculator] - Define to make a computed column.\n * @param {string} [columnSchema.type] - For possible data model use. (Not used in core.)\n *\n * Positive values of `index` are \"real\" fields.\n *\n * Negative values of `index` are special cases:\n * `index` | Meaning\n * :-----: | --------\n *    -2   | Row header column\n *    -1   | Tree (drill-down) column\n */\nfunction Column(behavior, columnSchema) {\n    switch (typeof columnSchema) {\n        case 'number':\n            if (!warned.number) {\n                console.warn('Column(behavior: object, index: number) overload has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)');\n                warned.number = true;\n            }\n            columnSchema = {\n                index: columnSchema\n            };\n            break;\n        case 'string':\n            if (!warned.string) {\n                console.warn('Column(behavior:object, name: string) overload (where name is sought in schema) has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)');\n                warned.string = true;\n            }\n            var name, index;\n            name = columnSchema;\n            index = behavior.dataModel.schema.findIndex(function(columnSchema) {\n                return columnSchema.name === name;\n            });\n            if (index < 0) {\n                throw new this.HypergridError('Column named \"' + name + '\" not found in schema.');\n            }\n            columnSchema = {\n                name: name,\n                index: index\n            };\n            break;\n        case 'object':\n            if (columnSchema.index === undefined) {\n                if (!warned.object) {\n                    console.warn('Column(behavior:object, columnSchema: object) overload (where columnSchema.index is undefined but columnSchema.name is sought in schema) has been deprecated as of v2.1.6 in favor of defined columnSchema.index. (Will be removed in a future release.)');\n                    warned.object = true;\n                }\n                name = columnSchema.name;\n                index = behavior.dataModel.schema.findIndex(function(columnSchema) {\n                    return columnSchema.name === name;\n                });\n                if (index < 0) {\n                    throw new this.HypergridError('Column named \"' + name + '\" not found in schema.');\n                }\n                columnSchema.index = index;\n            }\n            break;\n    }\n\n    if (columnSchema.index === undefined) {\n        throw new HypergridError('Column index required.');\n    }\n\n    this.behavior = behavior;\n    this.dataModel = behavior.dataModel;\n\n    // set `index` and `name` as read-only properties\n    Object.defineProperties(this, {\n        index: {\n            value: columnSchema.index\n        },\n        name: {\n            enumerable: true,\n            value: columnSchema.name || columnSchema.index.toString()\n        }\n    });\n\n    this.properties = this.schema = columnSchema; // see {@link Column#properties properties} setter\n\n    switch (columnSchema.index) {\n        case this.behavior.treeColumnIndex:\n            // Width of icon + 3-pixel spacer (checked and unchecked should be same width)\n            var icon = images[Object.create(this.properties.treeHeader, { isDataRow: { value: true } }).leftIcon];\n            this.properties.minimumColumnWidth = icon ? icon.width + 3 : 0;\n            break;\n\n        case this.behavior.rowColumnIndex:\n            break;\n\n        default:\n            if (columnSchema.index < 0) {\n                throw new this.HypergridError('New column index ' + columnSchema.index + ' out of range.');\n            }\n    }\n}\n\nColumn.prototype = {\n    constructor: Column.prototype.constructor,\n    $$CLASS_NAME: 'Column',\n\n    HypergridError: HypergridError,\n\n    mixIn: overrider.mixIn,\n\n    /**\n     * @summary Get or set the text of the column's header.\n     * @desc The _header_ is the label at the top of the column.\n     *\n     * Setting the header updates both:\n     * * the `schema` (aka, header) array in the underlying data source; and\n     * * the filter.\n     * @type {string}\n     */\n    set header(header) {\n        this.schema.header = header;\n    },\n    get header() {\n        return this.schema.header;\n    },\n\n    /**\n     * @summary Get or set the computed column's calculator function.\n     * @desc Setting the value here updates the calculator in the data model schema.\n     *\n     * The results of the new calculations will appear in the column cells on the next repaint.\n     * @type {string}\n     */\n    set calculator(calculator) {\n        calculator = resolveCalculator.call(this, calculator);\n        if (calculator !== this.schema.calculator) {\n            this.schema.calculator = calculator;\n            this.behavior.grid.reindex();\n        }\n    },\n    get calculator() {\n        return this.schema.calculator;\n    },\n\n    /**\n     * @summary Get or set the type of the column's header.\n     * @desc Setting the type updates the filter which typically uses this information for proper collation.\n     *\n     * @todo: Instead of using `this._type`, put on data source like the other essential properties. In this case, sorter could use the info to choose a comparator more intelligently and efficiently.\n     * @type {string}\n     */\n    set type(type) {\n        this.schema.type = type;\n        this.behavior.reindex();\n    },\n    get type() {\n        return this.schema.type;\n    },\n\n    getValue: function(y, dataModel) {\n        return this.dataModel.getValue(this.index, y, dataModel);\n    },\n\n    setValue: function(y, value, dataModel) {\n        return this.dataModel.setValue(this.index, y, value, dataModel);\n    },\n\n    getWidth: function() {\n        return this.properties.width || this.behavior.grid.properties.defaultColumnWidth;\n    },\n\n    setWidth: function(width) {\n        width = Math.min(Math.max(this.properties.minimumColumnWidth, width), this.properties.maximumColumnWidth || Infinity);\n        if (width !== this.properties.width) {\n            this.properties.width = width;\n            this.properties.columnAutosizing = false;\n        }\n    },\n\n    checkColumnAutosizing: function(force) {\n        var properties = this.properties,\n            width, preferredWidth, autoSized;\n\n        if (properties.columnAutosizing) {\n            width = properties.width;\n            preferredWidth = properties.preferredWidth || width;\n            force = force || !properties.columnAutosized;\n            if (width !== preferredWidth || force && preferredWidth !== undefined) {\n                properties.width = force ? preferredWidth : Math.max(width, preferredWidth);\n                if (properties.columnAutosizingMax && properties.width > properties.columnAutosizingMax) {\n                    properties.width = properties.columnAutosizingMax;\n                }\n                properties.columnAutosized = !isNaN(properties.width);\n                autoSized = properties.width !== width;\n            }\n        }\n\n        return autoSized;\n    },\n\n    getCellType: function(y) {\n        var value = this.getValue(y);\n        return this.typeOf(value);\n    },\n\n    getType: function() {\n        var props = this.properties;\n        var type = props.type;\n        if (!type) {\n            type = this.computeColumnType();\n            if (type !== 'unknown') {\n                props.type = type;\n            }\n        }\n        return type;\n    },\n\n    computeColumnType: function() {\n        var headerRowCount = this.behavior.getHeaderRowCount();\n        var height = this.behavior.getRowCount();\n        var value = this.getValue(headerRowCount);\n        var eachType = this.typeOf(value);\n        if (!eachType) {\n            return 'unknown';\n        }\n        var type = this.typeOf(value);\n        //var isNumber = ((typeof value) === 'number');\n        for (var y = headerRowCount; y < height; y++) {\n            value = this.getValue(y);\n            eachType = this.typeOf(value);\n            // if (type !== eachType) {\n            //     if (isNumber && (typeof value === 'number')) {\n            //         type = 'float';\n            //     } else {\n            //         return 'mixed';\n            //     }\n            // }\n        }\n        return type;\n    },\n\n    typeOf: function(something) {\n        if (something == null) {\n            return null;\n        }\n        var typeOf = typeof something;\n        switch (typeOf) {\n            case 'object':\n                return something.constructor.name.toLowerCase();\n            case 'number':\n                return parseInt(something) === something ? 'int' : 'float';\n            default:\n                return typeOf;\n        }\n    },\n\n    get properties() {\n        return this._properties;\n    },\n    set properties(properties) {\n        this.addProperties(properties, true);\n    },\n\n    /**\n     * Copy a properties collection to this column's properties object.\n     *\n     * When a value is `undefined` or `null`, the property is deleted except when a setter or non-configurable in which case it's set to `undefined`.\n     * @param {object|undefined} properties - Properties to copy to column's properties object. If `undefined`, this call is a no-op.\n     * @param {boolean} [settingState] - Clear column's properties object before copying properties.\n     */\n    addProperties: function(properties, settingState) {\n        if (!properties) {\n            return;\n        }\n        if (settingState || !this._properties) {\n            this._properties = this.createColumnProperties();\n        }\n        assignOrDelete(this._properties, properties);\n    },\n\n    /** This method is provided because some grid renderer optimizations require that the grid renderer be informed when column colors change. Due to performance concerns, they cannot take the time to figure it out for themselves. Along the same lines, making the property a getter/setter (in columnProperties.js), though doable, might present performance concerns as this property is possibly the most accessed of all column properties.\n     * @param color\n     */\n    setBackgroundColor: function(color) {\n        if (this.properties.backgroundColor !== color) {\n            this.properties.backgroundColor = color;\n            this.behavior.grid.renderer.rebundleGridRenderers();\n        }\n    },\n\n    /**\n     * @summary Get a new cell editor.\n     * @desc The cell editor to use must be registered with the key in the cell's `editor` property.\n     *\n     * The cell's `format` property is mixed into the provided cellEvent for possible overriding by developer's override of {@link DataModel.prototype.getCellEditorAt} before being used by {@link CellEditor} to parse and format the cell value.\n     *\n     * @param {CellEvent} cellEvent\n     *\n     * @returns {undefined|CellEditor} Falsy value means either no declared cell editor _or_ instantiation aborted by falsy return from `fireRequestCellEdit`.\n     */\n    getCellEditorAt: function(cellEvent) {\n        var columnIndex = this.index,\n\n            rowIndex = cellEvent.gridCell.y,\n\n            editorName = cellEvent.properties.editor,\n\n            options = Object.create(cellEvent, {\n                format: {\n                    // `options.format` is a copy of the cell's `format` property which is:\n                    // 1. Subject to adjustment by the `getCellEditorAt` override.\n                    // 2. Then used by the cell editor to reference the registered localizer (defaults to 'string' localizer)\n                    writable: true,\n                    enumerable: true, // so cell editor will copy it to self\n                    value: cellEvent.properties.format\n                }\n            }),\n\n            cellEditor = cellEvent.subgrid.getCellEditorAt(columnIndex, rowIndex, editorName, options);\n\n        if (cellEditor && !cellEditor.grid) {\n            // cell editor returned but not fully instantiated (aborted by falsy return from fireRequestCellEdit)\n            cellEditor = undefined;\n        }\n\n        return cellEditor;\n    },\n\n    getFormatter: function() {\n        var localizerName = this.properties.format;\n        return this.behavior.grid.localization.get(localizerName).format;\n    }\n};\n\nvar REGEX_ARROW_FUNC = /^(\\(.*\\)|\\w+)\\s*=>/,\n    REGEX_NAMED_FUNC = /^function\\s+(\\w+)\\(/,\n    REGEX_ANON_FUNC = /^function\\s*\\(/;\n\n/**\n * Calculators are functions. Column calculators are saved in `grid.properties.calculators` using the function name as key. Anonymous functions use the stringified function itself as the key. This may seem pointless, but this achieves the objective here which is to share function instances.\n * @throws {HypergridError} Unexpected input.\n * @throws {HypergridError} Arrow function not permitted.\n * @throws {HypergridError} Unknown function.\n * @this {Column}\n * @param {function|string} calculator - One of:\n * * calculator function\n * * stringified calculator function with or without function name\n * * function name of a known function (already in `calculators`)\n * * falsy value\n * @returns {function} Shared calculator instance or `undefined` if input was falsy.\n */\nfunction resolveCalculator(calculator) {\n    if (!calculator) {\n        return undefined;\n    }\n\n    var forColumnName = ' (for column \"' + this.name + '\").';\n\n    if (typeof calculator === 'function') {\n        calculator = calculator.toString();\n    } else if (typeof calculator !== 'string') {\n        throw new HypergridError('Expected calculator function OR string containing calculator function OR calculator name' + forColumnName);\n    }\n\n    var matches, key,\n        calculators = this.behavior.grid.properties.calculators || (this.behavior.grid.properties.calculators = {});\n\n    if (/^\\w+$/.test(calculator)) { // just a function name?\n        // use as registry key but make sure it is in fact a registered calculator\n        key = calculator;\n        if (!calculators[key]) {\n            throw new HypergridError('Unknown calculator name \"' + key + forColumnName);\n        }\n\n    } else if ((matches = calculator.match(REGEX_NAMED_FUNC))) { // named stringified function?\n        // extract function name from stringified function to use as registry key\n        key = matches[1];\n\n    } else if (REGEX_ANON_FUNC.test(calculator)) { // anonymous stringified function?\n        // use entire anonymous stringified function as registry key\n        key = calculator;\n\n    } else if (REGEX_ARROW_FUNC.test(calculator)) {\n        throw new HypergridError('Arrow function not permitted as column calculator ' + forColumnName);\n    }\n\n    if (!calculators[key]) { // neither a string nor a function (previously functionified string)?\n        calculators[key] = calculator;\n    }\n\n    // functionify existing entries as well as new `calculators` entries\n    calculators[key] = toFunction(calculators[key]);\n\n    return calculators[key];\n}\n\nColumn.prototype.mixIn(require('./cellProperties').mixin);\nColumn.prototype.mixIn(require('./columnProperties').mixin);\n\nmodule.exports = Column;\n","'use strict';\n\nvar HypergridError = require('./error');\n\n/**\n * @param {function|string} string\n * @returns {function}\n * @private\n */\nmodule.exports = function(string) {\n    switch (typeof string) {\n        case 'undefined':\n        case 'function':\n            return string;\n        case 'string':\n            break;\n        default:\n            throw new HypergridError('Expected string, function, or undefined.');\n    }\n\n    var args = string.match(/^function\\s*\\w*\\s*\\(([^]*?)\\)/);\n    if (!args) {\n        throw new HypergridError('Expected function keyword with formal parameter list.');\n    }\n    args = args[1].split(',').map(function(s, i) {\n        s = s.match(/\\s*(\\w*)\\s*/); // trim each argument\n        if (!s && i) {\n            throw new HypergridError('Expected formal parameter.');\n        }\n        return s[1];\n    });\n\n    var body = string.match(/{\\s*([^]*?)\\s*}\\s*$/);\n    if (!body) {\n        throw new HypergridError('Expected function body.');\n    }\n    body = body[1];\n\n    if (args.length === 1 && !args[0]) {\n        args[0] = body;\n    } else {\n        args = args.concat(body);\n    }\n\n    return Function.apply(null, args);\n};\n","/* eslint-env browser */\n\n'use strict';\n\nvar PATTERN = '((data:image/svg\\\\+xml)(;\\\\w+)?(,)(.*)|(.*\\\\.svg))';\nvar regexDataSvg64 = new RegExp('^()' + PATTERN + '()$');\nvar regexUrlDataSvg64 = new RegExp('^(url\\\\(\")' + PATTERN + '(\"\\\\))$');\nvar MATCH_INDEX_WHOLE = 0,\n    MATCH_INDEX_URI = 2,\n    MATCH_INDEX_SCHEME = 3,\n    MATCH_INDEX_ENCODING = 4,\n    MATCH_INDEX_COMMA = 5,\n    MATCH_INDEX_DATA = 6,\n    MATCH_INDEX_SVG_FILE_URL = 7;\n\n// UMD accommodation\nvar api;\nif (typeof exports === 'undefined') {\n    window.svgThemer = api = {};\n} else {\n    api = exports;\n}\n\n// List of CSS properties accepting url(...) construct for image files (may be incomplete):\napi.cssImagePropertyNames = [\n    'background-image',\n    'list-style-image',\n    'border-image',\n    'content'\n];\n\n// prop setter \"standard implementation\"; override as needed\napi.setSvgProps = function(theme) {\n    if (theme.color) { this.style.stroke = this.style.color = theme.color; }\n    if (theme.backgroundColor) { this.style.fill = theme.backgroundColor; }\n};\n\napi.setImgSvgProps = function(theme, setSvgProps) {\n    if (this.tagName === 'IMG') {\n        var match = this.src.match(regexDataSvg64);\n        if (match) {\n            applyThemeToSvgData.call(this, match, theme, setSvgProps, function(imageData) {\n                this.src = imageData;\n            });\n        }\n    }\n    return this;\n};\n\napi.setRuleSvgProps = function(theme, setSvgProps, propName) {\n    var match;\n    var ruleProps = this.style;\n\n    if (typeof setSvgProps === 'string') {\n        propName = setSvgProps;\n        setSvgProps = undefined;\n    }\n\n    function matchProp(propName) {\n        return (match = ruleProps[propName].match(regexUrlDataSvg64));\n    }\n\n    if (propName) {\n        matchProp(propName);\n    } else {\n        // propName = api.cssImagePropertyNames.find(matchProp);\n        // avoiding .find() for IE11's sake\n        for (var i = 0; i < api.cssImagePropertyNames.length; ++i) {\n            propName = api.cssImagePropertyNames[i];\n            if (matchProp(propName)) {\n                break;\n            }\n        }\n    }\n\n    if (match) {\n        applyThemeToSvgData.call(this, match, theme, setSvgProps, function(urlImageData) {\n            ruleProps[propName] = urlImageData;\n        });\n    }\n\n    return this;\n};\n\nfunction applyThemeToSvgData(match, theme, setSvgProps, callback) {\n    var self = this;\n    if (match[MATCH_INDEX_SVG_FILE_URL]) {\n        get(match[MATCH_INDEX_SVG_FILE_URL], function(svgMarkup) {\n            // write back file data to object base64-encoded\n            match[MATCH_INDEX_SCHEME] = 'data:image/svg+xml';\n            match[MATCH_INDEX_ENCODING] = ';base64';\n            match[MATCH_INDEX_COMMA] = ',';\n            match[MATCH_INDEX_DATA] = svgMarkup;\n            match[MATCH_INDEX_SVG_FILE_URL] = '';\n            applyNow.call(self, match, theme, setSvgProps, callback);\n        });\n    } else {\n        applyNow.call(this, match, theme, setSvgProps, callback);\n    }\n}\n\nvar HTTP_STATE_DONE = 4, HTTP_STATUS_OK = 200;\nfunction get(url, callback) {\n    var httpRequest = new XMLHttpRequest();\n    httpRequest.open('GET', url, true);\n    httpRequest.onreadystatechange = function() {\n        if (\n            httpRequest.readyState === HTTP_STATE_DONE &&\n            httpRequest.status === HTTP_STATUS_OK\n        ) {\n            callback(httpRequest.responseText);\n        }\n    };\n    httpRequest.send(null);\n}\n\nfunction applyNow(match, theme, setSvgProps, callback) {\n    var encoding = match[MATCH_INDEX_ENCODING];\n    var data = match[MATCH_INDEX_DATA];\n    var div = document.createElement('div');\n\n    setSvgProps = setSvgProps || this.setSvgProps || api.setSvgProps;\n\n    switch (encoding) {\n        case undefined:\n            div.innerHTML = data.indexOf('%3C') >= 0 ? decodeURIComponent(data) : data;\n            setSvgProps.call(div.firstElementChild, theme);\n            var svgMarkup = (new XMLSerializer()).serializeToString(div.firstElementChild);\n            match[MATCH_INDEX_DATA] = encodeURIComponent(svgMarkup); // always encode result for IE11's sake\n            break;\n        case ';base64':\n            div.innerHTML = data.indexOf('<') < 0 ? atob(data) : data;\n            setSvgProps.call(div.firstElementChild, theme);\n            var svgMarkup = (new XMLSerializer()).serializeToString(div.firstElementChild);\n            match[MATCH_INDEX_DATA] = btoa(svgMarkup);\n            break;\n        default:\n            throw new TypeError('Unexpected encoding \"' + encoding + '\"');\n    }\n\n    match[MATCH_INDEX_WHOLE] = match[MATCH_INDEX_URI] = undefined; // omit from join\n    callback.call(this, match.join(''));\n}\n\napi.mixin = function(svgOrImgOrRule, setSvgProps) {\n    if (svgOrImgOrRule.tagName === 'svg') {\n        if (setSvgProps) {\n            svgOrImgOrRule.setTheme = setSvgProps;\n        } else {\n            Object.defineProperty(svgOrImgOrRule, 'setTheme', {\n                get: function() { return api.setSvgProps; }\n            });\n        }\n    } else if (svgOrImgOrRule.tagName === 'IMG') {\n        if (setSvgProps) {\n            svgOrImgOrRule.setSvgProps = setSvgProps;\n        }\n        svgOrImgOrRule.setTheme = api.setImgSvgProps;\n    } else if (svgOrImgOrRule == '[object CSSStyleRule]') { // eslint-disable-line eqeqeq\n        if (setSvgProps) {\n            svgOrImgOrRule.setSvgProps = setSvgProps;\n        }\n        svgOrImgOrRule.setTheme = api.setRuleSvgProps;\n    }\n    return svgOrImgOrRule;\n};","module.exports = {\n\t\"calendar\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAc0lEQVR4nIXQwQkCMRSE4U9ZLMCT9Xjaq2AfNhfYU5oQLMAOtoN48EWei5iBIRPe/yYQ3qrhf1lFG7iKcEaJxSfukUvMWgdHavt0uWHtg2QwxXnAnJZ2uOLyVZtybzzhgWNmfoFl0/YB87NbzR1cjP9xeQHSDC6mcL1xFQAAAABJRU5ErkJggg==\"\n\t},\n\t\"checked\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZmM0YjdjYS01N2U3LTRjZTUtYWE3Zi1kYmFjZTU0ODJmZjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OEQzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OEMzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphZjdjMDA1NS1mMzJlLTQ1NjAtOGQxOS1lYTU1NGVhNDkzMmEiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YmZiODQwOS03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PI8IaAAAAkFBMVEVOTk5NTU29vb1paWnPz8/AwMC7u7u5ublDQ0NSUlJFRUVfX1/IyMixsbHi4uKFhYXT09PDw8NXV1fKysrMzMxYWFhzc3N7e3ve3t6ioqK+vr7Ly8uhoaHa2tqysrKurq7s7Oyvr6/Jycm2trbt7e3X19fh4eG1tbW/v7+3t7fo6OhERES6urrW1tbd3d0AAADC/hfQAAAAMHRSTlP//////////////////////////////////////////////////////////////wBipdB4AAAAcElEQVR42hTIRRbDMAwAUYVTZoa4ZleyfP/btZrVfwOlq4l66utlge5lrbIqq0cL9JX07Onv8PZr791pvm8H+DBrbhBiTn9f4IzjjcW6Qhw3zNnAxLHChln+iq9xsRUPQNFlyYUjlF0KwZiQDuUnwACjfw8FagWYLwAAAABJRU5ErkJggg==\"\n\t},\n\t\"down-rectangle\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC\"\n\t},\n\t\"filter-off\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg==\"\n\t},\n\t\"filter-on\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII=\"\n\t},\n\t\"unchecked\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphNDQ3MTQ0Zi0wYmFmLTQ3YzMtYjBmNi1kODRlNDI0MjU4ZDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OTEzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OTAzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OWY2YWVhMC0xZjJkLTRjM2UtYTRiZi02MWYyMDNlMmI4YjciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2Nzk3NWVjNC03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ywX99AAAAYFBMVEW5ubm/v7/X19fLy8vp6ene3t69vb2xsbG6urq+vr6urq7a2tq4uLji4uLIyMjBwcHDw8PJycnPz8/V1dW1tbWvr6/t7e23t7e7u7vs7Oy2trbo6Ojh4eHW1tbd3d0AAAAm0pqPAAAAIHRSTlP/////////////////////////////////////////AFxcG+0AAABZSURBVHjaTIqHDoAgEEOLC9wL5RTP+/+/VIIxdCTNSyFjZQwR1YNAtftxhOQLUHjvQ68K+orqW2C7P7FL9okmrjLl5cv1/+lAKuOVmTObQyZ32tdulkeAAQCpggrEM7zMmAAAAABJRU5ErkJggg==\"\n\t},\n\t\"up-down-spin\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC\"\n\t},\n\t\"up-down\": {\n\t\ttype: \"image/png\",\n\t\tdata: \"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII=\"\n\t},\n};\n","'use strict';\n\nvar assignOrDelete = require('../lib/assignOrDelete');\n\n/**\n * Column.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n\n    /**\n     * @summary Get the properties object for cell.\n     * @desc This is the cell's own properties object if found; else the column object.\n     *\n     * If you are seeking a single specific property, consider calling {@link Column#getCellProperty} instead (which calls this method).\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @return {object} The properties of the cell at x,y in the grid.\n     * @memberOf Column#\n     */\n    getCellProperties: function(rowIndex, dataModel) {\n        return this.getCellOwnProperties(rowIndex, dataModel) || this.properties;\n    },\n\n    /**\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {object|undefined} properties - Hash of cell properties. If `undefined`, this call is a no-op.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @returns {*} New cell properties object, based on column properties object, with `properties` copied to it.\n     * @memberOf Column#\n     */\n    setCellProperties: function(rowIndex, properties, dataModel) {\n        if (properties) {\n            return Object.assign(newCellPropertiesObject.call(this, rowIndex, dataModel), properties);\n        }\n    },\n\n    /**\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {object|undefined} properties - Hash of cell properties. If `undefined`, this call is a no-op.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @returns {object} Cell's own properties object, which will be created by this call if it did not already exist.\n     * @memberOf Column#\n     */\n    addCellProperties: function(rowIndex, properties, dataModel) {\n        if (properties) {\n            return assignOrDelete(getCellPropertiesObject.call(this, rowIndex, dataModel), properties);\n        }\n    },\n\n    /**\n     * @summary Get the cell's own properties object.\n     * @desc Due to memory constraints, we don't create a cell properties object for every cell.\n     *\n     * If the cell has its own properties object, it:\n     * * was created by a previous call to `setCellProperties` or `setCellProperty`\n     * * has the column properties object as its prototype\n     * * is returned\n     *\n     * If the cell does not have its own properties object, this method returns `null`.\n     *\n     * Call this method only when you need to know if the the cell has its own properties object; otherwise call {@link Column#getCellProperties|getCellProperties}.\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @returns {null|object} The \"own\" properties of the cell at x,y in the grid. If the cell does not own a properties object, returns `null`.\n     * @memberOf Column#\n     */\n    getCellOwnProperties: function(rowIndex, dataModel) {\n        var metadata;\n        return (\n            // this.index >= 0 && // no cell props on row handle cells\n            (metadata = (dataModel || this.dataModel).getRowMetadata(rowIndex)) && // no cell props on non-existent rows\n            metadata && metadata[this.name] ||\n            null // null means not previously created\n        );\n    },\n\n    /**\n     * Delete cell's own properties object.\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @memberOf Column#\n     */\n    deleteCellOwnProperties: function(rowIndex, dataModel) {\n        dataModel = dataModel || this.dataModel;\n        var metadata = dataModel.getRowMetadata(rowIndex);\n        if (metadata) {\n            delete metadata[this.name];\n            if (Object.keys(metadata).length === 0) {\n                dataModel.setRowMetadata(rowIndex);\n            }\n        }\n    },\n\n    /**\n     * @summary Return a specific cell property.\n     * @desc If there is no cell properties object, defers to column properties object.\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {string} key\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @return {object} The specified property for the cell at x,y in the grid.\n     * @memberOf Column#\n     */\n    getCellProperty: function(rowIndex, key, dataModel) {\n        return this.getCellProperties(rowIndex, dataModel)[key];\n    },\n\n    /**\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {string} key\n     * @param value\n     * @param {DataModel} [dataModel=this.dataModel]\n     * @returns {object} Cell's own properties object, which will be created by this call if it did not already exist.\n     * @memberOf Column#\n     */\n    setCellProperty: function(rowIndex, key, value, dataModel) {\n        var cellProps = getCellPropertiesObject.call(this, rowIndex, dataModel);\n        cellProps[key] = value;\n        return cellProps;\n    },\n\n    /**\n     * @summary Delete a cell own property.\n     * @summary If the property is not an own property, it is not deleted.\n     * @param {number} rowIndex - Data row coordinate.\n     * @param {string} key\n     * @param {DataModel} [dataModel=this.dataModel]\n     */\n    deleteCellProperty: function(rowIndex, key, dataModel) {\n        var cellProps = this.getCellOwnProperties(rowIndex, dataModel);\n        if (cellProps) {\n            delete cellProps[key];\n        }\n    },\n\n    /**\n     * Clear all cell properties from all cells in this column.\n     * @memberOf Column#\n     */\n    clearAllCellProperties: function() {\n        this.behavior.subgrids.forEach(function(dataModel) {\n            for (var y = dataModel.getRowCount(); y--;) {\n                this.deleteCellOwnProperties(y, dataModel);\n            }\n        }, this);\n    }\n};\n\n/**\n * @todo: Theoretically setData should call this method to ensure each cell's persisted properties object is properly recreated with prototype set to its column's properties object.\n * @this {Column}\n * @param {number} rowIndex - Data row coordinate.\n     * @param {DataModel} [dataModel=this.dataModel]\n * @returns {object}\n * @private\n */\nfunction getCellPropertiesObject(rowIndex, dataModel) {\n    return this.getCellOwnProperties(rowIndex, dataModel) || newCellPropertiesObject.call(this, rowIndex, dataModel);\n}\n\n/**\n * @this {Column}\n * @param {number} rowIndex - Data row coordinate.\n     * @param {DataModel} [dataModel=this.dataModel]\n * @returns {object}\n * @private\n */\nfunction newCellPropertiesObject(rowIndex, dataModel) {\n    var metadata = (dataModel || this.dataModel).getRowMetadata(rowIndex, null),\n        props = this.properties;\n\n    switch (this.index) {\n        case this.behavior.treeColumnIndex:\n            props = props.treeHeader;\n            break;\n        case this.behavior.rowColumnIndex:\n            props = props.rowHeader;\n            break;\n        default:\n            if (dataModel && dataModel.type === 'filter') {\n                props = this.properties.filterProperties;\n            }\n    }\n\n    return (metadata[this.name] = Object.create(props));\n}\n","'use strict';\n\n/**\n * @this {Column}\n * @returns {object}\n * @memberOf Column#\n */\nfunction createColumnProperties() {\n    var column = this,\n        tableState = column.behavior.grid.properties,\n        properties;\n\n    properties = Object.create(tableState, {\n\n        index: { // read-only (no setter)\n            get: function() {\n                return column.index;\n            }\n        },\n\n        name: { // read-only (no setter)\n           get: function() {\n                return column.name;\n            }\n        },\n\n        field: { // read-only (no setter)\n            get: function() {\n                return column.name;\n            }\n        },\n\n        columnName: { // read-only (no setter)\n            get: function() {\n                return column.name;\n            }\n        },\n\n        header: {\n            get: function() {\n                return column.header;\n            },\n            set: function(header) {\n                if (this !== column.properties) {\n                    tableState.header = header; // throws an error\n                }\n                column.header = header;\n            }\n        },\n\n        type: {\n            get: function() {\n                return column.type;\n            },\n            set: function(type) {\n                if (this !== column.properties) {\n                    tableState.type = type; // throws an error\n                }\n                column.type = type;\n            }\n        },\n\n        calculator: {\n            get: function() {\n                return column.calculator;\n            },\n            set: function(calculator) {\n                if (this !== column.properties) {\n                    tableState.calculator = calculator; // throws an error\n                }\n                column.calculator = calculator;\n            }\n        },\n\n        toJSON: {\n            // although we don't generally want header, type, and calculator to be enumerable, we do want them to be serializable\n            value: function() {\n                return Object.assign({\n                    header: this.header,\n                    type: this.type,\n                    calculator: this.calculator\n                }, this);\n            }\n        }\n\n    });\n\n    Object.defineProperties(properties, {\n        rowHeader: { value: Object.create(properties, createColumnProperties.rowHeaderDescriptors) },\n        treeHeader: { value: Object.create(properties, createColumnProperties.treeHeaderDescriptors) },\n        columnHeader: { value: Object.create(properties, createColumnProperties.columnHeaderDescriptors) },\n        filterProperties: { value: Object.create(properties, createColumnProperties.filterDescriptors) }\n    });\n\n    switch (column.index) {\n        case column.behavior.treeColumnIndex: properties = properties.treeHeader; break;\n        case column.behavior.rowColumnIndex: properties = properties.rowHeader; break;\n    }\n\n    return properties;\n}\n\ncreateColumnProperties.treeHeaderDescriptors = {\n    font: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderFont;\n        },\n        set: function(value) {\n            this.treeHeaderFont = value;\n        }\n    },\n    color: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderColor;\n        },\n        set: function(value) {\n            this.treeHeaderColor = value;\n        }\n    },\n    backgroundColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderBackgroundColor;\n        },\n        set: function(value) {\n            this.treeHeaderBackgroundColor = value;\n        }\n    },\n    foregroundSelectionFont: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderForegroundSelectionFont;\n        },\n        set: function(value) {\n            this.treeHeaderForegroundSelectionFont = value;\n        }\n    },\n    foregroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderForegroundSelectionColor;\n        },\n        set: function(value) {\n            this.treeHeaderForegroundSelectionColor = value;\n        }\n    },\n    renderer: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.isDataRow ? this.treeRenderer : this.grid.properties.renderer;\n        },\n        set: function(value) {\n            this.treeRenderer = value;\n        }\n    },\n    backgroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeHeaderBackgroundSelectionColor;\n        },\n        set: function(value) {\n            this.treeHeaderBackgroundSelectionColor = value;\n        }\n    },\n    columnAutosizing: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeColumnAutosizing;\n        },\n        set: function(value) {\n            this.treeColumnAutosizing = value;\n        }\n    },\n    columnAutosizingMax: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.treeColumnAutosizingMax;\n        },\n        set: function(value) {\n            this.treeColumnAutosizingMax = value;\n        }\n    }\n    //leftIcon: undefined\n};\n\ncreateColumnProperties.rowHeaderDescriptors = {\n    font: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderFont;\n        },\n        set: function(value) {\n            this.rowHeaderFont = value;\n        }\n    },\n    color: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderColor;\n        },\n        set: function(value) {\n            this.rowHeaderColor = value;\n        }\n    },\n    backgroundColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderBackgroundColor;\n        },\n        set: function(value) {\n            this.rowHeaderBackgroundColor = value;\n        }\n    },\n    foregroundSelectionFont: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderForegroundSelectionFont;\n        },\n        set: function(value) {\n            this.rowHeaderForegroundSelectionFont = value;\n        }\n    },\n    foregroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderForegroundSelectionColor;\n        },\n        set: function(value) {\n            this.rowHeaderForegroundSelectionColor = value;\n        }\n    },\n    backgroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowHeaderBackgroundSelectionColor;\n        },\n        set: function(value) {\n            this.rowHeaderBackgroundSelectionColor = value;\n        }\n    },\n    leftIcon: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            if (this.grid.properties.rowHeaderCheckboxes) {\n                var result;\n                if (this.isDataRow) {\n                    result = this.isRowSelected ? 'checked' : 'unchecked';\n                } else if (this.isHeaderRow) {\n                    result = this.allRowsSelected ? 'checked' : 'unchecked';\n                } else if (this.isFilterRow) {\n                    result = 'filter-off';\n                }\n                return result;\n            }\n        },\n        set: function(value) {\n            // replace self with a simple instance var\n            Object.defineProperty(this, 'leftIcon', {\n                configurable: true,\n                enumerable: true,\n                writable: true,\n                value: value\n            });\n        }\n    },\n    columnAutosizing: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.rowNumberAutosizing;\n        },\n        set: function(value) {\n            this.rowNumberAutosizing = value;\n        }\n    }\n};\n\ncreateColumnProperties.filterDescriptors = {\n    font: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterFont;\n        },\n        set: function(value) {\n            this.filterFont = value;\n        }\n    },\n    color: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterColor;\n        },\n        set: function(value) {\n            this.filterColor = value;\n        }\n    },\n    backgroundColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterBackgroundColor;\n        },\n        set: function(value) {\n            this.filterBackgroundColor = value;\n        }\n    },\n    foregroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterForegroundSelectionColor;\n        },\n        set: function(value) {\n            this.filterForegroundSelectionColor = value;\n        }\n    },\n    backgroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterBackgroundSelectionColor;\n        },\n        set: function(value) {\n            this.filterBackgroundSelectionColor = value;\n        }\n    },\n    halign: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterHalign;\n        },\n        set: function(value) {\n            this.filterHalign = value;\n        }\n    },\n    renderer: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterRenderer;\n        },\n        set: function(value) {\n            this.filterRenderer = value;\n        }\n    },\n    editor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.filterEditor;\n        },\n        set: function(value) {\n            this.filterEditor = value;\n        }\n    },\n    rightIcon: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            var result;\n            if (this.filterable) {\n                result = this.filter ? 'filter-on' : 'filter-off';\n            }\n            return result;\n        },\n        set: function(value) {\n            // replace self with a simple instance var\n            Object.defineProperty(this, 'rightIcon', {\n                configurable: true,\n                enumerable: true,\n                writable: true,\n                value: value\n            });\n        }\n    }\n};\n\ncreateColumnProperties.columnHeaderDescriptors = {\n    font: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderFont;\n        },\n        set: function(value) {\n            this.columnHeaderFont = value;\n        }\n    },\n    color: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderColor;\n        },\n        set: function(value) {\n            this.columnHeaderColor = value;\n        }\n    },\n    backgroundColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderBackgroundColor;\n        },\n        set: function(value) {\n            this.columnHeaderBackgroundColor = value;\n        }\n    },\n    foregroundSelectionFont: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderForegroundSelectionFont;\n        },\n        set: function(value) {\n            this.columnHeaderForegroundSelectionFont = value;\n        }\n    },\n    foregroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderForegroundSelectionColor;\n        },\n        set: function(value) {\n            this.columnHeaderForegroundSelectionColor = value;\n        }\n    },\n    backgroundSelectionColor: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderBackgroundSelectionColor;\n        },\n        set: function(value) {\n            this.columnHeaderBackgroundSelectionColor = value;\n        }\n    },\n    halign: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderHalign;\n        },\n        set: function(value) {\n            this.columnHeaderHalign = value;\n        }\n    },\n    format: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderFormat;\n        },\n        set: function(value) {\n            this.columnHeaderFormat = value;\n        }\n    },\n    renderer: {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n            return this.columnHeaderRenderer;\n        },\n        set: function(value) {\n            this.columnHeaderRenderer = value;\n        }\n    },\n    leftIcon: { writable: true, value: undefined},\n    centerIcon: { writable: true, value: undefined},\n    rightIcon: { writable: true, value: undefined},\n};\n\n/**\n * Column.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n    createColumnProperties: createColumnProperties\n};\n","'use strict';\n\nvar cellEventProperties = Object.defineProperties({}, { // all props non-enumerable\n    /**\n     * The raw value of the cell, unformatted.\n     * @memberOf CellEvent#\n     */\n    value: {\n        get: function() { return this.subgrid.getValue(this.dataCell.x, this.dataCell.y); },\n        set: function(value) { this.subgrid.setValue(this.dataCell.x, this.dataCell.y, value); }\n    },\n\n    /**\n     * An object representing the whole data row, including hidden columns.\n     * @type {object}\n     * @memberOf CellEvent#\n     */\n    dataRow: {\n        get: function() { return this.subgrid.getRow(this.dataCell.y); }\n    },\n\n    /**\n     * The formatted value of the cell.\n     * @memberOf CellEvent#\n     */\n    formattedValue: {\n        get: function() { return this.grid.formatValue(this.properties.format, this.value); }\n    },\n\n    /**\n     * The bounds of the cell.\n     * @property {number} left\n     * @property {number} top\n     * @property {number} width\n     * @property {number} height\n     * @memberOf CellEvent#\n     */\n    bounds: { get: function() {\n        return this._bounds || (this._bounds = {\n            x: this.visibleColumn.left,\n            y: this.visibleRow.top,\n            width: this.visibleColumn.width,\n            height: this.visibleRow.height\n        });\n    } },\n\n    columnProperties: { get: function() {\n        var cp = this._columnProperties;\n        if (!cp) {\n            cp = this.column.properties;\n            if (!this.isDataColumn) {\n                // cp already set to cp.rowHeader or cp.treeHeader\n            } else if (this.isDataRow) {\n                // cp already set to basic props\n            } else if (this.isFilterRow) {\n                cp = cp.filterProperties;\n            } else { // unselected header, summary, etc., all have save look as unselected header\n                cp = cp.columnHeader;\n            }\n            this._columnProperties = cp;\n        }\n        return cp;\n    } },\n    cellOwnProperties: { get: function() {\n        // do not use for get/set prop because may return null; instead use .getCellProperty('prop') or .properties.prop (preferred) to get, setCellProperty('prop', value) to set\n        if (this._cellOwnProperties === undefined) {\n            this._cellOwnProperties = this.column.getCellOwnProperties(this.dataCell.y, this.subgrid);\n        }\n        return this._cellOwnProperties; // null return means there is no cell properties object\n    } },\n    /**\n     * @returns {string} Cell properties object if it exists, else the column properties object it would have as a prototype if did exist.\n     * @method\n     * @memberOf CellEvent#\n     */\n    properties: { get: function() {\n        return this.cellOwnProperties || this.columnProperties;\n    } },\n    /**\n     * @param {string} key - Property name.\n     * @returns {string} Property value.\n     * @method\n     * @memberOf CellEvent#\n     */\n    getCellProperty: { value: function(key) {\n        // included for completeness but `.properties[key]` is preferred\n        return this.properties[key];\n    } },\n    /**\n     * @param {string} key - Property name.\n     * @param {string} value - Property value.\n     * @method\n     * @memberOf CellEvent#\n     */\n    setCellProperty: { value: function(key, value) {\n        // do not use `.cellOwnProperties[key] = value` because object may be null (this method creates new object as needed)\n        this._cellOwnProperties = this.column.setCellProperty(this.dataCell.y, key, value, this.subgrid);\n    } },\n\n    rowOwnProperties: {\n        // undefined return means there is no row properties object\n        get: function() {\n            return this.behavior.getRowProperties(this, undefined, this.subgrid);\n        }\n    },\n    rowProperties: {\n        get: function() {\n            // use carefully! creates new object as needed; only use when object definitely needed: for setting prop with `.rowProperties[key] = value` or `Object.assign(.rowProperties, {...})`; use `rowOwnProperties`  to avoid creating a new object when object does not exist, or `getRowProperty(key)` for getting a property that may not exist\n            return this.behavior.getRowProperties(this, null, this.subgrid);\n        },\n        set: function(properties) {\n            // for resetting whole row properties object: `.rowProperties = {...}`\n            this.behavior.setRowProperties(this, properties, this.subgrid); // calls `stateChanged()`\n        }\n    },\n    getRowProperty: { value: function(key) {\n        // undefined return means there is no row properties object OR no such row property `[key]`\n        var rowProps = this.rowOwnProperties;\n        return rowProps && rowProps[key];\n    } },\n    setRowProperty: { value: function(key, value) {\n        // creates new object as needed\n        this.rowProperties[key] = value; // todo: call `stateChanged()` after refac-as-flags\n    } },\n\n    // special method for use by renderer which reuses cellEvent object for performance reasons\n    reset: { value: function(visibleColumn, visibleRow) {\n        // getter caches\n        this._columnProperties = undefined;\n        this._cellOwnProperties = undefined;\n        this._bounds = undefined;\n\n        // partial render support\n        this.snapshot = [];\n        this.minWidth = undefined;\n        // this.disabled = undefined;\n\n        this.visibleColumn = visibleColumn;\n        this.visibleRow = visibleRow;\n\n        this.subgrid = visibleRow.subgrid;\n\n        this.column = visibleColumn.column; // enumerable so will be copied to cell renderer object\n\n        this.gridCell.x = visibleColumn.columnIndex;\n        this.gridCell.y = visibleRow.index;\n\n        this.dataCell.x = this.column && this.column.index;\n        this.dataCell.y = visibleRow.rowIndex;\n    } },\n\n    /**\n     * Set up this `CellEvent` instance to point to the cell at the given grid coordinates.\n     * @desc If the requested cell is not be visible (due to being scrolled out of view or outside the bounds of the rendered grid), the instance is not reset.\n     * @param {number} gridC - Horizontal grid cell coordinate adjusted for horizontal scrolling after fixed columns.\n     * @param {number} gridY - Raw vertical grid cell coordinate.\n     * @returns {boolean} Visibility.\n     * @method\n     * @memberOf CellEvent#\n     */\n    resetGridCY: { value: function(gridC, gridY) {\n        var vr, vc, visible = (\n            (vc = this.renderer.getVisibleColumn(gridC)) &&\n            (vr = this.renderer.getVisibleRow(gridY))\n        );\n        if (visible) { this.reset(vc, vr); }\n        return visible;\n    } },\n\n    /**\n     * Set up this `CellEvent` instance to point to the cell at the given grid coordinates.\n     * @desc If the requested cell is not be visible (due to being scrolled out of view or outside the bounds of the rendered grid), the instance is not reset.\n     * @param {number} gridX - Raw horizontal grid cell coordinate.\n     * @param {number} gridY - Raw vertical grid cell coordinate.\n     * @returns {boolean} Visibility.\n     * @method\n     * @memberOf CellEvent#\n     */\n    resetGridXY: { value: function(gridX, gridY) {\n        var vr, vc, visible = (\n            (vc = this.renderer.visibleColumns[gridX]) &&\n            (vr = this.renderer.getVisibleRow(gridY))\n        );\n        if (visible) { this.reset(vc, vr); }\n        return visible;\n    } },\n\n    /**\n     * @summary Set up this `CellEvent` instance to point to the cell at the given data coordinates.\n     * @desc If the requested cell is not be visible (due to being scrolled out of view), the instance is not reset.\n     * @param {number} dataX - Horizontal data cell coordinate.\n     * @param {number} dataY - Vertical data cell coordinate.\n     * @param {DataModel} [subgrid=this.behavior.subgrids.data]\n     * @returns {boolean} Visibility.\n     * @method\n     * @memberOf CellEvent#\n     */\n    resetDataXY: { value: function(dataX, dataY, subgrid) {\n        var vr, vc, visible = (\n            (vc = this.renderer.getVisibleDataColumn(dataX)) &&\n            (vr = this.renderer.getVisibleDataRow(dataY, subgrid))\n        );\n        if (visible) { this.reset(vc, vr); }\n        return visible;\n    } },\n\n    /**\n     * Set up this `CellEvent` instance to point to the cell at the given grid column and data row coordinates.\n     * @desc If the requested cell is not be visible (due to being scrolled out of view or outside the bounds of the rendered grid), the instance is not reset.\n     * @param {number} gridX - Horizontal grid cell coordinate (adjusted for horizontal scrolling after fixed columns).\n     * @param {number} dataY - Vertical data cell coordinate.\n     * @param {DataModel} [subgrid=this.behavior.dataModel]\n     * @param {boolean} [useAllCells] - Search in all rows and columns instead of only rendered ones.\n     * @returns {boolean} Visibility.\n     * @method\n     * @memberOf CellEvent#\n     */\n    resetGridXDataY: { value: function(gridX, dataY, subgrid, useAllCells) {\n        var visible, vc, vr;\n\n        if (useAllCells) {\n            // When expanding selections larger than the viewport, the origin/corner\n            // points may not be rendered and would normally fail to reset cell's position.\n            // Mock column and row objects for this.reset() to use:\n            vc = {\n                column: this.behavior.getColumn(gridX),\n                columnIndex: gridX\n            };\n            vr = {\n                subgrid: subgrid || this.behavior.dataModel,\n                rowIndex: dataY\n            };\n            visible = true;\n        } else {\n            visible = (\n                (vc = this.renderer.getVisibleColumn(gridX)) &&\n                (vr = this.renderer.getVisibleDataRow(dataY, subgrid))\n            );\n        }\n\n        if (visible) {\n            this.reset(vc, vr);\n        }\n\n        return visible && this;\n    } },\n\n    /**\n     * Copy self with or without own properties\n     * @param {boolan} [assign=false] - Copy the own properties to the clone.\n     * @returns {CellEvent}\n     * @method\n     * @memberOf CellEvent#\n     */\n    clone: { value: function(assign) {\n        var cellEvent = new this.constructor;\n\n        cellEvent.resetGridXY(this.visibleColumn.index, this.visibleRow.index);\n\n        if (assign) {\n            // copy own props\n            Object.assign(cellEvent, this);\n        }\n\n        return cellEvent;\n    } },\n\n    editPoint: {\n        get: function() {\n            throw 'The `.editPoint` property is no longer available as of v1.2.10. Use the following coordinates instead:\\n' +\n            '`.gridCell.x` - The active column index. (Adjusted for column scrolling after fixed columns.)\\n' +\n            '`.gridCell.y` - The vertical grid coordinate. (Unaffected by row scrolling.)\\n' +\n            '`.dataCell.x` - The data model\\'s column index. (Unaffected by column scrolling.)\\n' +\n            '`.dataCell.y` - The data model\\'s row index. (Adjusted for data row scrolling after fixed rows.)\\n';\n        }\n    },\n\n    mousePointInClickRect: {\n        get: function() {\n            var clickRect = 'clickRect' in this ? this.clickRect : this.properties.clickRect;\n            if (!clickRect) {\n                return true;\n            } else if (typeof clickRect.contains === 'function') {\n                return clickRect.contains(this.mousePoint);\n            } else {\n                return (\n                    clickRect.x <= this.mousePoint.x && this.mousePoint.x < clickRect.x + clickRect.width &&\n                    clickRect.y <= this.mousePoint.y && this.mousePoint.y < clickRect.y + clickRect.height\n                );\n            }\n        }\n    },\n\n    /** \"Visible\" means scrolled into view.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isRowVisible:    { get: function() { return !!this.visibleRow; } },\n    /** \"Visible\" means scrolled into view.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isColumnVisible: { get: function() { return !!this.visibleColumn; } },\n    /** \"Visible\" means scrolled into view.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isCellVisible:   { get: function() { return this.isRowVisible && this.isColumnVisible; } },\n\n\n    /** A data row is any row in the data subgrid; all other rows (headers, footers, _etc._) are not data rows.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isDataRow:    { get: function() { return this.subgrid.isData; } },\n    /** A data column is any column that is not the row number column or the tree column.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isDataColumn: { get: function() { return this.gridCell.x >= 0; } },\n    /** A data cell is a cell in both a data row and a data column.\n     * @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isDataCell:   { get: function() { return this.isDataRow && this.isDataColumn; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isRowSelected:    { get: function() { return this.isDataRow && this.selectionModel.isRowSelected(this.dataCell.y); } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isColumnSelected: { get: function() { return this.isDataColumn && this.selectionModel.isColumnSelected(this.gridCell.x); } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isCellSelected:   { get: function() { return this.selectionModel.isCellSelected(this.gridCell.x, this.dataCell.y); } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isRowHovered:    { get: function() { return this.grid.canvas.hasMouse && this.isDataRow && this.grid.hoverCell && this.grid.hoverCell.y === this.gridCell.y; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isColumnHovered: { get: function() { return this.grid.canvas.hasMouse && this.isDataColumn && this.grid.hoverCell && this.grid.hoverCell.x === this.gridCell.x; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isCellHovered:   { get: function() { return this.isRowHovered && this.isColumnHovered; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isRowFixed:    { get: function() { return this.isDataRow && this.dataCell.y < this.grid.properties.fixedRowCount; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isColumnFixed: { get: function() { return this.isDataColumn && this.gridCell.x < this.grid.properties.fixedColumnCount; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isCellFixed:   { get: function() { return this.isRowFixed && this.isColumnFixed; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isHandleColumn: { get: function() { return this.gridCell.x === this.behavior.rowColumnIndex && this.grid.properties.showRowNumbers; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isHandleCell:   { get: function() { return this.isHandleColumn && this.isDataRow; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isTreeColumn: { get: function() { return this.gridCell.x === this.behavior.treeColumnIndex; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isHeaderRow:    { get: function() { return this.subgrid.isHeader; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isHeaderHandle: { get: function() { return this.isHeaderRow && this.isHandleColumn; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isHeaderCell:   { get: function() { return this.isHeaderRow && this.isDataColumn; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isFilterRow:    { get: function() { return this.subgrid.isFilter; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isFilterHandle: { get: function() { return this.isFilterRow && this.isHandleColumn; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isFilterCell:   { get: function() { return this.isFilterRow && this.isDataColumn; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isSummaryRow:    { get: function() { return this.subgrid.isSummary; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isSummaryHandle: { get: function() { return this.isSummaryRow && this.isHandleColumn; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isSummaryCell:   { get: function() { return this.isSummaryRow && this.isDataColumn; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isTopTotalsRow:    { get: function() { return this.subgrid === this.behavior.subgrids.lookup.topTotals; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isTopTotalsHandle: { get: function() { return this.isTopTotalsRow && this.isHandleColumn; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isTopTotalsCell:   { get: function() { return this.isTopTotalsRow && this.isDataColumn; } },\n\n\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isBottomTotalsRow:    { get: function() { return this.subgrid === this.behavior.subgrids.lookup.bottomTotals; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isBottomTotalsHandle: { get: function() { return this.isBottomTotalsRow && this.isHandleColumn; } },\n    /** @type {boolean}\n     * @memberOf CellEvent#\n     */\n    isBottomTotalsCell:   { get: function() { return this.isBottomTotalsRow && this.isDataColumn; } },\n\n    $$CLASS_NAME: { value: 'CellEvent' }\n});\n\nvar Point = require('rectangular').Point;\n\n/**\n * Variation of `rectangular.Point` but with writable `x` and `y`\n * @constructor\n */\nfunction WritablePoint(x, y) {\n    // skip x and y initialization here for performance\n    // because typically reset after instantiation\n}\n\nWritablePoint.prototype = Point.prototype;\n\n\nvar writableDescriptor = { writable: true };\nvar enumerableDescriptor = { writable: true, enumerable: true };\n\n/** @typedef {WritablePoint} dataCellCoords\n * @property {number} x - The data model's column index, unaffected by column scrolling; _i.e.,_\n * an index suitable for dereferencing the column object to which the cell belongs via {@link Behavior#getColumn}.\n * @property {number} y - The data model's row index, adjusted for data row scrolling after fixed rows.\n */\n\n/** @typedef {WritablePoint} gridCellCoords\n * @property {number} x - The active column index, adjusted for column scrolling after fixed columns; _i.e.,_\n * an index suitable for dereferencing the column object to which the cell belongs via {@link Behavior#getActiveColumn}.\n * @property {number} y - The vertical grid coordinate, unaffected by subgrid, row scrolling, and fixed rows.\n */\n\n/**\n * @name cellEventFactory\n *\n * @summary Create a custom `CellEvent` class.\n *\n * @desc Create a custom definition of `CellEvent` for each grid instance, setting the `grid`, `behavior`, and `dataModel` properties on the prototype. As this happens once per grid instantiation, it avoids having to perform this set up work on every `CellEvent` instantiation.\n *\n * @param {HyperGrid} grid\n *\n * @returns {function}\n */\nfunction factory(grid) {\n\n    /**\n     * @summary Create a new CellEvent object.\n     *\n     * @classdesc `CellEvent` is a very low-level object that needs to be super-efficient. JavaScript objects are well known to be light weight in general, but at this level we need to be careful.\n     *\n     * These objects were originally only being created on mouse events. This was no big deal as mouse events are few and far between. However, as of v1.2.0, the renderer now also creates one for each visible cell on each and every grid paint.\n     *\n     * For this reason, to maintain performance, each grid gets a custom definition of `CellEvent`, created by this class factory, with the following optimizations:\n     *\n     * * Use of `extend-me` is avoided because its `initialize` chain is a bit too heavy here.\n     * * Custom versions of `CellEvent` for each grid lightens the load on the constructor.\n     *\n     * @desc All own enumerable properties are mixed into cell editor:\n     * * Includes `this.column` defined by constructor (as enumerable).\n     * * Excludes all other properties defined by constructor and prototype, all of which are non-enumerable.\n     * * Any additional (enumerable) members mixed in by application's `getCellEditorAt` override.\n     *\n     * Including the params calls {@link CellEvent#resetGridCY resetGridCY(gridX, gridY)}.\n     * Alternatively, instantiate without params and/or later call one of these:\n     * * {@link CellEvent#resetGridXY resetGridXY(...)}\n     * * {@link CellEvent#resetDataXY resetDataXY(...)}\n     * * {@link CellEvent#resetGridXDataY resetGridXDataY(...)}\n     *\n     * @param {number} [gridX] - grid cell coordinate (adjusted for horizontal scrolling after fixed columns).\n     * @param {number} [gridY] - grid cell coordinate, adjusted (adjusted for vertical scrolling if data subgrid)\n     * @constructor CellEvent\n     */\n    function CellEvent(gridX, gridY) {\n        // remaining instance vars are non-enumerable so `CellEditor` constructor won't mix them in (for mustache use).\n        Object.defineProperties(this, {\n            /**\n             * @name visibleColumn\n             * @type {visibleColumnArray}\n             * @memberOf CellEvent#\n             */\n            visibleColumn: writableDescriptor,\n\n            /**\n             * @name visibleRow\n             * @type {visibleRowArray}\n             * @memberOf CellEvent#\n             */\n            visibleRow: writableDescriptor,\n\n            /**\n             * @name subgrid\n             * @type {DataModel}\n             * @memberOf CellEvent#\n             */\n            subgrid: writableDescriptor,\n\n            /**\n             * @name gridCell\n             * @type {gridCellCoords}\n             * @memberOf CellEvent#\n             */\n            gridCell: {\n                value: new WritablePoint\n            },\n\n            /**\n             * @name dataCell\n             * @type {dataCellCoords}\n             * @memberOf CellEvent#\n             */\n            dataCell: {\n                value: new WritablePoint\n            },\n\n            /**\n             * A reference to the cell's {@link Column} object.\n             *\n             * This property is enumerable so that it will be copied to cell editor on {@link CellEditor} instantiation.\n             * @name column\n             * @type {Column}\n             * @memberOf CellEvent#\n             */\n            column: enumerableDescriptor,\n\n            // getter caches\n            _columnProperties: writableDescriptor,\n            _cellOwnProperties: writableDescriptor,\n            _bounds: writableDescriptor,\n\n            // Following supports cell renderers' \"partial render\" capability:\n            snapshot: writableDescriptor,\n            minWidth: writableDescriptor,\n            disabled: writableDescriptor\n        });\n\n        if (arguments.length) {\n            this.resetGridCY(gridX, gridY);\n        }\n    }\n\n    CellEvent.prototype = Object.create(cellEventProperties, {\n        constructor: { value: CellEvent },\n        grid: { value: grid },\n        renderer: { value: grid.renderer },\n        selectionModel: { value: grid.selectionModel },\n        behavior: { value: grid.behavior },\n        dataModel: { value: grid.behavior.dataModel }\n    });\n\n    return CellEvent;\n}\n\nmodule.exports = factory;\n","'use strict';\n\n/**\n * @module fields\n */\n\nvar Decorator = require('synonomous');\n\nvar REGEXP_META_PREFIX = /^__/; // starts with double underscore\n\nvar fields = {\n\n    /**\n     * Decorate given grid schema with:\n     * * Synonym(s) based on `name` property of each element:\n     * @param {columnSchema[]} schema\n     * @returns {columnSchema[]} The given schema.\n     * @memberOf module:fields\n     */\n    decorateSchema: function(schema) {\n        var decorator = new Decorator;\n\n        decorator.decorateArray(schema);\n\n        return schema;\n    },\n\n    /**\n     * Decorate each element of schema with:\n     * * `header` property (when undefined)\n     * @param {columnSchema[]} schema\n     * @param {string} [headerifierName] - Name of string transformer to use to generate headers (from column names) for those columns without defined headers. If omitted or undefined, no decoration takes place.\n     * @returns {columnSchema[]} The given schema.\n     * @memberOf module:fields\n     */\n    decorateColumnSchema: function(schema, headerifierName) {\n        var decorator = new Decorator;\n\n        decorator.transformations = {};\n        decorator.transformations[headerifierName] = 'header';\n\n        decorator.decorateArray(schema);\n\n        return schema;\n    },\n\n    /**\n     * @summary Normalizes and returns given schema array.\n     * @desc For each \"column schema\" (element of schema array):\n     *\n     * 1. Objectify column schemata<br>\n     * Ensures each column schema is an object with a `name` property.\n     * 2. Index schema schemata<br>\n     * Adds an `index` property to each column schema element.\n     * 3. Decorates schema<br>\n     * Decorates the schema array object itself with column names and column name synonyms. This is helpful for looking up column schema by column name rather than by index. To get the index of a column when you know the name:\n     * ```javascript\n     * var schema = dataModel.getSchema();\n     * var columnName = 'foo';\n     * var columnIndex = schema[columnName].index;\n     * ```\n     * 4. Adds missing headers.\n     *\n     * This function is safe to call repeatedly.\n     *\n     * Called from {@link Behavior#createColumns createColumns} (called on receipt of the `fin-hypergrid-schema-loaded` event (dispatched by data model implementation of `setSchema`)).\n     *\n     * @param {rawColumnSchema[]} schema\n     * @returns {columnSchema[]}\n     * @memberOf module:fields\n     */\n    normalizeSchema: function(schema) {\n        // Make sure each element of `schema` is an object with a `name` property.\n        schema.forEach(function(columnSchema, index) {\n            if (typeof columnSchema === 'string') {\n                schema[index] = {\n                    name: columnSchema\n                };\n            }\n        });\n\n        // Remove all meta data columns from schema\n        for (var i = schema.length; i--;) {\n            if (REGEXP_META_PREFIX.test(schema[i].name)) {\n                schema.splice(i, 1);\n            }\n        }\n\n        // Set `index` property.\n        schema.forEach(function(columnSchema, index) {\n            columnSchema.index = index;\n        });\n\n        return schema;\n    },\n\n    /**\n     * @summary Get keys of given hash with \"metakeys\" filtered out.\n     * @desc Metakeys are keys beginning with a double-underscore.\n     *\n     * DO NOT REMOVE -- Not used in fin-hypergrid/core but has legacy exposure.\n     * @param {object} hash\n     * @returns {string[]} Member names from `hash` that do _not_ begin with double-underscore.\n     * @memberOf module:fields\n     */\n    getFieldNames: function(hash) {\n        return Object.keys(hash || {}).filter(function(fieldName) {\n            return !REGEXP_META_PREFIX.test(fieldName);\n        });\n    },\n\n    /**\n     * Used by {@link module:fields.getSchema getSchema}.\n     * Override as needed for different titleization flavor.\n     * @param {string} key\n     * @returns {string} Title version of key (for use as column header).\n     * @memberOf module:fields\n     */\n    titleize: require('synonomous/transformers').toTitle,\n\n    /**\n     * @summary Returns a schema derived from given sample data row with \"metakeys\" filtered out.\n     * @desc Metakeys are keys beginning with a double-underscore.\n     *\n     * DO NOT REMOVE -- Not used in fin-hypergrid/core but has legacy exposure.\n     * @param {dataRowObject[]} [data]\n     * @returns {columnSchema[]} Array object also decroated with synonyms for elements.\n     * @memberOf module:fields\n     */\n    getSchema: function(data) {\n        var dataRow = data && data[0] || {},\n            schema = fields.getFieldNames(dataRow);\n\n        fields.normalizeSchema(schema);\n        fields.decorateSchema(schema);\n        fields.decorateColumnSchema(schema, 'toTitle');\n\n        return schema;\n    }\n};\n\nmodule.exports = fields;\n","'use strict';\n\nvar Registry = require('../lib/Registry');\n\n\n/**\n * @classdesc Registry of feature constructors.\n * @param {boolean} [privateRegistry=false] - This instance will use a private registry.\n * @constructor\n */\nvar Features = Registry.extend('Features', {\n\n    BaseClass: require('./Feature'), // abstract base class\n\n    initialize: function() {\n        // preregister the standard cell renderers\n        this.add(Features.CellClick);\n        this.add(Features.CellEditing);\n        this.add(Features.CellSelection);\n        this.add(Features.ColumnMoving);\n        this.add(Features.ColumnResizing);\n        this.add(Features.ColumnSelection);\n        this.add(Features.ColumnSorting);\n        this.add(Features.Filters);\n        this.add(Features.KeyPaging);\n        this.add(Features.OnHover);\n        // this.add(require('./RowResizing'));\n        this.add(Features.RowSelection);\n        this.add(Features.ThumbwheelScrolling);\n        this.add(Features.TouchScrolling);\n    }\n\n});\n\n\n// Following shared props provided solely in support of build file usage, e.g., `fin.Hypergrid.features.yada`,\n// presumably for overriding built-in features, and are not meant to be used elsewhere.\n\nFeatures.BaseClass = require('./Feature'); // abstract base class\nFeatures.CellClick = require('./CellClick');\nFeatures.CellEditing = require('./CellEditing');\nFeatures.CellSelection = require('./CellSelection');\nFeatures.ColumnMoving = require('./ColumnMoving');\nFeatures.ColumnResizing = require('./ColumnResizing');\nFeatures.ColumnSelection = require('./ColumnSelection');\nFeatures.ColumnSorting = require('./ColumnSorting');\nFeatures.Filters = require('./Filters');\nFeatures.KeyPaging = require('./KeyPaging');\nFeatures.OnHover = require('./OnHover');\n// Features.RowResizing = require('./RowResizing');\nFeatures.RowSelection = require('./RowSelection');\nFeatures.ThumbwheelScrolling = require('./ThumbwheelScrolling');\nFeatures.TouchScrolling = require('./TouchScrolling');\n\n\nmodule.exports = new Features;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar CellClick = Feature.extend('CellClick', {\n\n    handleMouseMove: function(grid, event) {\n        var link = event.properties.link,\n            isActionableLink = link && typeof link !== 'boolean'; // actionable with truthy other than `true`\n\n        this.cursor = isActionableLink ? 'pointer' : null;\n\n        if (this.next) {\n            this.next.handleMouseMove(grid, event);\n        }\n    },\n\n    /**\n     * @param {Hypergrid} grid\n     * @param {CellEvent} event - the event details\n     * @memberOf CellClick#\n     */\n    handleClick: function(grid, event) {\n        var consumed = (event.isDataCell || event.isTreeColumn) && (\n            this.openLink(grid, event) !== undefined ||\n            grid.cellClicked(event)\n        );\n\n        if (!consumed && this.next) {\n            this.next.handleClick(grid, event);\n        }\n    },\n\n    /**\n     * @summary Open the cell's URL.\n     *\n     * @desc The URL is found in the cell's {@link module:defaults.link|link} property, which serves two functions:\n     * 1. **Renders as a link.** When truthy causes {@link SimpleCell} cell renderer to render the cell underlined with {@link module:defaults.linkColor|linkColor}. (See also {@link module:defaults.linkOnHover|linkOnHover} and {@link module:defaults.linkColorOnHover|linkColorOnHover}.) Therefore, setting this property to `true` will render as a link, although clicking on it will have no effect. This is useful if you wish to handle the click yourself by attaching a `'fin-click'` listener to your hypergrid.\n     * 2. **Fetch the URL.** The value of the link property is interpreted as per {@link module:defaults.link|link}.\n     * 3. **Decorate the URL.** The cell name (_i.e.,_ the data column name) and cell value are merged into the URL wherever the respective substrings `'%name'` and `'%value'` are found. For example, if the column name is \"age\" and the cell value is 6 (or a function returning 25), and the link is `'http://www.abc.com?%name=%value'`, then the actual link (first argument given to `grid.windowOpen`) would be `'http://www.abc.com?age=25'`.\n     * 4. **Open the URL.** The link is then opened by {@link Hypergrid#windowOpen|grid.windowOpen}. If `link` is an array, it is \"applied\" to `grid.windowOpen` in its entirety; otherwise, `grid.windowOpen` is called with the link as the first argument and {@link module:defaults.linkTarget|linkTarget} as the second.\n     * 5. **Decorate the link.** On successful return from `windowOpen()`, the text is colored as \"visited\" as per the cell's {@link module:defaults.linkVisitedColor|linkVisitedColor} property (by setting the cell's `linkColor` property to its `linkVisitedColor` property).\n\n     * @param {Hypergrid} grid\n     * @param {CellEvent} cellEvent - Event details.\n     *\n     * @returns {boolean|window|null|undefined} One of:\n     *\n     * | Value | Meaning |\n     * | :---- | :------ |\n     * | `undefined` | no link to open |\n     * | `null` | `grid.windowOpen` failed to open a window |\n     * | _otherwise_ | A `window` reference returned by a successful call to `grid.windowOpen`. |\n     *\n     * @memberOf CellClick#\n     */\n    openLink: function(grid, cellEvent) {\n        var result, url,\n            dataRow = cellEvent.dataRow,\n            config = Object.create(cellEvent.properties, { dataRow: { value: dataRow } }),\n            value = config.exec(cellEvent.value),\n            linkProp = cellEvent.properties.link,\n            isArray = linkProp instanceof Array,\n            link = isArray ? linkProp[0] : linkProp;\n\n        // STEP 2: Fetch the URL\n        switch (typeof link) {\n            case 'string':\n                if (link === '*') {\n                    url = value;\n                } else if (/^\\w+$/.test(link)) {\n                    url = dataRow[link];\n                }\n                break;\n\n            case 'function':\n                url = link(cellEvent);\n                break;\n        }\n\n        if (url) {\n            // STEP 3: Decorate the URL\n            url = url.toString().replace(/%name/g, config.name).replace(/%value/g, value);\n\n            // STEP 4: Open the URL\n            if (isArray) {\n                linkProp = linkProp.slice();\n                linkProp[0] = url;\n                result = grid.windowOpen.apply(grid, linkProp);\n            } else {\n                result = grid.windowOpen(url, cellEvent.properties.linkTarget);\n            }\n        }\n\n        // STEP 5: Decorate the link as \"visited\"\n        if (result) {\n            cellEvent.setCellProperty('linkColor', grid.properties.linkVisitedColor);\n            grid.renderer.resetCellPropertiesCache(cellEvent);\n            grid.repaint();\n        }\n\n        return result;\n    }\n\n});\n\nmodule.exports = CellClick;\n","'use strict';\n\nvar Feature = require('./Feature');\nvar CellEditor = require('../cellEditors/CellEditor');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar CellEditing = Feature.extend('CellEditing', {\n\n    /**\n     * @memberOf CellEditing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleClick: function(grid, event) {\n        edit.call(this, grid, event);\n    },\n\n    /**\n     * @memberOf CellEditing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleDoubleClick: function(grid, event) {\n        edit.call(this, grid, event, true);\n    },\n\n    /**\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @memberOf KeyPaging.prototype\n     */\n    handleKeyDown: function(grid, event) {\n        var char, isVisibleChar, isDeleteChar, editor, cellEvent;\n\n        if (\n            (cellEvent = grid.getGridCellFromLastSelection()) &&\n            cellEvent.properties.editOnKeydown &&\n            !grid.cellEditor &&\n            (\n                (char = event.detail.char) === 'F2' ||\n                (isVisibleChar = char.length === 1 && !(event.detail.meta || event.detail.ctrl)) ||\n                (isDeleteChar = char === 'DELETE' || char === 'BACKSPACE')\n            )\n        ) {\n            editor = grid.onEditorActivate(cellEvent);\n\n            if (editor instanceof CellEditor) {\n                if (isVisibleChar) {\n                    editor.input.value = char;\n                } else if (isDeleteChar) {\n                    editor.setEditorValue('');\n                }\n                event.detail.primitiveEvent.preventDefault();\n            }\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    }\n\n});\n\nfunction edit(grid, event, onDoubleClick) {\n    if (\n        event.isDataCell &&\n        !(event.getCellProperty('editOnDoubleClick') ^ onDoubleClick) // both same (true or falsy)?\n    ) {\n        grid.onEditorActivate(event);\n    }\n\n    if (this.next) {\n        this.next[onDoubleClick ? 'handleDoubleClick' : 'handleClick'](grid, event);\n    }\n}\n\nmodule.exports = CellEditing;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar CellSelection = Feature.extend('CellSelection', {\n\n    /**\n     * The pixel location of the mouse pointer during a drag operation.\n     * @type {Point}\n     * @memberOf CellSelection.prototype\n     */\n    currentDrag: null,\n\n    /**\n     * the cell coordinates of the where the mouse pointer is during a drag operation\n     * @type {Object}\n     * @memberOf CellSelection.prototype\n     */\n    lastDragCell: null,\n\n    /**\n     * a millisecond value representing the previous time an autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf CellSelection.prototype\n     */\n    sbLastAuto: 0,\n\n    /**\n     * a millisecond value representing the time the current autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf CellSelection.prototype\n     */\n    sbAutoStart: 0,\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseUp: function(grid, event) {\n        if (this.dragging) {\n            this.dragging = false;\n        }\n        if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        var dx = event.gridCell.x,\n            dy = event.dataCell.y,\n            isSelectable = grid.behavior.getCellProperty(event.dataCell.x, event.gridCell.y, 'cellSelection');\n\n        if (isSelectable && event.isDataCell && !event.primitiveEvent.detail.isRightClick) {\n            var dCell = grid.newPoint(dx, dy),\n                primEvent = event.primitiveEvent,\n                keys = primEvent.detail.keys;\n            this.dragging = true;\n            this.extendSelection(grid, dCell, keys);\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDrag: function(grid, event) {\n        if (this.dragging && grid.properties.cellSelection && !event.primitiveEvent.detail.isRightClick) {\n            this.currentDrag = event.primitiveEvent.detail.mouse;\n            this.lastDragCell = grid.newPoint(event.gridCell.x, event.dataCell.y);\n            this.checkDragScroll(grid, this.currentDrag);\n            this.handleMouseDragCellSelection(grid, this.lastDragCell, event.primitiveEvent.detail.keys);\n        } else if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleKeyDown: function(grid, event) {\n        var detail = event.detail,\n            cellEvent = grid.getGridCellFromLastSelection(true),\n            navKey = cellEvent && (\n                cellEvent.properties.mappedNavKey(detail.char, detail.ctrl) ||\n                cellEvent.properties.navKey(detail.char, detail.ctrl)\n            ),\n            handler = this['handle' + navKey];\n\n\n        // STEP 1: Move the selection\n        if (handler) {\n            handler.call(this, grid, detail);\n\n            // STEP 2: Open the cell editor at the new position if `editable` AND edited cell had `editOnNextCell`\n            if (cellEvent.properties.editOnNextCell) {\n                grid.renderer.computeCellsBounds(true); // moving selection may have auto-scrolled\n                cellEvent = grid.getGridCellFromLastSelection(); // new cell\n                grid.editAt(cellEvent); // succeeds only if `editable`\n            }\n\n            // STEP 3: If editor not opened on new cell, take focus\n            if (!grid.cellEditor) {\n                grid.takeFocus();\n            }\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc Handle a mousedrag selection.\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    handleMouseDragCellSelection: function(grid, gridCell, keys) {\n        var x = Math.max(0, gridCell.x),\n            y = Math.max(0, gridCell.y),\n            previousDragExtent = grid.getDragExtent(),\n            mouseDown = grid.getMouseDown(),\n            newX = x - mouseDown.x,\n            newY = y - mouseDown.y;\n\n        if (previousDragExtent.x === newX && previousDragExtent.y === newY) {\n            return;\n        }\n\n        grid.clearMostRecentSelection();\n\n        grid.select(mouseDown.x, mouseDown.y, newX, newY);\n        grid.setDragExtent(grid.newPoint(newX, newY));\n\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc this checks while were dragging if we go outside the visible bounds, if so, kick off the external autoscroll check function (above)\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     */\n    checkDragScroll: function(grid, mouse) {\n        if (!grid.properties.scrollingEnabled) {\n            return;\n        }\n        var b = grid.getDataBounds();\n        var inside = b.contains(mouse);\n        if (inside) {\n            if (grid.isScrollingNow()) {\n                grid.setScrollingNow(false);\n            }\n        } else if (!grid.isScrollingNow()) {\n            grid.setScrollingNow(true);\n            this.scrollDrag(grid);\n        }\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc this function makes sure that while we are dragging outside of the grid visible bounds, we srcroll accordingly\n     * @param {Hypergrid} grid\n     */\n    scrollDrag: function(grid) {\n        if (!grid.isScrollingNow()) {\n            return;\n        }\n\n        var dragStartedInHeaderArea = grid.isMouseDownInHeaderArea(),\n            lastDragCell = this.lastDragCell,\n            b = grid.getDataBounds(),\n\n            xOffset = 0,\n            yOffset = 0,\n\n            numFixedColumns = grid.getFixedColumnCount(),\n            numFixedRows = grid.getFixedRowCount(),\n\n            dragEndInFixedAreaX = lastDragCell.x < numFixedColumns,\n            dragEndInFixedAreaY = lastDragCell.y < numFixedRows;\n\n        if (!dragStartedInHeaderArea) {\n            if (this.currentDrag.x < b.origin.x) {\n                xOffset = -1;\n            }\n            if (this.currentDrag.y < b.origin.y) {\n                yOffset = -1;\n            }\n        }\n        if (this.currentDrag.x > b.origin.x + b.extent.x) {\n            xOffset = 1;\n        }\n        if (this.currentDrag.y > b.origin.y + b.extent.y) {\n            yOffset = 1;\n        }\n\n        var dragCellOffsetX = xOffset;\n        var dragCellOffsetY = yOffset;\n\n        if (dragEndInFixedAreaX) {\n            dragCellOffsetX = 0;\n        }\n        if (dragEndInFixedAreaY) {\n            dragCellOffsetY = 0;\n        }\n\n        this.lastDragCell = lastDragCell.plusXY(dragCellOffsetX, dragCellOffsetY);\n        grid.scrollBy(xOffset, yOffset);\n        this.handleMouseDragCellSelection(grid, lastDragCell, []); // update the selection\n        grid.repaint();\n        setTimeout(this.scrollDrag.bind(this, grid), 25);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc extend a selection or create one if there isnt yet\n     * @param {Hypergrid} grid\n     * @param {Object} gridCell - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    extendSelection: function(grid, gridCell, keys) {\n        var hasCTRL = keys.indexOf('CTRL') >= 0,\n            hasSHIFT = keys.indexOf('SHIFT') >= 0,\n            mousePoint = grid.getMouseDown(),\n            x = gridCell.x, // - numFixedColumns + scrollLeft;\n            y = gridCell.y; // - numFixedRows + scrollTop;\n\n        //were outside of the grid do nothing\n        if (x < 0 || y < 0) {\n            return;\n        }\n\n        //we have repeated a click in the same spot deslect the value from last time\n        if (\n            hasCTRL &&\n            x === mousePoint.x &&\n            y === mousePoint.y\n        ) {\n            grid.clearMostRecentSelection();\n            grid.popMouseDown();\n            grid.repaint();\n            return;\n        }\n\n        if (!hasCTRL && !hasSHIFT) {\n            grid.clearSelections();\n        }\n\n        if (hasSHIFT) {\n            grid.clearMostRecentSelection();\n            grid.select(mousePoint.x, mousePoint.y, x - mousePoint.x, y - mousePoint.y);\n            grid.setDragExtent(grid.newPoint(x - mousePoint.x, y - mousePoint.y));\n        } else {\n            grid.select(x, y, 0, 0);\n            grid.setMouseDown(grid.newPoint(x, y));\n            grid.setDragExtent(grid.newPoint(0, 0));\n        }\n        grid.repaint();\n    },\n\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     */\n    handleDOWNSHIFT: function(grid) {\n        this.moveShiftSelect(grid, 0, 1);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUPSHIFT: function(grid) {\n        this.moveShiftSelect(grid, 0, -1);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFTSHIFT: function(grid) {\n        this.moveShiftSelect(grid, -1, 0);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHTSHIFT: function(grid) {\n        this.moveShiftSelect(grid, 1, 0);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleDOWN: function(grid, event) {\n        //keep the browser viewport from auto scrolling on key event\n        event.primitiveEvent.preventDefault();\n\n        var count = this.getAutoScrollAcceleration();\n        grid.moveSingleSelect(0, count);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUP: function(grid, event) {\n        //keep the browser viewport from auto scrolling on key event\n        event.primitiveEvent.preventDefault();\n\n        var count = this.getAutoScrollAcceleration();\n        grid.moveSingleSelect(0, -count);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFT: function(grid) {\n        grid.moveSingleSelect(-1, 0);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHT: function(grid) {\n        grid.moveSingleSelect(1, 0);\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc If we are holding down the same navigation key, accelerate the increment we scroll\n     * #### returns: integer\n     */\n    getAutoScrollAcceleration: function() {\n        var count = 1;\n        var elapsed = this.getAutoScrollDuration() / 2000;\n        count = Math.max(1, Math.floor(elapsed * elapsed * elapsed * elapsed));\n        return count;\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc set the start time to right now when we initiate an auto scroll\n     */\n    setAutoScrollStartTime: function() {\n        this.sbAutoStart = Date.now();\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc update the autoscroll start time if we haven't autoscrolled within the last 500ms otherwise update the current autoscroll time\n     */\n    pingAutoScroll: function() {\n        var now = Date.now();\n        if (now - this.sbLastAuto > 500) {\n            this.setAutoScrollStartTime();\n        }\n        this.sbLastAuto = Date.now();\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc answer how long we have been auto scrolling\n     * #### returns: integer\n     */\n    getAutoScrollDuration: function() {\n        if (Date.now() - this.sbLastAuto > 500) {\n            return 0;\n        }\n        return Date.now() - this.sbAutoStart;\n    },\n\n    /**\n     * @memberOf CellSelection.prototype\n     * @desc Augment the most recent selection extent by (offsetX,offsetY) and scroll if necessary.\n     * @param {Hypergrid} grid\n     * @param {number} offsetX - x coordinate to start at\n     * @param {number} offsetY - y coordinate to start at\n     */\n    moveShiftSelect: function(grid, offsetX, offsetY) {\n        if (grid.extendSelect(offsetX, offsetY)) {\n            this.pingAutoScroll();\n        }\n    }\n\n});\n\nmodule.exports = CellSelection;\n","/* eslint-env browser */\n/* global requestAnimationFrame */\n\n'use strict';\n\n// This feature is responsible for column drag and drop reordering.\n// This object is a mess and desperately needs a complete rewrite.....\n\nvar Feature = require('./Feature');\n\nvar GRAB = ['grab', '-moz-grab', '-webkit-grab'],\n    GRABBING = ['grabbing', '-moz-grabbing', '-webkit-grabbing'],\n    setName = function(name) { this.cursor = name; };\n\nvar columnAnimationTime = 150;\nvar dragger;\nvar draggerCTX;\nvar floatColumn;\nvar floatColumnCTX;\n\n/**\n * @constructor\n * @extends Feature\n */\nvar ColumnMoving = Feature.extend('ColumnMoving', {\n\n    /**\n     * queue up the animations that need to play so they are done synchronously\n     * @type {Array}\n     * @memberOf CellMoving.prototype\n     */\n    floaterAnimationQueue: [],\n\n    /**\n     * am I currently auto scrolling right\n     * @type {boolean}\n     * @memberOf CellMoving.prototype\n     */\n    columnDragAutoScrollingRight: false,\n\n    /**\n     * am I currently auto scrolling left\n     * @type {boolean}\n     * @memberOf CellMoving.prototype\n     */\n    columnDragAutoScrollingLeft: false,\n\n    /**\n     * is the drag mechanism currently enabled (\"armed\")\n     * @type {boolean}\n     * @memberOf CellMoving.prototype\n     */\n    dragArmed: false,\n\n    /**\n     * am I dragging right now\n     * @type {boolean}\n     * @memberOf CellMoving.prototype\n     */\n    dragging: false,\n\n    /**\n     * the column index of the currently dragged column\n     * @type {number}\n     * @memberOf CellMoving.prototype\n     */\n    dragCol: -1,\n\n    /**\n     * an offset to position the dragged item from the cursor\n     * @type {number}\n     * @memberOf CellMoving.prototype\n     */\n    dragOffset: 0,\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc give me an opportunity to initialize stuff on the grid\n     * @param {Hypergrid} grid\n     */\n    initializeOn: function(grid) {\n        this.isFloatingNow = false;\n        this.initializeAnimationSupport(grid);\n        if (this.next) {\n            this.next.initializeOn(grid);\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc initialize animation support on the grid\n     * @param {Hypergrid} grid\n     */\n    initializeAnimationSupport: function(grid) {\n        if (!dragger) {\n            dragger = document.createElement('canvas');\n            dragger.setAttribute('width', '0px');\n            dragger.setAttribute('height', '0px');\n            dragger.style.position = 'fixed';\n\n            document.body.appendChild(dragger);\n            draggerCTX = dragger.getContext('2d', { alpha: false });\n        }\n        if (!floatColumn) {\n            floatColumn = document.createElement('canvas');\n            floatColumn.setAttribute('width', '0px');\n            floatColumn.setAttribute('height', '0px');\n            floatColumn.style.position = 'fixed';\n\n            document.body.appendChild(floatColumn);\n            floatColumnCTX = floatColumn.getContext('2d', { alpha: false });\n        }\n\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDrag: function(grid, event) {\n\n        var gridCell = event.gridCell;\n        var x;\n        //var y;\n\n        var distance = Math.abs(event.primitiveEvent.detail.dragstart.x - event.primitiveEvent.detail.mouse.x);\n\n        if (distance < 10 || event.isColumnFixed) {\n            if (this.next) {\n                this.next.handleMouseDrag(grid, event);\n            }\n            return;\n        }\n\n        if (event.isHeaderCell && this.dragArmed && !this.dragging) {\n            this.dragging = true;\n            this.dragCol = gridCell.x;\n            this.dragOffset = event.mousePoint.x;\n            this.detachChain();\n            x = event.primitiveEvent.detail.mouse.x - this.dragOffset;\n            //y = event.primitiveEvent.detail.mouse.y;\n            this.createDragColumn(grid, x, this.dragCol);\n        } else if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n\n        if (this.dragging) {\n            x = event.primitiveEvent.detail.mouse.x - this.dragOffset;\n            //y = event.primitiveEvent.detail.mouse.y;\n            this.dragColumn(grid, x);\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        if (\n            grid.properties.columnsReorderable &&\n            !event.primitiveEvent.detail.isRightClick &&\n            !event.isColumnFixed &&\n            event.isHeaderCell\n        ) {\n            this.dragArmed = true;\n            this.cursor = GRABBING;\n            grid.clearSelections();\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseUp: function(grid, event) {\n        //var col = event.gridCell.x;\n        if (this.dragging) {\n            this.cursor = null;\n            //delay here to give other events a chance to be dropped\n            var self = this;\n            this.endDragColumn(grid);\n            setTimeout(function() {\n                self.attachChain();\n            }, 200);\n        }\n        this.dragCol = -1;\n        this.dragging = false;\n        this.dragArmed = false;\n        this.cursor = null;\n        grid.repaint();\n\n        if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseMove: function(grid, event) {\n        if (\n            grid.properties.columnsReorderable &&\n            !event.isColumnFixed &&\n            !this.dragging &&\n            event.isHeaderCell &&\n            event.mousePoint.y < grid.properties.columnGrabMargin\n        ) {\n            this.cursor = GRAB;\n        } else {\n            this.cursor = null;\n        }\n\n        if (this.next) {\n            this.next.handleMouseMove(grid, event);\n        }\n\n        if (event.isHeaderCell && this.dragging) {\n            this.cursor = GRABBING;\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc this is the main event handler that manages the dragging of the column\n     * @param {Hypergrid} grid\n     * @param {boolean} draggedToTheRight - are we moving to the right\n     */\n    floatColumnTo: function(grid, draggedToTheRight) {\n        this.floatingNow = true;\n\n        var visibleColumns = grid.renderer.visibleColumns;\n        var scrollLeft = grid.getHScrollValue();\n        var floaterIndex = grid.renderOverridesCache.floater.columnIndex;\n        var draggerIndex = grid.renderOverridesCache.dragger.columnIndex;\n        var hdpiratio = grid.renderOverridesCache.dragger.hdpiratio;\n\n        var draggerStartX;\n        var floaterStartX;\n        var fixedColumnCount = grid.getFixedColumnCount();\n        var draggerWidth = grid.getColumnWidth(draggerIndex);\n        var floaterWidth = grid.getColumnWidth(floaterIndex);\n\n        var max = grid.getVisibleColumnsCount();\n\n        var doffset = 0;\n        var foffset = 0;\n\n        if (draggerIndex >= fixedColumnCount) {\n            doffset = scrollLeft;\n        }\n        if (floaterIndex >= fixedColumnCount) {\n            foffset = scrollLeft;\n        }\n\n        if (draggedToTheRight) {\n            draggerStartX = visibleColumns[Math.min(max, draggerIndex - doffset)].left;\n            floaterStartX = visibleColumns[Math.min(max, floaterIndex - foffset)].left;\n\n            grid.renderOverridesCache.dragger.startX = (draggerStartX + floaterWidth) * hdpiratio;\n            grid.renderOverridesCache.floater.startX = draggerStartX * hdpiratio;\n\n        } else {\n            floaterStartX = visibleColumns[Math.min(max, floaterIndex - foffset)].left;\n            draggerStartX = floaterStartX + draggerWidth;\n\n            grid.renderOverridesCache.dragger.startX = floaterStartX * hdpiratio;\n            grid.renderOverridesCache.floater.startX = draggerStartX * hdpiratio;\n        }\n        grid.swapColumns(draggerIndex, floaterIndex);\n        grid.renderOverridesCache.dragger.columnIndex = floaterIndex;\n        grid.renderOverridesCache.floater.columnIndex = draggerIndex;\n\n\n        this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(grid, floaterStartX, draggerStartX));\n\n        this.doFloaterAnimation(grid);\n\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc manifest the column drag and drop animation\n     * @param {Hypergrid} grid\n     * @param {number} floaterStartX - the x start coordinate of the column underneath that floats behind the dragged column\n     * @param {number} draggerStartX - the x start coordinate of the dragged column\n     */\n    doColumnMoveAnimation: function(grid, floaterStartX, draggerStartX) {\n        var self = this;\n        return function() {\n            var d = floatColumn;\n            d.style.display = 'inline';\n            self.setCrossBrowserProperty(d, 'transform', 'translate(' + floaterStartX + 'px, ' + 0 + 'px)');\n\n            //d.style.webkit-webkit-Transform = 'translate(' + floaterStartX + 'px, ' + 0 + 'px)';\n            //d.style.webkit-webkit-Transform = 'translate(' + floaterStartX + 'px, ' + 0 + 'px)';\n\n            requestAnimationFrame(function() {\n                self.setCrossBrowserProperty(d, 'transition', (self.isWebkit ? '-webkit-' : '') + 'transform ' + columnAnimationTime + 'ms ease');\n                self.setCrossBrowserProperty(d, 'transform', 'translate(' + draggerStartX + 'px, ' + -2 + 'px)');\n            });\n            grid.repaint();\n            //need to change this to key frames\n\n            setTimeout(function() {\n                self.setCrossBrowserProperty(d, 'transition', '');\n                grid.renderOverridesCache.floater = null;\n                grid.repaint();\n                self.doFloaterAnimation(grid);\n                requestAnimationFrame(function() {\n                    d.style.display = 'none';\n                    self.isFloatingNow = false;\n                });\n            }, columnAnimationTime + 50);\n        };\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc manifest the floater animation\n     * @param {Hypergrid} grid\n     */\n    doFloaterAnimation: function(grid) {\n        if (this.floaterAnimationQueue.length === 0) {\n            this.floatingNow = false;\n            grid.repaint();\n            return;\n        }\n        var animation = this.floaterAnimationQueue.pop();\n        animation();\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc create the float column at columnIndex underneath the dragged column\n     * @param {Hypergrid} grid\n     * @param {number} columnIndex - the index of the column that will be floating\n     */\n    createFloatColumn: function(grid, columnIndex) {\n\n        var fixedColumnCount = grid.getFixedColumnCount();\n        var scrollLeft = grid.getHScrollValue();\n\n        if (columnIndex < fixedColumnCount) {\n            scrollLeft = 0;\n        }\n\n        var columnWidth = grid.getColumnWidth(columnIndex);\n        var colHeight = grid.div.clientHeight;\n        var d = floatColumn;\n        var style = d.style;\n        var location = grid.div.getBoundingClientRect();\n\n        style.top = (location.top - 2) + 'px';\n        style.left = location.left + 'px';\n\n        var hdpiRatio = grid.getHiDPI(floatColumnCTX);\n\n        d.setAttribute('width', Math.round(columnWidth * hdpiRatio) + 'px');\n        d.setAttribute('height', Math.round(colHeight * hdpiRatio) + 'px');\n        style.boxShadow = '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)';\n        style.width = columnWidth + 'px'; //Math.round(columnWidth / hdpiRatio) + 'px';\n        style.height = colHeight + 'px'; //Math.round(colHeight / hdpiRatio) + 'px';\n        style.borderTop = '1px solid ' + grid.properties.lineColor;\n        style.backgroundColor = grid.properties.backgroundColor;\n\n        var startX = grid.renderer.visibleColumns[columnIndex - scrollLeft].left * hdpiRatio;\n\n        floatColumnCTX.scale(hdpiRatio, hdpiRatio);\n\n        grid.renderOverridesCache.floater = {\n            columnIndex: columnIndex,\n            ctx: floatColumnCTX,\n            startX: startX,\n            width: columnWidth,\n            height: colHeight,\n            hdpiratio: hdpiRatio\n        };\n\n        style.zIndex = '4';\n        this.setCrossBrowserProperty(d, 'transform', 'translate(' + startX + 'px, ' + -2 + 'px)');\n        GRABBING.forEach(setName, style);\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc utility function for setting cross browser css properties\n     * @param {HTMLElement} element - descripton\n     * @param {string} property - the property\n     * @param {string} value - the value to assign\n     */\n    setCrossBrowserProperty: function(element, property, value) {\n        var uProperty = property[0].toUpperCase() + property.substr(1);\n        this.setProp(element, 'webkit' + uProperty, value);\n        this.setProp(element, 'Moz' + uProperty, value);\n        this.setProp(element, 'ms' + uProperty, value);\n        this.setProp(element, 'O' + uProperty, value);\n        this.setProp(element, property, value);\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc utility function for setting properties on HTMLElements\n     * @param {HTMLElement} element - descripton\n     * @param {string} property - the property\n     * @param {string} value - the value to assign\n     */\n    setProp: function(element, property, value) {\n        if (property in element.style) {\n            element.style[property] = value;\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc create the dragged column at columnIndex above the floated column\n     * @param {Hypergrid} grid\n     * @param {number} x - the start position\n     * @param {number} columnIndex - the index of the column that will be floating\n     */\n    createDragColumn: function(grid, x, columnIndex) {\n\n        var fixedColumnCount = grid.getFixedColumnCount();\n        var scrollLeft = grid.getHScrollValue();\n\n        if (columnIndex < fixedColumnCount) {\n            scrollLeft = 0;\n        }\n\n        var hdpiRatio = grid.getHiDPI(draggerCTX);\n        var columnWidth = grid.getColumnWidth(columnIndex);\n        var colHeight = grid.div.clientHeight;\n        var d = dragger;\n        var location = grid.div.getBoundingClientRect();\n        var style = d.style;\n\n        style.top = location.top + 'px';\n        style.left = location.left + 'px';\n        style.opacity = 0.85;\n        style.boxShadow = '0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)';\n        //style.zIndex = 100;\n        style.borderTop = '1px solid ' + grid.properties.lineColor;\n        style.backgroundColor = grid.properties.backgroundColor;\n\n        d.setAttribute('width', Math.round(columnWidth * hdpiRatio) + 'px');\n        d.setAttribute('height', Math.round(colHeight * hdpiRatio) + 'px');\n\n        style.width = columnWidth + 'px'; //Math.round(columnWidth / hdpiRatio) + 'px';\n        style.height = colHeight + 'px'; //Math.round(colHeight / hdpiRatio) + 'px';\n\n        var startX = grid.renderer.visibleColumns[columnIndex - scrollLeft].left * hdpiRatio;\n\n        draggerCTX.scale(hdpiRatio, hdpiRatio);\n\n        grid.renderOverridesCache.dragger = {\n            columnIndex: columnIndex,\n            startIndex: columnIndex,\n            ctx: draggerCTX,\n            startX: startX,\n            width: columnWidth,\n            height: colHeight,\n            hdpiratio: hdpiRatio\n        };\n\n        this.setCrossBrowserProperty(d, 'transform', 'translate(' + x + 'px, -5px)');\n        style.zIndex = '5';\n        GRABBING.forEach(setName, style);\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc this function is the main dragging logic\n     * @param {Hypergrid} grid\n     * @param {number} x - the start position\n     */\n    dragColumn: function(grid, x) {\n\n        //TODO: this function is overly complex, refactor this in to something more reasonable\n        var self = this;\n\n        var autoScrollingNow = this.columnDragAutoScrollingRight || this.columnDragAutoScrollingLeft;\n\n        var hdpiRatio = grid.getHiDPI(draggerCTX);\n\n        var dragColumnIndex = grid.renderOverridesCache.dragger.columnIndex;\n\n        var minX = 0;\n        var maxX = grid.renderer.getFinalVisibleColumnBoundary();\n        x = Math.min(x, maxX + 15);\n        x = Math.max(minX - 15, x);\n\n        //am I at my lower bound\n        var atMin = x < minX && dragColumnIndex !== 0;\n\n        //am I at my upper bound\n        var atMax = x > maxX;\n\n        var d = dragger;\n\n        this.setCrossBrowserProperty(d, 'transition', (self.isWebkit ? '-webkit-' : '') + 'transform ' + 0 + 'ms ease, box-shadow ' + columnAnimationTime + 'ms ease');\n\n        this.setCrossBrowserProperty(d, 'transform', 'translate(' + x + 'px, ' + -10 + 'px)');\n        requestAnimationFrame(function() {\n            d.style.display = 'inline';\n        });\n\n        var overCol = grid.renderer.getColumnFromPixelX(x + (d.width / 2 / hdpiRatio));\n\n        if (atMin) {\n            overCol = 0;\n        }\n\n        if (atMax) {\n            overCol = grid.getColumnCount() - 1;\n        }\n\n        var doAFloat = dragColumnIndex > overCol;\n        doAFloat = doAFloat || (overCol - dragColumnIndex >= 1);\n\n        if (doAFloat && !autoScrollingNow) {\n            var draggedToTheRight = dragColumnIndex < overCol;\n            // if (draggedToTheRight) {\n            //     overCol -= 1;\n            // }\n            if (this.isFloatingNow) {\n                return;\n            }\n\n            this.isFloatingNow = true;\n            this.createFloatColumn(grid, overCol);\n            this.floatColumnTo(grid, draggedToTheRight);\n        } else {\n\n            if (x < minX - 10) {\n                this.checkAutoScrollToLeft(grid, x);\n            }\n            if (x > minX - 10) {\n                this.columnDragAutoScrollingLeft = false;\n            }\n            //lets check for autoscroll to right if were up against it\n            if (atMax || x > maxX + 10) {\n                this.checkAutoScrollToRight(grid, x);\n                return;\n            }\n            if (x < maxX + 10) {\n                this.columnDragAutoScrollingRight = false;\n            }\n        }\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc autoscroll to the right if necessary\n     * @param {Hypergrid} grid\n     * @param {number} x - the start position\n     */\n    checkAutoScrollToRight: function(grid, x) {\n        if (this.columnDragAutoScrollingRight) {\n            return;\n        }\n        this.columnDragAutoScrollingRight = true;\n        this._checkAutoScrollToRight(grid, x);\n    },\n\n    _checkAutoScrollToRight: function(grid, x) {\n        if (!this.columnDragAutoScrollingRight) {\n            return;\n        }\n        var scrollLeft = grid.getHScrollValue();\n        if (!grid.dragging || scrollLeft > (grid.sbHScroller.range.max - 2)) {\n            return;\n        }\n        var draggedIndex = grid.renderOverridesCache.dragger.columnIndex;\n        grid.scrollBy(1, 0);\n        var newIndex = draggedIndex + 1;\n\n        grid.swapColumns(newIndex, draggedIndex);\n        grid.renderOverridesCache.dragger.columnIndex = newIndex;\n\n        setTimeout(this._checkAutoScrollToRight.bind(this, grid, x), 250);\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc autoscroll to the left if necessary\n     * @param {Hypergrid} grid\n     * @param {number} x - the start position\n     */\n    checkAutoScrollToLeft: function(grid, x) {\n        if (this.columnDragAutoScrollingLeft) {\n            return;\n        }\n        this.columnDragAutoScrollingLeft = true;\n        this._checkAutoScrollToLeft(grid, x);\n    },\n\n    _checkAutoScrollToLeft: function(grid, x) {\n        if (!this.columnDragAutoScrollingLeft) {\n            return;\n        }\n\n        var scrollLeft = grid.getHScrollValue();\n        if (!grid.dragging || scrollLeft < 1) {\n            return;\n        }\n        var draggedIndex = grid.renderOverridesCache.dragger.columnIndex;\n        grid.swapColumns(draggedIndex + scrollLeft, draggedIndex + scrollLeft - 1);\n        grid.scrollBy(-1, 0);\n        setTimeout(this._checkAutoScrollToLeft.bind(this, grid, x), 250);\n    },\n\n    /**\n     * @memberOf CellMoving.prototype\n     * @desc a column drag has completed, update data and cleanup\n     * @param {Hypergrid} grid\n     */\n    endDragColumn: function(grid) {\n\n        var fixedColumnCount = grid.getFixedColumnCount();\n        var scrollLeft = grid.getHScrollValue();\n\n        var columnIndex = grid.renderOverridesCache.dragger.columnIndex;\n\n        if (columnIndex < fixedColumnCount) {\n            scrollLeft = 0;\n        }\n\n        var self = this;\n        var startX = grid.renderer.visibleColumns[columnIndex - scrollLeft].left;\n        var d = dragger;\n        var changed = grid.renderOverridesCache.dragger.startIndex !== grid.renderOverridesCache.dragger.columnIndex;\n        self.setCrossBrowserProperty(d, 'transition', (self.isWebkit ? '-webkit-' : '') + 'transform ' + columnAnimationTime + 'ms ease, box-shadow ' + columnAnimationTime + 'ms ease');\n        self.setCrossBrowserProperty(d, 'transform', 'translate(' + startX + 'px, ' + -1 + 'px)');\n        d.style.boxShadow = '0px 0px 0px #888888';\n\n        setTimeout(function() {\n            grid.renderOverridesCache.dragger = null;\n            grid.repaint();\n            requestAnimationFrame(function() {\n                d.style.display = 'none';\n                grid.endDragColumnNotification(); //internal notification\n                if (changed){\n                    grid.fireSyntheticOnColumnsChangedEvent(); //public notification\n                }\n            });\n        }, columnAnimationTime + 50);\n\n    }\n\n});\n\nmodule.exports = ColumnMoving;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar ColumnResizing = Feature.extend('ColumnResizing', {\n\n    /**\n     * the pixel location of the where the drag was initiated\n     * @type {number}\n     * @default\n     * @memberOf ColumnResizing.prototype\n     */\n    dragStart: -1,\n\n    /**\n     * the starting width/height of the row/column we are dragging\n     * @type {number}\n     * @default -1\n     * @memberOf ColumnResizing.prototype\n     */\n    dragStartWidth: -1,\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @desc get the mouse x,y coordinate\n     * @returns {number}\n     * @param {MouseEvent} event - the mouse event to query\n     */\n    getMouseValue: function(event) {\n        return event.primitiveEvent.detail.mouse.x;\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @desc returns the index of which divider I'm over\n     * @returns {number}\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    overAreaDivider: function(grid, event) {\n        var leftMostColumnIndex = grid.behavior.leftMostColIndex;\n        return event.gridCell.x !== leftMostColumnIndex && event.mousePoint.x <= 3 ||\n            event.mousePoint.x >= event.bounds.width - 3;\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @desc return the cursor name\n     * @returns {string}\n     */\n    getCursorName: function() {\n        return 'col-resize';\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDrag: function(grid, event) {\n        if (this.dragColumn) {\n            var delta = this.getMouseValue(event) - this.dragStart,\n                dragWidth = this.dragStartWidth + delta,\n                nextWidth = this.nextStartWidth - delta;\n            if (!this.nextColumn) { // nextColumn et al instance vars defined when resizeColumnInPlace (by handleMouseDown)\n                grid.behavior.setColumnWidth(this.dragColumn, dragWidth);\n            } else {\n                var np = this.nextColumn.properties, dp = this.dragColumn.properties;\n                if (\n                    0 < delta && delta <= (this.nextStartWidth - np.minimumColumnWidth) &&\n                    (!dp.maximumColumnWidth || dragWidth <= dp.maximumColumnWidth)\n                    ||\n                    0 > delta && delta >= -(this.dragStartWidth - dp.minimumColumnWidth) &&\n                    (!np.maximumColumnWidth || nextWidth < np.maximumColumnWidth)\n                ) {\n                    grid.behavior.setColumnWidth(this.dragColumn, dragWidth);\n                    grid.behavior.setColumnWidth(this.nextColumn, nextWidth);\n                }\n            }\n        } else if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        if (event.isHeaderRow && this.overAreaDivider(grid, event)) {\n            var gridColumnIndex = event.gridCell.x;\n\n            if (event.mousePoint.x <= 3) {\n                gridColumnIndex -= 1;\n                var vc = grid.renderer.visibleColumns[gridColumnIndex] ||\n                    grid.renderer.visibleColumns[gridColumnIndex - 1]; // get row number column if tree column undefined\n                if (vc) {\n                    this.dragColumn = vc.column;\n                    this.dragStartWidth = vc.width;\n                } else {\n                    return; // can't drag left-most column boundary\n                }\n            } else {\n                this.dragColumn = event.column;\n                this.dragStartWidth = event.bounds.width;\n            }\n\n            this.dragStart = this.getMouseValue(event);\n\n            if (this.dragColumn.properties.resizeColumnInPlace) {\n                gridColumnIndex += 1;\n                vc = grid.renderer.visibleColumns[gridColumnIndex] ||\n                    grid.renderer.visibleColumns[gridColumnIndex + 1]; // get first data column if tree column undefined;\n                if (vc) {\n                    this.nextColumn = vc.column;\n                    this.nextStartWidth = this.nextColumn.getWidth();\n                } else {\n                    this.nextColumn = undefined;\n                }\n            } else {\n                this.nextColumn = undefined; // in case resizeColumnInPlace was previously on but is now off\n            }\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseUp: function(grid, event) {\n        if (this.dragColumn) {\n            this.cursor = null;\n            this.dragColumn = false;\n\n            event.primitiveEvent.stopPropagation();\n            //delay here to give other events a chance to be dropped\n            grid.behaviorShapeChanged();\n        } else if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnResizing.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseMove: function(grid, event) {\n        if (!this.dragColumn) {\n            this.cursor = null;\n\n            if (this.next) {\n                this.next.handleMouseMove(grid, event);\n            }\n\n            this.cursor = event.isHeaderRow && this.overAreaDivider(grid, event) ? this.getCursorName() : null;\n        }\n    },\n\n    /**\n     * @param {Hypergrid} grid\n     * @param {CellEvent} cellEvent\n     * @memberOf ColumnResizing.prototype\n     */\n    handleDoubleClick: function(grid, event) {\n        if (event.isHeaderRow && this.overAreaDivider(grid, event)) {\n            var column = event.mousePoint.x <= 3\n                ? grid.behavior.getActiveColumn(event.gridCell.x - 1)\n                : event.column;\n            column.addProperties({\n                columnAutosizing: true,\n                columnAutosized: false // todo: columnAutosizing should be a setter that automatically resets columnAutosized on state change to true\n            });\n            setTimeout(function() { // do after next render, which measures text now that auto-sizing is on\n                grid.autosizeColumn(column);\n            });\n        } else if (this.next) {\n            this.next.handleDoubleClick(grid, event);\n        }\n    }\n\n});\n\nmodule.exports = ColumnResizing;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar ColumnSelection = Feature.extend('ColumnSelection', {\n\n    /**\n     * The pixel location of the mouse pointer during a drag operation.\n     * @type {Point}\n     * @default null\n     * @memberOf ColumnSelection.prototype\n     */\n    currentDrag: null,\n\n    /**\n     * The horizontal cell coordinate of the where the mouse pointer is during a drag operation.\n     * @type {Object}\n     * @default null\n     * @memberOf ColumnSelection.prototype\n     */\n    lastDragColumn: null,\n\n    /**\n     * a millisecond value representing the previous time an autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf ColumnSelection.prototype\n     */\n    sbLastAuto: 0,\n\n    /**\n     * a millisecond value representing the time the current autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf ColumnSelection.prototype\n     */\n    sbAutoStart: 0,\n\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseUp: function(grid, event) {\n        if (this.dragging) {\n            this.dragging = false;\n        }\n        if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n    },\n\n    handleDoubleClick: function(grid, event) {\n        if (this.doubleClickTimer) {\n            clearTimeout(this.doubleClickTimer); // prevent mouseDown from continuing\n            this.doubleClickTimer = undefined;\n        }\n        if (this.next) {\n            this.next.handleDoubleClick(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        if (this.doubleClickTimer) {\n            return;\n        }\n\n        // todo: >= 5 depends on header being top-most row which is currently always true but we may allow header \"section\" to be arbitrary position within quadrant (see also handleMouseDown in ColumnMoving.js)\n        if (\n            grid.properties.columnSelection &&\n            !event.primitiveEvent.detail.isRightClick &&\n            (\n                grid.properties.autoSelectColumns ||\n                event.isHeaderCell && event.mousePoint.y >= 5\n            )\n        ) {\n            // HOLD OFF WHILE WAITING FOR DOUBLE-CLICK\n            this.doubleClickTimer = setTimeout(\n                doubleClickTimerCallback.bind(this, grid, event),\n                doubleClickDelay.call(this, grid, event)\n            );\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDrag: function(grid, event) {\n        if (\n            grid.properties.columnSelection &&\n            !this.isColumnDragging(grid) &&\n            !event.primitiveEvent.detail.isRightClick &&\n            this.dragging\n        ) {\n            //if we are in the fixed area do not apply the scroll values\n            this.lastDragColumn = event.gridCell.x;\n            this.currentDrag = event.primitiveEvent.detail.mouse;\n            this.checkDragScroll(grid, this.currentDrag);\n            this.handleMouseDragCellSelection(grid, this.lastDragColumn, event.primitiveEvent.detail.keys);\n        } else if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleKeyDown: function(grid, event) {\n        var detail = event.detail,\n            handler = grid.getLastSelectionType() === 'column' &&\n                this['handle' + detail.char];\n\n        if (handler) {\n            handler.call(this, grid, detail);\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc Handle a mousedrag selection\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    handleMouseDragCellSelection: function(grid, x, keys) {\n        var mouseX = grid.getMouseDown().x;\n\n        grid.clearMostRecentColumnSelection();\n\n        grid.selectColumn(mouseX, x);\n        grid.setDragExtent(grid.newPoint(x - mouseX, 0));\n\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc this checks while were dragging if we go outside the visible bounds, if so, kick off the external autoscroll check function (above)\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     */\n    checkDragScroll: function(grid, mouse) {\n        if (\n            grid.properties.scrollingEnabled &&\n            grid.getDataBounds().contains(mouse)\n        ) {\n            if (grid.isScrollingNow()) {\n                grid.setScrollingNow(false);\n            }\n        } else {\n            if (!grid.isScrollingNow()) {\n                grid.setScrollingNow(true);\n                this.scrollDrag(grid);\n            }\n        }\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc this function makes sure that while we are dragging outside of the grid visible bounds, we srcroll accordingly\n     * @param {Hypergrid} grid\n     */\n    scrollDrag: function(grid) {\n        if (!grid.isScrollingNow()) {\n            return;\n        }\n\n        var b = grid.getDataBounds(),\n            xOffset;\n\n        if (this.currentDrag.x < b.origin.x) {\n            xOffset = -1;\n        } else if (this.currentDrag.x > b.origin.x + b.extent.x) {\n            xOffset = 1;\n        }\n\n        if (xOffset) {\n            if (this.lastDragColumn >= grid.getFixedColumnCount()) {\n                this.lastDragColumn += xOffset;\n            }\n            grid.scrollBy(xOffset, 0);\n        }\n\n        this.handleMouseDragCellSelection(grid, this.lastDragColumn, []); // update the selection\n        grid.repaint();\n        setTimeout(this.scrollDrag.bind(this, grid), 25);\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc extend a selection or create one if there isnt yet\n     * @param {Hypergrid} grid\n     * @param {Object} gridCell - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    extendSelection: function(grid, x, keys) {\n        if (!grid.abortEditing()) { return; }\n\n        var mouseX = grid.getMouseDown().x,\n            hasSHIFT = keys.indexOf('SHIFT') > 0;\n\n        if (x < 0) { // outside of the grid?\n            return; // do nothing\n        }\n\n        if (hasSHIFT) {\n            grid.clearMostRecentColumnSelection();\n            grid.selectColumn(x, mouseX);\n            grid.setDragExtent(grid.newPoint(x - mouseX, 0));\n        } else {\n            grid.toggleSelectColumn(x, keys);\n            grid.setMouseDown(grid.newPoint(x, 0));\n            grid.setDragExtent(grid.newPoint(0, 0));\n        }\n\n        grid.repaint();\n    },\n\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     */\n    handleDOWNSHIFT: function(grid) {},\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUPSHIFT: function(grid) {},\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFTSHIFT: function(grid) {\n        this.moveShiftSelect(grid, -1);\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHTSHIFT: function(grid) {\n        this.moveShiftSelect(grid, 1);\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleDOWN: function(grid) {\n\n        // var mouseCorner = grid.getMouseDown().plus(grid.getDragExtent());\n        // var maxRows = grid.getRowCount() - 1;\n\n        // var newX = mouseCorner.x;\n        // var newY = grid.getHeaderRowCount() + grid.getVScrollValue();\n\n        // newY = Math.min(maxRows, newY);\n\n        // grid.clearSelections();\n        // grid.select(newX, newY, 0, 0);\n        // grid.setMouseDown(new grid.rectangular.Point(newX, newY));\n        // grid.setDragExtent(new grid.rectangular.Point(0, 0));\n\n        // grid.repaint();\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUP: function(grid) {},\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFT: function(grid) {\n        this.moveSingleSelect(grid, -1);\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHT: function(grid) {\n        this.moveSingleSelect(grid, 1);\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc If we are holding down the same navigation key, accelerate the increment we scroll\n     * #### returns: integer\n     */\n    getAutoScrollAcceleration: function() {\n        var elapsed = this.getAutoScrollDuration() / 2000;\n        return Math.max(1, Math.floor(elapsed * elapsed * elapsed * elapsed));\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc set the start time to right now when we initiate an auto scroll\n     */\n    setAutoScrollStartTime: function() {\n        this.sbAutoStart = Date.now();\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc update the autoscroll start time if we haven't autoscrolled within the last 500ms otherwise update the current autoscroll time\n     */\n    pingAutoScroll: function() {\n        var now = Date.now();\n        if (now - this.sbLastAuto > 500) {\n            this.setAutoScrollStartTime();\n        }\n        this.sbLastAuto = Date.now();\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc answer how long we have been auto scrolling\n     * #### returns: integer\n     */\n    getAutoScrollDuration: function() {\n        if (Date.now() - this.sbLastAuto > 500) {\n            return 0;\n        }\n        return Date.now() - this.sbAutoStart;\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc Augment the most recent selection extent by (offsetX,offsetY) and scroll if necessary.\n     * @param {Hypergrid} grid\n     * @param {number} offsetX - x coordinate to start at\n     * @param {number} offsetY - y coordinate to start at\n     */\n    moveShiftSelect: function(grid, offsetX) {\n        var origin = grid.getMouseDown(),\n            extent = grid.getDragExtent(),\n            newX = extent.x + offsetX,\n            maxViewableColumns = grid.renderer.visibleColumns.length - 1,\n            maxColumns = grid.getColumnCount() - 1;\n\n        if (!grid.properties.scrollingEnabled) {\n            maxColumns = Math.min(maxColumns, maxViewableColumns);\n        }\n\n        newX = Math.min(maxColumns - origin.x, Math.max(-origin.x, newX));\n\n        grid.clearMostRecentColumnSelection();\n        grid.selectColumn(origin.x, origin.x + newX);\n        grid.setDragExtent(grid.newPoint(newX, 0));\n\n        if (grid.insureModelColIsVisible(newX + origin.x, offsetX)) {\n            this.pingAutoScroll();\n        }\n\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf ColumnSelection.prototype\n     * @desc Replace the most recent selection with a single cell selection that is moved (offsetX,offsetY) from the previous selection extent.\n     * @param {Hypergrid} grid\n     * @param {number} offsetX - x coordinate to start at\n     * @param {number} offsetY - y coordinate to start at\n     */\n    moveSingleSelect: function(grid, offsetX) {\n        var extent = grid.getDragExtent(),\n            mouseCorner = grid.getMouseDown().plus(extent),\n            newX = mouseCorner.x + offsetX,\n            maxColumns = grid.getColumnCount() - 1,\n            maxViewableColumns = grid.getVisibleColumnsCount() - 1;\n\n        if (!grid.properties.scrollingEnabled) {\n            maxColumns = Math.min(maxColumns, maxViewableColumns);\n        }\n\n        newX = Math.min(maxColumns, Math.max(0, newX));\n\n        grid.clearSelections();\n        grid.selectColumn(newX);\n        grid.setMouseDown(grid.newPoint(newX, 0));\n        grid.setDragExtent(grid.newPoint(0, 0));\n\n        if (grid.insureModelColIsVisible(newX, offsetX)) {\n            this.pingAutoScroll();\n        }\n\n        grid.repaint();\n    },\n\n    isColumnDragging: function(grid) {\n        var dragger = grid.lookupFeature('ColumnMoving');\n        return dragger && (dragger.dragging || dragger.dragArmed); //&& !this.dragging;\n    }\n\n});\n\nfunction doubleClickDelay(grid, event) {\n    var columnProperties;\n\n    return (\n        event.isHeaderCell &&\n        !(columnProperties = event.columnProperties).unsortable &&\n        columnProperties.sortOnDoubleClick &&\n        300\n    );\n}\n\nfunction doubleClickTimerCallback(grid, event) {\n    this.doubleClickTimer = undefined;\n    this.dragging = true;\n    this.extendSelection(grid, event.gridCell.x, event.primitiveEvent.detail.keys);\n}\n\nmodule.exports = ColumnSelection;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar ColumnSorting = Feature.extend('ColumnSorting', {\n\n    /**\n     * @memberOf ColumnSorting.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleClick: function(grid, event) {\n        sort.call(this, grid, event);\n    },\n\n    /**\n     * @memberOf ColumnSorting.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleDoubleClick: function(grid, event) {\n        sort.call(this, grid, event, true);\n    },\n\n    /**\n     * @memberOf ColumnSorting.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseMove: function(grid, event) {\n        var columnProperties;\n        if (\n            event.isRowFixed &&\n            event.isHeaderCell &&\n            (columnProperties = grid.behavior.getColumnProperties(event.gridCell.x)) &&\n            !columnProperties.unsortable\n        ) {\n            this.cursor = 'pointer';\n        } else {\n            this.cursor = null;\n        }\n        if (this.next) {\n            this.next.handleMouseMove(grid, event);\n        }\n    }\n\n});\n\nfunction sort(grid, event, onDoubleClick) {\n    var columnProperties;\n    if (\n        event.isHeaderCell &&\n        !(columnProperties = event.columnProperties).unsortable &&\n        !(columnProperties.sortOnDoubleClick ^ onDoubleClick) // both same (true or falsy)?\n    ) {\n        grid.fireSyntheticColumnSortEvent(event.gridCell.x, event.primitiveEvent.detail.keys);\n    }\n\n    if (this.next) {\n        this.next[onDoubleClick ? 'handleDoubleClick' : 'handleClick'](grid, event);\n    }\n}\n\nmodule.exports = ColumnSorting;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n */\nvar Filters = Feature.extend('Filters', {\n\n    /**\n     * Navigate away from the filter cell when:\n     * 1. Coming from a cell editor (`event.detail.editor` defined).\n     * 2. The cell editor was for a filter cell.\n     * 3. The key (`event.detail.char) maps (through {@link module:defaults.navKeyMap|navKeyMap}) to one of:\n     *    * `'UP'` or `'DOWN'` - Selects first visible data cell under filter cell.\n     *    * `'LEFT'` - Opens filter cell editor in previous filterable column; if nonesuch, selects first visible data cell under filter cell.\n     *    * `'RIGHT'` - Opens filter cell editor in next filterable column; if nonesuch, selects first visible data cell under filter cell.\n     */\n    handleKeyDown: function(grid, event) {\n        var cellEvent, mappedNavKey, handler,\n            detail = event.detail;\n\n        if (detail.editor) {\n            cellEvent = detail.editor.event;\n            if (cellEvent.isFilterCell) {\n                mappedNavKey = cellEvent.properties.mappedNavKey(detail.char);\n                handler = this['handle' + mappedNavKey];\n            }\n        }\n\n        if (handler) {\n            handler.call(this, grid, detail);\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    },\n\n    handleLEFT: function(grid, detail) { moveLaterally(grid, detail, -1); },\n    handleRIGHT: function(grid, detail) { moveLaterally(grid, detail, +1); },\n    handleUP: moveDown,\n    handleDOWN: moveDown,\n\n    handleDoubleClick: function(grid, event) {\n        if (event.isFilterCell) {\n            grid.onEditorActivate(event);\n        } else if (this.next) {\n            this.next.handleDoubleClick(grid, event);\n        }\n    },\n\n    handleClick: function(grid, event) {\n        if (event.isFilterCell) {\n            grid.onEditorActivate(event);\n        } else if (this.next) {\n            this.next.handleClick(grid, event);\n        }\n    }\n\n});\n\nfunction moveLaterally(grid, detail, deltaX) {\n    var cellEvent = detail.editor.event,\n        gridX = cellEvent.visibleColumn.index,\n        gridY = cellEvent.visibleRow.index,\n        originX = gridX,\n        C = grid.renderer.visibleColumns.length;\n\n    cellEvent = new grid.behavior.CellEvent; // redefine so we don't reset the original below\n\n    while (\n        (gridX = (gridX + deltaX + C) % C) !== originX &&\n        cellEvent.resetGridXY(gridX, gridY)\n    ) {\n        if (cellEvent.properties.filterable) {\n            // Select previous or next filterable column's filter cell\n            grid.editAt(cellEvent);\n            return;\n        }\n    }\n\n    moveDown(grid, cellEvent);\n}\n\nfunction moveDown(grid, detail) {\n    var cellEvent = detail.editor.event,\n        gridX = cellEvent.visibleColumn.index;\n\n    // Select first visible grid cell of this column\n    grid.selectViewportCell(gridX, 0);\n    grid.takeFocus();\n}\n\nmodule.exports = Filters;\n","'use strict';\n\nvar Feature = require('./Feature');\n\nvar commands = {\n    PAGEDOWN: function(grid) { grid.pageDown(); },\n    PAGEUP: function(grid) { grid.pageUp(); },\n    PAGELEFT: function(grid) { grid.pageLeft(); },\n    PAGERIGHT: function(grid) { grid.pageRight(); }\n};\n\n/**\n * @constructor\n */\nvar KeyPaging = Feature.extend('KeyPaging', {\n\n    /**\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @memberOf KeyPaging.prototype\n     */\n    handleKeyDown: function(grid, event) {\n        var func = commands[event.detail.char];\n        if (func) {\n            func(grid);\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    }\n\n});\n\nmodule.exports = KeyPaging;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n */\nvar OnHover = Feature.extend('OnHover', {\n\n    /**\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     * @memberOf OnHover.prototype\n     */\n    handleMouseMove: function(grid, event) {\n        var hoverCell = grid.hoverCell;\n        if (!event.gridCell.equals(hoverCell)) {\n            if (hoverCell) {\n                this.handleMouseExit(grid, hoverCell);\n            }\n            this.handleMouseEnter(grid, event);\n            grid.setHoverCell(event);\n        } else if (this.next) {\n            this.next.handleMouseMove(grid, event);\n        }\n    }\n\n});\n\nmodule.exports = OnHover;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n */\nvar RowSelection = Feature.extend('RowSelection', {\n\n    /**\n     * The pixel location of the mouse pointer during a drag operation.\n     * @type {Point}\n     * @default null\n     * @memberOf RowSelection.prototype\n     */\n    currentDrag: null,\n\n    /**\n     * The cell coordinates of the where the mouse pointer is during a drag operation.\n     * @type {Object}\n     * @default null\n     * @memberOf RowSelection.prototype\n     */\n    lastDragCell: null,\n\n    /**\n     * a millisecond value representing the previous time an autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf RowSelection.prototype\n     */\n    sbLastAuto: 0,\n\n    /**\n     * a millisecond value representing the time the current autoscroll started\n     * @type {number}\n     * @default 0\n     * @memberOf RowSelection.prototype\n     */\n    sbAutoStart: 0,\n\n    dragArmed: false,\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseUp: function(grid, event) {\n        if (this.dragArmed) {\n            this.dragArmed = false;\n            moveCellSelection(grid);\n            grid.fireSyntheticRowSelectionChangedEvent();\n        } else if (this.dragging) {\n            this.dragging = false;\n            moveCellSelection(grid);\n            grid.fireSyntheticRowSelectionChangedEvent();\n        } else if (this.next) {\n            this.next.handleMouseUp(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDown: function(grid, event) {\n        var leftClick = !event.primitiveEvent.detail.isRightClick,\n            rowNumberClick = leftClick &&\n                grid.properties.showRowNumbers &&\n                event.isHandleColumn &&\n                event.mousePointInClickRect;\n\n        if (rowNumberClick && !grid.fireSyntheticRowHeaderClickedEvent(event)) {\n            return;\n        }\n\n        var rowSelectable = grid.properties.rowSelection && (leftClick && grid.properties.autoSelectRows || rowNumberClick);\n\n        if (rowSelectable && event.isHeaderHandle) {\n            //global row selection\n            grid.toggleSelectAllRows();\n        } else if (rowSelectable && event.isDataRow)  {\n            // if we are in the fixed area, do not apply the scroll values\n            this.dragArmed = true;\n            this.extendSelection(grid, event.dataCell.y, event.primitiveEvent.detail.keys);\n        } else if (this.next) {\n            this.next.handleMouseDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleMouseDrag: function(grid, event) {\n        if (\n            this.dragArmed &&\n            grid.properties.rowSelection &&\n            !event.primitiveEvent.detail.isRightClick\n        ) {\n            //if we are in the fixed area do not apply the scroll values\n            this.lastDragRow = event.dataCell.y;\n            this.dragging = true;\n            this.currentDrag = event.primitiveEvent.detail.mouse;\n            this.checkDragScroll(grid, this.currentDrag);\n            this.handleMouseDragCellSelection(grid, this.lastDragRow, event.primitiveEvent.detail.keys);\n        } else if (this.next) {\n            this.next.handleMouseDrag(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleKeyDown: function(grid, event) {\n        var handler;\n        if (\n            grid.getLastSelectionType() === 'row' &&\n            (handler = this['handle' + event.detail.char])\n        ) {\n            handler.call(this, grid, event.detail);\n        } else if (this.next) {\n            this.next.handleKeyDown(grid, event);\n        }\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc Handle a mousedrag selection\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    handleMouseDragCellSelection: function(grid, y, keys) {\n        var mouseY = grid.getMouseDown().y;\n\n        grid.clearMostRecentRowSelection();\n\n        grid.selectRow(mouseY, y);\n        grid.setDragExtent(grid.newPoint(0, y - mouseY));\n\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc this checks while were dragging if we go outside the visible bounds, if so, kick off the external autoscroll check function (above)\n     * @param {Hypergrid} grid\n     * @param {Object} mouse - the event details\n     */\n    checkDragScroll: function(grid, mouse) {\n        if (\n            grid.properties.scrollingEnabled &&\n            grid.getDataBounds().contains(mouse)\n        ) {\n            if (grid.isScrollingNow()) {\n                grid.setScrollingNow(false);\n            }\n        } else {\n            if (!grid.isScrollingNow()) {\n                grid.setScrollingNow(true);\n                this.scrollDrag(grid);\n            }\n        }\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc this function makes sure that while we are dragging outside of the grid visible bounds, we srcroll accordingly\n     * @param {Hypergrid} grid\n     */\n    scrollDrag: function(grid) {\n        if (!grid.isScrollingNow()) {\n            return;\n        }\n\n        var b = grid.getDataBounds(),\n            yOffset;\n\n        if (this.currentDrag.y < b.origin.y) {\n            yOffset = -1;\n        } else if (this.currentDrag.y > b.origin.y + b.extent.y) {\n            yOffset = 1;\n        }\n\n        if (yOffset) {\n            if (this.lastDragRow >= grid.getFixedRowCount()) {\n                this.lastDragRow += yOffset;\n            }\n            grid.scrollBy(0, yOffset);\n        }\n\n        this.handleMouseDragCellSelection(grid, this.lastDragRow, []); // update the selection\n        grid.repaint();\n        setTimeout(this.scrollDrag.bind(this, grid), 25);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc extend a selection or create one if there isnt yet\n     * @param {Hypergrid} grid\n     * @param {Object} gridCell - the event details\n     * @param {Array} keys - array of the keys that are currently pressed down\n     */\n    extendSelection: function(grid, y, keys) {\n        if (!grid.abortEditing()) { return; }\n\n        var mouseY = grid.getMouseDown().y,\n            hasSHIFT = keys.indexOf('SHIFT') !== -1;\n\n        if (y < 0) { // outside of the grid?\n            return; // do nothing\n        }\n\n        if (hasSHIFT) {\n            grid.clearMostRecentRowSelection();\n            grid.selectRow(y, mouseY);\n            grid.setDragExtent(grid.newPoint(0, y - mouseY));\n        } else {\n            grid.toggleSelectRow(y, keys);\n            grid.setMouseDown(grid.newPoint(0, y));\n            grid.setDragExtent(grid.newPoint(0, 0));\n        }\n\n        grid.repaint();\n    },\n\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     */\n    handleDOWNSHIFT: function(grid) {\n        this.moveShiftSelect(grid, 1);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUPSHIFT: function(grid) {\n        this.moveShiftSelect(grid, -1);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFTSHIFT: function(grid) {},\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHTSHIFT: function(grid) {},\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleDOWN: function(grid) {\n        this.moveSingleSelect(grid, 1);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleUP: function(grid) {\n        this.moveSingleSelect(grid, -1);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleLEFT: function(grid) {},\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleRIGHT: function(grid) {\n        var mouseCorner = grid.getMouseDown().plus(grid.getDragExtent()),\n            maxColumns = grid.getColumnCount() - 1,\n            newX = grid.getHScrollValue(),\n            newY = mouseCorner.y;\n\n        newX = Math.min(maxColumns, newX);\n\n        grid.clearSelections();\n        grid.select(newX, newY, 0, 0);\n        grid.setMouseDown(grid.newPoint(newX, newY));\n        grid.setDragExtent(grid.newPoint(0, 0));\n\n        grid.repaint();\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc If we are holding down the same navigation key, accelerate the increment we scroll\n     * #### returns: integer\n     */\n    getAutoScrollAcceleration: function() {\n        var count = 1;\n        var elapsed = this.getAutoScrollDuration() / 2000;\n        count = Math.max(1, Math.floor(elapsed * elapsed * elapsed * elapsed));\n        return count;\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc set the start time to right now when we initiate an auto scroll\n     */\n    setAutoScrollStartTime: function() {\n        this.sbAutoStart = Date.now();\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc update the autoscroll start time if we haven't autoscrolled within the last 500ms otherwise update the current autoscroll time\n     */\n    pingAutoScroll: function() {\n        var now = Date.now();\n        if (now - this.sbLastAuto > 500) {\n            this.setAutoScrollStartTime();\n        }\n        this.sbLastAuto = Date.now();\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc answer how long we have been auto scrolling\n     * #### returns: integer\n     */\n    getAutoScrollDuration: function() {\n        if (Date.now() - this.sbLastAuto > 500) {\n            return 0;\n        }\n        return Date.now() - this.sbAutoStart;\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc Augment the most recent selection extent by (offsetX,offsetY) and scroll if necessary.\n     * @param {Hypergrid} grid\n     * @param {number} offsetX - x coordinate to start at\n     * @param {number} offsetY - y coordinate to start at\n     */\n    moveShiftSelect: function(grid, offsetY) {\n       this.moveSingleSelect(grid, offsetY, true);\n    },\n\n    /**\n     * @memberOf RowSelection.prototype\n     * @desc Replace the most recent row selection with a single cell row selection `offsetY` rows from the previous selection.\n     * @param {Hypergrid} grid\n     * @param {number} offsetY - y coordinate to start at\n     */\n    moveSingleSelect: function(grid, offsetY, shift) {\n        var selections = grid.selectionModel.rowSelectionModel.selection,\n            lastSelection = selections[selections.length - 1],\n            top = lastSelection[0],\n            bottom = lastSelection[1];\n\n        if (shift) {\n            var firstOffsetY = lastSelection.offsetY = lastSelection.offsetY || offsetY;\n            if (lastSelection.offsetY < 0) {\n                top += offsetY;\n            } else {\n                bottom += offsetY;\n            }\n        } else {\n            top += offsetY;\n            bottom += offsetY;\n        }\n\n        if (top < 0 || bottom >= grid.getRowCount()) {\n            return;\n        }\n\n        selections.length -= 1;\n        if (selections.length) {\n            lastSelection = selections[selections.length - 1];\n            delete lastSelection.offsetY;\n        }\n        grid.selectRow(top, bottom);\n        if (shift && top !== bottom) {\n            lastSelection = selections[selections.length - 1];\n            lastSelection.offsetY = firstOffsetY;\n        }\n\n        grid.setMouseDown(grid.newPoint(0, top));\n        grid.setDragExtent(grid.newPoint(0, bottom - top));\n\n        grid.scrollToMakeVisible(grid.properties.fixedColumnCount, offsetY < 0 ? top : bottom + 1); // +1 for partial row\n\n        moveCellSelection(grid);\n        grid.fireSyntheticRowSelectionChangedEvent();\n        grid.repaint();\n    },\n\n    isSingleRowSelection: function() {\n        return true;\n    }\n\n});\n\nfunction moveCellSelection(grid) {\n    var rows;\n\n    if (\n        grid.properties.collapseCellSelections &&\n        grid.properties.singleRowSelectionMode && // let's only attempt this when in this mode\n        !grid.properties.multipleSelections && // and only when in single selection mode\n        (rows = grid.getSelectedRows()).length && // user just selected a row (must be single row due to mode we're in)\n        grid.selectionModel.getSelections().length  // there was a cell region selected (must be the only one)\n    ) {\n        var rect = grid.selectionModel.getLastSelection(), // the only cell selection\n            x = rect.left,\n            y = rows[0], // we know there's only 1 row selected\n            width = rect.right - x,\n            height = 0, // collapse the new region to occupy a single row\n            fireSelectionChangedEvent = false;\n\n        grid.selectionModel.select(x, y, width, height, fireSelectionChangedEvent);\n        grid.repaint();\n    }\n}\n\nmodule.exports = RowSelection;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n */\nvar ThumbwheelScrolling = Feature.extend('ThumbwheelScrolling', {\n\n    /**\n     * @memberOf ThumbwheelScrolling.prototype\n     * @param {Hypergrid} grid\n     * @param {Object} event - the event details\n     */\n    handleWheelMoved: function(grid, e) {\n        if (!grid.properties.scrollingEnabled) {\n            return;\n        }\n\n        var primEvent = e.primitiveEvent,\n            deltaX = Math.sign(primEvent.wheelDeltaX || -primEvent.deltaX),\n            deltaY = Math.sign(primEvent.wheelDeltaY || -primEvent.deltaY);\n\n        if (deltaX || deltaY) {\n            grid.scrollBy(\n                -deltaX || 0, // 0 if NaN\n                -deltaY || 0\n            );\n        }\n    }\n\n});\n\n\nmodule.exports = ThumbwheelScrolling;\n","'use strict';\n\nvar Feature = require('./Feature');\n\n/**\n * @constructor\n * @extends Feature\n */\nvar TouchScrolling = Feature.extend('TouchScrolling', {\n    handleTouchStart: function(grid, event) {\n        this.stopDeceleration();\n        this.touches = [this.getTouchedCell(grid, event)];\n    },\n\n    handleClick: function() {},\n\n    handleDoubleClick: function() {},\n\n    handleTouchMove: function(grid, event) {\n        var currentTouch = this.getTouchedCell(grid, event);\n        var lastTouch = this.touches[this.touches.length - 1];\n\n        var xOffset = (lastTouch.x - currentTouch.x) / lastTouch.width;\n        var yOffset = (lastTouch.y - currentTouch.y) / lastTouch.height;\n\n        grid.sbHScroller.index += xOffset;\n        grid.sbVScroller.index += yOffset;\n\n        if (this.touches.length >= TouchScrolling.MAX_TOUCHES) {\n            this.touches.shift();\n        }\n\n        this.touches.push(currentTouch);\n    },\n\n    handleTouchEnd: function(grid, event) {\n        var currentTouch = this.getTouchedCell(grid, event);\n        var timeOffset;\n        var i = -1;\n\n        do {\n            timeOffset = (currentTouch.timestamp - this.touches[++i].timestamp);\n        } while (timeOffset > 100 && i < this.touches.length - 1);\n\n        var startTouch = this.touches[i];\n\n        this.decelerateY(grid, startTouch, currentTouch);\n        this.decelerateX(grid, startTouch, currentTouch);\n    },\n\n    getTouchedCell: function(grid, event) {\n        var point = event.detail.touches[0];\n        var cell = grid.getGridCellFromMousePoint(point).cellEvent.bounds;\n        cell.timestamp = Date.now();\n        return cell;\n    },\n\n    decelerateY: function(grid, startTouch, endTouch) {\n        var offset = endTouch.y - startTouch.y;\n        var timeOffset = endTouch.timestamp - startTouch.timestamp;\n        this.decelerate(grid.sbVScroller, offset, timeOffset);\n    },\n\n    decelerateX: function(grid, startTouch, endTouch) {\n        var offset = endTouch.x - startTouch.x;\n        var timeOffset = endTouch.timestamp - startTouch.timestamp;\n        this.decelerate(grid.sbHScroller, offset, timeOffset);\n    },\n\n    decelerate: function(scroller, offset, timeOffset) {\n        var velocity = (Math.abs(offset) / timeOffset) * 100;\n        var dir = -Math.sign(offset);\n        var interval = this.getInitialInterval(velocity);\n\n        var step = function() {\n            if (velocity > 0) {\n                var delta = this.getDelta(velocity);\n                var index = scroller.index + (dir * delta);\n                scroller.index = index;\n\n                if (index > scroller.range.max || index < 0) {\n                    return;\n                }\n\n                velocity -= TouchScrolling.DEC_STEP_SIZE;\n\n                this.timer = setTimeout(step, interval);\n\n                interval = this.updateInterval(interval, velocity);\n            }\n        }.bind(this);\n\n        step();\n    },\n\n    getDelta: function(velocity) {\n        if (velocity >= 180) {\n            return 10;\n        } else if (velocity >= 100) {\n            return 5;\n        } else if (velocity >= 50) {\n            return 2;\n        } else if (velocity >= 25) {\n            return 1;\n        } else {\n            return 0.5;\n        }\n    },\n\n    getInitialInterval: function(velocity) {\n        if (velocity >= 50) {\n            return 5;\n        } else if (velocity >= 25) {\n            return 15;\n        } else {\n            return 30;\n        }\n    },\n\n    updateInterval: function(interval, velocity) {\n        if (interval >= TouchScrolling.MAX_INTERVAL) {\n            return interval;\n        }\n\n        var offset = 0;\n\n        if (velocity < 25) {\n            offset = 10;\n        } else if (velocity < 75) {\n            offset = 5;\n        } else if (velocity < 150) {\n            offset = 2;\n        }\n\n        return interval + offset;\n    },\n\n    stopDeceleration: function() {\n        clearTimeout(this.timer);\n    }\n});\n\nTouchScrolling.MAX_INTERVAL = 200;\n\nTouchScrolling.MAX_TOUCHES = 70;\n\nTouchScrolling.DEC_STEP_SIZE = 5;\n\nmodule.exports = TouchScrolling;\n","'use strict';\n\n/**\n * Behavior.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n    /**\n     * @summary Get the cell's own properties object.\n     * @desc May be undefined because cells only have their own properties object when at lest one own property has been set.\n     * @param {CellEvent|number} xOrCellEvent - Data x coordinate.\n     * @param {number} [y] - Grid row coordinate. _Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     * @returns {undefined|object} The \"own\" properties of the cell at x,y in the grid. If the cell does not own a properties object, returns `undefined`.\n     * @memberOf Behavior#\n     */\n    getCellOwnProperties: function(xOrCellEvent, y, dataModel) {\n        if (arguments.length === 1) {\n            // xOrCellEvent is cellEvent\n            return xOrCellEvent.column.getCellOwnProperties(xOrCellEvent.dataCell.y, xOrCellEvent.subgrid);\n        } else {\n            // xOrCellEvent is x\n            return this.getColumn(xOrCellEvent).getCellOwnProperties(y, dataModel);\n        }\n    },\n\n    /**\n     * @summary Get the properties object for cell.\n     * @desc This is the cell's own properties object if found else the column object.\n     *\n     * If you are seeking a single specific property, consider calling {@link Behavior#getCellProperty} instead.\n     * @param {CellEvent|number} xOrCellEvent - Data x coordinate.\n     * @param {number} [y] - Grid row coordinate. _Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     * @return {object} The properties of the cell at x,y in the grid.\n     * @memberOf Behavior#\n     */\n    getCellProperties: function(xOrCellEvent, y, dataModel) {\n        if (arguments.length === 1) {\n            // xOrCellEvent is cellEvent\n            return xOrCellEvent.properties;\n        } else {\n            // xOrCellEvent is x\n            return this.getColumn(xOrCellEvent).getCellProperties(y, dataModel);\n        }\n    },\n\n    /**\n     * @summary Return a specific cell property.\n     * @desc If there is no cell properties object, defers to column properties object.\n     * @param {CellEvent|number} xOrCellEvent - Data x coordinate.\n     * @param {number} [y] - Grid row coordinate._ Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {string} key - Name of property to get. _When `y` omitted, this param promoted to 2nd arg._\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     * @return {object} The specified property for the cell at x,y in the grid.\n     * @memberOf Behavior#\n     */\n    getCellProperty: function(xOrCellEvent, y, key, dataModel) {\n        if (typeof xOrCellEvent === 'object') {\n            key = y;\n            return xOrCellEvent.properties[key];\n        } else {\n            return this.getColumn(xOrCellEvent).getCellProperty(y, key, dataModel);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc update the data at point x, y with value\n     * @param {CellEvent|number} xOrCellEvent - Data x coordinate.\n     * @param {number} [y] - Grid row coordinate. _Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {Object} properties - Hash of cell properties. _When `y` omitted, this param promoted to 2nd arg._\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     */\n    setCellProperties: function(xOrCellEvent, y, properties, dataModel) {\n        if (typeof xOrCellEvent === 'object') {\n            properties = y;\n            return xOrCellEvent.column.setCellProperties(xOrCellEvent.dataCell.y, properties, xOrCellEvent.subgrid);\n        } else {\n            return this.getColumn(xOrCellEvent).setCellProperties(y, properties, dataModel);\n        }\n    },\n\n    /**\n     * @memberOf Behavior#\n     * @desc update the data at point x, y with value\n     * @param {CellEvent|number} xOrCellEvent - Data x coordinate.\n     * @param {number} [y] - Grid row coordinate. _Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {Object} properties - Hash of cell properties. _When `y` omitted, this param promoted to 2nd arg._\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     */\n    addCellProperties: function(xOrCellEvent, y, properties, dataModel) {\n        if (typeof xOrCellEvent === 'object') {\n            properties = y;\n            return xOrCellEvent.column.addCellProperties(xOrCellEvent.dataCell.y, properties, xOrCellEvent.subgrid); // y omitted so y here is actually properties\n        } else {\n            return this.getColumn(xOrCellEvent).addCellProperties(y, properties, dataModel);\n        }\n    },\n\n    /**\n     * @summary Set a specific cell property.\n     * @desc If there is no cell properties object, defers to column properties object.\n     *\n     * NOTE: For performance reasons, renderer's cell event objects cache their respective cell properties objects. This method accepts a `CellEvent` overload. Whenever possible, use the `CellEvent` from the renderer's cell event pool. Doing so will reset the cell properties object cache.\n     *\n     * If you use some other `CellEvent`, the renderer's `CellEvent` properties cache will not be automatically reset until the whole cell event pool is reset on the next call to {@link Renderer#computeCellBoundaries}. If necessary, you can \"manually\" reset it by calling {@link Renderer#resetCellPropertiesCache|resetCellPropertiesCache(yourCellEvent)} which searches the cell event pool for one with matching coordinates and resets the cache.\n     *\n     * The raw coordinates overload calls the `resetCellPropertiesCache(x, y)` overload for you.\n     * @param {CellEvent|number} xOrCellEvent - `CellEvent` or data x coordinate.\n     * @param {number} [y] - Grid row coordinate. _Omit when `xOrCellEvent` is a `CellEvent`._\n     * @param {string} key - Name of property to get. _When `y` omitted, this param promoted to 2nd arg._\n     * @param value\n     * @param {DataModel} [dataModel=this.dataModel] - For use only when `xOrCellEvent` is _not_ a `CellEvent`: Provide a subgrid.\n     * @memberOf Behavior#\n     */\n    setCellProperty: function(xOrCellEvent, y, key, value, dataModel) {\n        var cellOwnProperties;\n        if (typeof xOrCellEvent === 'object') {\n            value = key;\n            key = y;\n            cellOwnProperties = xOrCellEvent.setCellProperty(key, value);\n        } else {\n            cellOwnProperties = this.getColumn(xOrCellEvent).setCellProperty(y, key, value, dataModel);\n            this.grid.renderer.resetCellPropertiesCache(xOrCellEvent, y, dataModel);\n        }\n        return cellOwnProperties;\n    }\n};\n","'use strict';\n\n/**\n * Behavior.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n\n    getSchema: function() {\n        return this.dataModel.getSchema();\n    },\n\n    setSchema: function(newSchema) {\n        this.dataModel.setSchema(newSchema);\n    },\n\n    /**\n     * @summary Gets the number of rows in the data subgrid.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#getRowCount|getRowCount}\n     * @memberOf Behavior#\n     */\n    getRowCount: function() {\n        return this.dataModel.getRowCount();\n    },\n\n    /**\n     * @summary Get the value at cell (x,y).\n     * @desc When the last parameter (see `dataModel` below) is omitted, this method:\n     * * Is backwards compatible to the v2 version.\n     * * Does _not_ default to the data subgrid  although you can provide it explicitly (`this.behavior.dataModel`).\n     * @param {number} x - The horizontal grid coordinate\n     * @param {number} y - The vertical coordinate.\n     * @param {DataModel} [dataModel] - `x` and `y` are _data cell coordinates_ in the given subgrid data model. If If omitted, `x` and `y` are _grid cell coordinates._\n     * @returns {*} The raw cell data.\n     * @memberOf Behavior#\n     */\n    getValue: function(x, y, dataModel) {\n        if (dataModel) {\n            return dataModel.getValue(x, y);\n        } else {\n            var cellEvent = new this.CellEvent,\n                visible = cellEvent.resetDataXY(x, y, dataModel);\n            if (visible) {\n                return cellEvent.value;\n            }\n        }\n    },\n\n    /**\n     * @summary Update the value at cell (x,y) with the given value.\n     * @desc When the last parameter (see `dataModel` below) is omitted, this method:\n     * * Is backwards compatible to the v2 version.\n     * * Does _not_ default to the data subgrid  although you can provide it explicitly (`this.behavior.dataModel`).\n     * @param {number} x - The horizontal coordinate.\n     * @param {number} y - The vertical coordinate.\n     * @param {*} value - New cell data.\n     * @param {DataModel} [dataModel] - `x` and `y` are _data cell coordinates_ in the given subgrid data model. If If omitted, `x` and `y` are _grid cell coordinates._\n     * @memberOf Behavior#\n     */\n    setValue: function(x, y, value, dataModel) {\n        if (dataModel) {\n            dataModel.setValue(x, y, value);\n        } else {\n            var cellEvent = new this.CellEvent,\n                visible = cellEvent.resetDataXY(x, y, dataModel);\n            if (visible) {\n                cellEvent.value = value;\n            }\n        }\n    },\n\n    /**\n     * @summary Calls `apply()` on the data model.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#reindex|reindex}\n     * @memberOf Behavior#\n     */\n    reindex: function() {\n        this.dataModel.apply();\n    },\n\n    /**\n     * Retrieve a data row from the data model.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#getRow|getRow}\n     * @memberOf Behavior#\n     * @return {dataRowObject} The data row object at y index.\n     * @param {number} y - the row index of interest\n     */\n    getRow: function(y) {\n        return this.dataModel.getRow(y);\n    },\n\n    /**\n     * Retrieve all data rows from the data model.\n     * > Use with caution!\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#getData|getData}\n     * @return {dataRowObject[]}\n     * @memberOf Behavior#\n     */\n    getData: function() {\n        return this.dataModel.getData();\n    },\n\n};\n","'use strict';\n\nvar dataModels = require('../dataModels/index');\n\n/** @typedef subgridConstructorRef\n * @summary Type definition.\n * @desc One of:\n * * **`function` type** - Assumed to already be a data model constructor.\n * * **`string` type** - The name of a data model \"class\" (constructor) registered in the {@link src/dataModels} namespace. Used to look up the constructor in the namespace.\n */\n\n/** @typedef subgridSpec\n * @summary Type definition.\n * @desc One of:\n * * **`object` type** _(except when an array)_ - Assumed to be a reference to an already-instantiated data model. Used as is.\n * * **`'data'` special value** - Set to the data subgrid (_i.e.,_ the behavior's already-instantiated data model).\n * * **{@link subgridConstructorRef}** _(see)_ - The constructor ref is resolved and called with the `new` keyword + a reference to the grid as the sole parameter.\n * * **`Array` object**  Accommodates data model constructor arguments. The constructor ref is resolved and called with the `new` keyword + a reference to the grid as the first parameter + the remaining elements as additional parameters. (If you don't have remaining elements, don't give an array here; just provide a simple `subgridConstructorRef` instead.) The array should have two or more elements:\n *   * The first element is a {@link subgridConstructorRef}.\n *   * Remaining elements are used as additional parameters to the constructor.\n */\n\n/**\n * Behavior.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n    /**\n     * An array where each element represents a subgrid to be rendered in the hypergrid.\n     *\n     * The list should always include at least one \"data\" subgrid, typically {@link Behavior#dataModel|dataModel}.\n     * It may also include zero or more other types of subgrids such as header, filter, and summary subgrids.\n     *\n     * This object also sports a dictionary of subgrids in `lookup` property where each dictionary key is one of:\n     * * **`subgrid.name`** (for those that have a defined name, which is presumed to be unique)\n     * * **`subgrid.type`** (not unique, so if you plan on having multiple, name them!)\n     * * **`'data'`** for the (one and only) data subgrid when unnamed (note that data subgrids have no `type`)\n     *\n     * The setter:\n     * * \"Enlivens\" any constructors (see {@link Behavior~createSubgrid|createSubgrid} for details).\n     * * Reconstructs the dictionary.\n     * * Calls {@link Behavior#shapeChanged|shapeChanged()}.\n     *\n     * @param {subgridSpec[]} subgridSpecs\n     *\n     * @type {DataModel[]}\n     *\n     * @memberOf Behavior#\n     */\n    set subgrids(subgridSpecs) {\n        var subgrids = this._subgrids = [];\n\n        subgrids.lookup = {};\n\n        subgridSpecs.forEach(function(spec) {\n            if (spec) {\n                subgrids.push(this.createSubgrid(spec));\n            }\n        }, this);\n\n        this.shapeChanged();\n    },\n    get subgrids() {\n        return this._subgrids;\n    },\n\n    /**\n     * @summary Maps a `subgridSpec` to a data model.\n     * @desc The spec may describe either an existing data model, or a constructor for a new data model.\n     * @param {subgridSpec} spec\n     * @returns {DataModel} A data model.\n     * @memberOf Behavior#\n     */\n    createSubgrid: function(spec, args) {\n        var subgrid, Constructor, variableArgArray;\n\n        if (spec === 'data') {\n            subgrid = this.dataModel;\n        } else if (spec instanceof Array && spec.length) {\n            Constructor = derefSubgridRef.call(this, spec[0]);\n            variableArgArray = spec.slice(1);\n            subgrid = this.createApply(Constructor, variableArgArray, undefined, { grid: this.grid });\n            subgrid = this.decorateDataModel(subgrid);\n        } else if (typeof spec === 'object') {\n            subgrid = spec;\n        } else {\n            Constructor = derefSubgridRef.call(this, spec);\n            variableArgArray = Array.prototype.slice.call(arguments, 1);\n            subgrid = this.createApply(Constructor, variableArgArray, undefined, { grid: this.grid });\n            subgrid = this.decorateDataModel(subgrid);\n        }\n\n        // undefined type is data\n        if (!subgrid.type) {\n            subgrid.type = 'data';\n        }\n\n        // make dictionary lookup entry\n        var key = subgrid.type === 'data' && subgrid.type || subgrid.name || subgrid.type;\n        this._subgrids.lookup[key] = this._subgrids.lookup[key] || subgrid; // only save first with this key\n\n        // make isType boolean\n        subgrid['is' + subgrid.type[0].toUpperCase() + subgrid.type.substr(1)] = true;\n\n        return subgrid;\n    },\n\n    /**\n     * @summary Gets the number of \"header rows\".\n     * @desc Defined as the sum of all rows in all subgrids before the (first) data subgrid.\n     * @memberOf Local.prototype\n     */\n    getHeaderRowCount: function() {\n        var result = 0;\n\n        this.subgrids.find(function(subgrid) {\n            if (subgrid.isData) {\n                return true; // stop\n            }\n            result += subgrid.getRowCount();\n        });\n\n        return result;\n    },\n\n    /**\n     * @summary Gets the number of \"footer rows\".\n     * @desc Defined as the sum of all rows in all subgrids after the (last) data subgrid.\n     * @memberOf Local.prototype\n     */\n    getFooterRowCount: function() {\n        var gotData;\n        return this.subgrids.reduce(function(rows, subgrid) {\n            if (gotData && !subgrid.isData) {\n                rows += subgrid.getRowCount();\n            } else {\n                gotData = subgrid.isData;\n            }\n            return rows;\n        }, 0);\n    },\n\n    /**\n     * @summary Gets the total number of logical rows.\n     * @desc Defined as the sum of all rows in all subgrids.\n     * @memberOf Local.prototype\n     */\n    getLogicalRowCount: function() {\n        return this.subgrids.reduce(function(rows, subgrid) {\n            return (rows += subgrid.getRowCount());\n        }, 0);\n    }\n};\n\n/**\n * @summary Resolves a subgrid constructor reference.\n * @desc The ref is resolved to a data model constructor.\n * @this {Behavior}\n * @param {subgridConstructorRef} ref\n * @returns {DataModel} A data model constructor.\n * @memberOf Behavior~\n */\nfunction derefSubgridRef(ref) {\n    var Constructor;\n    switch (typeof ref) {\n        case 'string':\n            Constructor = dataModels.get(ref);\n            break;\n        case 'function':\n            Constructor = ref;\n            break;\n        default:\n            throw new this.HypergridError('Expected subgrid ref to be registered name or constructor, but found ' + typeof ref + '.');\n    }\n    return Constructor;\n}\n","'use strict';\n\nvar Registry = require('../lib/Registry');\n\n/**\n * @classdesc Registry of cell editor constructors.\n * @param {object} options\n * @constructor\n */\nvar DataModels = Registry.extend('DataModels', {\n\n    BaseClass: require('datasaur-base'),\n\n    initialize: function() {\n        // preregister the standard cell editors\n        this.add(require('./HeaderSubgrid'));\n    }\n\n});\n\nmodule.exports = new DataModels;\n","'use strict';\n\nvar DataSourceBase = require('datasaur-base');\n\n/**\n * @implements DataModel\n * @param {Hypergrid} grid\n * @param {object} [options]\n * @param {string} [options.name]\n * @constructor\n */\nvar HeaderSubgrid = DataSourceBase.extend('HeaderSubgrid', {\n    type: 'header',\n\n    initialize: function(nextDataSource, options) {\n        this.grid = options.grid;\n    },\n\n    getRowCount: function() {\n        return this.grid.properties.showHeaderRow ? 1 : 0;\n    },\n\n    getValue: function(x, y) {\n        var column = this.grid.behavior.getColumn(x);\n        return column.header || column.name; // use field name when header undefined\n    },\n\n    setValue: function(x, y, value) {\n        if (y < this.getRowCount()) {\n            this.grid.behavior.getColumn(x).header = value;\n        }\n    },\n\n    getRow: function(y) {\n        return this.dataRow;\n    }\n});\n\nmodule.exports = HeaderSubgrid;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\nvar Rectangle = require('rectangular').Rectangle;\nvar images = require('../../images');\n\nvar WHITESPACE = /\\s\\s+/g;\n\n/**\n * @constructor\n * @summary The default cell renderer for a vanilla cell.\n * @desc Great care has been taken in crafting this function as it needs to perform extremely fast.\n *\n * Use `gc.cache` instead which we have implemented to cache the graphics context properties. Reads on the graphics context (`gc`) properties are expensive but not quite as expensive as writes. On read of a `gc.cache` prop, the actual `gc` prop is read into the cache once and from then on only the cache is referenced for that property. On write, the actual prop is only written to when the new value differs from the cached value.\n *\n * Clipping bounds are not set here as this is also an expensive operation. Instead, we employ a number of strategies to truncate overflowing text and content.\n *\n * @extends CellRenderer\n */\nvar SimpleCell = CellRenderer.extend('SimpleCell', {\n    paint: function(gc, config) {\n        var val = config.value,\n            bounds = config.bounds,\n            x = bounds.x,\n            y = bounds.y,\n            width = bounds.width,\n            height = bounds.height,\n            iconPadding = config.iconPadding,\n            partialRender = config.prefillColor === undefined, // signifies abort before rendering if same\n            snapshot = config.snapshot,\n            same = snapshot && partialRender,\n            valWidth = 0,\n            textColor, textFont,\n            ixoffset, iyoffset,\n            leftIcon, rightIcon, centerIcon,\n            leftPadding, rightPadding,\n            hover, hoverColor, selectColor, foundationColor, inheritsBackgroundColor,\n            c, colors;\n\n        // setting gc properties are expensive, let's not do it needlessly\n\n        if (val && val.constructor === Array) {\n            leftIcon = val[0];\n            rightIcon = val[2];\n            val = config.exec(val[1]);\n            if (val && val.naturalWidth !== undefined) { // must be an image (much faster than instanceof HTMLImageElement)\n                centerIcon = val;\n                val = null;\n            }\n        } else {\n            leftIcon = images[config.leftIcon];\n            centerIcon = images[config.centerIcon];\n            rightIcon = images[config.rightIcon];\n        }\n\n        // Note: vf == 0 is fastest equivalent of vf === 0 || vf === false which excludes NaN, null, undefined\n        var renderValue = val || config.renderFalsy && val == 0; // eslint-disable-line eqeqeq\n\n        if (renderValue) {\n            val = config.formatValue(val, config);\n\n            textFont = config.isSelected ? config.foregroundSelectionFont : config.font;\n\n            textColor = gc.cache.strokeStyle = config.isSelected\n                ? config.foregroundSelectionColor\n                : config.color;\n        } else {\n            val = '';\n        }\n\n        same = same &&\n            val === snapshot.value &&\n            textFont === snapshot.textFont &&\n            textColor === snapshot.textColor;\n\n        // fill background only if our bgColor is populated or we are a selected cell\n        colors = [];\n        c = 0;\n        if (config.isCellHovered && config.hoverCellHighlight.enabled) {\n            hoverColor = config.hoverCellHighlight.backgroundColor;\n        } else if (config.isRowHovered && (hover = config.hoverRowHighlight).enabled) {\n            hoverColor = config.isDataColumn || !hover.header || hover.header.backgroundColor === undefined ? hover.backgroundColor : hover.header.backgroundColor;\n        } else if (config.isColumnHovered && (hover = config.hoverColumnHighlight).enabled) {\n            hoverColor = config.isDataRow || !hover.header || hover.header.backgroundColor === undefined ? hover.backgroundColor : hover.header.backgroundColor;\n        }\n        if (gc.alpha(hoverColor) < 1) {\n            if (config.isSelected) {\n                selectColor = config.backgroundSelectionColor;\n            }\n\n            if (gc.alpha(selectColor) < 1) {\n                inheritsBackgroundColor = (config.backgroundColor === config.prefillColor);\n                if (!inheritsBackgroundColor) {\n                    foundationColor = true;\n                    colors.push(config.backgroundColor);\n                    same = same &&  foundationColor === snapshot.foundationColor &&\n                        config.backgroundColor === snapshot.colors[c++];\n                }\n            }\n\n            if (selectColor !== undefined) {\n                colors.push(selectColor);\n                same = same && selectColor === snapshot.colors[c++];\n            }\n        }\n        if (hoverColor !== undefined) {\n            colors.push(hoverColor);\n            same = same && hoverColor === snapshot.colors[c++];\n        }\n\n        // todo check if icons have changed\n        if (same && c === snapshot.colors.length) {\n            return;\n        }\n\n        // return a snapshot to save in cellEvent for future comparisons by partial renderer\n        config.snapshot = {\n            value: val,\n            textColor: textColor,\n            textFont: textFont,\n            foundationColor: foundationColor,\n            colors: colors\n        };\n\n        layerColors(gc, colors, x, y, width, height, foundationColor);\n\n        // Measure left and right icons, needed for rendering and for return value (min width)\n        leftPadding = leftIcon ? iconPadding + leftIcon.width + iconPadding : config.cellPadding;\n        rightPadding = rightIcon ? iconPadding + rightIcon.width + iconPadding : config.cellPadding;\n\n        if (renderValue) {\n            // draw text\n            gc.cache.fillStyle = textColor;\n            gc.cache.font = textFont;\n            valWidth = config.isHeaderRow && config.headerTextWrapping\n                ? renderMultiLineText(gc, config, val, leftPadding, rightPadding)\n                : renderSingleLineText(gc, config, val, leftPadding, rightPadding);\n        }\n\n        if (centerIcon) {\n            // Measure & draw center icon\n            iyoffset = Math.round((height - centerIcon.height) / 2);\n            ixoffset = width - Math.round((width - centerIcon.width) / 2) - centerIcon.width;\n            gc.drawImage(centerIcon, x + ixoffset, y + iyoffset, centerIcon.width, centerIcon.height); // see [SIZE NOTE]!\n            valWidth = iconPadding + centerIcon.width + iconPadding;\n            if (config.hotIcon === 'center') {\n                config.clickRect = new Rectangle(ixoffset, iyoffset, centerIcon.width, centerIcon.height);\n            }\n        }\n\n\n        if (leftIcon) {\n            // Draw left icon\n            iyoffset = Math.round((height - leftIcon.height) / 2);\n            gc.drawImage(leftIcon, x + iconPadding, y + iyoffset, leftIcon.width, leftIcon.height); // see [SIZE NOTE]!\n            if (config.hotIcon === 'left') {\n                config.clickRect = new Rectangle(iconPadding, iyoffset, leftIcon.width, leftIcon.height);\n            }\n        }\n\n        if (rightIcon) {\n            // Repaint background before painting right icon, because text may have flowed under where it will be.\n            // This is a work-around to clipping which is too expensive to perform here.\n            ixoffset = width - (rightIcon.width + iconPadding);\n            var rightX = x + ixoffset;\n            if (inheritsBackgroundColor) {\n                foundationColor = true;\n                colors.unshift(config.backgroundColor);\n            }\n            layerColors(gc, colors, rightX, y, rightPadding, height, foundationColor);\n\n            // Draw right icon\n            iyoffset = Math.round((height - rightIcon.height) / 2);\n            gc.drawImage(rightIcon, rightX, y + iyoffset, rightIcon.width, rightIcon.height); // see [SIZE NOTE]!\n            if (config.hotIcon === 'right') {\n                config.clickRect =  new Rectangle(ixoffset, iyoffset, rightIcon.width, rightIcon.height);\n            }\n        }\n\n        if (config.cellBorderThickness) {\n            gc.beginPath();\n            gc.rect(x, y, width, height);\n            gc.cache.lineWidth = config.cellBorderThickness;\n            gc.cache.strokeStyle = config.cellBorderStyle;\n            gc.stroke();\n            gc.closePath();\n        }\n\n        config.minWidth = leftPadding + valWidth + rightPadding;\n    }\n});\n\n/* [SIZE NOTE] (11/1/2018): Always call `drawImage` with explicit width and height overload.\n * Possible browser bug: Although 3rd and 4th parameters to `drawImage` are optional,\n * when image data derived from SVG source, some browsers (e.g., Chrome 70) implementation\n * of `drawImage` only respects _implicit_ `width` x `height` specified in the root <svg>\n * element `width` & `height` attributes. Otherwise, image is copied into canvas using its\n * `naturalWidth` x `naturalHeight`. That is, _explict_ settings of `width` & `height`\n * (i.e, via property assignment, calling setAttribute, or in `new Image` call) have no\n * effect on `drawImage` in the case of SVGs on these browsers.\n */\n\n/**\n * @summary Renders single line text.\n * @param {CanvasRenderingContext2D} gc\n * @param {object} config\n * @param {Rectangle} config.bounds - The clipping rect of the cell to be rendered.\n * @param {*} val - The text to render in the cell.\n * @memberOf SimpleCell.prototype\n */\nfunction renderMultiLineText(gc, config, val, leftPadding, rightPadding) {\n    var x = config.bounds.x,\n        y = config.bounds.y,\n        width = config.bounds.width,\n        height = config.bounds.height,\n        cleanVal = (val + '').trim().replace(WHITESPACE, ' '), // trim and squeeze whitespace\n        lines = findLines(gc, config, cleanVal.split(' '), width);\n\n    if (lines.length === 1) {\n        return renderSingleLineText(gc, config, cleanVal, leftPadding, rightPadding);\n    }\n\n    var halignOffset = leftPadding,\n        valignOffset = config.voffset,\n        halign = config.halign,\n        textHeight = gc.getTextHeight(config.font).height;\n\n    switch (halign) {\n        case 'right':\n            halignOffset = width - rightPadding;\n            break;\n        case 'center':\n            halignOffset = width / 2;\n            break;\n    }\n\n    var hMin = 0, vMin = Math.ceil(textHeight / 2);\n\n    valignOffset += Math.ceil((height - (lines.length - 1) * textHeight) / 2);\n\n    halignOffset = Math.max(hMin, halignOffset);\n    valignOffset = Math.max(vMin, valignOffset);\n\n    gc.cache.save(); // define a clipping region for cell\n    gc.beginPath();\n    gc.rect(x, y, width, height);\n    gc.clip();\n\n    gc.cache.textAlign = halign;\n    gc.cache.textBaseline = 'middle';\n\n    for (var i = 0; i < lines.length; i++) {\n        gc.simpleText(lines[i], x + halignOffset, y + valignOffset + (i * textHeight));\n    }\n\n    gc.cache.restore(); // discard clipping region\n\n    return width;\n}\n\n/**\n * @summary Renders single line text.\n * @param {CanvasRenderingContext2D} gc\n * @param {object} config\n * @param {Rectangle} config.bounds - The clipping rect of the cell to be rendered.\n * @param {*} val - The text to render in the cell.\n * @memberOf SimpleCell.prototype\n */\nfunction renderSingleLineText(gc, config, val, leftPadding, rightPadding) {\n    var x = config.bounds.x,\n        y = config.bounds.y,\n        width = config.bounds.width,\n        halignOffset = leftPadding,\n        halign = config.halign,\n        minWidth,\n        metrics;\n\n    if (config.columnAutosizing) {\n        metrics = gc.getTextWidthTruncated(val, width - leftPadding, config.truncateTextWithEllipsis);\n        minWidth = metrics.width;\n        val = metrics.string || val;\n        switch (halign) {\n            case 'right':\n                halignOffset = width - rightPadding - metrics.width;\n                break;\n            case 'center':\n                halignOffset = (width - metrics.width) / 2;\n                break;\n        }\n    } else {\n        metrics = gc.getTextWidthTruncated(val, width - leftPadding, config.truncateTextWithEllipsis, true);\n        minWidth = 0;\n        if (metrics.string !== undefined) {\n            val = metrics.string;\n        } else {\n            switch (halign) {\n                case 'right':\n                    halignOffset = width - rightPadding - metrics.width;\n                    break;\n                case 'center':\n                    halignOffset = (width - metrics.width) / 2;\n                    break;\n            }\n        }\n    }\n\n    if (val !== null) {\n        x += Math.max(leftPadding, halignOffset);\n        y += Math.floor(config.bounds.height / 2);\n\n        if (config.isUserDataArea) {\n            if (config.link) {\n                if (config.isCellHovered || !config.linkOnHover) {\n                    if (config.linkColor) {\n                        gc.cache.strokeStyle = config.linkColor;\n                    }\n                    gc.beginPath();\n                    underline(config, gc, val, x, y, 1);\n                    gc.stroke();\n                    gc.closePath();\n                }\n                if (config.linkColor && (config.isCellHovered || !config.linkColorOnHover)) {\n                    gc.cache.fillStyle = config.linkColor;\n                }\n            }\n\n            if (config.strikeThrough === true) {\n                gc.beginPath();\n                strikeThrough(config, gc, val, x, y, 1);\n                gc.stroke();\n                gc.closePath();\n            }\n        }\n\n        gc.cache.textAlign = 'left';\n        gc.cache.textBaseline = 'middle';\n        gc.simpleText(val, x, y);\n    }\n\n    return minWidth;\n}\n\nfunction findLines(gc, config, words, width) {\n\n    if (words.length === 1) {\n        return words;\n    }\n\n    // starting with just the first word...\n    var stillFits, line = [words.shift()];\n    while (\n        // so lone as line still fits within current column...\n    (stillFits = gc.getTextWidth(line.join(' ')) < width)\n    // ...AND there are more words available...\n    && words.length\n        ) {\n        // ...add another word to end of line and retest\n        line.push(words.shift());\n    }\n\n    if (\n        !stillFits // if line is now too long...\n        && line.length > 1 // ...AND is multiple words...\n    ) {\n        words.unshift(line.pop()); // ...back off by (i.e., remove) one word\n    }\n\n    line = [line.join(' ')];\n\n    if (words.length) { // if there's anything left...\n        line = line.concat(findLines(gc, config, words, width)); // ...break it up as well\n    }\n\n    return line;\n}\n\nfunction strikeThrough(config, gc, text, x, y, thickness) {\n    var textWidth = gc.getTextWidth(text);\n\n    switch (gc.cache.textAlign) {\n        case 'center':\n            x -= textWidth / 2;\n            break;\n        case 'right':\n            x -= textWidth;\n            break;\n    }\n\n    y = Math.round(y) + 0.5;\n\n    gc.cache.lineWidth = thickness;\n    gc.moveTo(x - 1, y);\n    gc.lineTo(x + textWidth + 1, y);\n}\n\nfunction underline(config, gc, text, x, y, thickness) {\n    var textHeight = gc.getTextHeight(config.font).height,\n        textWidth = gc.getTextWidth(text);\n\n    switch (gc.cache.textAlign) {\n        case 'center':\n            x -= textWidth / 2;\n            break;\n        case 'right':\n            x -= textWidth;\n            break;\n    }\n\n    y = Math.ceil(y) + Math.round(textHeight / 2) - 0.5;\n\n    //gc.beginPath();\n    gc.cache.lineWidth = thickness;\n    gc.moveTo(x, y);\n    gc.lineTo(x + textWidth, y);\n}\n\nfunction layerColors(gc, colors, x, y, width, height, foundationColor) {\n    for (var i = 0; i < colors.length; i++) {\n        if (foundationColor && !i) {\n            gc.clearFill(x, y, width, height, colors[i]);\n        } else {\n            gc.cache.fillStyle = colors[i];\n            gc.fillRect(x, y, width, height);\n        }\n    }\n}\n\nmodule.exports = SimpleCell;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * Renders a slider button.\n * Currently however the user cannot interact with it.\n * @constructor\n * @extends CellRenderer\n */\nvar Slider = CellRenderer.extend('Slider', {\n    paint: function(gc, config) {\n        var x = config.bounds.x,\n            y = config.bounds.y,\n            width = config.bounds.width,\n            height = config.bounds.height;\n        gc.cache.strokeStyle = 'white';\n        var val = config.value;\n        var radius = height / 2;\n        var offset = width * val;\n        var bgColor = config.isSelected ? config.backgroundColor : '#333333';\n        var btnGradient = gc.createLinearGradient(x, y, x, y + height);\n        btnGradient.addColorStop(0, bgColor);\n        btnGradient.addColorStop(1, '#666666');\n        var arcGradient = gc.createLinearGradient(x, y, x, y + height);\n        arcGradient.addColorStop(0, '#aaaaaa');\n        arcGradient.addColorStop(1, '#777777');\n        gc.cache.fillStyle = btnGradient;\n        this.roundRect(gc, x, y, width, height, radius, btnGradient);\n        if (val < 1.0) {\n            gc.cache.fillStyle = arcGradient;\n        } else {\n            gc.cache.fillStyle = '#eeeeee';\n        }\n        gc.beginPath();\n        gc.arc(x + Math.max(offset - radius, radius), y + radius, radius, 0, 2 * Math.PI);\n        gc.fill();\n        gc.closePath();\n        config.minWidth = 100;\n    }\n});\n\nmodule.exports = Slider;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * Renders a bar chart sparkline, hence the name.\n * @constructor\n * @extends CellRenderer\n */\nvar SparkBar = CellRenderer.extend('SparkBar', {\n    paint: function(gc, config) {\n        var x = config.bounds.x,\n            y = config.bounds.y,\n            width = config.bounds.width,\n            height = config.bounds.height;\n\n        gc.beginPath();\n        var val = config.value;\n        if (!val || !val.length) {\n            return;\n        }\n        var count = val.length;\n        var eWidth = width / count;\n        var fgColor = config.isSelected ? config.foregroundSelectionColor : config.color;\n        if (config.backgroundColor || config.isSelected) {\n            gc.cache.fillStyle = config.isSelected ? 'blue' : config.backgroundColor;\n            gc.fillRect(x, y, width, height);\n        }\n        gc.cache.fillStyle = fgColor;\n        for (var i = 0; i < val.length; i++) {\n            var barheight = val[i] / 110 * height;\n            gc.fillRect(x + 5, y + height - barheight, eWidth * 0.6666, barheight);\n            x += eWidth;\n        }\n        gc.closePath();\n        config.minWidth = count * 10;\n    }\n});\n\nmodule.exports = SparkBar;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * @constructor\n * @desc A rendering of the last Selection Model\n * @extends CellRenderer\n */\nvar LastSelection = CellRenderer.extend('LastSelection', {\n    paint: function(gc, config) {\n        var visOverlay = gc.alpha(config.selectionRegionOverlayColor) > 0,\n            visOutline = gc.alpha(config.selectionRegionOutlineColor) > 0;\n\n        if (visOverlay || visOutline) {\n            var x = config.bounds.x,\n                y = config.bounds.y,\n                width = config.bounds.width,\n                height = config.bounds.height;\n\n            gc.beginPath();\n\n            gc.rect(x, y, width, height);\n\n            if (visOverlay) {\n                gc.cache.fillStyle = config.selectionRegionOverlayColor;\n                gc.fill();\n            }\n\n            if (visOutline) {\n                gc.cache.lineWidth = 1;\n                gc.cache.strokeStyle = config.selectionRegionOutlineColor;\n                gc.stroke();\n            }\n\n            gc.closePath();\n        }\n    }\n});\n\nmodule.exports = LastSelection;\n\n\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * Renders a sparkline.\n * @see [Edward Tufte sparkline](http://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0001OR)\n * @constructor\n * @extends CellRenderer\n */\nvar SparkLine = CellRenderer.extend('SparkLine', {\n    paint: function(gc, config) {\n        var x = config.bounds.x,\n            y = config.bounds.y,\n            width = config.bounds.width,\n            height = config.bounds.height;\n\n        gc.beginPath();\n        var val = config.value;\n        if (!val || !val.length) {\n            return;\n        }\n        var count = val.length;\n        var eWidth = width / count;\n\n        var fgColor = config.isSelected ? config.foregroundSelectionColor : config.color;\n        if (config.backgroundColor || config.isSelected) {\n            gc.cache.fillStyle = config.isSelected ? config.backgroundSelectionColor : config.backgroundColor;\n            gc.fillRect(x, y, width, height);\n        }\n        gc.cache.strokeStyle = fgColor;\n        gc.cache.fillStyle = fgColor;\n        gc.beginPath();\n        var prev;\n        for (var i = 0; i < val.length; i++) {\n            var barheight = val[i] / 110 * height;\n            if (!prev) {\n                prev = barheight;\n            }\n            gc.lineTo(x + 5, y + height - barheight);\n            gc.arc(x + 5, y + height - barheight, 1, 0, 2 * Math.PI, false);\n            x += eWidth;\n        }\n        config.minWidth = count * 10;\n        gc.stroke();\n        gc.closePath();\n    }\n});\n\nmodule.exports = SparkLine;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * @constructor\n * @extends CellRenderer\n */\nvar ErrorCell = CellRenderer.extend('ErrorCell', {\n\n    /**\n     * @summary Writes error message into cell.\n     *\n     * @desc This function is guaranteed to be called as follows:\n     *\n     * ```javascript\n     * gc.save();\n     * gc.beginPath();\n     * gc.rect(x, y, width, height);\n     * gc.clip();\n     * behavior.getCellProvider().renderCellError(gc, message, x, y, width, height);\n     * gc.restore();\n     * ```\n     *\n     * Before doing anything else, this function should clear the cell by setting `gc.fillStyle` and calling `gc.fill()`.\n     *\n     * @param {CanvasRenderingContext2D} gc\n     * @param {object} config\n     * @param {Rectangle} config.bounds - The clipping rect of the cell to be rendered.\n     * @memberOf ErrorCell.prototype\n     */\n    paint: function(gc, config, message) {\n        var x = config.bounds.x,\n            y = config.bounds.y,\n            // width = config.bounds.width,\n            height = config.bounds.height;\n\n        // clear the cell\n        // (this makes use of the rect path defined by the caller)\n        gc.cache.fillStyle = '#FFD500';\n        gc.fill();\n\n        // render message text\n        gc.cache.fillStyle = '#A00';\n        gc.cache.textAlign = 'start';\n        gc.cache.textBaseline = 'middle';\n        gc.cache.font = 'bold 6pt \"arial narrow\", verdana, geneva';\n        gc.fillText(message, x + 4, y + height / 2 + 0.5);\n    }\n});\n\nmodule.exports = ErrorCell;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * @constructor\n * @extends CellRenderer\n */\nvar Tag = CellRenderer.extend('Tag', {\n\n    /**\n     * @memberOf Tag.prototype\n     */\n    paint: function(gc, config) {\n        if (config.tagbands) {\n            var tagband = config.tagbands.find(function(tagband) {\n                return config.value >= tagband.floor;\n            });\n            var fillStyle = tagband && tagband.fillStyle;\n\n            if (fillStyle) {\n                var b = config.bounds,\n                    x = b.x + b.width - 1,\n                    y = b.y;\n\n                gc.beginPath();\n                gc.moveTo(x, y);\n                gc.lineTo(x, y + 8);\n                gc.lineTo(x - 8, y);\n                // gc.lineTo(x, y);\n                gc.closePath();\n                gc.cache.fillStyle = fillStyle;\n                gc.fill();\n            }\n        }\n    }\n});\n\nmodule.exports = Tag;\n","'use strict';\n\nvar CellRenderer = require('./CellRenderer');\n\n/**\n * Renders a tree cell (presumably in the tree column).\n * @constructor\n * @extends CellRenderer\n */\nvar TreeCell = CellRenderer.extend('TreeCell', {\n    paint: function(gc, config) {\n        var x = config.bounds.x,\n            y = config.bounds.y,\n            val = config.value.data,\n            indent = config.value.indent,\n            icon = config.value.icon;\n\n        // Fill background only if our bgColor is populated or we are a selected cell.\n        if (config.backgroundColor || config.isSelected) {\n            gc.cache.fillStyle = config.isSelected ? config.backgroundColor : config.backgroundColor;\n            gc.fillRect(x, y, config.bounds.width, config.bounds.height);\n        }\n\n        if (!val || !val.length) {\n            return;\n        }\n\n        gc.cache.fillStyle = config.isSelected ? config.backgroundColor : config.backgroundColor;\n\n        var valignOffset = Math.ceil(config.bounds.height / 2);\n        gc.fillText(icon + val, x + indent, y + valignOffset);\n\n        config.minWidth = x + indent + gc.getTextWidth(icon + val) + 10;\n    }\n});\n\nmodule.exports = TreeCell;\n","/******************************************************************************\n *\n * Copyright (c) 2017, the Perspective Authors.\n *\n * This file is part of the Perspective library, distributed under the terms of\n * the Apache License 2.0.  The full license can be found in the LICENSE file.\n *\n */\n\n/**\n * Instantiate a Template DOM object from an HTML text string.\n *\n * Params\n * ------\n * template : An HTML string representing a template.\n *\n * Returns\n * -------\n * A Template DOM object.\n */\n\nexport function importTemplate(template) {\n    const div = document.createElement(\"div\");\n    div.innerHTML = template;\n    return Array.prototype.slice.call(div.children)[0];\n}\n\nfunction setTemplateContent(template) {\n    // return early in browsers that have template tag support\n    if (template.content) {\n        return;\n    }\n    template.content = document.createDocumentFragment();\n    let child;\n    while ((child = template.firstChild)) {\n        Node.prototype.appendChild.call(template.content, child);\n    }\n}\n\n/**\n * A simple tool for creating Web Components v0.\n *\n * Params\n * ------\n * template : An HTML string representing a template.  Should have an 'id'\n *     attribute which will become the new Web Component's tag name.\n * proto : The new Web Component's prototype object, as per spec.\n */\nexport function registerElement(templateString, styleString, proto) {\n    const template = importTemplate(templateString);\n    setTemplateContent(template);\n    if (styleString) {\n        template.innerHTML = `<style>${styleString.toString()}</style>` + template.innerHTML;\n    }\n    template.innerHTML = `<style id=\"psp_styles\" scope=\"${template.getAttribute(\"id\")}\">test{}</style>` + template.innerHTML;\n\n    const _perspective_element = class extends proto {\n        attributeChangedCallback(name, old, value) {\n            if (value === null) {\n                value = \"null\";\n            }\n            if (name[0] !== \"_\" && old != value && !!Object.getOwnPropertyDescriptor(proto.prototype, name).set) {\n                this[name] = value;\n            }\n        }\n\n        connectedCallback() {\n            if (this._initialized) {\n                return;\n            }\n            this._initializing = true;\n            var node = document.importNode(template.content, true);\n            this.attachShadow({mode: \"open\"});\n            this.shadowRoot.appendChild(node);\n\n            if (super.connectedCallback) {\n                super.connectedCallback();\n            }\n\n            // Call all attributes bound to setters on the proto\n            for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n                if (key !== \"connectedCallback\") {\n                    if (this.hasAttribute(key) && key[0] !== \"_\" && !!Object.getOwnPropertyDescriptor(proto.prototype, key).set) {\n                        this[key] = this.getAttribute(key);\n                    }\n                }\n            }\n            this._initializing = false;\n            this._initialized = true;\n        }\n\n        static get observedAttributes() {\n            return Object.getOwnPropertyNames(proto.prototype);\n        }\n    };\n\n    for (let key of Object.getOwnPropertyNames(proto.prototype)) {\n        let descriptor = Object.getOwnPropertyDescriptor(proto.prototype, key);\n        if (descriptor && descriptor.set) {\n            let old = descriptor.set;\n            descriptor.set = function(val) {\n                if (!this.hasAttribute(key) || this.getAttribute(key) !== val) {\n                    this.setAttribute(key, val);\n                    return;\n                }\n                if (!this._initializing && !this._initialized) {\n                    return;\n                }\n                old.call(this, val);\n            };\n            Object.defineProperty(proto.prototype, key, descriptor);\n        }\n    }\n\n    let name = template.getAttribute(\"id\");\n    console.log(`Registered ${name}`);\n\n    window.customElements.define(name, _perspective_element);\n}\n\nexport function bindTemplate(template, ...styleStrings) {\n    const style = styleStrings.map(x => x.toString()).join(\"\\n\");\n    return function(cls) {\n        return registerElement(template, {toString: () => style}, cls);\n    };\n}\n\n/**\n * A decorator for declaring a setter property of an HTMLElement descendent\n * class as serialized JSON.  Handles converting these types before invoking\n * the underlying function/\n *\n * @param {object} _default the default value to supply the setter when\n * undefined, removed or invalid.\n */\nfunction _attribute(_default) {\n    return function(cls, name, desc) {\n        const old_set = desc.value;\n        desc.set = function(x) {\n            let attr = this.getAttribute(name);\n            try {\n                if (x === null || x === undefined || x === \"\") {\n                    x = _default();\n                }\n                if (typeof x !== \"string\") {\n                    x = JSON.stringify(x);\n                }\n                if (x !== attr) {\n                    attr = x;\n                }\n                attr = JSON.parse(attr);\n            } catch (e) {\n                console.warn(`Invalid value for attribute \"${name}\": ${x}`);\n                attr = _default();\n            }\n            old_set.call(this, attr);\n        };\n        desc.get = function() {\n            if (this.hasAttribute(name)) {\n                return JSON.parse(this.getAttribute(name));\n            } else {\n                return _default();\n            }\n        };\n        delete desc[\"value\"];\n        delete desc[\"writable\"];\n        return desc;\n    };\n}\n\nexport function copy_to_clipboard(csv) {\n    let element = document.createElement(\"textarea\");\n    document.body.appendChild(element);\n    element.value = csv;\n    element.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(element);\n}\n\n/**\n * Just like `setTimeout` except it returns a promise which resolves after the\n * callback has (also resolved).\n *\n * @param {func} cb\n * @param {*} timeout\n */\nexport async function setPromise(cb = async () => {}, timeout = 0) {\n    await new Promise(x => setTimeout(x, timeout));\n    return await cb();\n}\n\nconst invertPromise = () => {\n    let resolve;\n    let promise = new Promise(_resolve => {\n        resolve = _resolve;\n    });\n    promise.resolve = resolve;\n    return promise;\n};\n\nexport function throttlePromise(target, property, descriptor) {\n    const lock = Symbol(\"private lock\");\n    const f = descriptor.value;\n    descriptor.value = async function(...args) {\n        if (this[lock]) {\n            await this[lock];\n            if (this[lock]) {\n                await this[lock];\n                return;\n            }\n        }\n        this[lock] = invertPromise();\n        let result;\n        try {\n            result = await f.call(this, ...args);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            const l = this[lock];\n            this[lock] = undefined;\n            l.resolve();\n            return result;\n        }\n    };\n    return descriptor;\n}\n\n/**\n * Swap 2 HTMLElements in a container.\n * @param {HTMLElement} container\n * @param {HTMLElement} elem1\n * @param {HTMLElement} elem2\n */\nexport function swap(container, ...elems) {\n    if (elems[0] === elems[1]) return;\n    if (elems.every(x => x.classList.contains(\"null-column\"))) return;\n    let [i, j] = elems.map(x => Array.prototype.slice.call(container.children).indexOf(x));\n    if (j < i) {\n        [i, j] = [j, i];\n        elems = elems.reverse();\n    }\n    container.insertBefore(elems[1], elems[0]);\n    if (j + 1 === container.children.length) {\n        container.appendChild(elems[0]);\n    } else {\n        container.insertBefore(elems[0], container.children[j + 1]);\n    }\n}\n\nexport const json_attribute = _attribute(() => ({}));\nexport const array_attribute = _attribute(() => []);\n\nexport const registerPlugin = (name, plugin) => {\n    if (global.registerPlugin) {\n        global.registerPlugin(name, plugin);\n    } else {\n        global.__perspective_plugins__ = global.__perspective_plugins__ || [];\n        global.__perspective_plugins__.push([name, plugin]);\n    }\n};\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","/* eslint-env browser */\n\n'use strict';\n\nrequire('../lib/polyfills'); // Installs misc. polyfills into global objects, as needed\n\nvar Point = require('rectangular').Point;\nvar Rectangle = require('rectangular').Rectangle;\nvar _ = require('object-iterators'); // fyi: installs the Array.prototype.find polyfill, as needed\nvar injectCSS = require('inject-stylesheet-template').bind(require('../../css'));\n\nvar Base = require('../Base');\nvar defaults = require('../defaults');\nvar dynamicPropertyDescriptors = require('../lib/dynamicProperties');\nvar Canvas = require('../lib/Canvas');\nvar Renderer = require('../renderer');\nvar SelectionModel = require('../lib/SelectionModel');\nvar Localization = require('../lib/Localization');\nvar Behavior = require('../behaviors/Behavior');\nvar behaviorJSON = require('../behaviors/Local');\nvar cellRenderers = require('../cellRenderers');\nvar cellEditors = require('../cellEditors');\nvar modules = require('./modules');\n\nvar EDGE_STYLES = ['top', 'bottom', 'left', 'right'],\n    RECT_STYLES = EDGE_STYLES.concat(['width', 'height', 'position']);\n\n/**\n * @mixes scrolling.mixin\n * @mixes events.mixin\n * @mixes selection.mixin\n * @mixes themes.mixin\n * @mixes themes.sharedMixin\n * @constructor\n * @classdesc An object representing a Hypergrid.\n * @desc The first parameter, `container`, is optional. If omitted, the `options` parameter is promoted to first position. (Note that the container can also be given in `options.container.`)\n * @param {string|Element} [container] - CSS selector or Element. If omitted (and `options.container` also omitted), Hypergrid first looks for an _empty_ element with an ID of `hypergrid`. If not found, it will create a new element. In either case, the container element has the class name `hypergrid-container` added to its class name list. Finally, if the there is more than one such element with that class name, the element's ID attribute is set to `hypergrid` + _n_ where n is an ordinal one less than the number of such elements.\n * @param {object} [options] - If `options.data` provided, passed to {@link Hypergrid#setData setData}; else if `options.Behavior` provided, passed to {@link Hypergrid#setBehavior setBehavior}.\n * @param {function} [options.Behavior=Local] - _Per {@link Behavior#setData}._\n * @param {DataModel} [options.dataModel] - _Passed to behavior {@link Behavior constructor}._\n * @param {function} [options.DataModel=require('datasaur-local')] - _Passed to behavior {@link Behavior constructor}._\n * @param {function|object[]} [options.data] - _Passed to behavior {@link Behavior constructor}._\n * @param {function|menuItem[]} [options.schema] - _Passed to behavior {@link Behavior constructor}._\n * @param {object} [options.metadata] - _Passed to behavior {@link Behavior constructor}._\n * @param {subgridSpec[]} [options.subgrids=this.properties.subgrids] - _Per {@link Behavior#setData}._\n * @param {pluginSpec|pluginSpec[]} [options.plugins]\n * @param {object} [options.state]\n *\n * @param {string|Element} [options.container] - Alternative to providing `container` (first) parameter above.\n *\n * @param {object} [options.contextAttributes={ alpha: true }] - Passed to [`HTMLCanvasElement.getContext`](https://developer.mozilla.org/docs/Web/API/HTMLCanvasElement/getContext). Although the MDN docs say setting this to `{alpha: false}` (opaque canvas) can \"can speed up drawing of transparent content and images,\" our testing (with Chrome v63) failed to show any measurable performance gain.\n *\n * _An opaque canvas does have an important advantage, however!_ It permits the graphics context to use [sub-pixel rendering](https://en.wikipedia.org/wiki/Subpixel_rendering) for sharper text as viewed on LCD or LED screens, especially black text on white backgrounds, and especially when viewed on a high-pixel-density display such as an [Apple retina display](https://en.wikipedia.org/wiki/Retina_Display).\n *\n * Zoom in on the following samples images to see the difference in rendering.\n *\n * Value | Sample\n * :---: | :----:\n * `{ alpha: true }`<br>Transparent canvas,<br>renders text using<br>_regular anti-aliasing_ | ![regular.png](https://cdn-pro.dprcdn.net/files/acc_645730/ZqurK3)\n * `{ alpha: false }`<br>Opaque canvas,<br>renders text using<br>_sub-pixel rendering_ | ![sub-pixel.png](https://cdn-std.dprcdn.net/files/acc_645730/bf3VXh).\n *\n * Use with caution, however. In particular, if the canvas is set to \"opaque\" (`{alpha: false}`), do _not_ also specify a transparent or translucent color for `grid.properties.backGround` because content may then be drawn with corrupt anti-aliasing (at lest as of Chrome v67).\n *\n * To clarify, the default setting (`{ alpha: true }`) is a transparent canvas, meaning that elements rendered underneath the `<canvas>` element can be seen through any non-opaque pixels (pixels with alpha channel < 1.0). Hypergrids that set their background color to non-opaque can see this effect.\n *\n * Note: An opaque canvas can still be made _to appear_ translucent using the CSS `opacity` property. But that is a different effect entirely, setting the entire rendered canvas to translucent, not just so all pixels become translucent.\n * @param {string} [options.localization=Hypergrid.localization]\n * @param {string|string[]} [options.localization.locale=Hypergrid.localization.locale] - The default locale to use when an explicit `locale` is omitted from localizer constructor calls. Passed to `Intl.NumberFomrat` and `Intl.DateFomrat`. See {@link https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl#Locale_identification_and_negotiation|Locale identification and negotiation} for more information.\n * @param {string} [options.localization.numberOptions=Hypergrid.localization.numberOptions] - Options passed to [`Intl.NumberFormat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat) for creating the basic \"number\" localizer.\n * @param {string} [options.localization.dateOptions=Hypergrid.localization.dateOptions] - Options passed to [`Intl.DateTimeFormat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat) for creating the basic \"date\" localizer.\n *\n * @param {object} [options.margin] - Optional canvas \"margins\" applied to containing div as .left, .top, .right, .bottom. (Default values actually derive from 'grid' stylesheet's `.hypergrid-container` rule.)\n * @param {string} [options.margin.top='0px']\n * @param {string} [options.margin.right='0px']\n * @param {string} [options.margin.bottom='0px']\n * @param {string} [options.margin.left='0px']\n *\n * @param {object} [options.boundingRect] - Optional grid container size & position. (Default values actually derive from 'grid' stylesheet's `.hypergrid-container > div:first-child` rule.)\n * @param {string} [options.boundingRect.height='500px']\n * @param {string} [options.boundingRect.width='auto']\n * @param {string} [options.boundingRect.left='auto']\n * @param {string} [options.boundingRect.top='auto']\n * @param {string} [options.boundingRect.right='auto']\n * @param {string} [options.boundingRect.bottom='auto']\n * @param {string} [options.boundingRect.position='relative']\n */\nvar Hypergrid = Base.extend('Hypergrid', {\n    initialize: function(container, options) {\n        this.selectionInitialize();\n\n        //Optional container argument\n        if (!(typeof container === 'string') && !(container instanceof HTMLElement)) {\n            options = container;\n            container = null;\n        }\n\n        options = options || {};\n\n        this.clearState();\n\n        //Set up the container for a grid instance\n        this.setContainer(\n            container ||\n            options.container ||\n            findOrCreateContainer(options.boundingRect)\n        );\n\n        // Install shared plug-ins (those with a `preinstall` method)\n        Hypergrid.prototype.installPlugins(options.plugins);\n\n        this.lastEdgeSelection = [0, 0];\n        this.isWebkit = navigator.userAgent.toLowerCase().indexOf('webkit') > -1;\n        this.selectionModel = new SelectionModel(this);\n        this.renderOverridesCache = {};\n        this.allowEventHandlers = true;\n        this.dragExtent = new Point(0, 0);\n        this.numRows = 0;\n        this.numColumns = 0;\n        this.clearMouseDown();\n        this.setFormatter(options.localization);\n        this.listeners = {};\n\n        /**\n         * @name cellRenderers\n         * @type {Registry}\n         * @memberOf Hypergrid#\n         */\n        this.cellRenderers = cellRenderers;\n\n        /**\n         * Private version of cell editors registry with a bound `create` method for use by `getCellEditorAt`.\n         * @name cellEditors\n         * @type {Registry}\n         * @memberOf Hypergrid#\n         */\n        this.cellEditors = Object.create(cellEditors);\n        Object.defineProperty(this.cellEditors, 'create', { value: createCellEditor.bind(this) });\n\n        this.initCanvas(options);\n\n        if (options.data) {\n            this.setData(options.data, options); // if no behavior has yet been set, `setData` sets a default behavior\n        } else if (options.Behavior || options.dataModel || options.DataModel) {\n            this.setBehavior(options); // also sets options.data\n        }\n\n        if (options.state) {\n            this.loadState(options.state);\n        }\n\n        /**\n         * @name plugins\n         * @summary Dictionary of named instance plug-ins.\n         * @desc See examples for how to reference (albeit there is normally no need to reference plugins directly).\n         *\n         * For the dictionary of _shared_ plugins, see {@link Hypergrid.plugins|plugins} (a property of the constructor).\n         * @example\n         * var instancePlugins = myGrid.plugins;\n         * var instancePlugins = this.plugins; // internal use\n         * var myInstancePlugin = myGrid.plugins.myInstancePlugin;\n         * @type {object}\n         * @memberOf Hypergrid#\n         */\n        this.plugins = {};\n\n        // Install instance plug-ins (those that are constructors OR have an `install` method)\n        this.installPlugins(options.plugins);\n\n        // Listen for propagated mouseclicks. Used for aborting edit mode.\n        document.addEventListener('mousedown', this.mouseCatcher = function() {\n            this.abortEditing();\n        }.bind(this));\n\n        setTimeout(this.repaint.bind(this));\n\n        Hypergrid.grids.push(this);\n\n        this.resetGridBorder('Top');\n        this.resetGridBorder('Right');\n        this.resetGridBorder('Bottom');\n        this.resetGridBorder('Left');\n    },\n\n    /**\n     * Be a responsible citizen and call this function on instance disposal!\n     * @memberOf Hypergrid#\n     */\n    terminate: function() {\n        document.removeEventListener('mousedown', this.mouseCatcher);\n        this.behavior.dataModel.removeListener(this.behavior.boundDispatchEvent);\n        this.removeAllEventListeners(true);\n        this.canvas.stop();\n\n        var div = this.div;\n        while (div.hasChildNodes()) { div.removeChild(div.firstChild); }\n\n        Hypergrid.grids.splice(Hypergrid.grids.indexOf(this), 1);\n\n        delete this.div;\n        delete this.canvas.div;\n        delete this.canvas.canvas;\n        delete this.sbVScroller;\n        delete this.sbHScroller;\n    },\n\n\n    resetGridBorder: function(edge) {\n        edge = edge || '';\n\n        var propName = 'gridBorder' + edge,\n            styleName = 'border' + edge,\n            props = this.properties,\n            border = props[propName];\n\n        switch (border) {\n            case true:\n                border = props.lineWidth + 'px solid ' + props.lineColor;\n                break;\n            case false:\n                border = null;\n                break;\n        }\n        this.canvas.canvas.style[styleName] = border;\n    },\n\n    modules: modules, // Mutate or replace prototype prop to affect all grid instances; set instance prop to affect just instance.\n\n    /**\n     * A null object behavior serves as a place holder.\n     * @type {object}\n     * @memberOf Hypergrid#\n     */\n    behavior: null,\n\n    /**\n     * Cached result of webkit test.\n     * @type {boolean}\n     * @memberOf Hypergrid#\n     */\n    isWebkit: true,\n\n    /**\n     * The pixel location of an initial mousedown click, either for editing a cell or for dragging a selection.\n     * @type {Point}\n     * @memberOf Hypergrid#\n     */\n    mouseDown: [],\n\n    /**\n     * The extent from the mousedown point during a drag operation.\n     * @type {Point}\n     * @memberOf Hypergrid#\n     */\n    dragExtent: null,\n\n    /**\n     * The instance of the grid's selection model.\n     * May or may not contain any cell, row, and/or column selections.\n     * @type {SelectionModel}\n     * @memberOf Hypergrid#\n     */\n    selectionModel: null,\n\n    /**\n     * The instance of the currently active cell editor.\n     * Will be `null` when not editing.\n     * @type {CellEditor}\n     * @memberOf Hypergrid#\n     */\n    cellEditor: null,\n\n    /**\n     * Non-`null` members represent additional things to render, after rendering the grid, such as the column being dragged.\n     * @type {object}\n     * @memberOf Hypergrid#\n     */\n    renderOverridesCache: {},\n\n    /**\n     * The pixel location of the current hovered cell.\n     * @todo Need to detect hovering over bottom totals.\n     * @type {Point}\n     * @memberOf Hypergrid#\n     */\n    hoverCell: null,\n\n    lastEdgeSelection: null,\n\n    /**\n     * @memberOf Hypergrid#\n     */\n    setAttribute: function(attribute, value) {\n        this.div.setAttribute(attribute, value);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     */\n    clearState: function() {\n        /**\n         * @name properties\n         * @type {object}\n         * @summary Object containing the properties of the grid.\n         * @desc Grid properties objects have the following structure:\n         * 1. User-configured properties and dynamic properties are in the \"own\" layer.\n         * 2. Extends from the theme object.\n         * 3. The theme object in turn extends from the {@link module:defaults|defaults} object.\n         *\n         * Note: Any changes the application developer may wish to make to the {@link module:defaults|defaults}\n         * object should be made _before_ reaching this point (_i.e.,_ prior to any grid instantiations).\n         * @memberOf Hypergrid#\n         */\n        this.properties = Object.defineProperties(this.initThemeLayer(), {\n            grid: { value: this },\n            var: { value: new Var() }\n        });\n\n        // For all default props of object type, if a dynamic prop, invoke setter; else deep clone it so changes\n        // made to inner props won't go to object on theme or defaults layers which are shared by other instances.\n        Object.keys(defaults).forEach(function(key) {\n            var value = defaults[key];\n            if (typeof value === 'object') {\n                if (dynamicPropertyDescriptors[key]) {\n                    this[key] = value; // invoke dynamic prop setter\n                } else {\n                    this[key] = deepClone(value); // just a plain object\n                }\n            }\n        }, this.properties);\n    },\n\n    /**\n     * @desc Clear out all state settings, data (rows), and schema (columns) of a grid instance.\n     * @param {object} [options]\n     * @param {object} [options.subgrids] - Consumed by {@link Behavior#reset}.\n     * If omitted, previously established subgrids list is reused.\n     * @memberOf Hypergrid#\n     */\n    reset: function(options) {\n        this.clearState();\n\n        this.removeAllEventListeners();\n\n        this.lastEdgeSelection = [0, 0];\n        this.selectionModel.reset();\n        this.renderOverridesCache = {};\n        this.clearMouseDown();\n        this.dragExtent = new Point(0, 0);\n\n        this.numRows = 0;\n        this.numColumns = 0;\n\n        this.vScrollValue = 0;\n        this.hScrollValue = 0;\n\n        this.cancelEditing();\n\n        this.sbPrevVScrollValue = null;\n        this.sbPrevHScrollValue = null;\n\n        this.hoverCell = null;\n        this.scrollingNow = false;\n        this.lastEdgeSelection = [0, 0];\n\n        this.behavior.reset({\n            subgrids: options && options.subgrids\n        });\n\n        this.renderer.reset();\n        this.canvas.resize();\n        this.behaviorChanged();\n\n        this.refreshProperties();\n    },\n\n    /** @typedef {object|function|Array} pluginSpec\n     * @desc One of:\n     * * simple API - a plain object with an `install` method\n     * * object API - an object constructor\n     * * array:\n     *    * first element is an optional name for the API or the newly instantiated object\n     *    * next element (or first element when not a string) is the simple or object API\n     *    * remaining arguments are optional arguments for the object constructor\n     * * falsy value such as `undefined` - ignored\n     *\n     * The API may have a `name` or `$$CLASS_NAME` property.\n     */\n    /**\n     * @summary Install plugins.\n     * @desc Plugin installation:\n     * * Each simple API is installed by calling it's `install` method with `this` as first arg + any additional args listed in the `pluginSpec` (when it is an array).\n     * * Each object API is installed by instantiating it's constructor with `this` as first arg + any additional args listed in the `pluginSpec` (when it is an array).\n     *\n     * The resulting plain object or instantiated objects may be named by (in priority order):\n     * 1. if `pluginSpec` contains an array and first element is a string\n     * 2. object has a `name` property\n     * 3. object has a `$$CLASS_NAME` property\n     *\n     * If named, a reference to each object is saved in `this.plugins`. If the plug-in is unnamed, no reference is kept.\n     *\n     * There are two types of plugin installations:\n     * * Preinstalled plugins which are installed on the prototype. These are simple API plugins with a `preinstall` method called with the `installPlugins` calling context as the first argument. Preinstallations are automatically performed whenever a grid is instantiated (at the beginning of the constructor), by calling `installPlugins` with `Hypergrid.prototype` as the calling context.\n     * * Regular plugins which are installed on the instance. These are simple API plugins with an `install` method, as well as all object API plugins (constructors), called with the `installPlugins` calling context as the first argument. These installations are automatically performed whenever a grid is instantiated (at the end of the constructor), called with the new grid instance as the calling context.\n     *\n     * The \"`installPlugins` calling context\" means either the grid instance or its prototype, depending on how this method is called.\n     *\n     * Plugins may have both `preinstall` _and_ `install` methods, in which case both will be called. However, note that in any case, `install` methods on object API plugins are ignored.\n     * @param {pluginSpec|pluginSpec[]} [plugins] - The plugins to install. If omitted, the call is a no-op.\n     * @memberOf Hypergrid#\n     */\n    installPlugins: function(plugins) {\n        var shared = this === Hypergrid.prototype; // Do shared (\"preinstalled\") plugins (if any)\n\n        if (!plugins) {\n            return;\n        } else if (!Array.isArray(plugins)) {\n            plugins = [plugins];\n        }\n\n        plugins.forEach(function(plugin) {\n            var name, args, hash;\n\n            if (!plugin) {\n                return; // ignore falsy plugin spec\n            }\n\n            // set first arg of constructor to `this` (the grid instance)\n            // set first arg of `install` method to `this` (the grid instance)\n            // set first two args of `preinstall` method to `this` (the Hypergrid prototype) and the Behavior prototype\n            args = [this];\n            if (shared) {\n                args.push(Behavior.prototype);\n            }\n\n            if (Array.isArray(plugin)) {\n                if (!plugin.length) {\n                    plugin = undefined;\n                } else if (typeof plugin[0] !== 'string') {\n                    args = args.concat(plugin.slice(1));\n                    plugin = plugin[0];\n                } else if (plugin.length >= 2) {\n                    args = args.concat(plugin.slice(2));\n                    name = plugin[0];\n                    plugin = plugin[1];\n                } else {\n                    plugin = undefined;\n                }\n            }\n\n            if (!plugin) {\n                return; // ignore empty array or array with single string element\n            }\n\n            // Derive API name if not given in pluginSpec\n            name = name || plugin.name || plugin.$$CLASS_NAME;\n            if (name) {\n                // Translate first character to lower case\n                name = name.substr(0, 1).toLowerCase() + name.substr(1);\n            }\n\n            if (shared) {\n                // Execute the `preinstall` method\n                hash = this.constructor.plugins;\n                if (plugin.preinstall && !hash[name]) {\n                    plugin.preinstall.apply(plugin, args);\n                }\n            } else { // instance plug-ins:\n                hash = this.plugins;\n                if (typeof plugin === 'function') {\n                    // Install \"object API\" by instantiating\n                    plugin = this.createApply(plugin, args);\n                } else if (plugin.install) {\n                    // Install \"simple API\" by calling its `install` method\n                    plugin.install.apply(plugin, args);\n                } else if (!plugin.preinstall) {\n                    throw new Base.prototype.HypergridError('Expected plugin (a constructor; or an API with a `preinstall` method and/or an `install` method).');\n                }\n            }\n\n            if (name) {\n                hash[name] = plugin;\n            }\n\n        }, this);\n    },\n\n    /**\n     * @summary Uninstall all uninstallable plugins or just named plugins.\n     * @desc Calls `uninstall` on plugins that define such a method.\n     *\n     * To uninstall \"preinstalled\" plugins, call with `Hypergrid.prototype` as context.\n     *\n     * For convenience, the following args are passed to the call:\n     * * `this` - the plugin to be uninstalled\n     * * `grid` - the hypergrid object\n     * * `key` - name of the plugin to be uninstalled (_i.e.,_ key in `plugins`)\n     * * `plugins` - the plugins hash (a.k.a. `grid.plugins`)\n     * @param {string|stirng[]} [pluginNames] If provided, limit uninstall to the named plugin (string) or plugins (string[]).\n     * @memberOf Hypergrid#\n     */\n    uninstallPlugins: function(pluginNames) {\n        if (!pluginNames) {\n            pluginNames = [];\n        } else if (!Array.isArray(pluginNames)) {\n            pluginNames = [pluginNames];\n        }\n        _(this.plugins).each(function(plugin, key, plugins) {\n            if (\n                plugins.hasOwnProperty(key) &&\n                pluginNames.indexOf(key) >= 0 &&\n                plugin.uninstall\n            ) {\n                plugin.uninstall(this, key, plugins);\n            }\n        }, this);\n    },\n\n    computeCellsBounds: function() {\n        this.renderer.computeCellsBounds();\n    },\n\n    setFormatter: function(options) {\n        options = options || {};\n        this.localization = new Localization(\n            options.locale || Hypergrid.localization.locale,\n            options.numberOptions || Hypergrid.localization.numberOptions,\n            options.dateOptions || Hypergrid.localization.dateOptions\n        );\n    },\n\n    getFormatter: function(localizerName) {\n        return this.localization.get(localizerName).format;\n    },\n\n    formatValue: function(localizerName, value) {\n        var formatter = this.getFormatter(localizerName);\n        return formatter(value);\n    },\n\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the cell under the cursor.\n     * @param {CellEvent} cellEvent\n     */\n    setHoverCell: function(cellEvent) {\n        var hoverCell = this.hoverCell;\n        if (!hoverCell || !hoverCell.equals(cellEvent.gridCell)) {\n            this.hoverCell = cellEvent.gridCell;\n            if (hoverCell) {\n                this.fireSyntheticOnCellExitEvent(cellEvent);\n            }\n            this.fireSyntheticOnCellEnterEvent(cellEvent);\n            this.repaint();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Amend properties for this hypergrid only.\n     * @param {object} moreProperties - A simple properties hash.\n     */\n    addProperties: function(properties) {\n        Object.assign(this.properties, properties);\n        this.refreshProperties();\n    },\n\n    /**\n     * @todo deprecate this in favor of making properties dynamic instead (for those that need to be)\n     * @memberOf Hypergrid#\n     * @desc Utility function to push out properties if we change them.\n     * @param {object} properties - An object of various key value pairs.\n     */\n    refreshProperties: function() {\n        this.behaviorShapeChanged();\n        this.behavior.defaultRowHeight = null;\n        this.behavior.autosizeAllColumns();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the state object to return to the given user configuration; then re-render the grid.\n     * @param {object} state - A grid state object.\n     * @see [Memento pattern](http://en.wikipedia.org/wiki/Memento_pattern)\n     */\n    setState: function(state) {\n        this.addState(state, true);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Add to the state object; then re-render the grid.\n     * @param {object} state - A grid state object.\n     * @param {boolean} [settingState=false] - Clear state first (_i.e.,_ perform a set state operation).\n     */\n    addState: function(state, settingState) {\n        this.behavior.addState(state, settingState);\n        this.refreshProperties();\n        this.behaviorChanged();\n    },\n\n    getState: function() {\n        return this.behavior.getState();\n    },\n\n    loadState: function(state) {\n        this.behavior.setState(state);\n    },\n\n    /**\n     * @todo Only output values when they differ from defaults (deep compare needed).\n     * @param {object} [options]\n     * @param {string[]} [options.blacklist] - List of grid properties to exclude. Pertains to grid own properties only.\n     * @param {boolean} [options.compact] - Run garbage collection first. The only property this current affects is `properties.calculators` (removes unused calculators).\n     * @param {number|string} [options.space='\\t'] - For no space, give `0`. (See {@link https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Local/stringify|JSON.stringify}'s `space` param other options.)\n     * @param {function} [options.headerify] - If your headers were generated by a function (taking column name as a parameter), give a reference to that function here to avoid persisting headers that match the generated string.\n     * @memberOf Hypergrid#\n     */\n    saveState: function(options) {\n        options = options || {};\n\n        var space = options.space === undefined ? '\\t' : options.space,\n            properties = this.properties,\n            calculators = properties.calculators,\n            blacklist = options.blacklist = options.blacklist || [];\n\n        blacklist.push('columnProperties'); // Never output this synonym of 'columns'\n\n        if (calculators) {\n            if (options.compact) {\n                var columns = this.behavior.getColumns();\n                Object.keys(calculators).forEach(function(key) {\n                    if (!columns.find(function(column) {\n                            return column.properties.calculator === calculators[key];\n                        })) {\n                        delete calculators[key];\n                    }\n                });\n            }\n            calculators.toJSON = stringifyFunctions;\n        }\n\n        // Temporarily copy the given headerify function for access by columns getter\n        this.headerify = options.headerify;\n\n        var json = JSON.stringify(properties, function(key, value) {\n            if (this === properties && options.blacklist.indexOf(key) >= 0) {\n                value = undefined; // JSON.stringify ignores undefined props\n            } else if (key === 'calculator') {\n                if (calculators) {\n                    // convert function reference to registry key\n                    value = Object.keys(calculators).find(function(key) {\n                        return calculators[key] === value;\n                    });\n                } else {\n                    // registry may not exist if Column.calculator setter was used directly so just save as is\n                    value = value.toString();\n                }\n            }\n            return value;\n        }, space);\n\n        // Remove the temporary copy\n        delete this.headerify;\n\n        return json;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {object} The initial mouse position on a mouse down event for cell editing or a drag operation.\n     * @memberOf Hypergrid#\n     */\n    getMouseDown: function() {\n        if (this.mouseDown.length) {\n            return this.mouseDown[this.mouseDown.length - 1];\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Remove the last item from the mouse down stack.\n     */\n    popMouseDown: function() {\n        var result;\n        if (this.mouseDown.length) {\n            result = this.mouseDown.pop();\n        }\n        return result;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Empty out the mouse down stack.\n     */\n    clearMouseDown: function() {\n        this.mouseDown = [new Point(-1, -1)];\n        this.dragExtent = null;\n    },\n\n    /**\n     * Set the mouse point that initiated a cell edit or drag operation.\n     * @param {Point} point\n     * @memberOf Hypergrid#\n     */\n    setMouseDown: function(point) {\n        this.mouseDown.push(point);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {Point} The extent point of the current drag selection rectangle.\n     */\n    getDragExtent: function() {\n        return this.dragExtent;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Set the extent point of the current drag selection operation.\n     * @param {Point} point\n     */\n    setDragExtent: function(point) {\n        this.dragExtent = point;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc This function is a callback from the HypergridRenderer sub-component. It is called after each paint of the canvas.\n     */\n    gridRenderedNotification: function() {\n        if (this.cellEditor) {\n            this.cellEditor.gridRenderedNotification();\n        }\n\n        // Grid render also calculates mix width for each column.\n        // Check here to see if there was a change and if so immediately re-render\n        // before end-of-thread so user sees only the results of the 2nd render.\n        // Mostly important on first render after setData. Note that stack overflow\n        // will not happen because this will only be called once per data change.\n        if (this.checkColumnAutosizing()) {\n            this.paintNow();\n        }\n\n        this.fireSyntheticGridRenderedEvent();\n    },\n\n    tickNotification: function() {\n        this.fireSyntheticTickEvent();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc The grid has just been rendered, make sure the column widths are optimal.\n     */\n    checkColumnAutosizing: function() {\n        var autoSized = this.behavior.checkColumnAutosizing(false);\n        if (autoSized) {\n            this.behaviorShapeChanged();\n        }\n        return autoSized;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Conditionally copy to clipboard.\n     * @desc If we have focus, copy our current selection data to the system clipboard.\n     * @param {event} event - The copy system event.\n     */\n    checkClipboardCopy: function(event) {\n        if (this.hasFocus()) {\n            event.preventDefault();\n            var csvData = this.getSelectionAsTSV();\n            event.clipboardData.setData('text/plain', csvData);\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} We have focus.\n     */\n    hasFocus: function() {\n        return this.canvas.hasFocus();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Set the Behavior object for this grid control.\n     * @desc Called when `options.Behavior` from:\n     * * Hypergrid constructor\n     * * `setData` when not called explicitly before then\n     * @param {object} [options] - _Per {@link Behavior#setData}._\n     * @param {Behavior} [options.Behavior=Local] - The behavior (model) can be either a constructor or an instance.\n     * @param {DataModel} [options.dataModel] - A fully instantiated data model object.\n     * @param {function} [options.DataModel=require('datasaur-local')] - Data model will be instantiated from this constructor unless `options.dataModel` was given.\n     * @param {object} [options.metadata] - Value to be passed to `setMetadataStore` if the data model has changed.\n     * @param {dataRowObject[]} [options.data] - _Per {@link Behavior#setData}._\n     * @param {function|menuItem[]} [options.schema] - _Per {@link Behavior#setData}.\n     */\n    setBehavior: function(options) {\n        var Behavior = options && options.Behavior || behaviorJSON;\n        this.behavior = new Behavior(this, options);\n        this.initScrollbars();\n        this.refreshProperties();\n        this.behavior.reindex();\n    },\n\n    /**\n     * Number of _visible_ columns.\n     * @memberOf Hypergrid#\n     * @returns {number} The number of columns.\n     */\n    getColumnCount: function() {\n        return this.behavior.getActiveColumnCount();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The number of rows.\n     */\n    getRowCount: function() {\n        return this.behavior.getRowCount();\n    },\n\n    getRow: function(y) {\n        return this.behavior.getRow(y);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @see {@link Behavior#getValue}\n     */\n    getValue: function(x, y, dataModel) {\n        return this.behavior.getValue(x, y, dataModel);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @see {@link Behavior#setValue}\n     */\n    setValue: function(x, y, value, dataModel) {\n        this.behavior.setValue(x, y, value, dataModel);\n     },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Set the underlying datasource.\n     * @desc This can be done dynamically.\n     * @param {function|object[]} dataRows - May be:\n     * * An array of congruent raw data objects.\n     * * A function returning same.\n     * @param {object} [options] - _(See also {@link Behavior#setData} for additional options.)_\n     * @param {Behavior} [options.Behavior=Local] - The behavior (model) can be either a constructor or an instance.\n     * @param {DataModel} [options.dataModel] - _Passed to behavior {@link Behavior constructor} (when `options.Behavior` given)._\n     * @param {function} [options.DataModel=require('datasaur-local')] - _Passed to behavior {@link Behavior constructor} (when `options.Behavior` given)._\n     * @param {object} [options.metadata] - _Passed to behavior {@link Behavior constructor} (when `options.Behavior` given)._\n     * @param {dataRowObject[]} [options.data] - _Passed to behavior {@link Behavior constructor} (when `options.Behavior` given)._\n     * @param {function|menuItem[]} [options.schema] - _Passed to behavior {@link Behavior constructor} (when `options.Behavior` given)._\n     */\n    setData: function(dataRows, options) {\n        if (!this.behavior) {\n            this.setBehavior(options);\n        }\n        this.behavior.setData(dataRows, options);\n        this.setInfo(dataRows.length ? '' : this.properties.noDataMessage);\n        this.behavior.shapeChanged();\n    },\n\n    setInfo: function(messages) {\n        this.renderer.setInfo(messages);\n    },\n\n    /**\n     * @memberOf Behavior#\n     */\n    reindex: function() {\n        if (paintLoopRunning.call(this)) {\n            this.needsReindex = true;\n        } else {\n            this.behavior.reindex();\n        }\n        this.behaviorShapeChanged();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc I've been notified that the behavior has changed.\n     */\n    behaviorChanged: function() {\n        if (this.divCanvas) {\n            if (this.numColumns !== this.getColumnCount() || this.numRows !== this.getRowCount()) {\n                this.numColumns = this.getColumnCount();\n                this.numRows = this.getRowCount();\n                this.behaviorShapeChanged();\n            } else {\n                this.behaviorStateChanged();\n            }\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc The dimensions of the grid data have changed. You've been notified.\n     */\n    behaviorShapeChanged: function() {\n        if (paintLoopRunning.call(this)) {\n            this.needsShapeChanged = true;\n            this.canvas.requestRepaint();\n        } else if (this.divCanvas) {\n            this.synchronizeScrollingBoundaries(); // calls computeCellsBounds\n            this.repaint();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc The dimensions of the grid data have changed. You've been notified.\n     */\n    behaviorStateChanged: function() {\n        if (paintLoopRunning.call(this)) {\n            this.needsStateChanged = true;\n            this.canvas.requestRepaint();\n        } else if (this.divCanvas) {\n            this.computeCellsBounds();\n            this.repaint();\n        }\n    },\n\n    /**\n     * Called from renderer/index.js\n     */\n    deferredBehaviorChange: function() {\n        if (this.needsReindex) {\n            this.behavior.reindex();\n            this.needsReindex = false;\n        }\n\n        if (this.needsShapeChanged) {\n            if (this.divCanvas) {\n                this.synchronizeScrollingBoundaries(); // calls computeCellsBounds\n            }\n        } else if (this.needsStateChanged) {\n            if (this.divCanvas) {\n                this.computeCellsBounds();\n            }\n        }\n\n        this.needsShapeChanged = this.needsStateChanged = false;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {Rectangle} My bounds.\n     */\n    getBounds: function() {\n        return this.renderer.getBounds();\n    },\n\n    repaint: function() {\n        var canvas = this.canvas;\n        if (canvas) {\n            if (this.properties.repaintImmediately) {\n                this.paintNow();\n            } else {\n                canvas.repaint();\n            }\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Paint immediately in this microtask.\n     */\n    paintNow: function() {\n        if (this.behavior.columnsCreated) {\n            this.canvas.paintNow();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Set the container for a grid instance\n     * @private\n     */\n    setContainer: function(div) {\n        this.initContainer(div);\n        this.initRenderer();\n        // injectGridElements.call(this);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Initialize container\n     * @private\n     */\n    initContainer: function(div) {\n        if (typeof div === 'string') {\n            div = document.querySelector(div);\n        }\n\n        //Default Position and height to ensure DnD works\n        if (!div.style.position) {\n            div.style.position = null; // revert to stylesheet value\n        }\n\n        if (div.clientHeight < 1) {\n            div.style.height = null; // revert to stylesheet value\n        }\n\n        injectCSS('grid');\n\n        //prevent the default context menu for appearing\n        div.oncontextmenu = function(event) {\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n        };\n\n        div.removeAttribute('tabindex');\n\n        div.classList.add('hypergrid-container');\n        div.id = div.id || 'hypergrid' + (document.querySelectorAll('.hypergrid-container').length - 1 || '');\n\n        this.div = div;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Initialize drawing surface.\n     * @param {object} [options]\n     * @param {object} [options.margin] - Optional canvas \"margins\" applied to containing div as .left, .top, .right, .bottom. (Default values actually derive from 'grid' stylesheet's `.hypergrid-container` rule.)\n     * @param {string} [options.margin.top='0px']\n     * @param {string} [options.margin.right='0px']\n     * @param {string} [options.margin.bottom='0px']\n     * @param {string} [options.margin.left='0px']\n     * @private\n     */\n    initCanvas: function(options) {\n        if (!this.divCanvas) {\n            var divCanvas = document.createElement('div');\n\n            setStyles(divCanvas, options && options.margin, EDGE_STYLES);\n\n            this.div.appendChild(divCanvas);\n\n            var contextAttributes = options && (\n                options.contextAttributes ||\n                options.canvasContextAttributes\n            );\n            var canvas = new Canvas(divCanvas, this.renderer, contextAttributes);\n            canvas.canvas.classList.add('hypergrid');\n\n            this.divCanvas = divCanvas;\n            this.canvas = canvas;\n\n            this.delegateCanvasEvents();\n        }\n    },\n\n    convertViewPointToDataPoint: function(unscrolled) {\n        return this.behavior.convertViewPointToDataPoint(unscrolled);\n    },\n\n    convertDataPointToViewPoint: function(dataPoint) {\n        return this.behavior.convertDataPointToViewPoint(dataPoint);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Switch the cursor for a grid instance.\n     * @param {string|string[]} cursorName - A well know cursor name.\n     * @see [cursor names](http://www.javascripter.net/faq/stylesc.htm)\n     */\n    beCursor: function(cursorName) {\n        if (!cursorName) {\n            cursorName = ['default'];\n        } else if (!Array.isArray(cursorName)) {\n            cursorName = [cursorName];\n        }\n        cursorName.forEach(function(name) { this.cursor = name; }, this.div.style);\n    },\n\n    /**\n     * @summary Shut down the current cell editor and save the edited value.\n     * @returns {boolean} One of:\n     * * `false` - Editing BUT could not abort.\n     * * `true` - Not editing OR was editing AND abort was successful.\n     * @memberOf Hypergrid#\n     */\n    stopEditing: function() {\n        return !this.cellEditor || this.cellEditor.stopEditing();\n    },\n\n    /**\n     * @summary Shut down the current cell editor without saving the edited val\n     * @returns {boolean} One of:\n     * * `false` - Editing BUT could not abort.\n     * * `true` - Not editing OR was editing AND abort was successful.\n     * @memberOf Hypergrid#\n     */\n    cancelEditing: function() {\n        return !this.cellEditor || this.cellEditor.cancelEditing();\n    },\n\n    /**\n     * @summary Give cell editor opportunity to cancel (or something) instead of stop .\n     * @returns {boolean} One of:\n     * * `false` - Editing BUT could not abort.\n     * * `true` - Not editing OR was editing AND abort was successful.\n     * @memberOf Hypergrid#\n     */\n    abortEditing: function() {\n        return !this.cellEditor || (\n            this.cellEditor.abortEditing ? this.cellEditor.abortEditing() : this.cellEditor.stopEditing()\n        );\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {Rectangle} The pixel coordinates of just the center 'main\" data area.\n     */\n    getDataBounds: function() {\n        var b = this.canvas.bounds;\n        return new Rectangle(0, 0, b.origin.x + b.extent.x, b.origin.y + b.extent.y);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Open the cell-editor for the cell at the given coordinates.\n     * @param {CellEvent} event - Coordinates of \"edit point\" (gridCell.x, dataCell.y).\n     * @return {undefined|CellEditor} The cellEditor determined from the cell's render properties, which may be modified by logic added by overriding {@link DataModel#getCellEditorAt|getCellEditorAt}.\n     */\n    editAt: function(event) {\n        var cellEditor;\n\n        this.abortEditing(); // if another editor is open, close it first\n\n        if (\n            event.isDataColumn &&\n            event.properties[event.isDataRow ? 'editable' : 'filterable'] &&\n            (cellEditor = this.getCellEditorAt(event))\n        ) {\n            cellEditor.beginEditing();\n        }\n\n        return cellEditor;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @param {number} columnIndex - The column index in question.\n     * @returns {boolean} The given column is fully visible.\n     */\n    isColumnVisible: function(columnIndex) {\n        return this.renderer.isColumnVisible(columnIndex);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @param {number} r - The raw row index in question.\n     * @returns {boolean} The given row is fully visible.\n     */\n    isDataRowVisible: function(r) {\n        return this.renderer.isDataRowVisible(r);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @param {number} c - The column index in question.\n     * @param {number} rn - The grid row index in question.\n     * @returns {boolean} The given cell is fully is visible.\n     */\n    isDataVisible: function(c, rn) {\n        return this.isDataRowVisible(rn) && this.isColumnVisible(c);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Scroll in the `offsetX` direction if column index `colIndex` is not visible.\n     * @param {number} colIndex - The column index in question.\n     * @param {number} offsetX - The direction and magnitude to scroll if we need to.\n     * @return {boolean} Column is visible.\n     */\n    insureModelColIsVisible: function(colIndex, offsetX) {\n        var maxCols = this.getColumnCount() - 1, // -1 excludes partially visible columns\n            indexToCheck = colIndex + Math.sign(offsetX),\n            visible = !this.isColumnVisible(indexToCheck) || colIndex === maxCols;\n\n        if (visible) {\n            //the scroll position is the leftmost column\n            this.scrollBy(offsetX, 0);\n        }\n\n        return visible;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Scroll in the `offsetY` direction if column index c is not visible.\n     * @param {number} rowIndex - The column index in question.\n     * @param {number} offsetX - The direction and magnitude to scroll if we need to.\n     * @return {boolean} Row is visible.\n     */\n    insureModelRowIsVisible: function(rowIndex, offsetY) {\n        var maxRows = this.getRowCount() - 1, // -1 excludes partially visible rows\n            scrollOffset = (offsetY > -1) ? 1 : 0, // 1 to keep one blank line below active cell, 0 to keep zero lines above active cell\n            indexToCheck = rowIndex + scrollOffset,\n            visible = !this.isDataRowVisible(indexToCheck) || rowIndex === maxRows;\n\n        if (visible) {\n            //the scroll position is the topmost row\n            this.scrollBy(0, offsetY);\n        }\n\n        return visible;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Answer which data cell is under a pixel value mouse point.\n     * @param {mousePoint} mouse - The mouse point to interrogate.\n     */\n    getGridCellFromMousePoint: function(mouse) {\n        return this.renderer.getGridCellFromMousePoint(mouse);\n    },\n\n    /**\n     * @param {Point} gridCell - The pixel location of the mouse in physical grid coordinates.\n     * @returns {Rectangle} The pixel based bounds rectangle given a data cell point.\n     * @memberOf Hypergrid#\n     */\n    getBoundsOfCell: function(gridCell) {\n        var b = this.renderer.getBoundsOfCell(gridCell.x, gridCell.y);\n\n        //convert to a proper rectangle\n        return new Rectangle(b.x, b.y, b.width, b.height);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc This is called by the fin-canvas when a resize occurs.\n     */\n    resized: function() {\n        this.behaviorShapeChanged();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary A click event occurred.\n     * @desc Determine the cell and delegate to the behavior (model).\n     * @see {@link Local#cellClicked}\n     * @param {CellEvent} event - The cell event to interrogate.\n     * @returns {@link DataModel#toggleRow}'s return value which may or may not be implemented.\n     */\n    cellClicked: function(event) {\n        return this.behavior.cellClicked(event);\n    },\n\n    /**\n     * To intercept link clicks, override this method (either on the prototype to apply to all grid instances or on an instance to apply to a specific grid instance).\n     * @memberOf Hypergrid#\n     */\n    windowOpen: function(url, name, features, replace) {\n        return window.open.apply(window, arguments);\n    },\n\n    /**\n     * @param {number} [begin]\n     * @param {nubmer} [end]\n     * * @returns {Column[]} A copy of the all columns array by passing the params to `Array.prototype.slice`.\n     */\n    getColumns: function(begin, end) {\n        var columns = this.behavior.getColumns();\n        return columns.slice.apply(columns, arguments);\n    },\n\n    /**\n     * @param {number} [begin]\n     * @param {nubmer} [end]\n     * * @returns {Column[]} A copy of the active columns array by passing the params to `Array.prototype.slice`.\n     */\n    getActiveColumns: function(begin, end) {\n        var columns = this.behavior.getActiveColumns();\n        return columns.slice.apply(columns, arguments);\n    },\n\n    getHiddenColumns: function() {\n        //A non in-memory behavior will be more troublesome\n        return this.behavior.getHiddenColumns();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Request input focus.\n     */\n    takeFocus: function() {\n        var wasCellEditor = this.cellEditor;\n        this.stopEditing();\n        if (!wasCellEditor) {\n            this.canvas.takeFocus();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Request focus for our cell editor.\n     */\n    editorTakeFocus: function() {\n        if (this.cellEditor) {\n            return this.cellEditor.takeFocus();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Note that \"viewable rows\" includes any partially viewable rows.\n     * @returns {number} The number of viewable rows.\n     */\n    getVisibleRows: function() {\n        return this.renderer.getVisibleRows();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Note that \"viewable columns\" includes any partially viewable columns.\n     * @returns {number} The number of viewable columns.\n     */\n    getVisibleColumns: function() {\n        return this.renderer.getVisibleColumns();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Initialize the renderer sub-component.\n     */\n    initRenderer: function() {\n        this.renderer = this.renderer || new Renderer(this);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The width of the given column.\n     * @param {number} columnIndex - The untranslated column index.\n     */\n    getColumnWidth: function(columnIndex) {\n        return this.behavior.getColumnWidth(columnIndex);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the width of the given column.\n     * @param {number} columnIndex - The untranslated column index.\n     * @param {number} columnWidth - The width in pixels.\n     */\n    setColumnWidth: function(columnIndex, columnWidth) {\n        if (this.abortEditing()) {\n            this.behavior.setColumnWidth(columnIndex, columnWidth);\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The total width of all the fixed columns.\n     */\n    getFixedColumnsWidth: function() {\n        return this.behavior.getFixedColumnsWidth();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The height of the given row\n     * @param {number} rowIndex - The untranslated fixed column index.\n     */\n    getRowHeight: function(rowIndex, dataModel) {\n        return this.behavior.getRowHeight(rowIndex, dataModel);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the height of the given row.\n     * @param {number} rowIndex - The row index.\n     * @param {number} rowHeight - The width in pixels.\n     */\n    setRowHeight: function(rowIndex, rowHeight, dataModel) {\n        if (this.abortEditing()) {\n            this.behavior.setRowHeight(rowIndex, rowHeight, dataModel);\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The total fixed rows height\n     */\n    getFixedRowsHeight: function() {\n        return this.behavior.getFixedRowsHeight();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The number of fixed columns.\n     */\n    getFixedColumnCount: function() {\n        return this.behavior.getFixedColumnCount();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns The number of fixed rows.\n     */\n    getFixedRowCount: function() {\n        return this.behavior.getFixedRowCount();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary The top left area has been clicked on\n     * @desc Delegates to the behavior.\n     * @param {event} mouse - The event details.\n     */\n    topLeftClicked: function(mouse) {\n        this.behavior.topLeftClicked(this, mouse);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary A fixed row has been clicked.\n     * @desc Delegates to the behavior.\n     * @param {event} event - The event details.\n     */\n    rowHeaderClicked: function(mouse) {\n        this.behavior.rowHeaderClicked(this, mouse);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary A fixed column has been clicked.\n     * @desc Delegates to the behavior.\n     * @param {event} event - The event details.\n     */\n    columnHeaderClicked: function(mouse) {\n        this.behavior.columnHeaderClicked(this, mouse);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc An edit event has occurred. Activate the editor at the given coordinates.\n     * @param {number} event.gridCell.x - The horizontal coordinate.\n     * @param {number} event.gridCell.y - The vertical coordinate.\n     * @param {boolean} [event.primitiveEvent.type]\n     * @returns {undefined|CellEditor} The editor object or `undefined` if no editor or editor already open.\n     */\n    onEditorActivate: function(event) {\n        return this.editAt(event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Get the cell editor.\n     * @desc Delegates to the behavior.\n     * @returns The cell editor at the given coordinates.\n     * @param {Point} cellEvent - The grid cell coordinates.\n     */\n    getCellEditorAt: function(event) {\n        return this.behavior.getCellEditorAt(event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Toggle HiDPI support.\n     * @desc HiDPI support is now *on* by default.\n     * > There used to be a bug in Chrome that caused severe slow down on bit blit of large images, so this HiDPI needed to be optional.\n     */\n    toggleHiDPI: function() {\n        if (this.properties.useHiDPI) {\n            this.removeAttribute('hidpi');\n        } else {\n            this.setAttribute('hidpi', null);\n        }\n        this.canvas.resize();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The HiDPI ratio.\n     */\n    getHiDPI: function(ctx) {\n        if (window.devicePixelRatio && this.properties.useHiDPI) {\n            var devicePixelRatio = window.devicePixelRatio || 1,\n                backingStoreRatio = ctx.webkitBackingStorePixelRatio ||\n                    ctx.mozBackingStorePixelRatio ||\n                    ctx.msBackingStorePixelRatio ||\n                    ctx.oBackingStorePixelRatio ||\n                    ctx.backingStorePixelRatio || 1,\n                result = devicePixelRatio / backingStoreRatio;\n        } else {\n            result = 1;\n        }\n        return result;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The width of the given (recently rendered) column.\n     * @param {number} colIndex - The column index.\n     */\n    getRenderedWidth: function(colIndex) {\n        return this.renderer.getRenderedWidth(colIndex);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The height of the given (recently rendered) row.\n     * @param {number} rowIndex - The row index.\n     */\n    getRenderedHeight: function(rowIndex) {\n        return this.renderer.getRenderedHeight(rowIndex);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Update the cursor under the hover cell.\n     */\n    updateCursor: function() {\n        var cursor = this.behavior.getCursorAt(-1, -1);\n        var hoverCell = this.hoverCell;\n        if (\n            hoverCell &&\n            hoverCell.x > -1 &&\n            hoverCell.y > -1\n        ) {\n            var x = hoverCell.x + this.getHScrollValue();\n            cursor = this.behavior.getCursorAt(x, hoverCell.y + this.getVScrollValue());\n        }\n        this.beCursor(cursor);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Repaint the given cell.\n     * @param {x} x - The horizontal coordinate.\n     * @param {y} y - The vertical coordinate.\n     */\n    repaintCell: function(x, y) {\n        this.renderer.repaintCell(x, y);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} The user is currently dragging a column to reorder it.\n     */\n    isDraggingColumn: function() {\n        return !!this.renderOverridesCache.dragger;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {object[]} Objects with the values that were just rendered.\n     */\n    getRenderedData: function() {\n        return this.renderer.getVisibleCellMatrix();\n    },\n\n    /**\n     * @summary Autosize a column for best fit.\n     * @param {Column|number} columnOrIndex - The column or active column index.\n     * @memberOf Hypergrid#\n     */\n    autosizeColumn: function(columnOrIndex) {\n        var column = columnOrIndex >= -2 ? this.behavior.getActiveColumn(columnOrIndex) : columnOrIndex;\n        column.checkColumnAutosizing(true);\n        this.computeCellsBounds();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Enable/disable if this component can receive the focus.\n     * @param {boolean} - canReceiveFocus\n     */\n    setFocusable: function(canReceiveFocus) {\n        this.canvas.setFocusable(canReceiveFocus);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The number of columns that were just rendered\n     */\n    getVisibleColumnsCount: function() {\n        return this.renderer.getVisibleColumnsCount();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {number} The number of rows that were just rendered\n     */\n    getVisibleRowsCount: function() {\n        return this.renderer.getVisibleRowsCount();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Update the size of a grid instance.\n     */\n    updateSize: function() {\n        this.canvas.checksize();\n    },\n\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Stop the global repainting flag thread.\n     */\n    stopPaintThread: function() {\n        this.canvas.stopPaintThread();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Stop the global resize check flag thread.\n     */\n    stopResizeThread: function() {\n        this.canvas.stopResizeThread();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Restart the global resize check flag thread.\n     */\n    restartResizeThread: function() {\n        this.canvas.restartResizeThread();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Restart the global repainting check flag thread.\n     */\n    restartPaintThread: function() {\n        this.canvas.restartPaintThread();\n    },\n\n    swapColumns: function(source, target) {\n        //Turns out this is called during dragged 'i.e' when the floater column is reshuffled\n        //by the currently dragged column. The column positions are constantly reshuffled\n        this.behavior.swapColumns(source, target);\n    },\n\n    endDragColumnNotification: function() {\n        this.behavior.endDragColumnNotification();\n    },\n\n    getFixedColumnsMaxWidth: function() {\n        return this.behavior.getFixedColumnsMaxWidth();\n    },\n\n    isMouseDownInHeaderArea: function() {\n        var headerRowCount = this.getHeaderRowCount();\n        var mouseDown = this.getMouseDown();\n        return mouseDown.x < 0 || mouseDown.y < headerRowCount;\n    },\n\n    /**\n     * @param {index} x - Data x coordinate.\n     * @return {Object} The properties for a specific column.\n     * @memberOf Hypergrid#\n     */\n    getColumnProperties: function(x) {\n        return this.behavior.getColumnProperties(x);\n    },\n\n    /**\n     * @param {index} x - Data x coordinate.\n     * @return {Object} The properties for a specific column.\n     * @memberOf Hypergrid#\n     */\n    setColumnProperties: function(x, properties) {\n        this.behavior.setColumnProperties(x, properties);\n    },\n\n    /**\n     * Clears all cell properties of given column or of all columns.\n     * @param {number} [x] - Omit for all columns.\n     * @memberOf Hypergrid#\n     */\n    clearAllCellProperties: function(x) {\n        this.behavior.clearAllCellProperties(x);\n        this.renderer.resetAllCellPropertiesCaches();\n    },\n\n    /**\n     * @param {integerRowIndex|sectionPoint} rn\n     * @returns {boolean}\n     * @memberOf Hypergrid#\n     */\n    isGridRow: function(y) {\n        return new this.behavior.CellEvent(0, y).isDataRow;\n    },\n\n    /**\n     * @returns {number} The total number of rows of all subgrids preceding the data subgrid.\n     * @memberOf Hypergrid#\n     */\n    getHeaderRowCount: function() {\n        return this.behavior.getHeaderRowCount();\n    },\n\n    /**\n     * @returns {number} The total number of rows of all subgrids following the data subgrid.\n     * @memberOf Hypergrid#\n     */\n    getFooterRowCount: function() {\n        return this.behavior.getFooterRowCount();\n    },\n\n    /**\n     * @returns {number} The total number of logical rows of all subgrids.\n     * @memberOf Hypergrid#\n     */\n    getLogicalRowCount: function() {\n        return this.behavior.getLogicalRowCount();\n    },\n\n    hasTreeColumn: function() {\n        return this.behavior.hasTreeColumn();\n    },\n    lookupFeature: function(key) {\n        return this.behavior.lookupFeature(key);\n    },\n\n    newPoint: function(x, y) {\n        return new Point(x, y);\n    },\n    newRectangle: function(x, y, width, height) {\n        return new Rectangle(x, y, width, height);\n    },\n\n    get charMap() {\n        return this.behavior.charMap;\n    },\n\n    decorateColumnArray: function(array) {\n        if (!this.columnArrayDecorations) {\n            var grid = this;\n            this.columnArrayDecorations = {\n                findWithNeg: {\n                    // Like the Array.prototype version except searches the negative indexes as well.\n                    value: function(iteratee, context) {\n                        for (var i = grid.behavior.leftMostColIndex; i < 0; i++) {\n                            if (!this[i]) {\n                                continue;\n                            }\n                            if (iteratee.call(context, this[i], i, this)) {\n                                return this[i];\n                            }\n                        }\n                        return this.find(iteratee, context);\n                    }\n                },\n                forEachWithNeg: {\n                    // Like the Array.prototype version except it iterates the negative indexes as well.\n                    value: function(iteratee, context) {\n                        for (var i = grid.behavior.leftMostColIndex; i < 0; i++) {\n                            if (!this[i]) {\n                                continue;\n                            }\n                            iteratee.call(context, this[i], i, this);\n                        }\n                        return this.forEach(iteratee, context);\n                    }\n\n                }\n            };\n        }\n        return Object.defineProperties(array || [], this.columnArrayDecorations);\n    }\n});\n\n\nfunction paintLoopRunning() {\n    return !this.properties.repaintImmediately && this.canvas.paintLoopRunning();\n}\n\n\n/**\n * Creates an instance variable backer for use by the getters and setters described in {@link dynamicProperties}.\n * @constructor\n * @memberOf Hypergrid~\n * @private\n */\nfunction Var() {\n    this.gridRenderer = defaults.gridRenderer;\n    this.rowHeaderCheckboxes = defaults.rowHeaderCheckboxes;\n    this.rowHeaderNumbers = defaults.rowHeaderNumbers;\n    this.gridBorder = defaults.gridBorder;\n    this.gridBorderTop = defaults.gridBorderTop;\n    this.gridBorderRight = defaults.gridBorderRight;\n    this.gridBorderBottom = defaults.gridBorderBottom;\n    this.gridBorderLeft = defaults.gridBorderLeft;\n}\n\nfunction findOrCreateContainer(boundingRect) {\n    var div = document.getElementById('hypergrid'),\n        used = div && !div.firstElementChild;\n\n    if (!used) {\n        div = document.createElement('div');\n        setStyles(div, boundingRect, RECT_STYLES);\n        document.body.appendChild(div);\n    }\n\n    return div;\n}\n\nfunction setStyles(el, style, keys) {\n    if (style) {\n        var elStyle = el.style;\n        keys.forEach(function(key) {\n            if (style[key] !== undefined) {\n                elStyle[key] = style[key];\n            }\n        });\n    }\n}\n\nfunction stringifyFunctions() {\n    var self = this;\n    return Object.keys(this).reduce(function(obj, key) {\n        if (key !== 'toJSON') {\n            obj[key] = /^function /.test(key)\n                ? null // anon func: no point in saving because key itself is already the stringified function\n                : self[key].toString() // stringify the function\n                    .replace(/^function anonymous\\(/, 'function(') // clean up Chromium artifact\n                    .replace('\\n/*``*/)', ')'); // clean up Chromium artifact\n        }\n        return obj;\n    }, {});\n}\n\nfunction clone(value) {\n    if (Array.isArray(value)) {\n        return value.slice(); // clone array\n    } else if (typeof value === 'object') {\n        return Object.defineProperties({}, Object.getOwnPropertyDescriptors(value));\n    } else {\n        return value;\n    }\n}\n\nfunction deepClone(object) {\n    var result = clone(object);\n    Object.keys(result).forEach(function(key) {\n        var descriptor = Object.getOwnPropertyDescriptor(result, key);\n        if (typeof descriptor.value === 'object') {\n            result[key] = deepClone(descriptor.value);\n        }\n    });\n    return result;\n}\n\nfunction createCellEditor(name, props) {\n    var CellEditor = cellEditors.get(name);\n    if (CellEditor) {\n        return new CellEditor(this, props);\n    }\n}\n\n/**\n * @name plugins\n * @memberOf Hypergrid\n * @type {object}\n * @summary Hash of references to shared plug-ins.\n * @desc Dictionary of shared (pre-installed) plug-ins. Used internally, primarily to avoid reinstallations. See examples for how to reference (albeit there is normally no need to reference plugins directly).\n *\n * For the dictionary of _instance_ plugins, see {@link Hypergrid#plugins|plugins} (defined in the {@link Hypergrid#intialize|Hypergrid constructor}).\n *\n * To force reinstallation of a shared plugin delete it first:\n * ```javascript\n * delete Hypergrid.plugins.mySharedPlugin;\n * ```\n * To force reinstallation of all shared plugins:\n * ```javascript\n * Hypergrid.plugins = {};\n * ```\n * @example\n * var allSharedPlugins = Hypergrid.plugins;\n * var mySharedPlugin = Hypergrid.plugins.mySharedPlugin;\n */\nHypergrid.plugins = {};\n\n/**\n * @name localization\n * @memberOf Hypergrid\n * @type {object}\n * @summary Shared localization defaults for all grid instances.\n * @desc These property values are overridden by those supplied in the `Hypergrid` constructor's `options.localization`.\n * @property {string|string[]} [locale] - The default locale to use when an explicit `locale` is omitted from localizer constructor calls. Passed to Intl.NumberFormat` and `Intl.DateFormat`. See {@ https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl#Locale_identification_and_negotiation|Locale identification and negotiation} for more information. Omitting will use the runtime's local language and region.\n * @property {object} [numberOptions] - Options passed to `Intl.NumberFormat` for creating the basic \"number\" localizer.\n * @property {object} [dateOptions] - Options passed to `Intl.DateFormat` for creating the basic \"date\" localizer.\n */\nHypergrid.localization = {\n    locale: 'en-US',\n    numberOptions: { maximumFractionDigits: 0 }\n};\n\n\n// mix in the mixins\n\nHypergrid.mixIn = Hypergrid.prototype.mixIn;\nHypergrid.mixIn(require('./themes').sharedMixin);\n\nHypergrid.prototype.mixIn(require('./themes').mixin);\nHypergrid.prototype.mixIn(require('./events').mixin);\nHypergrid.prototype.mixIn(require('./selection').mixin);\nHypergrid.prototype.mixIn(require('./stash-selections').mixin);\nHypergrid.prototype.mixIn(require('./scrolling').mixin);\n\n\n// deprecated module access\n\nfunction pleaseUse(requireString, module) {\n    if (!pleaseUse.warned[requireString]) {\n        var key = requireString.match(/\\w+$/)[0];\n        console.warn('Reference to ' + key + ' external module using' +\n            ' `Hypergrid.' + key + '.` has been deprecated as of v3.0.0 in favor of' +\n            ' `require(\\'' + requireString + '\\')` from within a Hypergrid Client Module' +\n            ' (otherwise use `Hypergrid.require(...)`) and will be removed in a future release.' +\n            ' See https://github.com/fin-hypergrid/core/wiki/Client-Modules#internal-modules.');\n        pleaseUse.warned[requireString] = true;\n    }\n    return module;\n}\npleaseUse.warned = {};\n\n\nObject.defineProperties(Hypergrid, {\n    Base: { get: function() { return pleaseUse('fin-hypergrid/src/Base', require('../Base')); } },\n    images: { get: function() { return pleaseUse('fin-hypergrid/images', require('../../images')); } }\n});\n\n\n/**\n * @summary List of grid instances.\n * @desc Added in {@link Hypergrid constructor}; removed in {@link Hypergrid#terminate terminate()}.\n * Used in themes.js.\n * @type {Hypergrid[]}\n */\nHypergrid.grids = [];\n\n\n/** @name defaults\n * @memberOf Hypergrid\n * @type {object}\n * @summary The `defaults` layer of the Hypergrid properties hierarchy.\n * @desc Default values for all Hypergrid properties, including grid-level properties and column property defaults.\n *\n * Synonym: `properties`\n * Properties are divided broadly into two categories:\n * * Style (a.k.a. \"lnf\" for \"look'n'feel\") properties\n * * All other properties.\n */\nHypergrid.defaults = Hypergrid.properties = defaults;\n\n\n// Define modules namespace and install overridable external modules.\n// Hypergrid core code references them via this object  rather than require()  where used.\n// Note that `modules` also supports the Hypergrid Module Loader (included only with the build file).\nHypergrid.modules = modules;\n\n\nmodule.exports = Hypergrid;\n","'use strict';\n\n\n/* IMPORTANT NOTE:\n * If any of the modules listed below is removed from Hypergrid, the polyfill(s) they define must be added here!!!\n *\n * 1. object-iterators defines Array.prototype.find\n */\n\n\n/* eslint-disable no-extend-native */\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/sign#Polyfill\n// (Safari now supports Math.sign but IE still does not as of v11.)\nMath.sign = Math.sign = function(x) {\n    x = +x; // convert to a number\n    if (x === 0 || isNaN(x)) {\n        return x;\n    }\n    return x > 0 ? 1 : -1;\n};\n\n// Lite version of: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex#Polyfill\nif (typeof Array.prototype.findIndex !== 'function') {\n    Array.prototype.findIndex = function(predicate) {\n        var context = arguments[1];\n        for (var i = 0, len = this.length; i < len; i++) {\n            if (predicate.call(context, this[i], i, this)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\n// Simpler version of: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/fill#Polyfill\nif (typeof Array.prototype.fill !== 'function') {\n    Array.prototype.fill = function(value, start, end) {\n        start = start === undefined ? 0 : start < 0 ? this.length + start : start;\n        end = end === undefined ? this.length : end < 0 ? this.length + end : end;\n        for (var i = start || 0; i < end; ++i) {\n            this[i] = value;\n        }\n        return this;\n    };\n}\n\n// Lite version of: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\nif (typeof Object.assign !== 'function') {\n    Object.assign = function(target) {\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source != null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        target[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return target;\n    };\n}\n\nif (typeof Object.getOwnPropertyDescriptors !== 'function') {\n    Object.getOwnPropertyDescriptors = function(object) {\n        return Object.getOwnPropertyNames(object).reduce(function(descriptors, key) {\n            descriptors[key] = Object.getOwnPropertyDescriptor(object, key);\n            return descriptors;\n        }, {});\n    };\n}\n","/* eslint-env browser */\n\n'use strict';\n\nvar automat = require('automat');\n\n/**\n * @summary Injects the named stylesheet into `<head>`.\n * @desc Stylesheets are inserted consecutively at end of `<head>` unless `before === true` (or omitted and `injectStylesheetTemplate.before` truthy) in which case they are inserted consecutively before first stylesheet found in `<head>` (if any) at load time.\n *\n * The calling context (`this`) is a stylesheet registry.\n * If `this` is undefined, the global stylesheet registry (css/index.js) is used.\n * @this {object}\n * @param {boolean} [before=injectStylesheetTemplate.before] - Add stylesheet before intially loaded stylesheets.\n *\n * _If omitted:_\n * 1. `id` is promoted to first argument position\n * 2. `injectStylesheetTemplate.before` is `true` by default\n * @param {string} id - The name of the style sheet in `this`, a stylesheet \"registry\" (hash of stylesheets).\n * @returns {Element|*}\n */\nfunction injectStylesheetTemplate(before, id) {\n    var optionalArgsStartAt, stylesheet, head, refNode, css, args,\n        prefix = injectStylesheetTemplate.prefix;\n\n    if (typeof before === 'boolean') {\n        optionalArgsStartAt = 2;\n    } else {\n        id = before;\n        before = injectStylesheetTemplate.before;\n        optionalArgsStartAt = 1;\n    }\n\n    stylesheet = document.getElementById(prefix + id);\n\n    if (!stylesheet) {\n        head = document.querySelector('head');\n\n        if (before) {\n            // note position of first stylesheet\n            refNode = Array.prototype.slice.call(head.children).find(function(child) {\n                var id = child.getAttribute('id');\n                return child.tagName === 'STYLE' && (!id || id.indexOf(prefix) !== prefix) ||\n                    child.tagName === 'LINK' && child.getAttribute('rel') === 'stylesheet';\n            });\n        }\n\n        css = this[id];\n\n        if (!css) {\n            throw 'Expected to find member `' + id + '` in calling context.';\n        }\n\n        args = [\n            '<style>\\n' + css + '\\n</style>\\n',\n            head,\n            refNode || null // explicitly null per https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n        ];\n\n        if (arguments.length > 1) {\n            args = args.concat(Array.prototype.slice.call(arguments, optionalArgsStartAt));\n        }\n\n        stylesheet = automat.append.apply(null, args)[0];\n        stylesheet.id = prefix + id;\n    }\n\n    return stylesheet;\n}\n\ninjectStylesheetTemplate.before = true;\ninjectStylesheetTemplate.prefix = 'injected-stylesheet-';\n\nmodule.exports = injectStylesheetTemplate;\n","/* eslint-env browser */\n\n'use strict';\n\n/** @module automat */\n\nvar ENCODERS = /%\\{(\\d+)\\}/g; // double $$ to encode\n\nvar REPLACERS = /\\$\\{(.*?)\\}/g; // single $ to replace\n\n\n/**\n * @summary String formatter.\n *\n * @desc String substitution is performed on numbered _replacer_ patterns like `${n}` or _encoder_ patterns like `%{n}` where n is the zero-based `arguments` index. So `${0}` would be replaced with the first argument following `text`.\n *\n * Encoders are just like replacers except the argument is HTML-encoded before being used.\n *\n * To change the format patterns, assign new `RegExp` patterns to `automat.encoders` and `automat.replacers`.\n *\n * @param {string|function} template - A template to be formatted as described above. Overloads:\n * * A string primitive containing the template.\n * * A function to be called with `this` as the calling context. The template is the value returned from this call.\n *\n * @param {...*} [replacements] - Replacement values for numbered format patterns.\n *\n * @return {string} The formatted text.\n *\n * @memberOf module:automat\n */\nfunction automat(template, replacements/*...*/) {\n    var hasReplacements = arguments.length > 1;\n\n    // if `template` is a function, convert it to text\n    if (typeof template === 'function') {\n        template = template.call(this); // non-template function: call it with context and use return value\n    }\n\n    if (hasReplacements) {\n        var args = arguments;\n        template = template.replace(automat.replacersRegex, function(match, key) {\n            key -= -1; // convert to number and increment\n            return args.length > key ? args[key] : '';\n        });\n\n        template = template.replace(automat.encodersRegex, function(match, key) {\n            key -= -1; // convert to number and increment\n            if (args.length > key) {\n                var htmlEncoderNode = document.createElement('DIV');\n                htmlEncoderNode.textContent = args[key];\n                return htmlEncoderNode.innerHTML;\n            } else {\n                return '';\n            }\n        });\n    }\n\n    return template;\n}\n\n/**\n * @summary Replace contents of `el` with `Nodes` generated from formatted template.\n *\n * @param {string|function} template - See `template` parameter of {@link automat}.\n *\n * @param {HTMLElement} [el] - Node in which to return markup generated from template. If omitted, a new `<div>...</div>` element will be created and returned.\n *\n * @param {...*} [replacements] - Replacement values for numbered format patterns.\n *\n * @return {HTMLElement} The `el` provided or a new `<div>...</div>` element, its `innerHTML` set to the formatted text.\n *\n * @memberOf module:automat\n */\nfunction replace(template, el, replacements/*...*/) {\n    var elOmitted = typeof el !== 'object',\n        args = Array.prototype.slice.call(arguments, 1);\n\n    if (elOmitted) {\n        el = document.createElement('DIV');\n        args.unshift(template);\n    } else {\n        args[0] = template;\n    }\n\n    el.innerHTML = automat.apply(null, args);\n\n    return el;\n}\n\n/**\n * @summary Append or insert `Node`s generated from formatted template into given `el`.\n *\n * @param {string|function} template - See `template` parameter of {@link automat}.\n *\n * @param {HTMLElement} el\n *\n * @param {Node} [referenceNode=null] Inserts before this element within `el` or at end of `el` if `null`.\n *\n * @param {...*} [replacements] - Replacement values for numbered format patterns.\n *\n * @returns {Node[]} Array of the generated nodes (this is an actual Array instance; not an Array-like object).\n *\n * @memberOf module:automat\n */\nfunction append(template, el, referenceNode, replacements/*...*/) {\n    var replacementsStartAt = 3,\n        referenceNodeOmitted = typeof referenceNode !== 'object';  // replacements are never objects\n\n    if (referenceNodeOmitted) {\n        referenceNode = null;\n        replacementsStartAt = 2;\n    }\n\n    replacements = Array.prototype.slice.call(arguments, replacementsStartAt);\n    var result = [],\n        div = replace.apply(null, [template].concat(replacements));\n\n    while (div.childNodes.length) {\n        result.push(div.firstChild);\n        el.insertBefore(div.firstChild, referenceNode); // removes child from div\n    }\n\n    return result;\n}\n\n/**\n * Use this convenience wrapper to return the first child node described in `template`.\n *\n * @param {string|function} template - If a function, extract template from comment within.\n *\n * @returns {HTMLElement} The first `Node` in your template.\n *\n * @memberOf module:automat\n */\nfunction firstChild(template, replacements/*...*/) {\n    return replace.apply(null, arguments).firstChild;\n}\n\n/**\n * Use this convenience wrapper to return the first child element described in `template`.\n *\n * @param {string|function} template - If a function, extract template from comment within.\n *\n * @returns {HTMLElement} The first `HTMLElement` in your template.\n *\n * @memberOf module:automat\n */\nfunction firstElement(template, replacements/*...*/) {\n    return replace.apply(null, arguments).firstElementChild;\n}\n\n/**\n * @summary Finds string substitution lexemes that require HTML encoding.\n * @desc Modify to suit.\n * @default %{n}\n * @type {RegExp}\n * @memberOf module:automat\n */\nautomat.encodersRegex = ENCODERS;\n\n/**\n * @summary Finds string substitution lexemes.\n * @desc Modify to suit.\n * @default ${n}\n * @type {RegExp}\n * @memberOf module:automat\n */\nautomat.replacersRegex = REPLACERS;\n\nautomat.format = automat; // if you find using just `automat()` confusing\nautomat.replace = replace;\nautomat.append = append;\nautomat.firstChild = firstChild;\nautomat.firstElement = firstElement;\n\nmodule.exports = automat;\n","'use strict';\n\nexports.grid = [\n    '.hypergrid-container {',\n    '\tposition: relative;',\n    '\theight: 500px;',\n    '}',\n    '.hypergrid-container > div:first-child {',\n    '\tposition: absolute;',\n    '\tleft: 0;',\n    '\ttop: 0;',\n    '\tright: 0;',\n    '\tbottom: 0;',\n    '}',\n    '.hypergrid-container > div:first-child > div.info {',\n    '\tposition: absolute;',\n    '\tdisplay: none; /* initially hidden */',\n    '\tmargin-top: 150px; /* to place below headers */',\n    '\tcolor: #eee;',\n    '\ttext-shadow: 1px 1px #ccc;',\n    '\tfont-size: 36pt;',\n    '\tfont-weight: bold;',\n    '\ttext-align: center;',\n    '\ttop: 0; right: 0; bottom: 0; left: 0;',\n    '}',\n    '.hypergrid-textfield {',\n    '\tposition: absolute;',\n    '\tfont-size: 12px;',\n    '\tcolor: black;',\n    '\tbackground-color: ivory;',\n    '\tbox-sizing: border-box;',\n    '\tmargin: 0;',\n    '\tpadding: 0 5px;',\n    '\tborder: 0; /*border: 1px solid #777;*/',\n    '\toutline: 0;',\n    '}',\n    '',\n    '.hypergrid {',\n    '\ttouch-action: none;',\n    '}'\n].join('\\n');\n","/* eslint-env browser */\n/* global requestAnimationFrame */\n\n'use strict';\n\nvar Base = require('../Base');\nvar images = require('../../images');\nvar layerProps = require('./layer-props');\nvar InclusiveRectangle = require('../lib/InclusiveRectangle');\n\n/**\n * @summary List of grid renderers available to new grid instances.\n * @desc Developer may augment this list with additional grid renderers before grid instantiation by calling @link {Renderer.registerGridRenderer}.\n * @memberOf Renderer~\n * @private\n * @type {function[]}\n */\nvar paintCellsFunctions = [];\n\n\n/** @typedef {object} CanvasRenderingContext2D\n * @see [CanvasRenderingContext2D](https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D)\n */\n\n/** @typedef {object} visibleColumnArray\n * @property {number} index - A back reference to the element's array index in {@link Renderer#visibleColumns}.\n * @property {number} columnIndex - Dereferences {@link Behavior#columns}, the subset of _active_ columns, specifying which column to show in that position.\n * @property {number} left - Pixel coordinate of the left edge of this column, rounded to nearest integer.\n * @property {number} right - Pixel coordinate of the right edge of this column, rounded to nearest integer.\n * @property {number} width - Width of this column in pixels, rounded to nearest integer.\n */\n\n/** @typedef {object} visibleRowArray\n * @property {number} index - A back reference to the element's array index in {@link Renderer#visibleRows}.\n * @property {number} rowIndex - Local vertical row coordinate within the subgrid to which the row belongs, adjusted for scrolling.\n * @property {DataModel} subgrid - A reference to the subgrid to which the row belongs.\n * @property {number} top - Pixel coordinate of the top edge of this row, rounded to nearest integer.\n * @property {number} bottom - Pixel coordinate of the bottom edge of this row, rounded to nearest integer.\n * @property {number} height - Height of this row in pixels, rounded to nearest integer.\n */\n\n/**\n * @constructor\n * @desc fin-hypergrid-renderer is the canvas enabled top level sub component that handles the renderering of the Grid.\n *\n * It relies on two other external subprojects\n *\n * 1. fin-canvas: a wrapper to provide a simpler interface to the HTML5 canvas component\n * 2. rectangular: a small npm module providing Point and Rectangle objects\n *\n * The fin-hypergrid-renderer is in a unique position to provide critical functionality to the fin-hypergrid in a hightly performant manner.\n * Because it MUST iterate over all the visible cells it can store various bits of information that can be encapsulated as a service for consumption by the fin-hypergrid component.\n *\n * Instances of this object have basically four main functions.\n *\n * 1. render fixed row headers\n * 2. render fixed col headers\n * 3. render main data cells\n * 4. render grid lines\n *\n * Same parameters as {@link Renderer#initialize|initialize}, which is called by this constructor.\n *\n */\nvar Renderer = Base.extend('Renderer', {\n\n    //the shared single item \"pooled\" cell object for drawing each cell\n    cell: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n    },\n\n    scrollHeight: 0,\n\n    reset: function() {\n        this.bounds = {\n            width: 0,\n            height: 0\n        };\n\n        /**\n         * Represents the ordered set of visible columns. Array size is always the exact number of visible columns, the last of which may only be partially visible.\n         *\n         * This sequence of elements' `columnIndex` values assumes one of three patterns. Which pattern is base on the following two questions:\n         * * Are there \"fixed\" columns on the left?\n         * * Is the grid horizontally scrolled?\n         *\n         * The set of `columnIndex` values consists of:\n         * 1. The first element will be -1 if the row handle column is being rendered.\n         * 2. A zero-based list of consecutive of integers representing the fixed columns (if any).\n         * 3. An n-based list of consecutive of integers representing the scrollable columns (where n = number of fixed columns + the number of columns scrolled off to the left).\n         * @type {visibleColumnArray}\n         */\n        this.visibleColumns = this.grid.decorateColumnArray();\n\n        /**\n         * Represents the ordered set of visible rows. Array size is always the exact number of visible rows.\n         *\n         * The sequence of elements' `rowIndex` values is local to each subgrid.\n         * * **For each non-scrollable subgrid:** The sequence is a zero-based list of consecutive integers.\n         * * **For the scrollable subgrid:**\n         *   1. A zero-based list of consecutive of integers representing the fixed rows (if any).\n         *   2. An n-based list of consecutive of integers representing the scrollable rows (where n = number of fixed rows + the number of rows scrolled off the top).\n         *\n         * Note that non-scrollable subgrids can come both before _and_ after the scrollable subgrid.\n         * @type {visibleRowArray}\n         */\n        this.visibleRows = [];\n\n        this.insertionBounds = [];\n\n        this.cellEventPool = [];\n    },\n\n    /**\n     * @summary Constructor logic\n     * @desc This method will be called upon instantiation of this class or of any class that extends from this class.\n     * > All `initialize()` methods in the inheritance chain are called, in turn, each with the same parameters that were passed to the constructor, beginning with that of the most \"senior\" class through that of the class of the new instance.\n     * @memberOf Renderer.prototype\n     */\n    initialize: function(grid) {\n        this.grid = grid;\n\n        this.gridRenderers = {};\n        paintCellsFunctions.forEach(function(paintCellsFunction) {\n            this.registerGridRenderer(paintCellsFunction);\n        }, this);\n\n        // typically grid properties won't exist yet\n        this.setGridRenderer(this.properties.gridRenderer || 'by-columns-and-rows');\n\n        this.reset();\n    },\n\n    registerGridRenderer: function(paintCellsFunction) {\n        this.gridRenderers[paintCellsFunction.key] = {\n            paintCells: paintCellsFunction\n        };\n    },\n\n    setGridRenderer: function(key) {\n        var gridRenderer = this.gridRenderers[key];\n\n        if (!gridRenderer) {\n            throw new this.HypergridError('Unregistered grid renderer \"' + key + '\"');\n        }\n\n        if (gridRenderer !== this.gridRenderer) {\n            this.gridRenderer = gridRenderer;\n            this.gridRenderer.reset = true;\n        }\n    },\n\n    resetAllGridRenderers: function(blackList) {\n        // Notify renderers that grid shape has changed\n        Object.keys(this.gridRenderers).forEach(function(key) {\n            this.gridRenderers[key].reset = !blackList || blackList.indexOf(key) < 0;\n        }, this);\n    },\n\n    /**\n     * Certain renderers that pre-bundle column rects based on columns' background colors need to re-bundle when columns' background colors change. This method sets the `rebundle` property to `true` for those renderers that have that property.\n     */\n    rebundleGridRenderers: function() {\n        Object.keys(this.gridRenderers).forEach(function(key) {\n            if (this.gridRenderers[key].paintCells.rebundle) {\n                this.gridRenderers[key].rebundle = true;\n            }\n        }, this);\n    },\n\n    resetRowHeaderColumnWidth: function() {\n        this.lastKnowRowCount = undefined;\n    },\n\n    computeCellsBounds: function(immediate) {\n        if (immediate) {\n            computeCellsBounds.call(this);\n            this.needsComputeCellsBounds = false;\n        } else {\n            this.needsComputeCellsBounds = true;\n        }\n    },\n\n    /**\n     * CAUTION: Keep in place! Used by {@link Canvas}.\n     * @memberOf Renderer.prototype\n     * @returns {Object} The current grid properties object.\n     */\n    get properties() {\n        return this.grid.properties;\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @summary Notify the fin-hypergrid every time we've repainted.\n     * @desc This is the entry point from fin-canvas.\n     * @param {CanvasRenderingContext2D} gc\n     */\n    paint: function(gc) {\n        if (this.grid.canvas) {\n            this.renderGrid(gc);\n            this.grid.gridRenderedNotification();\n        }\n    },\n\n    tickNotification: function() {\n        this.grid.tickNotification();\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} Answer how many rows we rendered\n     */\n    getVisibleRowsCount: function() {\n        return this.visibleRows.length - 1;\n    },\n\n    getVisibleScrollHeight: function() {\n        var footerHeight = this.grid.properties.defaultRowHeight * this.grid.behavior.getFooterRowCount();\n        return this.getBounds().height - footerHeight - this.grid.getFixedRowsHeight();\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} Number of columns we just rendered.\n     */\n    getVisibleColumnsCount: function() {\n        return this.visibleColumns.length - 1;\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @param {CellEvent|number} x - CellEvent object or grid column coordinate.\n     * @param {number} [y] - Grid row coordinate. Omit if `xOrCellEvent` is a CellEvent.\n     * @returns {Rectangle} Bounding rect of cell with the given coordinates.\n     */\n    getBoundsOfCell: function(x, y) {\n        var vc = this.visibleColumns[x],\n            vr = this.visibleRows[y];\n\n        return {\n            x: vc.left,\n            y: vr.top,\n            width: vc.width,\n            height: vr.height\n        };\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc answer the column index under the coordinate at pixelX\n     * @param {number} pixelX - The horizontal coordinate.\n     * @returns {number} The column index under the coordinate at pixelX.\n     */\n    getColumnFromPixelX: function(pixelX) {\n        var width = 0,\n            fixedColumnCount = this.grid.getFixedColumnCount(),\n            scrollLeft = this.grid.getHScrollValue(),\n            visibleColumns = this.visibleColumns;\n\n        for (var c = 1; c < visibleColumns.length - 1; c++) {\n            width = visibleColumns[c].left - (visibleColumns[c].left - visibleColumns[c - 1].left) / 2;\n            if (pixelX < width) {\n                if (c > fixedColumnCount) {\n                    c += scrollLeft;\n                }\n                return c - 1;\n            }\n        }\n        if (c > fixedColumnCount) {\n            c += scrollLeft;\n        }\n        return c - 1;\n    },\n\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc Answer specific data cell coordinates given mouse coordinates in pixels.\n     * @param {Point} point\n     * @returns {{cellEvent:CellEvent,fake:boolean}} Cell coordinates\n     */\n    getGridCellFromMousePoint: function(point) {\n        var x = point.x,\n            y = point.y,\n            isPseudoRow = false,\n            isPseudoCol = false,\n            vrs = this.visibleRows,\n            vcs = this.visibleColumns,\n            firstColumn = vcs[this.grid.behavior.leftMostColIndex],\n            inFirstColumn = firstColumn && x < firstColumn.right,\n            vc = inFirstColumn ? firstColumn : vcs.findWithNeg(function(vc) { return x < vc.right; }),\n            vr = vrs.find(function(vr) { return y < vr.bottom; }),\n            result = {fake: false};\n\n        //default to last row and col\n        if (vr) {\n            isPseudoRow = false;\n        } else {\n            vr = vrs[vrs.length - 1];\n            isPseudoRow = true;\n        }\n\n        if (vc) {\n            isPseudoCol = false;\n        } else {\n            vc = vcs[vcs.length - 1];\n            isPseudoCol = true;\n        }\n\n        var cellEvent = new this.grid.behavior.CellEvent(vc.columnIndex, vr.index),\n            cellEventFromPool = this.findCell(cellEvent);\n        result.cellEvent = cellEventFromPool ? Object.create(cellEventFromPool) : cellEvent;\n        result.cellEvent.mousePoint = this.grid.newPoint(x - vc.left, y - vr.top);\n\n        if (isPseudoCol || isPseudoRow) {\n            result.fake = true;\n            this.grid.beCursor(null);\n        }\n\n        return result;\n    },\n\n    /**\n     * Matrix of unformatted values of visible cells.\n     * @returns {Array<Array>}\n     */\n    getVisibleCellMatrix: function() {\n        var rows = Array(this.visibleRows.length);\n        var adjust = this.grid.behavior.hasTreeColumn() ? 1 : 0;\n        for (var y = 0; y < rows.length; ++y) { rows[y] = Array(this.visibleColumns.length); }\n        this.cellEventPool.forEach(function(cell) {\n            var x = cell.gridCell.x + adjust;\n            if (x >= 0) {\n                rows[cell.gridCell.y][x] = cell.value;\n            }\n        });\n        return rows;\n    },\n\n    /**\n     * @summary Get the visibility of the column matching the provided grid column index.\n     * @desc Requested column may not be visible due to being scrolled out of view.\n     * @memberOf Renderer.prototype\n     * @summary Determines if a column is visible.\n     * @param {number} columnIndex - the column index\n     * @returns {boolean} The given column is visible.\n     */\n    isColumnVisible: function(columnIndex) {\n        return !!this.getVisibleColumn(columnIndex);\n    },\n\n    /**\n     * @summary Get the \"visible column\" object matching the provided grid column index.\n     * @desc Requested column may not be visible due to being scrolled out of view.\n     * @memberOf Renderer.prototype\n     * @summary Find a visible column object.\n     * @param {number} columnIndex - The grid column index.\n     * @returns {object|undefined} The given column if visible or `undefined` if not.\n     */\n    getVisibleColumn: function(columnIndex) {\n        return this.visibleColumns.findWithNeg(function(vc) {\n            return vc.columnIndex === columnIndex;\n        });\n    },\n\n    /**\n     * @desc Calculate the minimum left column index so the target column shows up in viewport (we need to be aware of viewport's width, number of fixed columns and each column's width)\n     * @param {number} targetColIdx - Target column index\n     * @returns {number} Minimum left column index so target column shows up\n     */\n    getMinimumLeftPositionToShowColumn: function(targetColIdx) {\n        var fixedColumnCount = this.grid.getFixedColumnCount();\n        var fixedColumnsWidth = 0;\n        var rowNumbersWidth = 0;\n        var filtersWidth = 0;\n        var viewportWidth = 0;\n        var leftColIdx = 0;\n        var targetRight = 0;\n        var lastFixedColumn = null;\n        var computedCols = [];\n        var col = null;\n        var i = 0;\n        var left = 0;\n        var right = 0;\n\n\n        // 1) for each column, we'll compute left and right position in pixels (until target column)\n        for (i = 0; i <= targetColIdx; i++) {\n            left = right;\n            right += Math.ceil(this.grid.getColumnWidth(i));\n\n            computedCols.push({\n                left: left,\n                right: right\n            });\n        }\n\n        targetRight = computedCols[computedCols.length - 1].right;\n\n        // 2) calc usable viewport width\n        lastFixedColumn = computedCols[fixedColumnCount - 1];\n\n        if (this.properties.showRowNumbers) {\n            rowNumbersWidth = this.grid.getColumnWidth(this.grid.behavior.rowColumnIndex);\n        }\n\n        if (this.grid.hasTreeColumn()) {\n            filtersWidth = this.grid.getColumnWidth(this.grid.behavior.treeColumnIndex);\n        }\n\n        fixedColumnsWidth = lastFixedColumn ? lastFixedColumn.right : 0;\n        viewportWidth = this.getBounds().width - fixedColumnsWidth - rowNumbersWidth - filtersWidth;\n\n        // 3) from right to left, find the last column that can still render target column\n        i = targetColIdx;\n\n        do {\n            leftColIdx = i;\n            col = computedCols[i];\n            i--;\n        } while (col.left + viewportWidth > targetRight && i >= 0);\n\n        return leftColIdx;\n    },\n\n    /**\n     * @summary Get the visibility of the column matching the provided data column index.\n     * @desc Requested column may not be visible due to being scrolled out of view or if the column is inactive.\n     * @memberOf Renderer.prototype\n     * @summary Determines if a column is visible.\n     * @param {number} columnIndex - the column index\n     * @returns {boolean} The given column is visible.\n     */\n    isDataColumnVisible: function(columnIndex) {\n        return !!this.getVisibleDataColumn(columnIndex);\n    },\n\n    /**\n     * @summary Get the \"visible column\" object matching the provided data column index.\n     * @desc Requested column may not be visible due to being scrolled out of view or if the column is inactive.\n     * @memberOf Renderer.prototype\n     * @summary Find a visible column object.\n     * @param {number} columnIndex - The grid column index.\n     * @returns {object|undefined} The given column if visible or `undefined` if not.\n     */\n    getVisibleDataColumn: function(columnIndex) {\n        return this.visibleColumns.findWithNeg(function(vc) {\n            return vc.column.index === columnIndex;\n        });\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} The width x coordinate of the last rendered column\n     */\n    getFinalVisibleColumnBoundary: function() {\n        var chop = this.isLastColumnVisible() ? 2 : 1;\n        var colWall = this.visibleColumns[this.visibleColumns.length - chop].right;\n        return Math.min(colWall, this.getBounds().width);\n    },\n\n    /**\n     * @summary Get the visibility of the row matching the provided grid row index.\n     * @desc Requested row may not be visible due to being outside the bounds of the rendered grid.\n     * @memberOf Renderer.prototype\n     * @summary Determines visibility of a row.\n     * @param {number} rowIndex - The grid row index.\n     * @returns {boolean} The given row is visible.\n     */\n    isRowVisible: function(rowIndex) {\n        return !!this.visibleRows[rowIndex];\n    },\n\n    /**\n     * @summary Get the \"visible row\" object matching the provided grid row index.\n     * @desc Requested row may not be visible due to being outside the bounds of the rendered grid.\n     * @memberOf Renderer.prototype\n     * @summary Find a visible row object.\n     * @param {number} rowIndex - The grid row index.\n     * @returns {object|undefined} The given row if visible or `undefined` if not.\n     */\n    getVisibleRow: function(rowIndex) {\n        return this.visibleRows[rowIndex];\n    },\n\n    /**\n     * @summary Get the visibility of the row matching the provided data row index.\n     * @desc Requested row may not be visible due to being scrolled out of view.\n     * @memberOf Renderer.prototype\n     * @summary Determines visibility of a row.\n     * @param {number} rowIndex - The data row index.\n     * @param {DataModel} [subgrid=this.behavior.subgrids.data]\n     * @returns {boolean} The given row is visible.\n     */\n    isDataRowVisible: function(rowIndex, subgrid) {\n        return !!this.getVisibleDataRow(rowIndex, subgrid);\n    },\n\n    /**\n     * @summary Get the \"visible row\" object matching the provided data row index.\n     * @desc Requested row may not be visible due to being scrolled out of view.\n     * @memberOf Renderer.prototype\n     * @summary Find a visible row object.\n     * @param {number} rowIndex - The data row index within the given subgrid.\n     * @param {DataModel} [subgrid=this.behavior.subgrids.data]\n     * @returns {object|undefined} The given row if visible or `undefined` if not.\n     */\n    getVisibleDataRow: function(rowIndex, subgrid) {\n        subgrid = subgrid || this.grid.behavior.dataModel;\n        return this.visibleRows.find(function(vr) {\n            return vr.subgrid === subgrid && vr.rowIndex === rowIndex;\n        });\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @summary Determines if a cell is selected.\n     * @param {number} x - the x cell coordinate\n     * @param {number} y - the y cell coordinate*\n     * @returns {boolean} The given cell is fully visible.\n     */\n    isSelected: function(x, y) {\n        return this.grid.isSelected(x, y);\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc This is the main forking of the renderering task.\n     *\n     * `dataModel.fetchData` callback renders the grid. Note however that this is not critical when the clock is\n     * running as it will be rendered on the next tick. We let it call it anyway in case (1) fetch returns quickly\n     * enough to be rendered on this tick rather than next or (2) clock isn't running (for debugging purposes).\n     * @param {CanvasRenderingContext2D} gc\n     */\n    renderGrid: function(gc) {\n        var grid = this.grid;\n\n        grid.deferredBehaviorChange();\n\n        var rowCount = grid.getRowCount();\n        if (rowCount !== this.lastKnowRowCount) {\n            var newWidth = resetRowHeaderColumnWidth.call(this, gc, rowCount);\n            if (newWidth !== this.handleColumnWidth) {\n                this.needsComputeCellsBounds = true;\n                this.handleColumnWidth = newWidth;\n            }\n            this.lastKnowRowCount = rowCount;\n        }\n\n        if (this.needsComputeCellsBounds) {\n            computeCellsBounds.call(this);\n            this.needsComputeCellsBounds = false;\n\n            // Pre-fetch data if supported by data model\n            if (grid.behavior.dataModel.fetchData) {\n                grid.behavior.dataModel.fetchData(getSubrects.call(this), fetchCompletion.bind(this, gc));\n                return; // skip refresh renderGrid call below\n            }\n        }\n\n        this.gridRenderer.paintCells.call(this, gc);\n        this.renderOverrides(gc);\n        this.renderLastSelection(gc);\n    },\n\n    renderLastSelection: function(gc) {\n        var selection, left, top, width, height,\n            grid = this.grid,\n            gridProps = grid.properties,\n            sm = grid.selectionModel;\n\n        switch (sm.getLastSelectionType()) {\n            case 'column':\n                var columnSelections = sm.columnSelectionModel.selection,\n                    lastColumnSelection = columnSelections[columnSelections.length - 1];\n\n                left = lastColumnSelection[0];\n                top = 0;\n                width = lastColumnSelection[1] - left + 1;\n                height = grid.getRowCount();\n                selection = new InclusiveRectangle(left, top, width, height);\n                break;\n\n            case 'row':\n                if (!(gridProps.collapseCellSelections && sm.getLastSelectionType(1) === 'cell')) {\n                    var rowSelections = sm.rowSelectionModel.selection,\n                        lastRowSelection = rowSelections[rowSelections.length - 1];\n\n                    left = 0;\n                    top = lastRowSelection[0];\n                    width = grid.behavior.getActiveColumns().length;\n                    height = lastRowSelection[1] - top + 1;\n                    selection = new InclusiveRectangle(left, top, width, height);\n                    break;\n                }\n                // fall through to 'cell'\n\n            case 'cell':\n                selection = sm.getLastSelection();\n                break;\n        }\n\n        if (!selection) {\n            return; // no selection\n        }\n\n        // todo not sure what this is for; might be defunct logic\n        if (selection.origin.x === -1) {\n            // no selected area, lets exit\n            return;\n        }\n\n        var vc, vci = this.visibleColumnsByIndex,\n            vr, vri = this.visibleRowsByDataRowIndex,\n            lastScrollableColumn = this.visibleColumns[this.visibleColumns.length - 1], // last column in scrollable section\n            lastScrollableRow = this.visibleRows[this.visibleRows.length - 1], // last row in scrollable data section\n            firstScrollableColumn = vci[this.dataWindow.origin.x],\n            firstScrollableRow = vri[this.dataWindow.origin.y],\n            fixedColumnCount = gridProps.fixedColumnCount,\n            fixedRowCount = gridProps.fixedRowCount,\n            headerRowCount = grid.getHeaderRowCount();\n\n        if (\n            // entire selection scrolled out of view to left of visible columns; or\n            (vc = this.visibleColumns[0]) &&\n            selection.corner.x < vc.columnIndex ||\n\n            // entire selection scrolled out of view between fixed columns and scrollable columns; or\n            fixedColumnCount &&\n            firstScrollableColumn &&\n            (vc = this.visibleColumns[fixedColumnCount - 1]) &&\n            selection.origin.x > vc.columnIndex &&\n            selection.corner.x < firstScrollableColumn.columnIndex ||\n\n            // entire selection scrolled out of view to right of visible columns; or\n            lastScrollableColumn &&\n            selection.origin.x > lastScrollableColumn.columnIndex ||\n\n            // entire selection scrolled out of view above visible rows; or\n            (vr = this.visibleRows[headerRowCount]) &&\n            selection.corner.y < vr.rowIndex ||\n\n            // entire selection scrolled out of view between fixed rows and scrollable rows; or\n            fixedRowCount &&\n            firstScrollableRow &&\n            (vr = this.visibleRows[headerRowCount + fixedRowCount - 1]) &&\n            selection.origin.y > vr.rowIndex &&\n            selection.corner.y < firstScrollableRow.rowIndex ||\n\n            // entire selection scrolled out of view below visible rows\n            lastScrollableRow &&\n            selection.origin.y > lastScrollableRow.rowIndex\n        ) {\n            return;\n        }\n\n        var vcOrigin = vci[selection.origin.x] || firstScrollableColumn,\n            vrOrigin = vri[selection.origin.y] || firstScrollableRow,\n            vcCorner = vci[selection.corner.x] || (selection.corner.x > lastScrollableColumn.columnIndex ? lastScrollableColumn : vci[fixedColumnCount - 1]),\n            vrCorner = vri[selection.corner.y] || (selection.corner.y > lastScrollableRow.rowIndex ? lastScrollableRow : vri[fixedRowCount - 1]);\n\n        if (!(vcOrigin && vrOrigin && vcCorner && vrCorner)) {\n            return;\n        }\n\n        // Render the selection model around the bounds\n        var config = {\n            bounds: {\n                x: vcOrigin.left,\n                y: vrOrigin.top,\n                width: vcCorner.right - vcOrigin.left,\n                height: vrCorner.bottom - vrOrigin.top\n            },\n            selectionRegionOverlayColor: this.gridRenderer.paintCells.partial ? 'transparent' : gridProps.selectionRegionOverlayColor,\n            selectionRegionOutlineColor: gridProps.selectionRegionOutlineColor\n        };\n\n        grid.cellRenderers.get('lastselection').paint(gc, config);\n\n        if (this.gridRenderer.paintCells.key === 'by-cells') {\n            this.gridRenderer.reset = true; // fixes GRID-490\n        }\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc iterate the renderering overrides and manifest each\n     * @param {CanvasRenderingContext2D} gc\n     */\n    renderOverrides: function(gc) {\n        var cache = this.grid.renderOverridesCache;\n        for (var key in cache) {\n            if (cache.hasOwnProperty(key)) {\n                var override = cache[key];\n                if (override) {\n                    this.renderOverride(gc, override);\n                }\n            }\n        }\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc copy each overrides specified area to it's target and blank out the source area\n     * @param {CanvasRenderingContext2D} gc\n     * @param {OverrideObject} override - an object with details contain an area and a target context\n     */\n    renderOverride: function(gc, override) {\n        //lets blank out the drag row\n        var hdpiRatio = override.hdpiratio;\n        var startX = override.startX; //hdpiRatio * edges[override.columnIndex];\n        var width = override.width + 1;\n        var height = override.height;\n        var targetCTX = override.ctx;\n        var imgData = gc.getImageData(startX, 0, Math.round(width * hdpiRatio), Math.round(height * hdpiRatio));\n        targetCTX.putImageData(imgData, 0, 0);\n        gc.cache.fillStyle = this.properties.backgroundColor2;\n        gc.fillRect(Math.round(startX / hdpiRatio), 0, width, height);\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} Current vertical scroll value.\n     */\n    getScrollTop: function() {\n        return this.grid.getVScrollValue();\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} Current horizontal scroll value.\n     */\n    getScrollLeft: function() {\n        return this.grid.getHScrollValue();\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {boolean} The last col was rendered (is visible)\n     */\n    isLastColumnVisible: function() {\n        var lastColumnIndex = this.grid.getColumnCount() - 1;\n        return !!this.visibleColumns.findWithNeg(function(vc) { return vc.columnIndex === lastColumnIndex; });\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} The rendered column width at index\n     */\n    getRenderedWidth: function(index) {\n        var result,\n            columns = this.visibleColumns;\n\n        if (index >= columns.length) {\n            result = columns[columns.length - 1].right;\n        } else {\n            result = columns[index].left;\n        }\n\n        return result;\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} The rendered row height at index\n     */\n    getRenderedHeight: function(index) {\n        var result,\n            rows = this.visibleRows;\n\n        if (index >= rows.length) {\n            var last = rows[rows.length - 1];\n            result = last.bottom;\n        } else {\n            result = rows[index].top;\n        }\n\n        return result;\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {boolean} User is currently dragging a column for reordering.\n     */\n    isDraggingColumn: function() {\n        return this.grid.isDraggingColumn();\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} The row to go to for a page up.\n     */\n    getPageUpRow: function() {\n        var grid = this.grid,\n            scrollHeight = this.getVisibleScrollHeight(),\n            top = this.dataWindow.origin.y - this.properties.fixedRowCount - 1,\n            scanHeight = 0;\n        while (scanHeight < scrollHeight && top >= 0) {\n            scanHeight += grid.getRowHeight(top);\n            top--;\n        }\n        return top + 1;\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @returns {number} The row to goto for a page down.\n     */\n    getPageDownRow: function() {\n        return this.dataWindow.corner.y - this.properties.fixedRowCount;\n    },\n\n    renderErrorCell: function(err, gc, vc, vr) {\n        var message = err && (err.message || err) || 'Unknown error.',\n            bounds = { x: vc.left, y: vr.top, width: vc.width, height: vr.height },\n            config = { bounds: bounds };\n\n        console.error(message);\n\n        gc.cache.save(); // define clipping region\n        gc.beginPath();\n        gc.rect(bounds.x, bounds.y, bounds.width, bounds.height);\n        gc.clip();\n\n        this.grid.cellRenderers.get('errorcell').paint(gc, config, message);\n\n        gc.cache.restore(); // discard clipping region\n    },\n\n    /**\n     * @memberOf Renderer.prototype\n     * @desc We opted to not paint borders for each cell as that was extremely expensive. Instead we draw grid lines here.\n     * @param {CanvasRenderingContext2D} gc\n     */\n    paintGridlines: function(gc) {\n        var visibleColumns = this.visibleColumns, C = visibleColumns.length,\n            visibleRows = this.visibleRows, R = visibleRows.length;\n\n        if (C && R) {\n            var gridProps = this.properties,\n                C1 = C - 1,\n                R1 = R - 1,\n                rowHeader,\n                viewWidth = visibleColumns[C1].right,\n                viewHeight = visibleRows[R1].bottom,\n                gridLinesVColor = gridProps.gridLinesVColor,\n                gridLinesHColor = gridProps.gridLinesHColor,\n                borderBox = gridProps.boxSizing === 'border-box';\n\n            if (\n                gridProps.gridLinesV && ( // drawing vertical grid lines?\n                    gridProps.gridLinesUserDataArea || // drawing vertical grid lines between data columns?\n                    gridProps.gridLinesColumnHeader // drawing vertical grid lines between header columns?\n                )\n            ) {\n                var gridLinesVWidth = gridProps.gridLinesVWidth,\n                    headerRowCount = this.grid.getHeaderRowCount(),\n                    lastHeaderRow = visibleRows[headerRowCount - 1], // any header rows?\n                    firstDataRow = visibleRows[headerRowCount], // any data rows?\n                    userDataAreaTop = firstDataRow && firstDataRow.top,\n                    top = gridProps.gridLinesColumnHeader ? 0 : userDataAreaTop,\n                    bottom = gridProps.gridLinesUserDataArea ? viewHeight : lastHeaderRow && lastHeaderRow.bottom;\n\n                if (top !== undefined && bottom !== undefined) { // either undefined means nothing to draw\n                    gc.cache.fillStyle = gridLinesVColor;\n\n                    visibleColumns.forEachWithNeg(function(vc, c) {\n                        if (\n                            vc && // tree column may not be defined\n                            c < C1 // don't draw rule after last column\n                        ) {\n                            var x = vc.right,\n                                lineTop = Math.max(top, vc.top || 0), // vc.top may be set by grouped headers plug-in\n                                height = Math.min(bottom, vc.bottom || Infinity) - lineTop; // vc.bottom may be set by grouped headers plug-in\n\n                            if (borderBox) {\n                                x -= gridLinesVWidth;\n                            }\n\n                            // draw a single vertical grid line between both header and data cells OR a line segment in header only\n                            gc.fillRect(x, lineTop, gridLinesVWidth, height);\n\n                            // when above drew a line segment in header (vc.bottom defined AND higher up), draw a second vertical grid line between data cells\n                            if (gridProps.gridLinesUserDataArea && vc.bottom < userDataAreaTop) {\n                                gc.fillRect(x, userDataAreaTop, gridLinesVWidth, bottom - userDataAreaTop);\n                            }\n                        }\n                    });\n                }\n            }\n\n            if (\n                gridProps.gridLinesH && (\n                    gridProps.gridLinesUserDataArea ||\n                    (rowHeader = gridProps.gridLinesRowHeader && (visibleColumns[-1] || visibleColumns[-2]))\n                )\n            ) {\n                var gridLinesHWidth = gridProps.gridLinesHWidth,\n                    left = gridProps.gridLinesRowHeader ? 0 : visibleColumns[0].left,\n                    right = gridProps.gridLinesUserDataArea ? viewWidth : rowHeader.right;\n\n                gc.cache.fillStyle = gridLinesHColor;\n\n                visibleRows.forEach(function(vr, r) {\n                    if (r < R1) { // don't draw rule below last row\n                        var y = vr.bottom;\n                        if (borderBox) {\n                            y -= gridLinesHWidth;\n                        }\n                        gc.fillRect(left, y, right - left, gridLinesHWidth);\n                    }\n                });\n            }\n\n            // draw fixed rule lines over grid rule lines\n            var edgeWidth, gap;\n\n            if (gridProps.fixedLinesHWidth !== undefined) {\n                if ((gap = visibleRows.gap)) {\n                    gc.cache.fillStyle = gridProps.fixedLinesHColor || gridLinesHColor;\n                    edgeWidth = gridProps.fixedLinesHEdge;\n                    if (edgeWidth) {\n                        gc.fillRect(0, gap.top, viewWidth, edgeWidth);\n                        gc.fillRect(0, gap.bottom - edgeWidth, viewWidth, edgeWidth);\n                    } else {\n                        gc.fillRect(0, gap.top, viewWidth, gap.bottom - gap.top);\n                    }\n                }\n            }\n\n            if (gridProps.fixedLinesVWidth !== undefined) {\n                if ((gap = visibleColumns.gap)) {\n                    gc.cache.fillStyle = gridProps.fixedLinesVColor || gridLinesVColor;\n                    edgeWidth = gridProps.fixedLinesVEdge;\n                    if (edgeWidth) {\n                        gc.fillRect(gap.left, 0, edgeWidth, viewHeight);\n                        gc.fillRect(gap.right - edgeWidth, 0, edgeWidth, viewHeight);\n                    } else {\n                        gc.fillRect(gap.left, 0, gap.right - gap.left, viewHeight);\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * @summary Render a single cell.\n     * @param {CanvasRenderingContext2D} gc\n     * @param {CellEvent} cellEvent\n     * @param {string} [prefillColor] If omitted, this is a partial renderer; all other renderers must provide this.\n     * @returns {number} Preferred width of renndered cell.\n     * @private\n     * @memberOf Renderer\n     */\n    _paintCell: function(gc, cellEvent, prefillColor) {\n        var grid = this.grid,\n            selectionModel = grid.selectionModel,\n\n            isHandleColumn = cellEvent.isHandleColumn,\n            isTreeColumn = cellEvent.isTreeColumn,\n            isColumnSelected = cellEvent.isColumnSelected,\n\n            isDataRow = cellEvent.isDataRow,\n            isRowSelected = cellEvent.isRowSelected,\n            isCellSelected = cellEvent.isCellSelected,\n\n            isHeaderRow = cellEvent.isHeaderRow,\n            isFilterRow = cellEvent.isFilterRow,\n\n            isRowHandleOrHierarchyColumn = isHandleColumn || isTreeColumn,\n            isUserDataArea = !isRowHandleOrHierarchyColumn && isDataRow,\n\n            config = this.assignProps(cellEvent),\n\n            x = (config.gridCell = cellEvent.gridCell).x,\n            r = (config.dataCell = cellEvent.dataCell).y,\n\n            value,\n            isSelected;\n\n        if (isHandleColumn) {\n            isSelected = isRowSelected || selectionModel.isCellSelectedInRow(r);\n            config.halign = 'right';\n        } else if (isTreeColumn) {\n            isSelected = isRowSelected || selectionModel.isCellSelectedInRow(r);\n            config.halign = 'left';\n        } else if (isDataRow) {\n            isSelected = isCellSelected || isRowSelected || isColumnSelected;\n        } else if (isFilterRow) {\n            isSelected = false;\n        } else if (isColumnSelected) {\n            isSelected = true;\n        } else {\n            isSelected = selectionModel.isCellSelectedInColumn(x); // header or summary or other non-meta\n        }\n\n        // Set cell contents:\n        // * For all cells: set `config.value` (writable property)\n        // * For cells outside of row handle column: also set `config.dataRow` for use by valOrFunc\n        // * For non-data row tree column cells, do nothing (these cells render blank so value is undefined)\n        if (!isHandleColumn) {\n            // including tree column\n            config.dataRow = cellEvent.dataRow;\n            value = cellEvent.value;\n        } else if (isDataRow) {\n            // row handle for a data row\n            if (config.rowHeaderNumbers) {\n                value = r + 1; // row number is 1-based\n            }\n        } else if (isHeaderRow) {\n            // row handle for header row: gets \"master\" checkbox\n            config.allRowsSelected = selectionModel.areAllRowsSelected();\n        }\n\n        config.isSelected = isSelected;\n        config.isDataColumn = !isRowHandleOrHierarchyColumn;\n        config.isHandleColumn = isHandleColumn;\n        config.isTreeColumn = isTreeColumn;\n        config.isDataRow = isDataRow;\n        config.isHeaderRow = isHeaderRow;\n        config.isFilterRow = isFilterRow;\n        config.isUserDataArea = isUserDataArea;\n        config.isColumnHovered = cellEvent.isColumnHovered;\n        config.isRowHovered = cellEvent.isRowHovered;\n        config.isCellHovered = cellEvent.isCellHovered;\n        config.bounds = cellEvent.bounds;\n        config.isCellSelected = isCellSelected;\n        config.isRowSelected = isRowSelected;\n        config.isColumnSelected = isColumnSelected;\n        config.isInCurrentSelectionRectangle = selectionModel.isInCurrentSelectionRectangle(x, r);\n        config.prefillColor = prefillColor;\n\n        if (grid.mouseDownState) {\n            config.mouseDown = grid.mouseDownState.gridCell.equals(cellEvent.gridCell);\n        }\n\n        config.subrow = 0;\n\n        // subrow logic - coded for efficiency when no subrows (!value.subrows)\n        var isArray = isUserDataArea && value && value.constructor === Array, // fastest array determination\n            subrows = isArray && value.subrows && value.length;\n\n        if (subrows) {\n            var bounds = config.bounds = Object.assign({}, config.bounds);\n            bounds.height /= subrows;\n            config.subrows = subrows;\n            config.value = config.exec(value[0]);\n        } else {\n            subrows = 1;\n            config.value = !isArray && isUserDataArea ? config.exec(value) : value;\n        }\n\n        while (true) { // eslint-disable-line\n            // This call's dataModel.getCell which developer can override to:\n            // * mutate the (writable) properties of `config` (including config.value)\n            // * mutate cell renderer choice (instance of which is returned)\n            var cellRenderer = cellEvent.subgrid.getCell(config, config.renderer);\n\n            config.formatValue = grid.getFormatter(config.format);\n\n            config.snapshot = cellEvent.snapshot[config.subrow]; // supports partial render\n\n            config.minWidth = cellEvent.minWidth; // in case `paint` aborts before setting `minWidth`\n\n            // Render the cell\n            if (cellRenderer.forEach) {\n                cellRenderer.forEach(function(subrenderer) {\n                    subrenderer.paint(gc, config);\n                });\n            } else {\n                cellRenderer.paint(gc, config);\n            }\n\n            cellEvent.snapshot[config.subrow] = config.snapshot; // supports partial render\n\n            if (cellEvent.minWidth === undefined || config.minWidth > cellEvent.minWidth) {\n                cellEvent.minWidth = config.minWidth;\n            }\n\n            if (++config.subrow === subrows) {\n                break;\n            }\n\n            bounds.y += bounds.height;\n            config.value = config.exec(value[config.subrow]);\n        }\n\n        // Following supports clicking in a renderer-defined Rectangle of a cell (in the cell's local coordinates)\n        cellEvent.clickRect = config.clickRect;\n        cellEvent.cellRenderer = cellRenderer; // renderer actually used per getCell; used by fireSyntheticButtonPressedEvent\n\n        return config.minWidth;\n    },\n\n    /**\n     * Overridable for alternative or faster logic.\n     * @param CellEvent\n     * @returns {object} Layered config object.\n     */\n    assignProps: layerProps,\n\n    /**\n     * @param {number|CellEvent} colIndexOrCellEvent - This is the \"data\" x coordinate.\n     * @param {number} [rowIndex] - This is the \"data\" y coordinate. Omit if `colIndexOrCellEvent` is a `CellEvent`.\n     * @param {DataModel} [dataModel=this.grid.behavior.dataModel] Omit if `colIndexOrCellEvent` is a `CellEvent`.\n     * @returns {CellEvent} The matching `CellEvent` object from the renderer's pool. Returns `undefined` if the requested cell is not currently visible (due to being scrolled out of view).\n     */\n    findCell: function(colIndexOrCellEvent, rowIndex, dataModel) {\n        var colIndex, cellEvent,\n            pool = this.cellEventPool;\n\n        if (typeof colIndexOrCellEvent === 'object') {\n            // colIndexOrCellEvent is a cell event object\n            dataModel = colIndexOrCellEvent.subgrid;\n            rowIndex = colIndexOrCellEvent.dataCell.y;\n            colIndex = colIndexOrCellEvent.dataCell.x;\n        } else {\n            colIndex = colIndexOrCellEvent;\n        }\n\n        dataModel = dataModel || this.grid.behavior.dataModel;\n\n        var len = this.visibleColumns.length;\n        if (this.grid.properties.showRowNumbers) { len++; }\n        if (this.grid.behavior.hasTreeColumn()) { len++; }\n        len *= this.visibleRows.length;\n        for (var p = 0; p < len; ++p) {\n            cellEvent = pool[p];\n            if (\n                cellEvent.subgrid === dataModel &&\n                cellEvent.dataCell.x === colIndex &&\n                cellEvent.dataCell.y === rowIndex\n            ) {\n                return cellEvent;\n            }\n        }\n    },\n\n    /**\n     * Resets the cell properties cache in the matching `CellEvent` object from the renderer's pool. This will insure that a new cell properties object will be known to the renderer. (Normally, the cache is not reset until the pool is updated by the next call to {@link Renderer#computeCellBounds}).\n     * @param {number|CellEvent} xOrCellEvent\n     * @param {number} [y]\n     * @param {DataModel} [dataModel=this.grid.behavior.dataModel]\n     * @returns {CellEvent} The matching `CellEvent` object.\n     */\n    resetCellPropertiesCache: function(xOrCellEvent, y, dataModel) {\n        var cellEvent = this.findCell.apply(this, arguments);\n        if (cellEvent) { cellEvent._cellOwnProperties = undefined; }\n        return cellEvent;\n    },\n\n    resetAllCellPropertiesCaches: function() {\n        this.cellEventPool.forEach(function(cellEvent) {\n            cellEvent._cellOwnProperties = undefined;\n        });\n    },\n\n    getBounds: function() {\n        return this.bounds;\n    },\n\n    setBounds: function(bounds) {\n        return (this.bounds = bounds);\n    },\n\n    setInfo: function(message) {\n        var width;\n        if (this.visibleColumns.length) {\n            width = this.visibleColumns[this.visibleColumns.length - 1].right;\n        }\n        this.grid.canvas.setInfo(message, width);\n    }\n});\n\nfunction fetchCompletion(gc, fetchError) {\n    if (!fetchError) {\n        // STEP 1: Render the grid immediately (before next refresh) just to get column widths\n        // (for better performance this could be done off-screen but this works fine as is)\n        this.gridRenderer.paintCells.call(this, gc);\n        // STEP 2: Re-render upon next refresh with proper column widths\n        this.grid.repaint();\n    }\n}\n\n/**\n * This function creates several data structures:\n * * {@link Renderer#visibleColumns}\n * * {@link Renderer#visibleRows}\n *\n * Original comment:\n * \"this function computes the grid coordinates used for extremely fast iteration over\n * painting the grid cells. this function is very fast, for thousand rows X 100 columns\n * on a modest machine taking usually 0ms and no more that 3 ms.\"\n *\n * @this {Renderer}\n */\nfunction computeCellsBounds() {\n    var scrollTop = this.getScrollTop(),\n        scrollLeft = this.getScrollLeft(),\n\n        bounds = this.getBounds(),\n        grid = this.grid,\n        behavior = grid.behavior,\n        hasTreeColumn = behavior.hasTreeColumn(),\n        treeColumnIndex = behavior.treeColumnIndex,\n\n        editorCellEvent = grid.cellEditor && grid.cellEditor.event,\n\n        vcEd, xEd,\n        vrEd, yEd,\n        sgEd, isSubgridEd,\n\n        insertionBoundsCursor = 0,\n        previousInsertionBoundsCursorValue = 0,\n\n        gridProps = grid.properties,\n        borderBox = gridProps.boxSizing === 'border-box',\n\n        lineWidthV = gridProps.gridLinesVWidth,\n        lineGapV = borderBox ? 0 : lineWidthV,\n\n        lineWidthH = gridProps.gridLinesHWidth,\n        lineGapH = borderBox ? 0 : lineWidthH,\n\n        fixedColumnCount = this.grid.getFixedColumnCount(),\n        fixedRowCount = this.grid.getFixedRowCount(),\n\n        start = behavior.leftMostColIndex,\n        numOfInternalCols = 0,\n        x, X, // horizontal pixel loop index and limit\n        y, Y, // vertical pixel loop index and limit\n        c, C, // column loop index and limit\n        g, G, // subgrid loop index and limit\n        r, R, // row loop index and limit\n        subrows, // rows in subgrid g\n        base, // sum of rows for all subgrids so far\n        fixedColumnIndex = -3,\n        fixedRowIndex = -1,\n        fixedWidthV, fixedGapV, fixedOverlapV,\n        fixedWidthH, fixedGapH, fixedOverlapH,\n        subgrids = behavior.subgrids,\n        subgrid,\n        rowIndex,\n        scrollableSubgrid,\n        footerHeight,\n        vx, vy,\n        vr, vc,\n        width, height,\n        firstVX, lastVX,\n        firstVY, lastVY,\n        topR,\n        gap;\n\n    if (editorCellEvent) {\n        xEd = editorCellEvent.gridCell.x;\n        yEd = editorCellEvent.dataCell.y;\n        sgEd = editorCellEvent.subgrid;\n    }\n\n    if (gridProps.showRowNumbers) {\n        fixedColumnIndex = hasTreeColumn ? treeColumnIndex : 0;\n        numOfInternalCols += 1;\n    }\n\n    if (hasTreeColumn) {\n        fixedColumnIndex = 0;\n        numOfInternalCols += 1;\n    }\n\n    if (fixedColumnCount) {\n        fixedColumnIndex = fixedColumnCount;\n    }\n\n    if (fixedRowCount) {\n        fixedRowIndex = fixedRowCount;\n    }\n\n    if (gridProps.fixedLinesVWidth === undefined) {\n        fixedColumnIndex = -3; // left of any column\n    } else {\n        fixedWidthV = Math.max(gridProps.fixedLinesVWidth || lineWidthV, lineWidthV);\n        fixedGapV = borderBox ? fixedWidthV - lineWidthV : fixedWidthV;\n        fixedOverlapV = fixedGapV - fixedWidthV;\n    }\n\n    if (gridProps.fixedLinesHWidth === undefined) {\n        fixedRowIndex = -1; // above any row\n    } else {\n        fixedWidthH = Math.max(gridProps.fixedLinesHWidth || lineWidthH, lineWidthH);\n        fixedGapH = borderBox ? fixedWidthH - lineWidthH : fixedWidthH;\n        fixedOverlapH = fixedGapH - fixedWidthH;\n    }\n\n    this.scrollHeight = 0;\n\n    this.visibleColumns.length = 0;\n    this.visibleColumns.gap = this.visibleColumns[-1] = this.visibleColumns[-2] = undefined;\n\n    this.visibleRows.length = 0;\n    this.visibleRows.gap = undefined;\n\n    this.visibleColumnsByIndex = []; // array because number of columns will always be reasonable\n    this.visibleRowsByDataRowIndex = {}; // hash because keyed by (fixed and) scrolled row indexes\n\n    this.insertionBounds = [];\n\n    for (\n        x = 0, c = start, C = grid.getColumnCount(), X = bounds.width || grid.canvas.width;\n        c < C && x <= X;\n        c++\n    ) {\n        if (!hasTreeColumn && c === treeColumnIndex) {\n            this.visibleColumns[c] = undefined;\n            continue;\n        }\n\n        if ((gap = c === fixedColumnIndex)) {\n            this.visibleColumns.gap = {\n                left: vc.right + fixedOverlapV,\n                right: undefined\n            };\n            x += fixedGapV;\n        } else if (x) {\n            x += lineGapV;\n        }\n\n        vx = c;\n        if (c >= fixedColumnCount) {\n            lastVX = vx += scrollLeft;\n            if (firstVX === undefined) {\n                firstVX = lastVX;\n            }\n        }\n        if (vx >= C) {\n            break; // scrolled beyond last column\n        }\n\n        width = Math.ceil(behavior.getColumnWidth(vx));\n\n        this.visibleColumns[c] = this.visibleColumnsByIndex[vx] = vc = {\n            index: c,\n            columnIndex: vx,\n            column: behavior.getActiveColumn(vx),\n            left: x,\n            width: width,\n            right: x + width\n        };\n\n        if (gap) {\n            this.visibleColumns.gap.right = vc.left;\n        }\n\n        if (xEd === vx) {\n            vcEd = vc;\n        }\n\n        x += width;\n\n        insertionBoundsCursor += Math.round(width / 2) + previousInsertionBoundsCursorValue;\n        this.insertionBounds.push(insertionBoundsCursor);\n        previousInsertionBoundsCursorValue = Math.round(width / 2);\n    }\n\n    // get height of total number of rows in all subgrids following the data subgrid\n    footerHeight = gridProps.defaultRowHeight * behavior.getFooterRowCount();\n\n    for (\n        base = r = g = y = 0, G = subgrids.length, Y = bounds.height - footerHeight;\n        g < G;\n        g++, base += subrows\n    ) {\n        subgrid = subgrids[g];\n        subrows = subgrid.getRowCount();\n        scrollableSubgrid = subgrid.isData;\n        isSubgridEd = (sgEd === subgrid);\n        topR = r;\n\n        // For each row of each subgrid...\n        for (R = r + subrows; r < R && y < Y; r++) {\n            if ((gap = scrollableSubgrid && r === fixedRowIndex)) {\n                this.visibleRows.gap = {\n                    top: vr.bottom + fixedOverlapH,\n                    bottom: undefined\n                };\n                y += fixedGapH;\n            } else if (y) {\n                y += lineGapH;\n            }\n\n\n            vy = r;\n            if (scrollableSubgrid && r >= fixedRowCount) {\n                vy += scrollTop;\n                lastVY = vy - base;\n                if (firstVY === undefined) {\n                    firstVY = lastVY;\n                }\n                if (vy >= R) {\n                    break; // scrolled beyond last row\n                }\n            }\n\n            rowIndex = vy - base;\n            height = behavior.getRowHeight(rowIndex, subgrid);\n\n            this.visibleRows[r] = vr = {\n                index: r,\n                subgrid: subgrid,\n                rowIndex: rowIndex,\n                top: y,\n                height: height,\n                bottom: y + height\n            };\n\n            if (gap) {\n                this.visibleRows.gap.bottom = vr.top;\n            }\n\n            if (scrollableSubgrid) {\n                this.visibleRowsByDataRowIndex[vy - base] = vr;\n            }\n\n            if (isSubgridEd && yEd === rowIndex) {\n                vrEd = vr;\n            }\n\n            y += height;\n        }\n\n        if (scrollableSubgrid) {\n            subrows = r - topR;\n        }\n    }\n\n    if (editorCellEvent) {\n        editorCellEvent.visibleColumn = vcEd;\n        editorCellEvent.visibleRow = vrEd;\n        editorCellEvent.gridCell.y = vrEd && vrEd.index;\n        editorCellEvent._bounds = null;\n    }\n\n    this.dataWindow = new InclusiveRectangle(\n        firstVX,\n        firstVY,\n        Math.min(lastVX - firstVX + 1, this.visibleColumns.length),\n        Math.min(lastVY - firstVY + 1, this.visibleRows.length)\n    );\n\n    // Resize CellEvent pool\n    var pool = this.cellEventPool,\n        previousLength = pool.length,\n        P = (this.visibleColumns.length + numOfInternalCols) * this.visibleRows.length;\n\n    if (P > previousLength) {\n        pool.length = P; // grow pool to accommodate more cells\n    }\n    for (var p = previousLength; p < P; p++) {\n        pool[p] = new behavior.CellEvent; // instantiate new members\n    }\n\n    this.resetAllGridRenderers();\n}\n\n/**\n * @summary Create a list of `Rectangle`s representing visible cells.\n * @desc When `grid.properties.fetchSubregions` is true, this function needs to handle:\n * 1. unordered columns\n * 2. column gaps (hidden columns)\n * 3. the single row gap that results when there are fixed rows and remaining rows are scrolled down\n *\n * @ToDo This function currently only handles (1) above; needs (2) (multiple rectangles for multiple contiguous column regions) and (3) (double each region for above and below the fixed boundary when scrolled down) as well. In its present form, it will \"fetch\" all cells from upper left of fixed area to lower right of scrollable area. (Yikes.)\n *\n * When `grid.properties.fetchSubregions` is falsy, this function merely returns `this.dataWindow` as the only rectangle.\n * This is way more efficient than calling `getSubrects` (as it is currently implemented) and is fine so long as there are no fixed columns or rows and column re-ordering is disabled.\n * (If tree column in use, it is a fixed column, but this is workable so long as the data model knows to always return it regardless of rectangle.)\n * Hidden columns within the range of visible columns will be fetched anyway.\n * Column scrolling is ok.\n *\n * @ToDo This function is too slow for practical use due to map and sort.\n *\n * @this {Renderer}\n */\nfunction getSubrects() {\n    var dw = this.dataWindow;\n    if (!this.grid.properties.fetchSubregions) {\n        var rect = this.grid.newRectangle(dw.left, dw.top, dw.width, dw.height); // convert from InclusiveRect\n        return [rect];\n    }\n\n    var orderedColumnIndexes = this.visibleColumns.map(function(vc) { return vc.column.index; }).sort(intComparator),\n        xMin = orderedColumnIndexes[0],\n        width = orderedColumnIndexes[orderedColumnIndexes.length - 1] - xMin + 1;\n\n    return [this.grid.newRectangle(xMin, dw.top, width, dw.height)];\n}\n\nfunction intComparator(a, b){ return a - b; }\n\n/**\n * @summary Resize the handle column.\n * @desc Handle column width is sum of:\n * * Width of text the maximum row number, if visible, based on handle column's current font\n * * Width of checkbox, if visible\n * * Some padding\n *\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @param {number} rowCount\n */\nfunction resetRowHeaderColumnWidth(gc, rowCount) {\n    var columnProperties = this.grid.behavior.getColumnProperties(this.grid.behavior.rowColumnIndex),\n        gridProps = this.grid.properties,\n        width = 2 * columnProperties.cellPadding;\n\n    // Checking images.checked also supports a legacy feature in which checkbox could be hidden by undefining the image.\n    if (gridProps.rowHeaderCheckboxes && images.checked) {\n        width += images.checked.width;\n    }\n\n    if (gridProps.rowHeaderNumbers) {\n        var cellProperties = columnProperties.rowHeader;\n        gc.cache.font = cellProperties.foregroundSelectionFont.indexOf('bold ') >= 0\n            ? cellProperties.foregroundSelectionFont\n            : cellProperties.font;\n\n        width += gc.getTextWidth(rowCount);\n    }\n\n    columnProperties.preferredWidth = columnProperties.width = width;\n}\n\nfunction registerGridRenderer(paintCellsFunction) {\n    if (paintCellsFunctions.indexOf(paintCellsFunction) < 0) {\n        paintCellsFunctions.push(paintCellsFunction);\n    }\n}\n\nregisterGridRenderer(require('./by-cells'));\nregisterGridRenderer(require('./by-columns'));\nregisterGridRenderer(require('./by-columns-discrete'));\nregisterGridRenderer(require('./by-columns-and-rows'));\nregisterGridRenderer(require('./by-rows'));\n\nRenderer.registerGridRenderer = registerGridRenderer;\n\nmodule.exports = Renderer;\n","'use strict';\n\nvar defaults = require('../defaults');\n\nvar COLUMNS = defaults.propClassEnum.COLUMNS,\n    CELLS = defaults.propClassEnum.CELLS,\n    ROWS = defaults.propClassEnum.ROWS,\n    STRIPES = defaults.propClassEnum.STRIPES,\n    propClassGet = [];\n\npropClassGet[COLUMNS] = function(cellEvent) {\n    return cellEvent.columnProperties;\n};\npropClassGet[CELLS] = function(cellEvent) {\n    return cellEvent.cellOwnProperties;\n};\npropClassGet[STRIPES] = function(cellEvent) {\n    var rowStripes = cellEvent.isDataRow && cellEvent.columnProperties.rowStripes;\n    return rowStripes && rowStripes[cellEvent.dataCell.y % rowStripes.length];\n};\npropClassGet[ROWS] = function(cellEvent) {\n    return cellEvent.rowOwnProperties;\n};\n\nfunction assignProps(cellEvent) {\n    var i, base, assignments,\n        propLayers = cellEvent.properties.propClassLayers;\n\n    switch (propLayers[0]) {\n        case ROWS:\n            i = 1; // skip row prop layer\n            base = cellEvent.rowOwnProperties || this.grid.properties; // because row has grid props as prototype\n            break;\n        case COLUMNS:\n            if (propLayers[1] === CELLS) {\n                i = 2; // skip both column + cell prop layers\n                base = cellEvent.properties; // because cell has column props as prototype\n            } else {\n                i = 1; // skip column prop layer\n                base = cellEvent.columnProperties; // because column has grid props as prototype\n            }\n            break;\n        case CELLS:\n            if (propLayers[1] === COLUMNS) {\n                if ((base = cellEvent.cellOwnProperties)) {\n                    i = 1; // skip cell prop layer because cell has column props (which has grid props) as prototype\n                } else {\n                    i = 2; // skip both cell + column prop layers\n                    base = cellEvent.columnProperties; // because column has grid props as prototype\n                }\n            } else if (propLayers[2] === COLUMNS || propLayers[3] === COLUMNS) {\n                i = 1; // skip cell prop layer\n                base = cellEvent.properties; // because cell has column props (which has grid props) as prototype\n            } else {\n                i = 0; // all prop layers\n                base = this.grid.properties; // because cell has column props as prototype but COLUMNS is not in the list\n            }\n            break;\n        case STRIPES:\n            i = 0; // all prop layers\n            base = this.grid.properties;\n            break;\n    }\n\n    for (assignments = [Object.create(base)]; i < propLayers.length; ++i) {\n        assignments.push(propClassGet[propLayers[i]](cellEvent));\n    }\n\n    return Object.assign.apply(Object, assignments);\n}\n\nmodule.exports = assignProps;\n","'use strict';\n\nvar paintCellsByColumnsAndRows = require('./by-columns-and-rows');\n\n/** @summary Render the grid only as needed (\"partial render\").\n * @desc Paints all the cells of a grid, one column at a time, but only as needed.\n *\n * Partial render is supported only by those cells whose cell renderer supports it by returning before rendering (based on `config.snapshot`).\n *\n * #### On reset\n *\n * Defers to {@link Renderer#paintCellsByColumnsAndRows|paintCellsByColumnsAndRows}, which clears the canvas, draws the grid, and draws the grid lines.\n *\n * #### On the next call (after reset)\n *\n * Each cell is drawn redrawn only when its appearance changes. This determination is made by the cell renderer by comparing with (and maintaining) `config.snapshot`. See {@link SimpleCell} for a sample implementation.\n *\n * `try...catch` surrounds each cell paint in case a cell renderer throws an error.\n * The error message is error-logged to console AND displayed in cell.\n *\n * #### On subsequent calls\n *\n * Iterates through each cell, calling `_paintCell` with `undefined` prefill color. This signifies partial render to the {@link SimpleCell} cell renderer, which only renders the cell when it's text, font, or colors have changed.\n *\n * Each cell to be rendered is described by a {@link CellEvent} object. For performance reasons, to avoid constantly instantiating these objects, we maintain a pool of these. When the grid shape changes, we reset their coordinates by setting {@link CellEvent#reset|reset} on each.\n *\n * See also the discussion of clipping in {@link Renderer#paintCellsByColumns|paintCellsByColumns}.\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @memberOf Renderer.prototype\n */\nfunction paintCellsAsNeeded(gc) {\n    var cellEvent,\n        visibleColumns = this.visibleColumns,\n        visibleRows = this.visibleRows,\n        C = visibleColumns.length, cLast = C - 1,\n        r, R = visibleRows.length,\n        p = 0, pool = this.cellEventPool,\n        preferredWidth,\n        columnClip,\n        // clipToGrid,\n        // viewWidth = C ? visibleColumns[cLast].right : 0,\n        viewHeight = R ? visibleRows[R - 1].bottom : 0;\n\n\n    if (!C || !R) { return; }\n\n    if (this.gridRenderer.reset) {\n        this.resetAllGridRenderers();\n        paintCellsByColumnsAndRows.call(this, gc);\n        this.gridRenderer.reset = false;\n    }\n\n    // gc.clipSave(clipToGrid, 0, 0, viewWidth, viewHeight);\n\n    // For each column...\n    this.visibleColumns.forEachWithNeg(function(vc, c) {\n        cellEvent = pool[p]; // first cell in column c\n        vc = cellEvent.visibleColumn;\n\n        // Optionally clip to visible portion of column to prevent text from overflowing to right.\n        columnClip = vc.column.properties.columnClip;\n        gc.clipSave(columnClip || columnClip === null && c === cLast, 0, 0, vc.right, viewHeight);\n\n        // For each row of each subgrid (of each column)...\n        for (preferredWidth = r = 0; r < R; r++, p++) {\n            cellEvent = pool[p]; // next cell down the column (redundant for first cell in column)\n\n            try {\n                // Partial render signaled by calling `_paintCell` with undefined 3rd param (formal `prefillColor`).\n                preferredWidth = Math.max(preferredWidth, this._paintCell(gc, pool[p]));\n            } catch (e) {\n                this.renderErrorCell(e, gc, vc, pool[p].visibleRow);\n            }\n        }\n\n        gc.clipRestore(columnClip);\n\n        cellEvent.column.properties.preferredWidth = Math.round(preferredWidth);\n    }, this);\n\n    // gc.clipRestore(clipToGrid);\n\n    if (this.grid.properties.boxSizing === 'border-box') {\n        this.paintGridlines(gc);\n    }\n}\n\npaintCellsAsNeeded.key = 'by-cells';\n\npaintCellsAsNeeded.partial = true; // skip painting selectionRegionOverlayColor\n\nmodule.exports = paintCellsAsNeeded;\n","'use strict';\n\nvar bundleColumns = require('./bundle-columns');\n\n/** @summary Render the grid with consolidated column rects.\n * @desc Paints all the cells of a grid, one column at a time.\n *\n * First, a background rect is drawn using the grid background color.\n *\n * Then, if there are any columns with their own background color _that differs from the grid background color,_ these are consolidated and the consolidated groups of column backgrounds are all drawn before iterating through cells. Note that these column rects are _not_ suitable for clipping overflow text from previous columns. If you have overflow text, either turn on clipping (`grid.properties.columnClip = true` but big performance hit) or turn on one of the `truncateTextWithEllipsis` options.\n *\n * `try...catch` surrounds each cell paint in case a cell renderer throws an error.\n * The error message is error-logged to console AND displayed in cell.\n *\n * Each cell to be rendered is described by a {@link CellEvent} object. For performance reasons, to avoid constantly instantiating these objects, we maintain a pool of these. When the grid shape changes, we reset their coordinates by setting {@link CellEvent#reset|reset} on each.\n *\n * **Regading clipping.** The reason for clipping is to prevent text from overflowing into the next column. However there is a serious performance cost.\n *\n * For performance reasons {@link Renderer#_paintCell|_paintCell} does not set up a clipping region for each cell. However, iff grid property `columnClip` is truthy, this grid renderer will set up a clipping region to prevent text overflow to right. If `columnClip` is `null`, a clipping region will only be set up on the last column. Otherwise, there will be no clipping region.\n *\n * The idea of clipping just the last column is because in addition to the optional graphics clipping, we also clip (\"truncate\") text. Text can be truncated conservatively so it will never overflow. The problem with this is that characters vanish as they hit the right cell boundary, which may or may be obvious depending on font size. Alternatively, text can be truncated so that the overflow will be a maximum of 1 character. This allows partial characters to be rendered. But this is where graphics clipping is required.\n *\n * When renderering column by column as this particular renderer does, _and_ when the background color _of the next cell to the right_ is opaque (alpha = 1), clipping can be turned off because each column will _overpaint_ any text that overflowed from the one before. However, any text that overflows the last column will paint into unused canvas region to the right of the grid. This is the _raison d'tre_ for \"clip last column only\" option mentioned above (when `columnClip` is set to `null`). To avoid even this performance cost (of clipping just the last column), column widths can be set to fill the available canvas.\n *\n * Note that text never overflows to left because text starting point is never < 0. The reason we don't clip to the left is for cell renderers that need to re-render to the left to produce a merged cell effect, such as grouped column header.\n\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @memberOf Renderer.prototype\n */\nfunction paintCellsByColumns(gc) {\n    var grid = this.grid,\n        gridProps = grid.properties,\n        prefillColor, gridPrefillColor = gridProps.backgroundColor,\n        cellEvent,\n        columnBundle, columnBundles,\n        visibleColumns = this.visibleColumns,\n        visibleRows = this.visibleRows,\n        c, C = visibleColumns.length, cLast = C - 1,\n        r, R = visibleRows.length,\n        pool = this.cellEventPool,\n        preferredWidth,\n        columnClip,\n        // clipToGrid,\n        viewWidth = C ? visibleColumns[cLast].right : 0,\n        viewHeight = R ? visibleRows[R - 1].bottom : 0;\n\n\n    gc.clearRect(0, 0, this.bounds.width, this.bounds.height);\n\n    if (!C || !R) { return; }\n\n    if (gc.alpha(gridPrefillColor) > 0) {\n        gc.cache.fillStyle = gridPrefillColor;\n        gc.fillRect(0, 0, viewWidth, viewHeight);\n    }\n\n    if (this.gridRenderer.reset) {\n        this.resetAllGridRenderers(['by-columns-discrete']);\n        this.gridRenderer.reset = false;\n        bundleColumns.call(this, true);\n    } else if (this.gridRenderer.rebundle) {\n        this.gridRenderer.rebundle = false;\n        bundleColumns.call(this);\n    }\n\n    for (columnBundles = this.columnBundles, c = columnBundles.length; c--;) {\n        columnBundle = columnBundles[c];\n        gc.clearFill(columnBundle.left, 0, columnBundle.right - columnBundle.left, viewHeight, columnBundle.backgroundColor);\n    }\n\n    // gc.clipSave(clipToGrid, 0, 0, viewWidth, viewHeight);\n\n    // For each column...\n    var p = 0;\n    this.visibleColumns.forEachWithNeg(function(vc, c) {\n        cellEvent = pool[p]; // first cell in column c\n        vc = cellEvent.visibleColumn;\n\n        prefillColor = cellEvent.column.properties.backgroundColor;\n\n        // Optionally clip to visible portion of column to prevent text from overflowing to right.\n        columnClip = vc.column.properties.columnClip;\n        gc.clipSave(columnClip || columnClip === null && c === cLast, 0, 0, vc.right, viewHeight);\n\n        // For each row of each subgrid (of each column)...\n        for (preferredWidth = r = 0; r < R; r++, p++) {\n            cellEvent = pool[p]; // next cell down the column (redundant for first cell in column)\n\n            try {\n                preferredWidth = Math.max(preferredWidth, this._paintCell(gc, cellEvent, prefillColor));\n            } catch (e) {\n                this.renderErrorCell(e, gc, vc, cellEvent.visibleRow);\n            }\n        }\n\n        gc.clipRestore(columnClip);\n\n        cellEvent.column.properties.preferredWidth = Math.round(preferredWidth);\n    }, this);\n\n    // gc.clipRestore(clipToGrid);\n\n    this.paintGridlines(gc);\n}\n\npaintCellsByColumns.key = 'by-columns';\npaintCellsByColumns.rebundle = true; // see rebundleGridRenderers\n\nmodule.exports = paintCellsByColumns;\n","'use strict';\n\nvar bundleColumns = require('./bundle-columns');\n\n/** @summary Render the grid with discrete column rects.\n * @desc Paints all the cells of a grid, one column at a time.\n *\n * In this grid renderer, a background rect is _not_ drawn using the grid background color.\n *\n * Rather, all columns paint their own background rects, with color defaulting to grid background color.\n *\n * The idea of painting each column rect is to \"clip\" text that might have overflowed from the previous column by painting over it with the background from this column. Only the last column will show overflowing text, and only if the canvas width exceeds the grid width. If this is the case, you can turn on clipping for the last column only by setting `columnClip` to `true` for the last column.\n *\n * NOTE: As a convenience feature, setting `columnClip` to `null` will clip only the last column, so simply setting it on the grid (rather than the last column) will have the same effect. This is much more convenient because you don't have to worry about the last column being redefined (moved, hidden, etc).\n *\n * `try...catch` surrounds each cell paint in case a cell renderer throws an error.\n * The error message is error-logged to console AND displayed in cell.\n *\n * Each cell to be rendered is described by a {@link CellEvent} object. For performance reasons, to avoid constantly instantiating these objects, we maintain a pool of these. When the grid shape changes, we reset their coordinates by setting {@link CellEvent#reset|reset} on each.\n *\n * See also the discussion of clipping in {@link Renderer#paintCellsByColumnsDiscrete|paintCellsByColumnsDiscrete}.\n\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @memberOf Renderer.prototype\n */\nfunction paintCellsByColumnsDiscrete(gc) {\n    var prefillColor,\n        cellEvent,\n        visibleColumns = this.visibleColumns,\n        visibleRows = this.visibleRows,\n        C = visibleColumns.length, cLast = C - 1,\n        r, R = visibleRows.length,\n        pool = this.cellEventPool,\n        preferredWidth,\n        columnClip,\n        // clipToGrid,\n        // viewWidth = C ? visibleColumns[C - 1].right : 0,\n        viewHeight = R ? visibleRows[R - 1].bottom : 0;\n\n    gc.clearRect(0, 0, this.bounds.width, this.bounds.height);\n\n    if (!C || !R) { return; }\n\n    if (this.gridRenderer.reset) {\n        this.resetAllGridRenderers(['by-columns']);\n        this.gridRenderer.reset = false;\n        bundleColumns.call(this, true);\n    }\n\n    // gc.clipSave(clipToGrid, 0, 0, viewWidth, viewHeight);\n\n    // For each column...\n    var p = 0;\n    this.visibleColumns.forEachWithNeg(function(vc, c) {\n        cellEvent = pool[p]; // first cell in column c\n        vc = cellEvent.visibleColumn;\n\n        prefillColor = cellEvent.column.properties.backgroundColor;\n        gc.clearFill(vc.left, 0, vc.width, viewHeight, prefillColor);\n\n        // Optionally clip to visible portion of column to prevent text from overflowing to right.\n        columnClip = vc.column.properties.columnClip;\n        gc.clipSave(columnClip || columnClip === null && c === cLast, 0, 0, vc.right, viewHeight);\n\n        // For each row of each subgrid (of each column)...\n        for (preferredWidth = r = 0; r < R; r++, p++) {\n            cellEvent = pool[p]; // next cell down the column (redundant for first cell in column)\n\n            try {\n                preferredWidth = Math.max(preferredWidth, this._paintCell(gc, cellEvent, prefillColor));\n            } catch (e) {\n                this.renderErrorCell(e, gc, vc, cellEvent.visibleRow);\n            }\n        }\n\n        gc.clipRestore(columnClip);\n\n        cellEvent.column.properties.preferredWidth = Math.round(preferredWidth);\n    }, this);\n\n    // gc.clipRestore(clipToGrid);\n\n    this.paintGridlines(gc);\n}\n\npaintCellsByColumnsDiscrete.key = 'by-columns-discrete';\n\nmodule.exports = paintCellsByColumnsDiscrete;\n","'use strict';\n\nvar bundleRows = require('./bundle-rows');\n\n/** @summary Render the grid.\n * @desc _**NOTE:** This grid renderer is not as performant as the others and it's use is not recommended if you care about performance. The reasons for the wanting performance are unclear, possibly having to do with the way Chrome optimizes access to the column objects?_\n *\n * Paints all the cells of a grid, one row at a time.\n *\n * First, a background rect is drawn using the grid background color.\n *\n * Then, if there are any rows with their own background color _that differs from the grid background color,_ these are consolidated and the consolidated groups of row backgrounds are all drawn before iterating through cells.\n *\n * `try...catch` surrounds each cell paint in case a cell renderer throws an error.\n * The error message is error-logged to console AND displayed in cell.\n *\n * Each cell to be rendered is described by a {@link CellEvent} object. For performance reasons, to avoid constantly instantiating these objects, we maintain a pool of these. When the grid shape changes, we reset their coordinates by setting {@link CellEvent#reset|reset} on each.\n *\n * See also the discussion of clipping in {@link Renderer#paintCellsByColumns|paintCellsByColumns}.\n * @this {Renderer}\n * @param {CanvasRenderingContext2D} gc\n * @memberOf Renderer.prototype\n */\nfunction paintCellsByRows(gc) {\n    var grid = this.grid,\n        gridProps = grid.properties,\n        prefillColor, rowPrefillColors, gridPrefillColor = gridProps.backgroundColor,\n        cellEvent,\n        rowBundle, rowBundles = this.rowBundles,\n        visibleColumns = this.visibleColumns,\n        vr, visibleRows = this.visibleRows,\n        c, C = visibleColumns.length, c0 = 0, cLast = C - 1,\n        r, R = visibleRows.length,\n        p, pool = this.cellEventPool,\n        preferredWidth = Array(C - c0).fill(0),\n        columnClip,\n        // clipToGrid,\n        viewWidth = C ? visibleColumns[C - 1].right : 0,\n        viewHeight = R ? visibleRows[R - 1].bottom : 0,\n        drawLines = gridProps.gridLinesH,\n        lineWidth = gridProps.gridLinesHWidth,\n        lineColor = gridProps.gridLinesHColor;\n\n    gc.clearRect(0, 0, this.bounds.width, this.bounds.height);\n\n    if (!C || !R) { return; }\n\n    if (gc.alpha(gridPrefillColor) > 0) {\n        gc.cache.fillStyle = gridPrefillColor;\n        gc.fillRect(0, 0, viewWidth, viewHeight);\n    }\n\n    if (this.gridRenderer.reset) {\n        this.resetAllGridRenderers();\n        this.gridRenderer.reset = false;\n        bundleRows.call(this, true);\n    }\n\n    rowPrefillColors = this.rowPrefillColors;\n\n    for (r = rowBundles.length; r--;) {\n        rowBundle = rowBundles[r];\n        gc.clearFill(0, rowBundle.top, viewWidth, rowBundle.bottom - rowBundle.top, rowBundle.backgroundColor);\n    }\n\n    // gc.clipSave(clipToGrid, 0, 0, viewWidth, viewHeight);\n\n    // For each row of each subgrid...\n    for (p = 0, r = 0; r < R; r++) {\n        prefillColor = rowPrefillColors[r];\n\n        if (drawLines) {\n            gc.cache.fillStyle = lineColor;\n            gc.fillRect(0, pool[p].visibleRow.bottom, viewWidth, lineWidth);\n        }\n\n        // For each column (of each row)...\n        this.visibleColumns.forEachWithNeg(function(vc) {  // eslint-disable-line no-loop-func\n            p++;\n            cellEvent = pool[p]; // next cell across the row (redundant for first cell in row)\n            vc = cellEvent.visibleColumn;\n\n            // Optionally clip to visible portion of column to prevent text from overflowing to right.\n            columnClip = vc.column.properties.columnClip;\n            gc.clipSave(columnClip || columnClip === null && c === cLast, 0, 0, vc.right, viewHeight);\n\n            try {\n                preferredWidth[c] = Math.max(preferredWidth[c], this._paintCell(gc, cellEvent, prefillColor));\n            } catch (e) {\n                this.renderErrorCell(e, gc, vc, vr);\n            }\n\n            gc.clipRestore(columnClip);\n        }, this);\n    }\n\n    // gc.clipRestore(clipToGrid);\n\n    this.paintGridlines(gc);\n\n    this.visibleColumns.forEachWithNeg(function(vc, c) {\n        vc.column.properties.preferredWidth = Math.round(preferredWidth[c]);\n    });\n}\n\npaintCellsByRows.key = 'by-rows';\n\nmodule.exports = paintCellsByRows;\n","'use strict';\n\nvar RangeSelectionModel = require('sparse-boolean-array');\n\nvar InclusiveRectangle = require('./InclusiveRectangle');\n\n\n/**\n *\n * @constructor\n * @desc We represent selections as a list of rectangles because large areas can be represented and tested against quickly with a minimal amount of memory usage. Also we need to maintain the selection rectangles flattened counter parts so we can test for single dimension contains. This is how we know to highlight the fixed regions on the edges of the grid.\n */\n\nfunction SelectionModel(grid) {\n    this.grid = grid;\n    this.reset();\n}\n\nSelectionModel.prototype = {\n\n    constructor: SelectionModel.prototype.constructor,\n\n    /**\n     * @type {boolean}\n     * @memberOf SelectionModel.prototype\n     */\n    allRowsSelected: false,\n\n    reset: function() {\n        /**\n         * @name selections\n         * @type {Rectangle[]}\n         * @summary The selection rectangles.\n         * @desc Created as an empty array upon instantiation by the {@link SelectionModel|constructor}.\n         * @memberOf SelectionModel.prototype\n         */\n        this.selections = [];\n\n        /**\n         * @name flattenedX\n         * @type {Rectangle[]}\n         * @summary The selection rectangles flattened in the horizontal direction (no width).\n         * @desc Created as an empty array upon instantiation by the {@link SelectionModel|constructor}.\n         * @memberOf SelectionModel.prototype\n         */\n        this.flattenedX = [];\n\n        /**\n         * @name flattenedY\n         * @type {Rectangle[]}\n         * @summary The selection rectangles flattened in the vertical direction (no height).\n         * @desc Created as an empty array upon instantiation by the {@link SelectionModel|constructor}.\n         * @memberOf SelectionModel.prototype\n         */\n        this.flattenedY = [];\n\n        /**\n         * @name rowSelectionModel\n         * @type {RangeSelectionModel}\n         * @summary The selection rectangles.\n         * @desc Created as a new RangeSelectionModel upon instantiation by the {@link SelectionModel|constructor}.\n         * @memberOf SelectionModel.prototype\n         */\n        this.rowSelectionModel = new RangeSelectionModel();\n\n        /**\n         * @name columnSelectionModel\n         * @type {RangeSelectionModel}\n         * @summary The selection rectangles.\n         * @desc Created as a new RangeSelectionModel upon instantiation by the {@link SelectionModel|constructor}.\n         * @memberOf SelectionModel.prototype\n         */\n        this.columnSelectionModel = new RangeSelectionModel();\n\n        this.lastSelectionType = [];\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {*}\n     */\n    getLastSelection: function() {\n        var sels = this.selections;\n        var sel = sels[sels.length - 1];\n        return sel;\n    },\n\n    /**\n     * The most recent selection type. This is the TOS of `this.lastSelectionType`, the stack of unique selection types.\n     *\n     * Note that in the case where the only remaining previous selection of `type` was deselected, and `setLastSelectionType` was called with `reset` truthy, `type` is removed from the stack. If it was previously TOS, the TOS will now be what was the 2nd most recently pushed type (or nothing if no other selections).\n     *\n     * Returns empty string (`''`) if there are no selections.\n     * @memberOf SelectionModel.prototype\n     * @returns {*}\n     */\n    getLastSelectionType: function(n) {\n        return this.lastSelectionType[n || 0] || '';\n    },\n\n    /**\n     * Set the most recent selection's `type`. That is, push onto TOS of `this.lastSelectionType`, the stack of unique selection types. If already in the stack, move it to the top.\n     *\n     * If `reset` is truthy, remove the given `type` from the stack, regardless of where found therein (or not), thus \"revealing\" the 2nd most recently pushed type.\n     *\n     * @param {string} type - One of: `'cell'`, `'row'`, or `'column'`\n     * @param {boolean} [reset=false] - Remove the given `type` from the stack. Specify truthy when the only remaining previous selection of `type` has been deselected.\n     * @memberOf SelectionModel.prototype\n     */\n    setLastSelectionType: function(type, reset) {\n        var i = this.lastSelectionType.indexOf(type);\n        if (i === 0 && !reset) {\n            return;\n        }\n        if (i >= 0) {\n            this.lastSelectionType.splice(i, 1);\n        }\n        if (!reset) {\n            this.lastSelectionType.unshift(type);\n        }\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @description Select the region described by the given coordinates.\n     *\n     * @param {number} ox - origin x coordinate\n     * @param {number} oy - origin y coordinate\n     * @param {number} ex - extent x coordinate\n     * @param {number} ey - extent y coordinate\n     * @param {boolean} silent - whether to fire selection changed event\n     */\n    select: function(ox, oy, ex, ey, silent) {\n        var newSelection = new InclusiveRectangle(ox, oy, ex + 1, ey + 1);\n\n        //Cache the first selected cell before it gets normalized to top-left origin\n        newSelection.firstSelectedCell = this.grid.newPoint(ox, oy);\n\n        newSelection.lastSelectedCell = (\n            newSelection.firstSelectedCell.x === newSelection.origin.x &&\n            newSelection.firstSelectedCell.y === newSelection.origin.y\n        )\n            ? newSelection.corner\n            : newSelection.origin;\n\n        if (this.grid.properties.multipleSelections) {\n            this.selections.push(newSelection);\n            this.flattenedX.push(newSelection.flattenXAt(0));\n            this.flattenedY.push(newSelection.flattenYAt(0));\n        } else {\n            this.selections[0] = newSelection;\n            this.flattenedX[0] = newSelection.flattenXAt(0);\n            this.flattenedY[0] = newSelection.flattenYAt(0);\n        }\n        this.setLastSelectionType('cell');\n\n        this.grid.selectionChanged(silent);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param {number} ox - origin x coordinate\n     * @param {number} oy - origin y coordinate\n     * @param {number} ex - extent x coordinate\n     * @param {number} ey - extent y coordinate\n     */\n    toggleSelect: function(ox, oy, ex, ey) {\n\n        var index = this.selections.findIndex(function(selection) {\n            return (\n                selection.origin.x === ox && selection.origin.y === oy &&\n                selection.extent.x === ex && selection.extent.y === ey\n            );\n        });\n\n        if (index >= 0) {\n            this.selections.splice(index, 1);\n            this.flattenedX.splice(index, 1);\n            this.flattenedY.splice(index, 1);\n            this.setLastSelectionType('cell', !this.selections.length);\n            this.grid.selectionChanged();\n        } else {\n            this.select(ox, oy, ex, ey);\n        }\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @desc Remove the last selection that was created.\n     */\n    clearMostRecentSelection: function(keepRowSelections) {\n        if (!keepRowSelections) {\n            this.setAllRowsSelected(false);\n        }\n        if (this.selections.length) { --this.selections.length; }\n        if (this.flattenedX.length) { --this.flattenedX.length; }\n        if (this.flattenedY.length) { --this.flattenedY.length; }\n        this.setLastSelectionType('cell', !this.selections.length);\n        //this.getGrid().selectionChanged();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     */\n    clearMostRecentColumnSelection: function() {\n        this.columnSelectionModel.clearMostRecentSelection();\n        this.setLastSelectionType('column', !this.columnSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     */\n    clearMostRecentRowSelection: function() {\n        this.rowSelectionModel.clearMostRecentSelection();\n        this.setLastSelectionType('row', !this.rowSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     */\n    clearRowSelection: function() {\n        this.rowSelectionModel.clear();\n        this.setLastSelectionType('row', !this.rowSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {*}\n     */\n    getSelections: function() {\n        return this.selections;\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {boolean} There are active selection(s).\n     */\n    hasSelections: function() {\n        return this.selections.length !== 0;\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {boolean}\n     */\n    hasRowSelections: function() {\n        return !this.rowSelectionModel.isEmpty();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {boolean}\n     */\n    hasColumnSelections: function() {\n        return !this.columnSelectionModel.isEmpty();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @return {boolean} Selection covers a specific column.\n     * @param {number} y\n     */\n    isCellSelectedInRow: function(y) {\n        return this._isCellSelected(this.flattenedX, 0, y);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns Selection covers a specific row.\n     * @param {number} x\n     */\n    isCellSelectedInColumn: function(x) {\n        return this._isCellSelected(this.flattenedY, x, 0);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @summary Selection query function.\n     * @returns {boolean} The given cell is selected (part of an active selection).\n     * @param {Rectangle[]} selections - Selection rectangles to search through.\n     * @param {number} x\n     * @param {number} y\n     */\n    isSelected: function(x, y) {\n        return (\n            this.isColumnSelected(x) ||\n            this.isRowSelected(y) ||\n            this._isCellSelected(this.selections, x, y)\n        );\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param x\n     * @param y\n     * @returns {*}\n     */\n    isCellSelected: function(x, y) {\n        return this._isCellSelected(this.selections, x, y);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param selections\n     * @param x\n     * @param y\n     * @returns {boolean}\n     * @private\n     */\n    _isCellSelected: function(selections, x, y) {\n        var self = this;\n        return !!selections.find(function(selection) {\n            return self.rectangleContains(selection, x, y);\n        });\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @desc empty out all our state\n     *\n     */\n    clear: function(keepRowSelections) {\n        this.selections.length = 0;\n        this.flattenedX.length = 0;\n        this.flattenedY.length = 0;\n        this.columnSelectionModel.clear();\n        if (!keepRowSelections) {\n            this.lastSelectionType.length = 0;\n            this.setAllRowsSelected(false);\n            this.rowSelectionModel.clear();\n        } else if (this.lastSelectionType.indexOf('row') >= 0) {\n            this.lastSelectionType = ['row'];\n        } else {\n            this.lastSelectionType.length = 0;\n        }\n        //this.getGrid().selectionChanged();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param {number} ox - origin x coordinate\n     * @param {number} oy - origin y coordinate\n     * @param {number} ex - extent x coordinate\n     * @param {number} ey - extent y coordinate\n     * @returns {boolean}\n     */\n    isRectangleSelected: function(ox, oy, ex, ey) {\n        return !!this.selections.find(function(selection) {\n            return (\n                selection.origin.x === ox && selection.origin.y === oy &&\n                selection.extent.x === ex && selection.extent.y === ey\n            );\n        });\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param x\n     * @returns {*}\n     */\n    isColumnSelected: function(x) {\n        return this.columnSelectionModel.isSelected(x);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param y\n     * @returns {boolean|*}\n     */\n    isRowSelected: function(y) {\n        return this.allRowsSelected || this.rowSelectionModel.isSelected(y);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param x1\n     * @param x2\n     */\n    selectColumn: function(x1, x2) {\n        this.columnSelectionModel.select(x1, x2);\n        this.setLastSelectionType('column', !this.columnSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     */\n    selectAllRows: function() {\n        this.clear();\n        this.setAllRowsSelected(true);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {boolean}\n     */\n\n    setAllRowsSelected: function(isIt) {\n        this.allRowsSelected = isIt;\n    },\n\n    areAllRowsSelected: function() {\n        return this.allRowsSelected;\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param y1\n     * @param y2\n     */\n    selectRow: function(y1, y2) {\n        this.rowSelectionModel.select(y1, y2);\n        this.setLastSelectionType('row', !this.rowSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param x1\n     * @param x2\n     */\n    deselectColumn: function(x1, x2) {\n        this.columnSelectionModel.deselect(x1, x2);\n        this.setLastSelectionType('column', !this.columnSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param y1\n     * @param y2\n     */\n    deselectRow: function(y1, y2) {\n        if (this.areAllRowsSelected()) {\n            // To deselect a row, we must first remove the all rows flag...\n            this.setAllRowsSelected(false);\n            // ...and create a single range representing all rows\n            this.rowSelectionModel.select(0, this.grid.getRowCount() - 1);\n        }\n        this.rowSelectionModel.deselect(y1, y2);\n        this.setLastSelectionType('row', !this.rowSelectionModel.selection.length);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {*}\n     */\n    getSelectedRows: function() {\n        if (this.areAllRowsSelected()) {\n            var rowCount = this.grid.getRowCount();\n            var result = new Array(rowCount);\n            for (var i = 0; i < rowCount; i++) {\n                result[i] = i;\n            }\n            return result;\n        }\n        return this.rowSelectionModel.getSelections();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {*|Array.Array.number}\n     */\n    getSelectedColumns: function() {\n        return this.columnSelectionModel.getSelections();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {boolean}\n     */\n     isColumnOrRowSelected: function() {\n        return !this.columnSelectionModel.isEmpty() || !this.rowSelectionModel.isEmpty();\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @returns {Array}\n     */\n    getFlattenedYs: function() {\n        var result = [];\n        var set = {};\n        this.selections.forEach(function(selection) {\n            var top = selection.origin.y;\n            var size = selection.height;\n            for (var r = 0; r < size; r++) {\n                var ti = r + top;\n                if (!set[ti]) {\n                    result.push(ti);\n                    set[ti] = true;\n                }\n            }\n        });\n        result.sort(function(x, y) {\n            return x - y;\n        });\n        return result;\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param offset\n     */\n    selectRowsFromCells: function(offset, keepRowSelections) {\n        offset = offset || 0;\n\n        var sm = this.rowSelectionModel;\n\n        if (!keepRowSelections) {\n            this.setAllRowsSelected(false);\n            sm.clear();\n        }\n\n        this.selections.forEach(function(selection) {\n            var top = selection.origin.y,\n                extent = selection.extent.y;\n            top += offset;\n            sm.select(top, top + extent);\n        });\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param offset\n     */\n    selectColumnsFromCells: function(offset) {\n        offset = offset || 0;\n\n        var sm = this.columnSelectionModel;\n        sm.clear();\n\n        this.selections.forEach(function(selection) {\n            var left = selection.origin.x,\n                extent = selection.extent.x;\n            left += offset;\n            sm.select(left, left + extent);\n        });\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param x\n     * @param y\n     * @returns {*}\n     */\n    isInCurrentSelectionRectangle: function(x, y) {\n        var last = this.getLastSelection();\n        return last && this.rectangleContains(last, x, y);\n    },\n\n    /**\n     * @memberOf SelectionModel.prototype\n     * @param rect\n     * @param x\n     * @param y\n     * @returns {boolean}\n     */\n    rectangleContains: function(rect, x, y) { //TODO: explore why this works and contains on rectanglular does not\n        var minX = rect.origin.x;\n        var minY = rect.origin.y;\n        var maxX = minX + rect.extent.x;\n        var maxY = minY + rect.extent.y;\n\n        if (rect.extent.x < 0) {\n            minX = maxX;\n            maxX = rect.origin.x;\n        }\n\n        if (rect.extent.y < 0) {\n            minY = maxY;\n            maxY = rect.origin.y;\n        }\n\n        var result =\n            x >= minX &&\n            y >= minY &&\n            x <= maxX &&\n            y <= maxY;\n\n        return result;\n    }\n};\n\nmodule.exports = SelectionModel;\n","'use strict';\n\nvar Behavior = require('../Behavior');\n\n/** @memberOf Local~\n * @default require('datasaur-local')\n * @type {function|function[]}\n * @summary Default data model.\n * @desc The default data model for newly instantiated `Hypergrid` objects without `DataModel` or `dataModel` options specified. Scheduled for eventual deprecation at which point one of the options will be required.\n */\nvar DefaultDataModel = require('datasaur-local');\n\nvar decorators = require('./decorators');\nvar dispatchDataModelEvent = require('./dispatchDataModelEvent');\n\n\n/**\n * This class mimics the {@link DataModel}.\n * > This constructor (actually {@link Local#initialize}) will be called upon instantiation of this class or of any class that extends from this class. See {@link https://github.com/joneit/extend-me|extend-me} for more info.\n * @constructor\n * @extends Behavior\n */\nvar Local = Behavior.extend('Local', {\n\n    initialize: function(grid, options) {\n        this.setData(options);\n    },\n\n    /**\n     * @summary Convenience getter/setter.\n     * @desc Calls the data model's `getSchema`/`setSchema` methods.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#getSchema|getSchema}\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#setSchema|setSchema}\n     * @type {Array}\n     * @memberOf Local#\n     */\n    get schema() {\n        return this.dataModel.getSchema();\n    },\n    set schema(newSchema) {\n        this.dataModel.setSchema(newSchema);\n    },\n\n    createColumns: function() {\n        this.super.createColumns.call(this, createColumns);\n    },\n\n    /**\n     * @summary Build the `$rowProxy$` lazy getter collection based on current `schema`.\n     *\n     * @desc The `$rowProxy$` lazy getter collection is returned by the `getRow` fallback.\n     *\n     * `$rowProxy$` collection is a dataRow-like object (a hash of column values keyed by column name)\n     * for the particular row whose index is in the `$y$` property.\n     *\n     * The row index can be conveniently set with a call to `fallbacks.getRow()`,\n     * which sets the row index and returns the accessor itself.\n     *\n     * `$y$` is a \"hidden\" property, non-enumerable it won't show up in `Object.keys(...)`.\n     *\n     * This fallback implementation is \"lazy\": The enumerable members are all getters that invoke `getValue` and setters that invoke `setValue`.\n     *\n     * This function should be called each time a new schema is set.\n     */\n    createDataRowProxy: function() {\n        var dataModel = this.dataModel,\n            dataRowProxy = {};\n\n        Object.defineProperty(dataRowProxy, '$y$', {\n            enumerable: false, // not a real data field\n            writable: true // set later on calls to fallbacks.getRow(y) to y\n        });\n\n        this.schema.forEach(function(columnSchema, columnIndex) {\n            Object.defineProperty(dataRowProxy, columnSchema.name, {\n                enumerable: true, // is a real data field\n                get: function() {\n                    return dataModel.getValue(columnIndex, this.$y$);\n                },\n                set: function(value) {\n                    return dataModel.setValue(columnIndex, this.$y$, value);\n                }\n            });\n        });\n\n        dataModel.$rowProxy$ = dataRowProxy;\n    },\n\n    /**\n     * Create a new data model\n     * @param {object} [options]\n     * @param {DataModel} [options.dataModel] - A fully instantiated data model object.\n     * @param {function|function[]} [options.DataModel=DefaultDataModel] - Data model constructor, or array of data model constructors for a multi-stage data model, to be used to instantiate the data model unless a fully instantiated `options.dataModel` was given.\n     * @returns {boolean} `true` if the data model has changed.\n     * @memberOf Local#\n     */\n    getNewDataModel: function(options) {\n        var dataModel;\n\n        options = options || {};\n\n        if (options.dataModel) {\n            dataModel = options.dataModel;\n        } else {\n            [].concat(options.DataModel || DefaultDataModel).forEach(function(DataModel) {\n                dataModel = new DataModel(dataModel);\n            });\n        }\n\n        return dataModel;\n    },\n\n    /**\n     * @summary Attach a data model object to the grid.\n     * @desc Installs data model events, fallbacks, and hooks.\n     *\n     * Called from {@link Behavior#reset}.\n     * @this {Behavior}\n     * @param {object} [options]\n     * @param {DataModel} [options.dataModel] - A fully instantiated data model object.\n     * @param {function} [options.DataModel=require('datasaur-local')] - Data model will be instantiated from this constructor unless `options.dataModel` was given.\n     * @param {DataModel} [options.metadata] - Passed to {@link DataModel#setMetadataStore setMetadataStore}.\n     * @returns {boolean} `true` if the data model has changed.\n     * @memberOf Local#\n     */\n    resetDataModel: function(options) {\n        var newDataModel = this.getNewDataModel(options),\n            changed = newDataModel && newDataModel !== this.dataModel;\n\n        if (changed) {\n            this.dataModel = this.decorateDataModel(newDataModel, options);\n            decorators.addDeprecationWarnings.call(this);\n            decorators.addFriendlierDrillDownMapKeys.call(this);\n        }\n\n        return changed;\n    },\n\n    /**\n     * Decorate data model object, initialize its metadata store, and subscribe to its events.\n     * @see {@link module:decorators.injectPolyfills injectPolyfills}\n     * @see {@link module:decorators.injectCode injectCode}\n     * @see {@link module:decorators.injectDefaulthooks injectDefaulthooks}\n     * @param {DataModel} newDataModel\n     * @param {DataModel} [options.metadata] - Passed to {@link DataModel#setMetadataStore setMetadataStore}.\n     * @memberOf Local#\n     */\n    decorateDataModel: function(newDataModel, options) {\n        decorators.injectPolyfills(newDataModel);\n        decorators.injectCode(newDataModel);\n        decorators.injectDefaulthooks(newDataModel);\n\n        newDataModel.setMetadataStore(options && options.metadata);\n\n        this.boundDispatchEvent = this.boundDispatchEvent || dispatchDataModelEvent.bind(this.grid);\n        newDataModel.addListener(this.boundDispatchEvent);\n\n        return newDataModel;\n    },\n\n    /**\n     * @summary Map of drill down characters used by the data model.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#charMap|charMap}\n     * @type {{OPEN:string, CLOSE:string, INDENT:string}}\n     * @memberOf Local#\n     */\n    get charMap() {\n        return this.dataModel.drillDownCharMap;\n    },\n\n    /**\n     * @summary Calls `click` on the data model if column is a tree column.\n     * @desc Sends clicked cell's coordinates to the data model.\n     *\n     * To tell if the click was consumed by the data model, add event listeners for {@link DataModel#fin-hypergrid-data-loaded} and/or {@link DataModel#fin-hypergrid-data-postreindex}.\n     * @see {@link https://fin-hypergrid.github.io/doc/DataModel.html#toggleRow toggleRow}\n     * @param {CellEvent} event\n     * @returns {@link DataModel#toggleRow}'s return value which may or may not be implemented.\n     * @memberOf Local#\n     */\n    cellClicked: function(event) {\n        return this.dataModel.toggleRow(event.dataCell.y, event.dataCell.x);\n    },\n\n    hasTreeColumn: function() {\n        return this.dataModel.isTree() && this.grid.properties.showTreeColumn;\n    }\n\n});\n\n/**\n * @this {Local}\n */\nfunction createColumns() {\n    this.schema.forEach(function(columnSchema) {\n        this.addColumn(columnSchema);\n    }, this);\n\n    this.columnEnumSynchronize();\n}\n\nLocal.prototype.mixIn(require('./columnEnum').mixin);\nLocal.prototype.mixIn.call(Local, require('./columnEnum').mixInShared);\n\nmodule.exports = Local;\n","'use strict';\n\n\n/**\n * @typedef {object} NormalizedDataModelEvent\n * @property {string} type - Event string.\n */\n\n/**\n * @module decorators\n */\n\nvar hooks = require('./hooks');\nvar fallbacks = require('./fallbacks');\nvar polyfills = require('./polyfills');\n\n\nvar warned = {};\n\n\n/**\n * Injects missing utility functions into the data model.\n *\n * Typically, data models are extended from `datasaur-base` which supplies the utility functions. However, extending from `datasaur-base` is not a requirement and for those data models that do not, the necessary utility functions are injected here.\n *\n * The only utility function so injected at this time is `install`, which is used by:\n * * {@link module:decorators.injectCode injectCode} to:\n *    * Inject fallbacks for missing non-essential data model methods\n *    * Bind the data model's `dispatchEvent` method to the grid instance\n * * {@link module:decorators.injectDefaulthooks injectDefaulthooks} to:\n *    * Inject a default for the `getCell` hook\n *    * Inject a default for the `getCellEditorAt` hook\n *\n * @this {Local}\n * @param {DataModel} dataModel\n * @memberOf module:decorators\n */\nfunction injectPolyfills(dataModel) {\n    Object.keys(polyfills).forEach(function(key) {\n        if (!dataModel[key]) {\n            dataModel[key] = polyfills[key];\n        }\n    });\n}\n\n/**\n * Inject fallback methods into data model when not implemented by data model.\n * @this {Local}\n * @param {DataModel} dataModel\n * @memberOf module:decorators\n */\nfunction injectCode(dataModel) {\n    dataModel.install(fallbacks, { inject: true });\n}\n\n/**\n * @param {DataModel} dataModel\n * @this {Local}\n * @memberOf module:decorators\n */\nfunction injectDefaulthooks(dataModel) {\n    dataModel.install(hooks, { inject: true });\n}\n\n/**\n * @summary Add deprecation warnings for deprecated legacy data model properties.\n * @desc This method may be removed in a future version whence all deprecations are removed.\n * @this {Local}\n * @memberOf module:decorators\n */\nfunction addDeprecationWarnings() {\n    var grid = this.grid;\n\n    Object.defineProperties(this.dataModel, {\n\n        grid: {\n            configurable: true,\n            enumerable: false,\n            get: function() {\n                if (!warned.grid) {\n                    console.warn('dataModel.grid has been deprecated as of v3.0.0. (Will be removed in a future release.) Data models should have no direct knowledge of or access to the grid. (If your data model needs to call grid methods, add a data event to your grid with `grid.addEventListener(\\'fin-hypergrid-data-my-event\\', myHandler)` and trigger it from your data model with `this.dispatchEvent(\\'fin-hypergrid-data-my-event\\')` or `this.dispatchEvent({ type: \\'fin-hypergrid-data-my-event\\' })`. If you need access to the grid object from within a `getCell` or `getCellEditAt` override, define `grid` in the same closure as the override.)');\n                    warned.grid = true;\n                }\n                return grid;\n            }\n        },\n\n        dataSource: {\n            configurable: true,\n            enumerable: false,\n            get: function() {\n                if (!warned.dataSource) {\n                    console.warn('dataModel.dataSource has been deprecated as of 3.0.0 in favor of `dataModel`. (Will be removed in a future release.) The _external_ data model, formerly `grid.behavior.dataModel.dataSource`, is now `grid.behavior.dataModel`.');\n                    warned.dataSource = true;\n                }\n                return this.dataModel;\n            }\n        }\n\n    });\n}\n\n// for app layer access to drill down chars, provide friendlier keys than data model normally supports in `drillDownCharMap`.\nvar friendlierDrillDownMapKeys = {\n    true: 'OPEN',\n    false: 'CLOSE',\n    null: 'INDENT'\n};\n\n/**\n * @this {Local}\n * @memberOf module:decorators\n */\nfunction addFriendlierDrillDownMapKeys() {\n    var charMap = this.dataModel.drillDownCharMap;\n    if (charMap) {\n        Object.keys(friendlierDrillDownMapKeys).forEach(function(key) {\n            if (key in charMap) {\n                var friendlierKey = friendlierDrillDownMapKeys[key];\n                if (!(friendlierKey in charMap)) {\n                    Object.defineProperty(charMap, friendlierKey, {\n                        get: function() { return this[key]; },\n                        set: function(s) { this[key] = s; }\n                    });\n                }\n            }\n        });\n    }\n}\n\n\nmodule.exports = {\n    injectPolyfills: injectPolyfills,\n    injectCode: injectCode,\n    addDeprecationWarnings: addDeprecationWarnings,\n    addFriendlierDrillDownMapKeys: addFriendlierDrillDownMapKeys,\n    injectDefaulthooks: injectDefaulthooks\n};\n","'use strict';\n\n/**\n * @module hooks\n */\n\n\n/**\n * Custom implementations can return with a call to the default implementation:\n * ```js\n * var getCell = require('fin-hypergrid/src/behaviors/dataModel/hooks').getCell;\n * function myCustomGetCell(config, rendererName) {\n *     // custom logic here that mutates config and/or renderName\n *     return getCell(config, rendererName);\n * }\n * ```\n * Alternatively, copy in the default implementation body (a one-liner):\n * ```js\n * function myCustomGetCell(config, rendererName) {\n *     // custom logic here that mutates config and/or renderName\n *     return config.grid.cellRenderers.get(rendererName);\n * }\n * ```\n * To set the default implementation for all new grid instances, override this function in place:\n * ```js\n * var hooks = require('fin-hypergrid/src/behaviors/dataModel/hooks');\n * hooks.getCell = myCustomDefaultGetCell;\n * ```\n * @this {DataModel}\n * @memberOf module:hooks\n */\nexports.getCell = function(config, rendererName) {\n    return config.grid.cellRenderers.get(rendererName);\n};\n\n\n/**\n * Custom implementations can return with a call to the default implementation:\n * ```js\n * var getCellEditorAt = require('fin-hypergrid/src/behaviors/dataModel/hooks').getCellEditorAt;\n * function myCustomGetCellEditorAt(columnIndex, rowIndex, editorName, cellEvent) {\n *     // custom logic here, may mutate config and/or renderName\n *     return getCellEditorAt(columnIndex, rowIndex, editorName, cellEvent);\n * }\n * ```\n * Alternatively, copy in the default implementation body (a one-liner):\n * ```js\n * function myCustomGetCellEditorAt(columnIndex, rowIndex, editorName, cellEvent) {\n *     // custom logic here, may mutate editorName\n *     return cellEvent.grid.cellEditors.create(editorName, cellEvent);\n * }\n * ```\n * To set the default implementation for all new grid instances, override this function in place:\n * ```js\n * var hooks = require('fin-hypergrid/src/behaviors/dataModel/hooks');\n * hooks.getCellEditorAt = myCustomDefaultGetCellEditorAt;\n * ```\n * @this {DataModel}\n * @memberOf module:hooks\n */\nexports.getCellEditorAt = function(columnIndex, rowIndex, editorName, cellEvent) {\n    return cellEvent.grid.cellEditors.create(editorName, cellEvent);\n};\n","'use strict';\n\n/**\n * @module fallbacks\n *\n * @desc {@link Behavior#resetDataModel resetDataModel()} inserts each of these catcher methods into the new data model when not otherwise implemented, which allows Hypergrid to indiscriminately call these otherwise missing methods on the data model without fear of the call failing.\n */\nmodule.exports = {\n    /** @implements DataModel#apply */\n    apply: function() {},\n\n    /** @implements DataModel#isTree */\n    isTree: function() {\n        return false;\n    },\n\n    /** @implements DataModel#isTreeCol */\n    isTreeCol: function(columnIndex) {\n        return false;\n    },\n\n    /** @implements DataModel#toggleRow */\n    toggleRow: function(rowIndex, columnIndex, expand) {},\n\n    /** @implements DataModel#getColumnCount */\n    getColumnCount: function() {\n        return this.getSchema().length;\n    },\n\n    /** @implements DataModel#getRow */\n    getRow: function(y) {\n        this.$rowProxy$.$y$ = y;\n        return this.$rowProxy$;\n    },\n\n    /** @implements DataModel#getData */\n    getData: function(metadataFieldName) {\n        var y, Y = this.getRowCount(),\n            row, rows = new Array(Y),\n            metadata;\n\n        for (y = 0; y < Y; y++) {\n            row = this.getRow(y);\n            if (row) {\n                rows[y] = Object.assign({}, row);\n                if (metadataFieldName) {\n                    metadata = this.getRowMetadata(y);\n                    if (metadata) {\n                        rows[y][metadataFieldName] = metadata;\n                    }\n                }\n            }\n        }\n\n        return rows;\n    },\n\n    setData: function(data) {\n        // fail silently because Local.js::setData currently calls this for every subgrid\n    },\n\n    setValue: function(x, y, value) {\n        console.warn('dataModel.setValue(' + x + ', ' + y + ', \"' + value + '\") called but no implementation. Data not saved.');\n    },\n\n    setSchema: function(schema) {\n        console.warn('dataModel.setSchema(schema) called but no implementation. Schema not updated.');\n    },\n\n    /** @implements DataModel#getRowIndex */\n    getRowIndex: function(y) {\n        return y;\n    },\n\n    /** @implements DataModel#getRowMetadata */\n    getRowMetadata: function(y, prototype) {\n        return this.metadata[y] || prototype !== undefined && (this.metadata[y] = Object.create(prototype));\n    },\n\n    /** @implements DataModel#getMetadataStore */\n    getMetadataStore: function() {\n        return this.metadata;\n    },\n\n    /** @implements DataModel#setRowMetadata */\n    setRowMetadata: function(y, metadata) {\n        if (metadata) {\n            this.metadata[y] = metadata;\n        } else {\n            delete this.metadata[y];\n        }\n        return metadata;\n    },\n\n    /** @implements DataModel#setMetadataStore */\n    setMetadataStore: function(newMetadataStore) {\n        this.metadata = newMetadataStore || [];\n    }\n};\n","'use strict';\n\nfunction silent() {}\n\nmodule.exports = {\n    install: function(api) {\n        if (!api) {\n            return;\n        }\n\n        var isArray = Array.isArray(api),\n            keys = isArray ? api : Object.keys(api).filter(function(key) {\n                return typeof api[key] === 'function' &&\n                    key !== 'constructor' &&\n                    key !== 'initialize';\n            });\n\n        keys.forEach(function(key) {\n            if (!this[key]) {\n                this[key] = isArray ? silent : api[key];\n            }\n        }, this);\n    },\n\n    dispatchEvent: function(nameOrEvent) {\n        if (this.handlers) {\n            this.handlers.forEach(function(handler) {\n                handler.call(this, nameOrEvent);\n            }, this);\n        }\n    },\n\n    addListener: function(handler) {\n        if (!this.handlers) {\n            this.handlers = [handler];\n        } else if (this.handlers.indexOf(handler) < 0) {\n            this.handlers.push(handler);\n        }\n    },\n\n    removeListener: function(handler) {\n        if (this.handlers && this.handlers.length) {\n            var index = this.handlers.indexOf(handler);\n            if (index >= 0) {\n                delete this.handlers[index];\n            }\n        }\n    },\n\n    removeAllListeners: function() {\n        if (this.handlers) {\n            this.handlers.length = 0;\n        }\n    }\n};\n","'use strict';\n\nvar dataModelEventHandlers = require('./events');\nvar dispatchGridEvent = require('../../lib/dispatchGridEvent');\n\n\nvar REGEX_DATA_EVENT_STRING = /^fin-hypergrid-(data|schema)(-[a-z]+)+$/;\n\n/**\n * @summary Hypergrid data model event handler.\n * @desc This function is not called by Hypergrid.\n * Rather, it is handed to the data model (by {@link module:decorators.injectCode injectCode} as `dispatchEvent`) to issue callbacks to the grid.\n *\n * This handler:\n * 1. Checks the event string to make sure it conforms to the expected syntax:\n *    * Starts with `fin-hypergrid-data-` or `fin-hypergrid-schema-`\n *    * Includes only lowercase letters and hyphens\n * 2. Calls a handler in the {@link dataModelEventHandlers} namespace of the same name as the event string.\n * 3. Re-emits the event as a DOM event to the `<canvas>` element (unless the handler has already done so).\n *\n * The data model's `dispatchEvent` method is bound to the grid by {@link module:decorators.injectCode injectCode}.\n * A bound version of this function, bound to the grid instance, is either:\n * * Added to the data model via its `addListener` method, if it has one; or\n * * Force-injected into the data model, overriding any native implementation. (A native implementation may exist simply to \"catch\" calls that might be made before the data model is attached to Hypergrid.)\n *\n * @this {Hypergrid}\n * @param {string|NormalizedDataModelEvent} event\n */\nfunction dispatchDataModelEvent(event) {\n    var type;\n\n    switch (typeof event) {\n        case 'string':\n            type = event;\n            event = { type: type };\n            break;\n        case 'object':\n            if ('type' in event) {\n                type = event.type;\n                break;\n            }\n        // fall through\n        default:\n            throw new this.HypergridError('Expected data model event to be: (string | {type:string})');\n    }\n\n    if (!REGEX_DATA_EVENT_STRING.test(type)) {\n        throw new this.HypergridError('Expected data model event type \"' + type + '\" to match ' + REGEX_DATA_EVENT_STRING + '.');\n    }\n\n    var nativeHandler = dataModelEventHandlers[event.type];\n    if (nativeHandler) {\n        var dispatched = nativeHandler.call(this, event);\n    }\n\n    return dispatched !== undefined ? dispatched : dispatchGridEvent.call(this, event.type, event);\n}\n\nmodule.exports = dispatchDataModelEvent;\n","'use strict';\n\n/**\n * @namespace dataModelEventHandlers\n * @desc These handlers are called by {@link dispatchDataModelEvent dataModel.dispatchEvent} to perform Hypergrid housekeeping tasks.\n *\n * (Hypergrid registers itself with the data model by calling `dataModel.addListener`. Both `addListener` and `dispatchEvent` are optional API. If the data model lacks `addListener`, Hypergrid inserts a bound version of `dispatchEvent` directly into the data model.)\n *\n * #### Coding pattern\n * If there are no housekeeping tasks to be performed, do not define a handler here.\n *\n * Otherwise, the typical coding pattern is for our handler to perform the housekeeping tasks, returning `undefined` to the caller ({@link DispatchDataModelEvent}) which then re-emits the event as a Hypergrid event (_i.e.,_ as a DOM event to the `<canvas>` element).\n *\n * Alternatively, our handler can re-emit the event itself by calling the grid event handler and propagating its boolean return value value to the caller which signals the caller _not_ to re-emit on our behalf. This is useful when tasks need to be performed _after_ the Hypergrid event handler is called (or before _and_ after).\n *\n * The pattern, in general:\n * ```js\n * exports['fin-hypergrid-data-myevent'] = function(event) {\n *     var notCanceled;\n *\n *     PerformHousekeepingTasks();\n *\n *     // optionally re-emit the event as a grid event\n *     var dispatchGridEvent = require('../../lib/dispatchGridEvent.js');\n *     notCanceled = dispatchGridEvent.call(this, event.type, isCancelable, event);\n *\n *     if (!notCanceled) {\n *         PerformAdditionalHousekeepingTasks()\n *     }\n *\n *     return notCanceled;\n * }\n * Re-emitting the event is optional; if `notCanceled` is never defined, the caller will take care of it. If your handler does choose to re-emit the event itself by calling `dispatchGridEvent`, you should propagate its return value (the result of its internal call to [`dispatchEvent`](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent), which is either `false` if the event was canceled or `true` if it was not).\n *\n */\nmodule.exports = {\n    /**\n     * _See the data model API page for event semantics (link below)._\n     * @param {NormalizedDataModelEvent} event\n     * @returns {undefined|boolean} Result of re-emitted event or `undefined` if event not re-emitted.\n     * @see {@link DataModel#event:fin-hypergrid-schema-loaded}\n     * @memberOf dataModelEventHandlers\n     */\n    'fin-hypergrid-schema-loaded': function(event) {\n        this.behavior.createColumns();\n    },\n\n    /**\n     * _See the data model API page for event semantics (link below)._\n     * @param {NormalizedDataModelEvent} event\n     * @returns {undefined|boolean} Result of re-emitted event or `undefined` if event not re-emitted.\n     * @see {@link DataModel#event:fin-hypergrid-data-loaded}\n     * @memberOf dataModelEventHandlers\n     */\n    'fin-hypergrid-data-loaded': function(event) {\n        this.repaint();\n    },\n\n    /**\n     * _See the data model API page for event semantics (link below)._\n     * @param {NormalizedDataModelEvent} event\n     * @returns {undefined|boolean} Result of re-emitted event or `undefined` if event not re-emitted.\n     * @see {@link DataModel#event:fin-hypergrid-data-shape-changed}\n     * @memberOf dataModelEventHandlers\n     */\n    'fin-hypergrid-data-shape-changed': function(event) {\n        this.behaviorShapeChanged();\n    },\n\n    /**\n     * _See the data model API page for event semantics (link below)._\n     * @param {NormalizedDataModelEvent} event\n     * @returns {undefined|boolean} Result of re-emitted event or `undefined` if event not re-emitted.\n     * @see {@link DataModel#event:fin-hypergrid-data-prereindex}\n     * @memberOf dataModelEventHandlers\n     */\n    'fin-hypergrid-data-prereindex': function(event) {\n        this.stashRowSelections();\n        this.stashColumnSelections();\n    },\n\n    /**\n     * _See the data model API page for event semantics (link below)._\n     * @param {{type}} event\n     * @returns {undefined|boolean} Result of re-emitted event or `undefined` if event not re-emitted.\n     * @see {@link DataModel#event:fin-hypergrid-data-postreindex}\n     * @memberOf dataModelEventHandlers\n     */\n    'fin-hypergrid-data-postreindex': function(event) {\n        this.selectionModel.reset();\n        this.unstashRowSelections();\n        this.unstashColumnSelections();\n        this.behaviorShapeChanged();\n    }\n};\n","'use strict';\n\nvar Registry = require('../lib/Registry');\n\n\nvar warnedBaseClass;\n\n/**\n * @classdesc Registry of cell editor constructors.\n * @constructor\n */\nvar CellEditors = Registry.extend('CellEditors', {\n\n    BaseClass: require('./CellEditor'), // abstract base class\n\n    initialize: function() {\n        // preregister the standard cell editors\n        this.add(require('./Color'));\n        this.add(require('./Date'));\n        this.add(require('./Number'));\n        this.add(require('./Slider'));\n        this.add(require('./Spinner'));\n        this.add(require('./Textfield'));\n    },\n\n    get: function(name) {\n        if (name && name.toLowerCase() === 'celleditor') {\n            if (!warnedBaseClass) {\n                console.warn('grid.cellEditors.get(\"' + name + '\") method call has been deprecated as of v2.1.0 in favor of grid.cellEditors.BaseClass property. (Will be removed in a future release.)');\n                warnedBaseClass = true;\n            }\n            return this.BaseClass;\n        }\n        try {\n            var CellEditor = Registry.prototype.get.call(this, name);\n        } catch (err) {\n            // fail silently\n        }\n        return CellEditor;\n    }\n\n});\n\nmodule.exports = new CellEditors;\n","'use strict';\n\nvar CellEditor = require('./CellEditor');\n\n/**\n * As of spring 2016:\n * Functions well in Chrome and Firefox; unimplemented in Safari.\n * @constructor\n * @extends CellEditor\n */\nvar Color = CellEditor.extend('Color', {\n\n    template: '<input type=\"color\" lang=\"{{locale}}\" style=\"{{style}}\">'\n\n});\n\nmodule.exports = Color;\n","/* eslint-env browser */\n\n'use strict';\n\nvar CellEditor = require('./CellEditor');\n\nvar isChromium = window.chrome,\n    winNav = window.navigator,\n    vendorName = winNav.vendor,\n    isOpera = winNav.userAgent.indexOf('OPR') > -1,\n    isIEedge = winNav.userAgent.indexOf('Edge') > -1,\n    isIOSChrome = winNav.userAgent.match('CriOS'),\n    isChrome = !isIOSChrome &&\n        isChromium !== null &&\n        isChromium !== undefined &&\n        vendorName === 'Google Inc.' &&\n        isOpera == false && isIEedge == false; // eslint-disable-line eqeqeq\n\n/**\n * As of spring 2016:\n * Functions well in Chrome except no localization (day, month names; date format).\n * Unimplemented in Safari, Firefox, Internet Explorer.\n * This is a \"snmart\" control. It detects Chrome:\n * * If Chrome, uses chromeDate overrides format to that required by the value attribute, yyyy-mm-dd. (Note that this is not the format displayed in the control, which is always mm/dd/yyyy.)\n * * Otherwise uses localized date format _but_ falls back to a regular text box.\n * @constructor\n * @extends CellEditor\n */\nvar Date = CellEditor.extend('Date', {\n\n    initialize: function(grid) {\n\n        var localizerName,\n            usesDateInputControl = isChrome;\n\n        if (usesDateInputControl) {\n            localizerName = 'chromeDate';\n            this.template = '<input type=\"date\">';\n        } else {\n            localizerName = 'date';\n            this.template = '<input type=\"text\" lang=\"{{locale}}\">';\n\n            this.selectAll = function() {\n                var lastCharPlusOne = this.getEditorValue().length;\n                this.input.setSelectionRange(0, lastCharPlusOne);\n            };\n        }\n\n        this.localizer = grid.localization.get(localizerName);\n    }\n});\n\n\nmodule.exports = Date;\n","'use strict';\n\nvar Textfield = require('./Textfield');\n\n/**\n * Functions well in Chrome, Safari, Firefox, and Internet Explorer.\n * @constructor\n * @extends Textfield\n */\nvar Number = Textfield.extend('Number', {\n\n    initialize: function(grid) {\n        this.localizer = grid.localization.get('number');\n    }\n\n});\n\nmodule.exports = Number;\n","'use strict';\n\nvar CellEditor = require('./CellEditor');\n\n/**\n * @constructor\n * @extends CellEditor\n */\nvar Slider = CellEditor.extend('Slider', {\n\n    template: '<input type=\"range\" lang=\"{{locale}}\" style=\"{{style}}\">'\n\n});\n\nmodule.exports = Slider;\n","'use strict';\n\nvar CellEditor = require('./CellEditor');\n\n/**\n * @constructor\n * @extends CellEditor\n */\nvar Spinner = CellEditor.extend('Spinner', {\n\n    template: '<input type=\"number\" lang=\"{{locale}}\" style=\"{{style}}\">'\n\n});\n\nmodule.exports = Spinner;\n","'use strict';\n\n/* eslint-env browser */\n\n/** @namespace cssInjector */\n\n/**\n * @summary Insert base stylesheet into DOM\n *\n * @desc Creates a new `<style>...</style>` element from the named text string(s) and inserts it but only if it does not already exist in the specified container as per `referenceElement`.\n *\n * > Caveat: If stylesheet is for use in a shadow DOM, you must specify a local `referenceElement`.\n *\n * @returns A reference to the newly created `<style>...</style>` element.\n *\n * @param {string|string[]} cssRules\n * @param {string} [ID]\n * @param {undefined|null|Element|string} [referenceElement] - Container for insertion. Overloads:\n * * `undefined` type (or omitted): injects stylesheet at top of `<head>...</head>` element\n * * `null` value: injects stylesheet at bottom of `<head>...</head>` element\n * * `Element` type: injects stylesheet immediately before given element, wherever it is found.\n * * `string` type: injects stylesheet immediately before given first element found that matches the given css selector.\n *\n * @memberOf cssInjector\n */\nfunction cssInjector(cssRules, ID, referenceElement) {\n    if (typeof referenceElement === 'string') {\n        referenceElement = document.querySelector(referenceElement);\n        if (!referenceElement) {\n            throw 'Cannot find reference element for CSS injection.';\n        }\n    } else if (referenceElement && !(referenceElement instanceof Element)) {\n        throw 'Given value not a reference element.';\n    }\n\n    var container = referenceElement && referenceElement.parentNode || document.head || document.getElementsByTagName('head')[0];\n\n    if (ID) {\n        ID = cssInjector.idPrefix + ID;\n\n        if (container.querySelector('#' + ID)) {\n            return; // stylesheet already in DOM\n        }\n    }\n\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (ID) {\n        style.id = ID;\n    }\n    if (cssRules instanceof Array) {\n        cssRules = cssRules.join('\\n');\n    }\n    cssRules = '\\n' + cssRules + '\\n';\n    if (style.styleSheet) {\n        style.styleSheet.cssText = cssRules;\n    } else {\n        style.appendChild(document.createTextNode(cssRules));\n    }\n\n    if (referenceElement === undefined) {\n        referenceElement = container.firstChild;\n    }\n\n    container.insertBefore(style, referenceElement);\n\n    return style;\n}\n\n/**\n * @summary Optional prefix for `<style>` tag IDs.\n * @desc Defaults to `'injected-stylesheet-'`.\n * @type {string}\n * @memberOf cssInjector\n */\ncssInjector.idPrefix = 'injected-stylesheet-';\n\n// Interface\nmodule.exports = cssInjector;\n","/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false Mustache: true*/\n\n(function defineMustache (global, factory) {\n  if (typeof exports === 'object' && exports && typeof exports.nodeName !== 'string') {\n    factory(exports); // CommonJS\n  } else if (typeof define === 'function' && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    global.Mustache = {};\n    factory(global.Mustache); // script, wsh, asp\n  }\n}(this, function mustacheFactory (mustache) {\n\n  var objectToString = Object.prototype.toString;\n  var isArray = Array.isArray || function isArrayPolyfill (object) {\n    return objectToString.call(object) === '[object Array]';\n  };\n\n  function isFunction (object) {\n    return typeof object === 'function';\n  }\n\n  /**\n   * More correct typeof string handling array\n   * which normally returns typeof 'object'\n   */\n  function typeStr (obj) {\n    return isArray(obj) ? 'array' : typeof obj;\n  }\n\n  function escapeRegExp (string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&');\n  }\n\n  /**\n   * Null safe way of checking whether or not an object,\n   * including its prototype, has a given property\n   */\n  function hasProperty (obj, propName) {\n    return obj != null && typeof obj === 'object' && (propName in obj);\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var regExpTest = RegExp.prototype.test;\n  function testRegExp (re, string) {\n    return regExpTest.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace (string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n  };\n\n  function escapeHtml (string) {\n    return String(string).replace(/[&<>\"'`=\\/]/g, function fromEntityMap (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate (template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace () {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags (tagsToCompile) {\n      if (typeof tagsToCompile === 'string')\n        tagsToCompile = tagsToCompile.split(spaceRe, 2);\n\n      if (!isArray(tagsToCompile) || tagsToCompile.length !== 2)\n        throw new Error('Invalid tags: ' + tagsToCompile);\n\n      openingTagRe = new RegExp(escapeRegExp(tagsToCompile[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tagsToCompile[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tagsToCompile[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens (tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens (tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n        case '#':\n        case '^':\n          collector.push(token);\n          sections.push(token);\n          collector = token[4] = [];\n          break;\n        case '/':\n          section = sections.pop();\n          section[5] = token[2];\n          collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n          break;\n        default:\n          collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner (string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function eos () {\n    return this.tail === '';\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function scan (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function scanUntil (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n      case -1:\n        match = this.tail;\n        this.tail = '';\n        break;\n      case 0:\n        match = '';\n        break;\n      default:\n        match = this.tail.substring(0, index);\n        this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context (view, parentContext) {\n    this.view = view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function push (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function lookup (name) {\n    var cache = this.cache;\n\n    var value;\n    if (cache.hasOwnProperty(name)) {\n      value = cache[name];\n    } else {\n      var context = this, names, index, lookupHit = false;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          /**\n           * Using the dot notion path in `name`, we descend through the\n           * nested objects.\n           *\n           * To be certain that the lookup has been successful, we have to\n           * check if the last object in the path actually has the property\n           * we are looking for. We store the result in `lookupHit`.\n           *\n           * This is specially necessary for when the value has been set to\n           * `undefined` and we want to avoid looking up parent contexts.\n           **/\n          while (value != null && index < names.length) {\n            if (index === names.length - 1)\n              lookupHit = hasProperty(value, names[index]);\n\n            value = value[names[index++]];\n          }\n        } else {\n          value = context.view[name];\n          lookupHit = hasProperty(context.view, name);\n        }\n\n        if (lookupHit)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer () {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function clearCache () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function parse (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function render (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function renderTokens (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this.renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this.renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this.renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this.unescapedValue(token, context);\n      else if (symbol === 'name') value = this.escapedValue(token, context);\n      else if (symbol === 'text') value = this.rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype.renderSection = function renderSection (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender (template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string' || typeof value === 'number') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype.renderInverted = function renderInverted (token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype.renderPartial = function renderPartial (token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype.unescapedValue = function unescapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype.escapedValue = function escapedValue (token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype.rawValue = function rawValue (token) {\n    return token[1];\n  };\n\n  mustache.name = 'mustache.js';\n  mustache.version = '2.3.2';\n  mustache.tags = [ '{{', '}}' ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function clearCache () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function parse (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function render (template, view, partials) {\n    if (typeof template !== 'string') {\n      throw new TypeError('Invalid template! Template should be a \"string\" ' +\n                          'but \"' + typeStr(template) + '\" was given as the first ' +\n                          'argument for mustache#render(template, view, partials)');\n    }\n\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.,\n  /*eslint-disable */ // eslint wants camel cased function name\n  mustache.to_html = function to_html (template, view, partials, send) {\n    /*eslint-enable*/\n\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n  return mustache;\n}));\n","/* eslint-env browser */\n\n'use strict';\n\nvar dispatchGridEvent = require('../lib/dispatchGridEvent');\nvar Button = require('../cellRenderers/Button');\n\n/**\n * @summary Grid event support.\n * @desc Additions to `Hypergrid.prototype` for handling and firing events.\n *\n * All members are documented on the {@link Hypergrid} page.\n * @mixin events.mixin\n */\nexports.mixin = {\n\n    /**\n     * @summary Add an event listener to me.\n     * @desc Listeners added by this method should only be removed by {@link Hypergrid#removeEventListener|grid.removeEventListener} (or {@link Hypergrid#removeAllEventListeners|grid.removeAllEventListeners}).\n     * @param {string} eventName - The type of event we are interested in.\n     * @param {function} listener - The event handler.\n     * @param {boolean} [internal=false] - Used by {@link Hypergrid#addInternalEventListener|grid.addInternalEventListener} (see).\n     * @memberOf Hypergrid#\n     */\n    addEventListener: function(eventName, listener, internal) {\n        var self = this,\n            listeners = this.listeners[eventName] = this.listeners[eventName] || [],\n            alreadyAttached = listeners.find(function(info) { return info.listener === listener; });\n\n        if (!alreadyAttached) {\n            var info = {\n                internal: internal,\n                listener: listener,\n                decorator: function(e) {\n                    if (self.allowEventHandlers) {\n                        listener(e);\n                    }\n                }\n            };\n            listeners.push(info);\n            this.canvas.addEventListener(eventName, info.decorator);\n        }\n    },\n\n    /**\n     * @summary Add an internal event listener to me.\n     * @desc The new listener is flagged as \"internal.\" Internal listeners are removed as usual by {@link Hypergrid#removeEventListener|grid.removeEventListener}. However, they are ignored by {@link Hypergrid#removeAllEventListeners|grid.removeAllEventListeners()} (as called by {@link Hypergrid#reset|reset}). (But see {@link Hypergrid#removeAllEventListeners|grid.removeAllEventListeners(true)}.)\n     *\n     * Listeners added by this method should only be removed by {@link Hypergrid#removeEventListener|grid.removeEventListener} (or {@link Hypergrid#removeAllEventListeners|grid.removeAllEventListeners(true)}).\n     * @param {string} eventName - The type of event we are interested in.\n     * @param {function} listener - The event handler.\n     * @memberOf Hypergrid#\n     */\n    addInternalEventListener: function(eventName, listener) {\n        this.addEventListener(eventName, listener, true);\n    },\n\n    /**\n     * @summary Remove an event listeners.\n     * @desc Removes the event listener with matching name and function that was added by {@link Hypergrid#addEventListener|grid.addEventListener}.\n     *\n     * NOTE: This method cannot remove event listeners added by other means.\n     * @memberOf Hypergrid#\n     */\n    removeEventListener: function(eventName, listener) {\n        var listenerList = this.listeners[eventName];\n\n        if (listenerList) {\n            listenerList.find(function(info, index) {\n                if (info.listener === listener) {\n                    if (listenerList.length === 1) {\n                        delete this.listeners[eventName];\n                    } else {\n                        listenerList.splice(index, 1); // remove it from the list\n                    }\n                    this.canvas.removeEventListener(eventName, info.decorator);\n                    return true;\n                }\n            }, this);\n        }\n    },\n\n    /**\n     * @summary Remove all event listeners.\n     * @desc Removes all event listeners added with {@link Hypergrid#addEventListener|grid.addEventListener} except those added as \"internal.\"\n     * @param {boolean} [internal=false] - Include internal listeners.\n     * @memberOf Hypergrid#\n     */\n    removeAllEventListeners: function(internal) {\n        Object.keys(this.listeners).forEach(function(key) {\n            this.listeners[key].slice().forEach(function(info) {\n                if (internal || !info.internal) {\n                    this.removeEventListener(key, info.listener);\n                }\n            }, this);\n        }, this);\n    },\n\n    allowEvents: function(allow){\n        this.allowEventHandlers = !!allow;\n\n        if (this.behavior.featureChain) {\n            if (allow){\n                this.behavior.featureChain.attachChain();\n            } else {\n                this.behavior.featureChain.detachChain();\n            }\n        }\n\n        this.behavior.changed();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @param {number} c - grid column index.\n     * @param {string[]} keys\n     * @desc Synthesize and fire a `fin-column-sort` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticColumnSortEvent: function(c, keys) {\n        return dispatchGridEvent.call(this, 'fin-column-sort', {\n            column: c,\n            keys: keys\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-editor-keyup` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticEditorKeyUpEvent: function(inputControl, keyEvent) {\n        return dispatchGridEvent.call(this, 'fin-editor-keyup', {\n            input: inputControl,\n            keyEvent: keyEvent,\n            char: this.canvas.getKeyChar(keyEvent),\n            legacyChar: keyEvent.legacyKey // decorated by getKeyChar\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-editor-keydown` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticEditorKeyDownEvent: function(inputControl, keyEvent) {\n        return dispatchGridEvent.call(this, 'fin-editor-keydown', {\n            input: inputControl,\n            keyEvent: keyEvent,\n            char: this.canvas.getKeyChar(keyEvent),\n            legacyChar: keyEvent.legacyKey // decorated by getKeyChar\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-editor-keypress` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticEditorKeyPressEvent: function(inputControl, keyEvent) {\n        return dispatchGridEvent.call(this, 'fin-editor-keypress', {\n            input: inputControl,\n            keyEvent: keyEvent,\n            char: this.canvas.getKeyChar(keyEvent),\n            legacyChar: keyEvent.legacyKey // decorated by getKeyChar\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-editor-data-change` event.\n     *\n     * This event is cancelable.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticEditorDataChangeEvent: function(inputControl, oldValue, newValue) {\n        return dispatchGridEvent.call(this, 'fin-editor-data-change', true, {\n            input: inputControl,\n            oldValue: oldValue,\n            newValue: newValue\n        });\n    },\n\n    fireSyntheticRowHeaderClickedEvent: function(event) {\n        return dispatchGridEvent.call(this, 'fin-row-header-clicked', true, {}, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-row-selection-changed` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticRowSelectionChangedEvent: function() {\n        return dispatchGridEvent.call(this, 'fin-row-selection-changed', this.selectionDetailGetters);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-column-selection-changed` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticColumnSelectionChangedEvent: function() {\n        return dispatchGridEvent.call(this, 'fin-column-selection-changed', this.selectionDetailGetters);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-context-menu` event\n     * @param {keyEvent} event - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticContextMenuEvent: function(event) {\n        Object.defineProperties(event, this.selectionDetailGetterDescriptors);\n        return dispatchGridEvent.call(this, 'fin-context-menu', {}, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-mouseup` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticMouseUpEvent: function(event) {\n        Object.defineProperties(event, this.selectionDetailGetterDescriptors);\n        return dispatchGridEvent.call(this, 'fin-mouseup', {}, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-mousedown` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticMouseDownEvent: function(event) {\n        Object.defineProperties(event, this.selectionDetailGetterDescriptors);\n        return dispatchGridEvent.call(this, 'fin-mousedown', {}, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-mousemove` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticMouseMoveEvent: function(event) {\n        return dispatchGridEvent.call(this, 'fin-mousemove', {}, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-button-pressed` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticButtonPressedEvent: function(event) {\n        if (event.cellRenderer instanceof Button) { // Button or subclass thereof?\n            if (event.value && event.value.subrows) {\n                var y = event.primitiveEvent.detail.mouse.y - event.bounds.y,\n                    subheight = event.bounds.height / event.value.subrows;\n                event.subrow = Math.floor(y / subheight);\n            }\n            return dispatchGridEvent.call(this, 'fin-button-pressed', {}, event);\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-column-drag-start` event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticOnColumnsChangedEvent: function() {\n        return dispatchGridEvent.call(this, 'fin-column-changed-event', {});\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-keydown` event.\n     * @param {keyEvent} event - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticKeydownEvent: function(keyEvent) {\n        return dispatchGridEvent.call(this, 'fin-keydown', keyEvent.detail);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-keyup` event.\n     * @param {keyEvent} event - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticKeyupEvent: function(keyEvent) {\n        return dispatchGridEvent.call(this, 'fin-keyup', keyEvent.detail);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-filter-applied event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticFilterAppliedEvent: function() {\n        return dispatchGridEvent.call(this, 'fin-filter-applied', {});\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-cell-enter` event\n     * @param {Point} cell - The pixel location of the cell in which the click event occurred.\n     * @param {MouseEvent} event - The system mouse event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticOnCellEnterEvent: function(cellEvent) {\n        return dispatchGridEvent.call(this, 'fin-cell-enter', cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-cell-exit` event.\n     * @param {Point} cell - The pixel location of the cell in which the click event occured.\n     * @param {MouseEvent} event - The system mouse event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticOnCellExitEvent: function(cellEvent) {\n        return dispatchGridEvent.call(this, 'fin-cell-exit', cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-cell-click` event.\n     * @param {Point} cell - The pixel location of the cell in which the click event occured.\n     * @param {MouseEvent} event - The system mouse event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticClickEvent: function(cellEvent) {\n        return dispatchGridEvent.call(this, 'fin-click', {}, cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-double-click` event.\n     * @param {MouseEvent} event - The system mouse event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticDoubleClickEvent: function(cellEvent) {\n        if (!this.abortEditing()) { return; }\n\n        return dispatchGridEvent.call(this, 'fin-double-click', {}, cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-grid-rendered event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticGridRenderedEvent: function() {\n       return dispatchGridEvent.call(this, 'fin-grid-rendered', { source: this });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-tick event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticTickEvent: function() {\n        return dispatchGridEvent.call(this, 'fin-tick', { source: this });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-grid-resized event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticGridResizedEvent: function(e) {\n        return dispatchGridEvent.call(this, 'fin-grid-resized', e);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-touchstart` event.\n     * @param {CustomEvent} e - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticTouchStartEvent: function(e) {\n        return dispatchGridEvent.call(this, 'fin-touchstart', e);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-touchmove` event.\n     * @param {CustomEvent} e - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticTouchMoveEvent: function(e) {\n        return dispatchGridEvent.call(this, 'fin-touchmove', e);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a `fin-touchend` event.\n     * @param {CustomEvent} e - The canvas event.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireSyntheticTouchEndEvent: function(e) {\n        return dispatchGridEvent.call(this, 'fin-touchend', e);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a scroll event.\n     * @param {string} type - Should be either `fin-scroll-x` or `fin-scroll-y`.\n     * @param {number} oldValue - The old scroll value.\n     * @param {number} newValue - The new scroll value.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireScrollEvent: function(eventName, oldValue, newValue) {\n        return dispatchGridEvent.call(this, eventName, {\n            oldValue: oldValue,\n            value: newValue\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-request-cell-edit event.\n     *\n     * This event is cancelable.\n     * @param {CellEvent} cellEvent\n     * @param {*} value\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireRequestCellEdit: function(cellEvent, value) {\n        return dispatchGridEvent.call(this, 'fin-request-cell-edit', true, { value: value }, cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and fire a fin-before-cell-edit event.\n     *\n     * This event is cancelable.\n     * @param {Point} cell - The x,y coordinates.\n     * @param {Object} value - The current value.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireBeforeCellEdit: function(cellEvent, oldValue, newValue, control) {\n        return dispatchGridEvent.call(this, 'fin-before-cell-edit', true, {\n            oldValue: oldValue,\n            newValue: newValue,\n            input: control\n        }, cellEvent);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {Renderer} sub-component\n     * @param {Point} cell - The x,y coordinates.\n     * @param {Object} oldValue - The old value.\n     * @param {Object} newValue - The new value.\n     * @returns {boolean} Proceed; event was not [canceled](https://developer.mozilla.org/docs/Web/API/EventTarget/dispatchEvent#Return_Value `EventTarget.dispatchEvent`).\n     */\n    fireAfterCellEdit: function(cellEvent, oldValue, newValue, control) {\n        return dispatchGridEvent.call(this, 'fin-after-cell-edit', {\n            newValue: newValue,\n            oldValue: oldValue,\n            input: control\n        }, cellEvent);\n    },\n\n    delegateCanvasEvents: function() {\n        var grid = this;\n\n        function handleMouseEvent(e, cb) {\n            if (grid.getLogicalRowCount() === 0) {\n                return;\n            }\n\n            var c = grid.getGridCellFromMousePoint(e.detail.mouse),\n                primitiveEvent,\n                decoratedEvent;\n\n            // No events on the whitespace of the grid unless they're drag events\n            if (!c.fake || e.detail.dragstart) {\n                primitiveEvent = c.cellEvent;\n            }\n\n            if (primitiveEvent) {\n                decoratedEvent = Object.defineProperty(\n                    primitiveEvent,\n                    'primitiveEvent',\n                    {\n                        value: e,\n                        enumerable: false,\n                        configurable: true,\n                        writable: true\n                    }\n                );\n\n                // add some interesting mouse offsets\n                var drilldown;\n                if ((drilldown = primitiveEvent.primitiveEvent && primitiveEvent.primitiveEvent.detail)) {\n                    decoratedEvent.gridPoint = drilldown.mouse;\n                    if ((drilldown = drilldown.primitiveEvent)) {\n                        decoratedEvent.clientPoint = {\n                            x: drilldown.clientX,\n                            y: drilldown.clientY\n                        };\n                        decoratedEvent.pagePoint = {\n                            x: drilldown.clientX + window.scrollX,\n                            y: drilldown.clientY + window.scrollY\n                        };\n                    }\n                }\n\n                cb.call(grid, decoratedEvent);\n            }\n        }\n\n        this.addInternalEventListener('fin-canvas-resized', function(e) {\n            grid.resized();\n            grid.fireSyntheticGridResizedEvent(e);\n        });\n\n        this.addInternalEventListener('fin-canvas-mousemove', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            handleMouseEvent(e, function(mouseEvent) {\n                this.delegateMouseMove(mouseEvent);\n                this.fireSyntheticMouseMoveEvent(mouseEvent);\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-mousedown', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            if (!grid.abortEditing()) {\n                e.stopPropagation();\n                return;\n            }\n\n            handleMouseEvent(e, function(mouseEvent) {\n                mouseEvent.keys = e.detail.keys;\n                this.mouseDownState = mouseEvent;\n                this.delegateMouseDown(mouseEvent);\n                this.fireSyntheticMouseDownEvent(mouseEvent);\n                this.repaint();\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-click', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            handleMouseEvent(e, function(mouseEvent) {\n                var isMouseDownCell = this.mouseDownState && this.mouseDownState.gridCell.equals(mouseEvent.gridCell);\n                if (isMouseDownCell && mouseEvent.mousePointInClickRect) {\n                    mouseEvent.keys = e.detail.keys; // todo: this was in fin-tap but wasn't here\n                    if (this.mouseDownState) {\n                        this.fireSyntheticButtonPressedEvent(this.mouseDownState);\n                    }\n                    this.fireSyntheticClickEvent(mouseEvent);\n                    this.delegateClick(mouseEvent);\n                }\n                this.mouseDownState = null;\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-mouseup', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            grid.dragging = false;\n            if (grid.isScrollingNow()) {\n                grid.setScrollingNow(false);\n            }\n            if (grid.columnDragAutoScrolling) {\n                grid.columnDragAutoScrolling = false;\n            }\n            handleMouseEvent(e, function(mouseEvent) {\n                this.delegateMouseUp(mouseEvent);\n                this.fireSyntheticMouseUpEvent(mouseEvent);\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-dblclick', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            handleMouseEvent(e, function(mouseEvent) {\n                this.fireSyntheticDoubleClickEvent(mouseEvent, e);\n                this.delegateDoubleClick(mouseEvent);\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-drag', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            grid.dragging = true;\n            handleMouseEvent(e, grid.delegateMouseDrag);\n        });\n\n        this.addInternalEventListener('fin-canvas-keydown', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            grid.fireSyntheticKeydownEvent(e);\n            grid.delegateKeyDown(e);\n        });\n\n        this.addInternalEventListener('fin-canvas-keyup', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            grid.fireSyntheticKeyupEvent(e);\n            grid.delegateKeyUp(e);\n        });\n\n        this.addInternalEventListener('fin-canvas-wheelmoved', function(e) {\n            handleMouseEvent(e, grid.delegateWheelMoved);\n        });\n\n        this.addInternalEventListener('fin-canvas-mouseout', function(e) {\n            if (grid.properties.readOnly) {\n                return;\n            }\n            handleMouseEvent(e, grid.delegateMouseExit);\n        });\n\n        this.addInternalEventListener('fin-canvas-context-menu', function(e) {\n            handleMouseEvent(e, function(mouseEvent) {\n                grid.delegateContextMenu(mouseEvent);\n                grid.fireSyntheticContextMenuEvent(mouseEvent);\n            });\n        });\n\n        this.addInternalEventListener('fin-canvas-touchstart', function(e) {\n            grid.delegateTouchStart(e);\n            grid.fireSyntheticTouchStartEvent(e);\n        });\n\n        this.addInternalEventListener('fin-canvas-touchmove', function(e) {\n            grid.delegateTouchMove(e);\n            grid.fireSyntheticTouchMoveEvent(e);\n        });\n\n        this.addInternalEventListener('fin-canvas-touchend', function(e) {\n            grid.delegateTouchEnd(e);\n            grid.fireSyntheticTouchEndEvent(e);\n        });\n\n        //Register a listener for the copy event so we can copy our selected region to the pastebuffer if conditions are right.\n        document.body.addEventListener('copy', function(evt) {\n            grid.checkClipboardCopy(evt);\n        });\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate the wheel moved event to the behavior.\n     * @param {Event} event - The pertinent event.\n     */\n    delegateWheelMoved: function(event) {\n        this.behavior.onWheelMoved(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate MouseExit to the behavior (model).\n     * @param {Event} event - The pertinent event.\n     */\n    delegateMouseExit: function(event) {\n        this.behavior.handleMouseExit(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate MouseExit to the behavior (model).\n     * @param {Event} event - The pertinent event.\n     */\n    delegateContextMenu: function(event) {\n        this.behavior.onContextMenu(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate MouseMove to the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateMouseMove: function(mouseDetails) {\n        this.behavior.onMouseMove(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate mousedown to the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateMouseDown: function(mouseDetails) {\n        this.behavior.handleMouseDown(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate mouseup to the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateMouseUp: function(mouseDetails) {\n        this.behavior.onMouseUp(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate click to the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateClick: function(mouseDetails) {\n        this.behavior.onClick(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate mouseDrag to the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateMouseDrag: function(mouseDetails) {\n        this.behavior.onMouseDrag(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc We've been doubleclicked on. Delegate through the behavior (model).\n     * @param {mouseDetails} mouseDetails - An enriched mouse event from fin-canvas.\n     */\n    delegateDoubleClick: function(mouseDetails) {\n        this.behavior.onDoubleClick(this, mouseDetails);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Generate a function name and call it on self.\n     * @desc This should also be delegated through Behavior keeping the default implementation here though.\n     * @param {event} event - The pertinent event.\n     */\n    delegateKeyDown: function(event) {\n        this.behavior.onKeyDown(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Generate a function name and call it on self.\n     * @desc This should also be delegated through Behavior keeping the default implementation here though.\n     * @param {event} event - The pertinent event.\n     */\n    delegateKeyUp: function(event) {\n        this.behavior.onKeyUp(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate touchstart to the Behavior model.\n     * @param {CustomEvent} event - The pertinent event.\n     */\n    delegateTouchStart: function(event) {\n        this.behavior.onTouchStart(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate touchmove to the Behavior model.\n     * @param {CustomEvent} event - The pertinent event.\n     */\n    delegateTouchMove: function(event) {\n        this.behavior.onTouchMove(this, event);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Delegate touchend to the Behavior model.\n     * @param {CustomEvent} event - The pertinent event.\n     */\n    delegateTouchEnd: function(event) {\n        this.behavior.onTouchEnd(this, event);\n    }\n};\n","/* eslint-env browser */\n\n'use strict';\n\nvar SelectionRectangle = require('../lib/SelectionRectangle');\n\n/**\n * Additions to `Hypergrid.prototype` for modeling cell, row, and column selections.\n *\n * All members are documented on the {@link Hypergrid} page.\n * @mixin selection.mixin\n */\nexports.mixin = {\n    selectionInitialize: function() {\n        var grid = this;\n\n        /** for use by fin-selection-changed, fin-row-selection-changed, fin-column-selection-changed\n         * @memberOf Hypergrid#\n         * @private\n         */\n        this.selectionDetailGetters = {\n            get rows() { return grid.getSelectedRows(); },\n            get columns() { return grid.getSelectedColumns(); },\n            get selections() { return grid.selectionModel.getSelections(); }\n        };\n\n        /**\n         * for use by fin-context-menu, fin-mouseup, fin-mousedown\n         * @memberOf Hypergrid#\n         * @private\n         */\n        this.selectionDetailGetterDescriptors = Object.getOwnPropertyDescriptors(this.selectionDetailGetters);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} We have any selections.\n     */\n    hasSelections: function() {\n        if (!this.getSelectionModel) {\n            return; // were not fully initialized yet\n        }\n        return this.selectionModel.hasSelections();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {string} Tab separated value string from the selection and our data.\n     */\n    getSelectionAsTSV: function() {\n        switch (this.selectionModel.getLastSelectionType()) {\n            case 'cell':\n                var selections = this.getSelectionMatrix();\n                selections = selections[selections.length - 1];\n                return this.getMatrixSelectionAsTSV(selections);\n            case 'row':\n                return this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix());\n            case 'column':\n                return this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix());\n        }\n    },\n\n    getMatrixSelectionAsTSV: function(selections) {\n        var result = '';\n\n        //only use the data from the last selection\n        if (selections.length) {\n            var width = selections.length,\n                height = selections[0].length,\n                area = width * height,\n                lastCol = width - 1,\n                //Whitespace will only be added on non-singular rows, selections\n                whiteSpaceDelimiterForRow = (height > 1 ? '\\n' : '');\n\n            //disallow if selection is too big\n            if (area > 20000) {\n                alert('selection size is too big to copy to the paste buffer'); // eslint-disable-line no-alert\n                return '';\n            }\n\n            for (var h = 0; h < height; h++) {\n                for (var w = 0; w < width; w++) {\n                    result += selections[w][h] + (w < lastCol ? '\\t' : whiteSpaceDelimiterForRow);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Clear all the selections.\n     */\n    clearSelections: function() {\n        var keepRowSelections = this.properties.checkboxOnlyRowSelections;\n        this.selectionModel.clear(keepRowSelections);\n        this.clearMouseDown();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Clear the most recent selection.\n     */\n    clearMostRecentSelection: function() {\n        var keepRowSelections = this.properties.checkboxOnlyRowSelections;\n        this.selectionModel.clearMostRecentSelection(keepRowSelections);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Clear the most recent column selection.\n     */\n    clearMostRecentColumnSelection: function() {\n        this.selectionModel.clearMostRecentColumnSelection();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Clear the most recent row selection.\n     */\n    clearMostRecentRowSelection: function() {\n        //this.selectionModel.clearMostRecentRowSelection(); // commented off as per GRID-112\n    },\n\n    clearRowSelection: function() {\n        this.selectionModel.clearRowSelection();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Select given region.\n     * @param {number} ox - origin x\n     * @param {number} oy - origin y\n     * @param {number} ex - extent x\n     * @param {number} ex - extent y\n     */\n    select: function(ox, oy, ex, ey) {\n        if (ox < 0 || oy < 0) {\n            //we don't select negative area\n            //also this means there is no origin mouse down for a selection rect\n            return;\n        }\n        this.selectionModel.select(ox, oy, ex, ey);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} Given point is selected.\n     * @param {number} x - The horizontal coordinate.\n     * @param {number} y - The vertical coordinate.\n     */\n    isSelected: function(x, y) {\n        return this.selectionModel.isSelected(x, y);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} The given column is selected anywhere in the entire table.\n     * @param {number} y - The row index.\n     */\n    isCellSelectedInRow: function(y) {\n        return this.selectionModel.isCellSelectedInRow(y);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} The given row is selected anywhere in the entire table.\n     * @param {number} x - The column index.\n     */\n    isCellSelectedInColumn: function(x) {\n        return this.selectionModel.isCellSelectedInColumn(x);\n    },\n\n    /**\n     * @param {boolean|number[]|string[]} [hiddenColumns=false] - _Per {@link Hypergrid~getColumns}._\n     * @returns {{}}\n     * @memberOf Hypergrid#\n     */\n    getRowSelection: function(hiddenColumns) {\n        var dataModel = this.behavior.dataModel,\n            selectedRowIndexes = this.selectionModel.getSelectedRows(),\n            columns = getColumns.call(this, hiddenColumns),\n            result = {};\n\n        for (var c = 0, C = columns.length; c < C; c++) {\n            var column = columns[c],\n                rows = result[column.name] = new Array(selectedRowIndexes.length);\n            selectedRowIndexes.forEach(getValue);\n        }\n\n        function getValue(selectedRowIndex, j) {\n            var dataRow = dataModel.getRow(selectedRowIndex);\n            rows[j] = valOrFunc(dataRow, column);\n        }\n\n        return result;\n    },\n\n    /**\n     * @param {boolean|number[]|string[]} [hiddenColumns=false] - _Per {@link Hypergrid~getColumns}._\n     * @returns {Array}\n     * @memberOf Hypergrid#\n     */\n    getRowSelectionMatrix: function(hiddenColumns) {\n        var dataModel = this.behavior.dataModel,\n            selectedRowIndexes = this.selectionModel.getSelectedRows(),\n            columns = getColumns.call(this, hiddenColumns),\n            result = new Array(columns.length);\n\n        for (var c = 0, C = columns.length; c < C; c++) {\n            var column = columns[c];\n            result[c] = new Array(selectedRowIndexes.length);\n            selectedRowIndexes.forEach(getValue);\n        }\n\n        function getValue(selectedRowIndex, r) {\n            var dataRow = dataModel.getRow(selectedRowIndex);\n            result[c][r] = valOrFunc(dataRow, column);\n        }\n\n        return result;\n    },\n\n    getColumnSelectionMatrix: function() {\n        var behavior = this.behavior,\n            dataModel = behavior.dataModel,\n            headerRowCount = this.getHeaderRowCount(),\n            selectedColumnIndexes = this.getSelectedColumns(),\n            numRows = this.getRowCount(),\n            result = new Array(selectedColumnIndexes.length);\n\n        selectedColumnIndexes.forEach(function(selectedColumnIndex, c) {\n            var column = behavior.getActiveColumn(selectedColumnIndex),\n                values = result[c] = new Array(numRows);\n\n            for (var r = headerRowCount; r < numRows; r++) {\n                var dataRow = dataModel.getRow(r);\n                values[r] = valOrFunc(dataRow, column);\n            }\n        });\n\n        return result;\n    },\n\n    getColumnSelection: function() {\n        var behavior = this.behavior,\n            dataModel = behavior.dataModel,\n            headerRowCount = this.getHeaderRowCount(),\n            selectedColumnIndexes = this.getSelectedColumns(),\n            result = {},\n            rowCount = this.getRowCount();\n\n        selectedColumnIndexes.forEach(function(selectedColumnIndex) {\n            var column = behavior.getActiveColumn(selectedColumnIndex),\n                values = result[column.name] = new Array(rowCount);\n\n            for (var r = headerRowCount; r < rowCount; r++) {\n                var dataRow = dataModel.getRow(r);\n                values[r] = valOrFunc(dataRow, column);\n            }\n        });\n\n        return result;\n    },\n\n    getSelection: function() {\n        var behavior = this.behavior,\n            dataModel = behavior.dataModel,\n            selections = this.getSelections(),\n            rects = new Array(selections.length);\n\n        selections.forEach(getRect);\n\n        function getRect(selectionRect, i) {\n            var rect = normalizeRect(selectionRect),\n                colCount = rect.width,\n                rowCount = rect.height,\n                columns = {};\n\n            for (var c = 0, x = rect.origin.x; c < colCount; c++, x++) {\n                var column = behavior.getActiveColumn(x),\n                    values = columns[column.name] = new Array(rowCount);\n\n                for (var r = 0, y = rect.origin.y; r < rowCount; r++, y++) {\n                    var dataRow = dataModel.getRow(y);\n                    values[r] = valOrFunc(dataRow, column);\n                }\n            }\n\n            rects[i] = columns;\n        }\n\n        return rects;\n    },\n\n    getSelectionMatrix: function() {\n        var behavior = this.behavior,\n            dataModel = behavior.dataModel,\n            selections = this.getSelections(),\n            rects = new Array(selections.length);\n\n        selections.forEach(getRect);\n\n        function getRect(selectionRect, i) {\n            var rect = normalizeRect(selectionRect),\n                colCount = rect.width,\n                rowCount = rect.height,\n                rows = [];\n\n            for (var c = 0, x = rect.origin.x; c < colCount; c++, x++) {\n                var values = rows[c] = new Array(rowCount),\n                    column = behavior.getActiveColumn(x);\n\n                for (var r = 0, y = rect.origin.y; r < rowCount; r++, y++) {\n                    var dataRow = dataModel.getRow(y);\n                    values[r] = valOrFunc(dataRow, column);\n                }\n            }\n\n            rects[i] = rows;\n        }\n\n        return rects;\n    },\n\n    selectCell: function(x, y, silent) {\n        var keepRowSelections = this.properties.checkboxOnlyRowSelections;\n        this.selectionModel.clear(keepRowSelections);\n        this.selectionModel.select(x, y, 0, 0, silent);\n    },\n\n    toggleSelectColumn: function(x, keys) {\n        keys = keys || [];\n        var model = this.selectionModel;\n        var alreadySelected = model.isColumnSelected(x);\n        var hasCTRL = keys.indexOf('CTRL') > -1;\n        var hasSHIFT = keys.indexOf('SHIFT') > -1;\n        if (!hasCTRL && !hasSHIFT) {\n            model.clear();\n            if (!alreadySelected) {\n                model.selectColumn(x);\n            }\n        } else {\n            if (hasCTRL) {\n                if (alreadySelected) {\n                    model.deselectColumn(x);\n                } else {\n                    model.selectColumn(x);\n                }\n            }\n            if (hasSHIFT) {\n                model.clear();\n                model.selectColumn(this.lastEdgeSelection[0], x);\n            }\n        }\n        if (!alreadySelected && !hasSHIFT) {\n            this.lastEdgeSelection[0] = x;\n        }\n        this.repaint();\n        this.fireSyntheticColumnSelectionChangedEvent();\n    },\n\n    toggleSelectRow: function(y, keys) {\n        //we can select the totals rows if they exist, but not rows above that\n        keys = keys || [];\n\n        var sm = this.selectionModel;\n        var alreadySelected = sm.isRowSelected(y);\n        var hasSHIFT = keys.indexOf('SHIFT') >= 0;\n\n        if (alreadySelected) {\n            sm.deselectRow(y);\n        } else {\n            this.singleSelect();\n            sm.selectRow(y);\n        }\n\n        if (hasSHIFT) {\n            sm.clear();\n            sm.selectRow(this.lastEdgeSelection[1], y);\n        }\n\n        if (!alreadySelected && !hasSHIFT) {\n            this.lastEdgeSelection[1] = y;\n        }\n\n        this.repaint();\n    },\n\n    singleSelect: function() {\n        var result = this.properties.singleRowSelectionMode;\n\n        if (result) {\n            this.selectionModel.clearRowSelection();\n        }\n\n        return result;\n    },\n\n    selectViewportCell: function(x, y) {\n        var vc, vr;\n        if (\n            this.getRowCount() &&\n            (vc = this.renderer.visibleColumns[x]) &&\n            (vr = this.renderer.visibleRows[y + this.getHeaderRowCount()])\n        ) {\n            x = vc.columnIndex;\n            y = vr.rowIndex;\n            this.clearSelections();\n            this.select(x, y, 0, 0);\n            this.setMouseDown(this.newPoint(x, y));\n            this.setDragExtent(this.newPoint(0, 0));\n            this.repaint();\n        }\n    },\n\n    selectToViewportCell: function(x, y) {\n        var selections, vc, vr;\n        if (\n            (selections = this.getSelections()) && selections.length &&\n            (vc = this.renderer.visibleColumns[x]) &&\n            (vr = this.renderer.visibleRows[y + this.getHeaderRowCount()])\n        ) {\n            var origin = selections[0].origin;\n            x = vc.columnIndex;\n            y = vr.rowIndex;\n            this.setDragExtent(this.newPoint(x - origin.x, y - origin.y));\n            this.select(origin.x, origin.y, x - origin.x, y - origin.y);\n            this.repaint();\n        }\n    },\n\n    selectToFinalCellOfCurrentRow: function() {\n        this.selectFinalCellOfCurrentRow(true);\n    },\n\n    selectFinalCellOfCurrentRow: function(to) {\n        if (!this.getRowCount()) {\n            return;\n        }\n        var selections = this.getSelections();\n        if (selections && selections.length) {\n            var selection = selections[0],\n                origin = selection.origin,\n                extent = selection.extent,\n                columnCount = this.getColumnCount();\n\n            this.scrollBy(columnCount, 0);\n\n            this.clearSelections();\n            if (to) {\n                this.select(origin.x, origin.y, columnCount - origin.x - 1, extent.y);\n            } else {\n                this.select(columnCount - 1, origin.y, 0, 0);\n            }\n\n            this.repaint();\n        }\n    },\n\n    selectToFirstCellOfCurrentRow: function() {\n        this.selectFirstCellOfCurrentRow(true);\n    },\n\n    selectFirstCellOfCurrentRow: function(to) {\n        if (!this.getRowCount()) {\n            return;\n        }\n        var selections = this.getSelections();\n        if (selections && selections.length) {\n            var selection = selections[0],\n                origin = selection.origin,\n                extent = selection.extent;\n\n            this.clearSelections();\n            if (to) {\n                this.select(origin.x, origin.y, -origin.x, extent.y);\n            } else {\n                this.select(0, origin.y, 0, 0);\n            }\n\n            this.setHScrollValue(0);\n            this.repaint();\n        }\n    },\n\n    selectFinalCell: function() {\n        if (!this.getRowCount()) {\n            return;\n        }\n        this.selectCellAndScrollToMakeVisible(this.getColumnCount() - 1, this.getRowCount() - 1);\n        this.repaint();\n    },\n\n    selectToFinalCell: function() {\n        if (!this.getRowCount()) {\n            return;\n        }\n        var selections = this.getSelections();\n        if (selections && selections.length) {\n            var selection = selections[0],\n                origin = selection.origin,\n                columnCount = this.getColumnCount(),\n                rowCount = this.getRowCount();\n\n            this.clearSelections();\n            this.select(origin.x, origin.y, columnCount - origin.x - 1, rowCount - origin.y - 1);\n            // this.scrollBy(columnCount, rowCount);\n            this.repaint();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {object} An object that represents the currently selection row.\n     */\n    getSelectedRow: function() {\n        var sels = this.selectionModel.getSelections();\n        if (sels.length) {\n            var behavior = this.behavior,\n                colCount = this.getColumnCount(),\n                topRow = sels[0].origin.y,\n                row = {\n                    //hierarchy: behavior.getFixedColumnValue(0, topRow)\n                };\n\n            for (var c = 0; c < colCount; c++) {\n                row[behavior.getActiveColumn(c).header] = behavior.getValue(c, topRow);\n            }\n\n            return row;\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Synthesize and dispatch a `fin-selection-changed` event.\n     */\n    selectionChanged: function(silent) {\n        // Project the cell selection into the rows\n        this.selectRowsFromCells();\n\n        // Project the cell selection into the columns\n        this.selectColumnsFromCells();\n\n        if (!silent) {\n            this.canvas.dispatchEvent(new CustomEvent('fin-selection-changed', {\n                detail: this.selectionDetailGetters\n            }));\n        }\n    },\n\n    isColumnOrRowSelected: function() {\n        return this.selectionModel.isColumnOrRowSelected();\n    },\n    selectColumn: function(x1, x2) {\n        this.selectionModel.selectColumn(x1, x2);\n    },\n    selectRow: function(y1, y2) {\n        var sm = this.selectionModel;\n\n        if (this.singleSelect()) {\n            y1 = y2;\n        } else if (y2 === undefined) {\n            y2 = y1;\n        }\n\n        sm.selectRow(Math.min(y1, y2), Math.max(y1, y2));\n    },\n\n    selectRowsFromCells: function() {\n        if (!this.properties.checkboxOnlyRowSelections && this.properties.autoSelectRows) {\n            var last;\n\n            if (!this.properties.singleRowSelectionMode) {\n                this.selectionModel.selectRowsFromCells(0, true);\n            } else if ((last = this.selectionModel.getLastSelection())) {\n                this.selectRow(null, last.corner.y);\n            } else {\n                this.clearRowSelection();\n            }\n            this.fireSyntheticRowSelectionChangedEvent();\n        }\n    },\n    selectColumnsFromCells: function() {\n        if (this.properties.autoSelectColumns) {\n            this.selectionModel.selectColumnsFromCells();\n        }\n    },\n    getSelectedRows: function() {\n        return this.behavior.getSelectedRows();\n    },\n    getSelectedColumns: function() {\n        return this.behavior.getSelectedColumns();\n    },\n    getSelections: function() {\n        return this.behavior.getSelections();\n    },\n    getLastSelectionType: function(n) {\n        return this.selectionModel.getLastSelectionType(n);\n    },\n    isInCurrentSelectionRectangle: function(x, y) {\n        return this.selectionModel.isInCurrentSelectionRectangle(x, y);\n    },\n    selectAllRows: function() {\n        this.selectionModel.selectAllRows();\n    },\n    areAllRowsSelected: function() {\n        return this.selectionModel.areAllRowsSelected();\n    },\n    toggleSelectAllRows: function() {\n        if (this.areAllRowsSelected()) {\n            this.selectionModel.clear();\n        } else {\n            this.selectAllRows();\n        }\n        this.repaint();\n    },\n\n    /**\n     * @summary Move cell selection by offset.\n     * @desc Replace the most recent selection with a single cell selection that is moved (offsetX,offsetY) from the previous selection extent.\n     * @param {number} offsetX - x offset\n     * @param {number} offsetY - y offset\n     * @memberOf Hypergrid#\n     */\n    moveSingleSelect: function(offsetX, offsetY) {\n        var mouseCorner = this.getMouseDown().plus(this.getDragExtent());\n        this.moveToSingleSelect(\n            mouseCorner.x + offsetX,\n            mouseCorner.y + offsetY\n        );\n    },\n\n    /**\n     * @summary Move cell selection by offset.\n     * @desc Replace the most recent selection with a single cell selection that is moved (offsetX,offsetY) from the previous selection extent.\n     * @param {number} newX - x coordinate to start at\n     * @param {number} newY - y coordinate to start at\n     * @memberOf Hypergrid#\n     */\n    moveToSingleSelect: function(newX, newY) {\n        var maxColumns = this.getColumnCount() - 1,\n            maxRows = this.getRowCount() - 1,\n\n            maxViewableColumns = this.getVisibleColumnsCount() - 1,\n            maxViewableRows = this.getVisibleRowsCount() - 1;\n\n        if (!this.properties.scrollingEnabled) {\n            maxColumns = Math.min(maxColumns, maxViewableColumns);\n            maxRows = Math.min(maxRows, maxViewableRows);\n        }\n\n        newX = Math.min(maxColumns, Math.max(0, newX));\n        newY = Math.min(maxRows, Math.max(0, newY));\n\n        this.clearSelections();\n        this.select(newX, newY, 0, 0);\n        this.setMouseDown(this.newPoint(newX, newY));\n        this.setDragExtent(this.newPoint(0, 0));\n\n        this.selectCellAndScrollToMakeVisible(newX, newY);\n\n        this.repaint();\n    },\n\n    /** @summary Extend cell selection by offset.\n     * @desc Augment the most recent selection extent by (offsetX,offsetY) and scroll if necessary.\n     * @param {number} offsetX - x coordinate to start at\n     * @param {number} offsetY - y coordinate to start at\n     * @memberOf Hypergrid#\n     */\n    extendSelect: function(offsetX, offsetY) {\n        var maxColumns = this.getColumnCount() - 1,\n            maxRows = this.getRowCount() - 1,\n\n            maxViewableColumns = this.renderer.visibleColumns.length - 1,\n            maxViewableRows = this.renderer.visibleRows.length - 1,\n\n            origin = this.getMouseDown(),\n            extent = this.getDragExtent(),\n\n            newX = extent.x + offsetX,\n            newY = extent.y + offsetY;\n\n        if (!this.properties.scrollingEnabled) {\n            maxColumns = Math.min(maxColumns, maxViewableColumns);\n            maxRows = Math.min(maxRows, maxViewableRows);\n        }\n\n        newX = Math.min(maxColumns - origin.x, Math.max(-origin.x, newX));\n        newY = Math.min(maxRows - origin.y, Math.max(-origin.y, newY));\n\n        this.clearMostRecentSelection();\n\n        this.select(origin.x, origin.y, newX, newY);\n        this.setDragExtent(this.newPoint(newX, newY));\n\n        var colScrolled = this.insureModelColIsVisible(newX + origin.x, offsetX),\n            rowScrolled = this.insureModelRowIsVisible(newY + origin.y, offsetY);\n\n        this.repaint();\n\n        return colScrolled || rowScrolled;\n    },\n\n    /**\n     * @returns {undefined|CellEvent}\n     * @param {boolean} [useAllCells] - Search in all rows and columns instead of only rendered ones.\n     * @memberOf Hypergrid#\n     */\n    getGridCellFromLastSelection: function(useAllCells) {\n        var sel = this.selectionModel.getLastSelection();\n        return sel && (new this.behavior.CellEvent).resetGridXDataY(sel.origin.x, sel.origin.y, null, useAllCells);\n    }\n};\n\n/**\n * @param {boolean|number[]|string[]} [hiddenColumns=false] - One of:\n * `false` - Active column list\n * `true` - All column list\n * `Array` - Active column list with listed columns prefixed as needed (when not already in the list). Each item in the array may be either:\n * * `number` - index into all column list\n * * `string` - name of a column from the all column list\n * @returns {Column[]}\n * @memberOf Hypergrid~\n */\nfunction getColumns(hiddenColumns) {\n    var columns,\n        allColumns = this.behavior.getColumns(),\n        activeColumns = this.behavior.getActiveColumns();\n\n    if (Array.isArray(hiddenColumns)) {\n        columns = [];\n        hiddenColumns.forEach(function(index) {\n            var key = typeof index === 'number' ? 'index' : 'name',\n                column = allColumns.find(function(column) { return column[key] === index; });\n            if (activeColumns.indexOf(column) < 0) {\n                columns.push(column);\n            }\n        });\n        columns = columns.concat(activeColumns);\n    } else {\n        columns = hiddenColumns ? allColumns : activeColumns;\n    }\n\n    return columns;\n}\n\nfunction normalizeRect(rect) {\n    var o = rect.origin,\n        c = rect.corner,\n\n        ox = Math.min(o.x, c.x),\n        oy = Math.min(o.y, c.y),\n\n        cx = Math.max(o.x, c.x),\n        cy = Math.max(o.y, c.y);\n\n    return new SelectionRectangle(ox, oy, cx - ox, cy - oy);\n}\n\n/**\n * @this {dataRowObject}\n * @param column\n * @returns {string}\n */\nfunction valOrFunc(dataRow, column) {\n    var result, calculator;\n    if (dataRow) {\n        result = dataRow[column.name];\n        calculator = (typeof result)[0] === 'f' && result || column.calculator;\n        if (calculator) {\n            result = calculator(dataRow, column.name);\n        }\n    }\n    return result || result === 0 || result === false ? result : '';\n}\n","'use strict';\n\nvar Rectangle = require('rectangular').Rectangle;\n\n/*\n * The Hypergrid selection model defines a rectangle's bottom and right as inclusive rather than exclusive.\n * This definition works fine so long as it is used consistently. It does however throw off `Rectangle`'s\n * `width`, `height`, and `area` properties, all of which are getters which assume an exclusive model.\n * The following `SelectionModel` object extends (subclasses) `Rectangle` to correct this problem so that\n * those properties return accurate results.\n */\nfunction SelectionRectangle() {\n    Rectangle.apply(this, arguments);\n}\nSelectionRectangle.prototype = Object.create(Rectangle.prototype, {\n    width: {\n        get: function() {\n            return this.extent.x + 1;\n        }\n    },\n    height: {\n        get: function() {\n            return this.extent.y + 1;\n        }\n    }\n});\n\nmodule.exports = SelectionRectangle;\n","'use strict';\n\n/**\n * Hypergrid/index.js mixes this module into its prototype.\n * @mixin\n */\nexports.mixin = {\n\n    /**\n     * Save underlying data row indexes backing current grid row selections in `grid.selectedDataRowIndexes`.\n     *\n     * This call should be paired with a subsequent call to `reselectRowsByUnderlyingIndexes`.\n     * @private\n     * @this {Hypergrid}\n     * @returns {number|undefined} Number of selected rows or `undefined` if `restoreRowSelections` is falsy.\n     */\n    stashRowSelections: function() {\n        if (this.properties.restoreRowSelections) {\n            var dataModel = this.behavior.dataModel;\n\n            this.selectedDataRowIndexes = this.getSelectedRows().map(function(selectedRowIndex) {\n                return dataModel.getRowIndex(selectedRowIndex);\n            });\n\n            return this.selectedDataRowIndexes.length;\n        }\n    },\n\n    /**\n     * Re-establish grid row selections based on underlying data row indexes saved by `getSelectedDataRowIndexes` which should be called first.\n     *\n     * Note that not all previously selected rows will necessarily be available after a data transformation. Even if they appear to be available, if they are not from the same data set, restoring the selections may not make sense. When this is the case, the application should set the `restoreRowSelections` property to `false`.\n     * @private\n     * @this {Hypergrid}\n     * @returns {number|undefined} Number of rows reselected or `undefined` if there were no previously selected rows.\n     */\n    unstashRowSelections: function() {\n        var dataRowIndexes = this.selectedDataRowIndexes;\n        if (dataRowIndexes) {\n            delete this.selectedDataRowIndexes;\n\n            var i, r,\n                dataModel = this.behavior.dataModel,\n                rowCount = this.getRowCount(),\n                selectedRowCount = dataRowIndexes.length,\n                gridRowIndexes = [],\n                selectionModel = this.selectionModel;\n\n            for (r = 0; selectedRowCount && r < rowCount; ++r) {\n                i = dataRowIndexes.indexOf(dataModel.getRowIndex(r));\n                if (i >= 0) {\n                    gridRowIndexes.push(r);\n                    delete dataRowIndexes[i]; // might make indexOf increasingly faster as deleted elements are not enumerable\n                    selectedRowCount--; // count down so we can bail early if all found\n                }\n            }\n\n            gridRowIndexes.forEach(function(gridRowIndex) {\n                selectionModel.selectRow(gridRowIndex);\n            });\n\n            return gridRowIndexes.length;\n        }\n    },\n\n    /**\n     * Save data column names of current column selections in `grid.selectedColumnNames`.\n     *\n     * This call should be paired with a subsequent call to `reselectColumnsByNames`.\n     * @private\n     * @this {Hypergrid}\n     * @param sourceColumnNames\n     * @returns {number|undefined} Number of selected columns or `undefined` if `restoreColumnSelections` is falsy.\n     */\n    stashColumnSelections: function() {\n        if (this.properties.restoreColumnSelections) {\n            var behavior = this.behavior;\n\n            this.selectedColumnNames = this.getSelectedColumns().map(function(selectedColumnIndex) {\n                return behavior.getActiveColumn(selectedColumnIndex).name;\n            });\n\n            return this.selectedColumnNames.length;\n        }\n    },\n\n    /**\n     * Re-establish columns selections based on column names saved by `getSelectedColumnNames` which should be called first.\n     *\n     * Note that not all preveiously selected columns wil necessarily be available after a data transformation. Even if they appear to be available, if they are not from the same data set, restoring the selections may not make sense. When this is the case, the application should set the `restoreRowSelections` property to `false`.\n     * @private\n     * @this {Hypergrid}\n     * @param sourceColumnNames\n     * @returns {number|undefined} Number of rows reselected or `undefined` if there were no previously selected columns.\n     */\n    unstashColumnSelections: function(sourceColumnNames) {\n        var selectedColumnNames = this.selectedColumnNames;\n        if (selectedColumnNames) {\n            delete this.selectedColumnNames;\n\n            var behavior = this.behavior,\n                selectionModel = this.selectionModel;\n\n            return selectedColumnNames.reduce(function(reselectedCount, columnName) {\n                var activeColumnIndex = behavior.getActiveColumnIndex(columnName);\n                if (activeColumnIndex) {\n                    selectionModel.selectColumn(activeColumnIndex);\n                    reselectedCount++;\n                }\n                return reselectedCount;\n            }, 0);\n        }\n    }\n\n};\n","'use strict';\n\nvar Scrollbar = require('./modules').Scrollbar;\n\n/**\n * @summary Scrollbar support.\n * @desc Additions to `Hypergrid.prototype` for scrollbar support.\n *\n * All members are documented on the {@link Hypergrid} page.\n * @mixin scrolling.mixin\n */\nexports.mixin = {\n\n    /**\n     * A float value between 0.0 - 1.0 of the vertical scroll position.\n     * @type {number}\n     * @memberOf Hypergrid#\n     */\n    vScrollValue: 0,\n\n    /**\n     * A float value between 0.0 - 1.0 of the horizontal scroll position.\n     * @type {number}\n     * @memberOf Hypergrid#\n     */\n    hScrollValue: 0,\n\n    /**\n     * The verticl scroll bar model/controller.\n     * @type {FinBar}\n     * @memberOf Hypergrid#\n     */\n    sbVScroller: null,\n\n    /**\n     * The horizontal scroll bar model/controller.\n     * @type {FinBar}\n     * @memberOf Hypergrid#\n     */\n    sbHScroller: null,\n\n    /**\n     * The previous value of sbVScrollVal.\n     * @type {number}\n     * @memberOf Hypergrid#\n     */\n    sbPrevVScrollValue: null,\n\n    /**\n     * The previous value of sbHScrollValue.\n     * @type {number}\n     * @memberOf Hypergrid#\n     */\n    sbPrevHScrollValue: null,\n\n    scrollingNow: false,\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Set for `scrollingNow` field.\n     * @param {boolean} isItNow - The type of event we are interested in.\n     */\n    setScrollingNow: function(isItNow) {\n        this.scrollingNow = isItNow;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns {boolean} The `scrollingNow` field.\n     */\n    isScrollingNow: function() {\n        return this.scrollingNow;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Scroll horizontal and vertically by the provided offsets.\n     * @param {number} offsetX - Scroll in the x direction this much.\n     * @param {number} offsetY - Scroll in the y direction this much.\n     */\n    scrollBy: function(offsetX, offsetY) {\n        this.scrollHBy(offsetX);\n        this.scrollVBy(offsetY);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Scroll vertically by the provided offset.\n     * @param {number} offsetY - Scroll in the y direction this much.\n     */\n    scrollVBy: function(offsetY) {\n        var max = this.sbVScroller.range.max;\n        var oldValue = this.getVScrollValue();\n        var newValue = Math.min(max, Math.max(0, oldValue + offsetY));\n        if (newValue !== oldValue) {\n            this.setVScrollValue(newValue);\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @summary Scroll horizontally by the provided offset.\n     * @param {number} offsetX - Scroll in the x direction this much.\n     */\n    scrollHBy: function(offsetX) {\n        var max = this.sbHScroller.range.max;\n        var oldValue = this.getHScrollValue();\n        var newValue = Math.min(max, Math.max(0, oldValue + offsetX));\n        if (newValue !== oldValue) {\n            this.setHScrollValue(newValue);\n        }\n    },\n\n    scrollToMakeVisible: function(c, r) {\n        var delta,\n            dw = this.renderer.dataWindow,\n            fixedColumnCount = this.properties.fixedColumnCount,\n            fixedRowCount = this.properties.fixedRowCount;\n\n        // scroll only if target not in fixed columns\n        if (c >= fixedColumnCount) {\n            // target is to left of scrollable columns; negative delta scrolls left\n            if ((delta = c - dw.origin.x) < 0) {\n                this.sbHScroller.index += delta;\n\n                // target is to right of scrollable columns; positive delta scrolls right\n                // Note: The +1 forces right-most column to scroll left (just in case it was only partially in view)\n            } else if ((c - dw.corner.x) > 0) {\n                this.sbHScroller.index = this.renderer.getMinimumLeftPositionToShowColumn(c);\n            }\n        }\n\n        if (\n            r >= fixedRowCount && // scroll only if target not in fixed rows\n            (\n                // target is above scrollable rows; negative delta scrolls up\n                (delta = r - dw.origin.y - 1) < 0 ||\n\n                // target is below scrollable rows; positive delta scrolls down\n                (delta = r - dw.corner.y) > 0\n            )\n        ) {\n            this.sbVScroller.index += delta;\n        }\n    },\n\n    selectCellAndScrollToMakeVisible: function(c, r) {\n        this.scrollToMakeVisible(c, r);\n        this.selectCell(c, r, true);\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the vertical scroll value.\n     * @param {number} newValue - The new scroll value.\n     */\n    setVScrollValue: function(y) {\n        var self = this;\n        y = Math.min(this.sbVScroller.range.max, Math.max(0, Math.round(y)));\n        if (y !== this.vScrollValue) {\n            this.behavior.setScrollPositionY(y);\n            this.behavior.changed();\n            var oldY = this.vScrollValue;\n            this.vScrollValue = y;\n            this.scrollValueChangedNotification();\n            setTimeout(function() {\n                // self.sbVRangeAdapter.subjectChanged();\n                self.fireScrollEvent('fin-scroll-y', oldY, y);\n            });\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @return {number} The vertical scroll value.\n     */\n    getVScrollValue: function() {\n        return this.vScrollValue;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Set the horizontal scroll value.\n     * @param {number} newValue - The new scroll value.\n     */\n    setHScrollValue: function(x) {\n        var self = this;\n        x = Math.min(this.sbHScroller.range.max, Math.max(0, Math.round(x)));\n        if (x !== this.hScrollValue) {\n            this.behavior.setScrollPositionX(x);\n            this.behavior.changed();\n            var oldX = this.hScrollValue;\n            this.hScrollValue = x;\n            this.scrollValueChangedNotification();\n            setTimeout(function() {\n                //self.sbHRangeAdapter.subjectChanged();\n                self.fireScrollEvent('fin-scroll-x', oldX, x);\n                //self.synchronizeScrollingBoundries(); // todo: Commented off to prevent the grid from bouncing back, but there may be repercussions...\n            });\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @returns The vertical scroll value.\n     */\n    getHScrollValue: function() {\n        return this.hScrollValue;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Initialize the scroll bars.\n     */\n    initScrollbars: function() {\n        if (this.sbHScroller && this.sbVScroller){\n            return;\n        }\n\n        var self = this;\n\n        var horzBar = new Scrollbar({\n            orientation: 'horizontal',\n            deltaXFactor: this.constructor.defaults.wheelHFactor,\n            onchange: self.setHScrollValue.bind(self),\n            cssStylesheetReferenceElement: this.div\n        });\n\n        var vertBar = new Scrollbar({\n            orientation: 'vertical',\n            deltaYFactor: this.constructor.defaults.wheelVFactor,\n            onchange: self.setVScrollValue.bind(self),\n            cssStylesheetReferenceElement: this.div,\n            paging: {\n                up: self.pageUp.bind(self),\n                down: self.pageDown.bind(self)\n            }\n        });\n\n        this.sbHScroller = horzBar;\n        this.sbVScroller = vertBar;\n\n        var hPrefix = this.properties.hScrollbarClassPrefix;\n        var vPrefix = this.properties.vScrollbarClassPrefix;\n\n        if (hPrefix && hPrefix !== '') {\n            this.sbHScroller.classPrefix = hPrefix;\n        }\n\n        if (vPrefix && vPrefix !== '') {\n            this.sbVScroller.classPrefix = vPrefix;\n        }\n\n        this.div.appendChild(horzBar.bar);\n        this.div.appendChild(vertBar.bar);\n\n        this.resizeScrollbars();\n    },\n\n    resizeScrollbars: function() {\n        this.sbHScroller.shortenBy(this.sbVScroller).resize();\n        //this.sbVScroller.shortenBy(this.sbHScroller);\n        this.sbVScroller.resize();\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Scroll values have changed, we've been notified.\n     */\n    setVScrollbarValues: function(max) {\n        this.sbVScroller.range = {\n            min: 0,\n            max: max\n        };\n    },\n\n    setHScrollbarValues: function(max) {\n        this.sbHScroller.range = {\n            min: 0,\n            max: max\n        };\n    },\n\n    scrollValueChangedNotification: function() {\n        if (\n            this.hScrollValue !== this.sbPrevHScrollValue ||\n            this.vScrollValue !== this.sbPrevVScrollValue\n        ) {\n            this.sbPrevHScrollValue = this.hScrollValue;\n            this.sbPrevVScrollValue = this.vScrollValue;\n\n            if (this.cellEditor) {\n                this.cellEditor.scrollValueChangedNotification();\n            }\n\n            this.computeCellsBounds();\n        }\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc The data dimensions have changed, or our pixel boundaries have changed.\n     * Adjust the scrollbar properties as necessary.\n     */\n    synchronizeScrollingBoundaries: function() {\n        var bounds = this.getBounds();\n        if (!bounds) {\n            return;\n        }\n\n        var numFixedColumns = this.getFixedColumnCount(),\n            numColumns = this.getColumnCount(),\n            numRows = this.getRowCount(),\n            scrollableWidth = bounds.width - this.behavior.getFixedColumnsMaxWidth(),\n            gridProps = this.properties,\n            borderBox = gridProps.boxSizing === 'border-box',\n            lineGap = borderBox ? 0 : gridProps.gridLinesVWidth;\n\n        for (\n            var columnsWidth = 0, lastPageColumnCount = 0;\n            lastPageColumnCount < numColumns && columnsWidth < scrollableWidth;\n            lastPageColumnCount++\n        ) {\n            columnsWidth += this.getColumnWidth(numColumns - lastPageColumnCount - 1) + lineGap;\n        }\n        if (columnsWidth > scrollableWidth) {\n            lastPageColumnCount--;\n        }\n\n        var scrollableHeight = this.renderer.getVisibleScrollHeight();\n        lineGap = borderBox ? 0 : gridProps.gridLinesHWidth;\n\n        for (\n            var rowsHeight = 0, lastPageRowCount = 0;\n            lastPageRowCount < numRows && rowsHeight < scrollableHeight;\n            lastPageRowCount++\n        ) {\n            rowsHeight += this.getRowHeight(numRows - lastPageRowCount - 1) + lineGap;\n        }\n        if (rowsHeight > scrollableHeight) {\n            lastPageRowCount--;\n        }\n\n        // inform scroll bars\n        if (this.sbHScroller) {\n            var hMax = Math.max(0, numColumns - numFixedColumns - lastPageColumnCount);\n            this.setHScrollbarValues(hMax);\n            this.setHScrollValue(Math.min(this.getHScrollValue(), hMax));\n        }\n        if (this.sbVScroller) {\n            var vMax = Math.max(0, numRows - gridProps.fixedRowCount - lastPageRowCount);\n            this.setVScrollbarValues(vMax);\n            this.setVScrollValue(Math.min(this.getVScrollValue(), vMax));\n        }\n\n        this.computeCellsBounds();\n\n        // schedule to happen *after* the repaint\n        setTimeout(this.resizeScrollbars.bind(this));\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Scroll up one full page.\n     * @returns {number}\n     */\n    pageUp: function() {\n        var rowNum = this.renderer.getPageUpRow();\n        this.setVScrollValue(rowNum);\n        return rowNum;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Scroll down one full page.\n     * @returns {number}\n     */\n    pageDown: function() {\n        var rowNum = this.renderer.getPageDownRow();\n        this.setVScrollValue(rowNum);\n        return rowNum;\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Not yet implemented.\n     */\n    pageLeft: function() {\n        throw 'page left not yet implemented';\n    },\n\n    /**\n     * @memberOf Hypergrid#\n     * @desc Not yet implemented.\n     */\n    pageRight: function() {\n        throw 'page right not yet implemented';\n    }\n};\n","/* eslint-env browser */\n\n// NOTE: gulpfile.js's 'add-ons' task copies this file, altering the final line, to /demo/build/add-ons/, along with a minified version. Both files are eventually deployed to http://openfin.github.io/fin-hypergrid/add-ons/.\n\n// NOTE: This page generates 2 jsdoc pages, one for the `GroupedHeader` cell renderer class and the other for the plug-in (API with `install` method).\n\n'use strict';\n\nvar CLASS_NAME = 'GroupedHeader';\n\n/**\n * @summary ~For detailed tutorial-style documentation, see the {@link https://github.com/core/wiki/Grouped+Column+Headers|wiki page}.~\n * _(Unfortunately this page is missing.)_\n *\n * @desc This page is about the `groupedHeader` plug-in.\n *\n * For the cell renderer installed by this plug-in, see {@link GroupedHeader}.\n *\n * #### Table of contents\n *\n * Method|Description\n * ------|-----------\n * {@link groupedHeader.install}|Installs the {@link GroupedHeader} cell renderer.\n * {@link groupedHeader.decorateBackgroundWithBottomBorder}|The default background decorator.\n * {@link groupedHeader.decorateBackgroundWithLinearGradient}|An alternative background decorator.\n *\n * @namespace groupedHeader\n */\nvar groupedHeader;\n\n/** @typedef gradientStop\n * @type {Array}\n * @desc Consists of two elements:\n * 1. Element `[0]` (number): Stop position ranging from `0.0` (start of gradient) to `1.0` (end of gradient).\n * 2. Element `[1]` (string): CSS color spec in a string, one of:\n *  * color name (caution: some browsers may only accept the 16 HTML4 color names here)\n *  * #nnnnnn\n *  * rgb(r,g,b)\n *  * rgba(r,g,b,a)\n *  * hsl(h,s,l)\n *  * hsla(h,s,l,a)\n *\n *  Applied to the graphic context's {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient/addColorStop|addColorStop} method.\n */\n\n/** @typedef groupConfigObject\n * @type {object}\n * @summary Grouped header paint function `config` object overrides.\n * @desc Contains all of the regular paint function `config` object properties (see {@tutorial cell-renderer}).\n *\n * In addition, this object may contain the properties described below.\n *\n * Most of these properties (with some exceptions) may be \"constructable\":\n * That is, they may be functions and if so the function will be called and the property will take on the returned value.\n * Such functions are called once at the first column of each group with the cell renderer's `paint` function's {@link paintFunction|interface}.\n * The exceptions are properties that are already defined as methods (such as `paintBackground`).\n *\n * @property {paintFunction} [paintBackground=GroupedHeader#paintBackground]\n * Reference to the current background renderer for this grid's grouped column labels.\n * If omitted, uses {@link GroupedHeader#paintBackground|cell renderer's}.\n *\n * @property {function|number} [thickness]\n * Constant line thickness in pixels of the bottom border drawn when group config's (or cell renderer's) `paintBackground` is set to {@link groupedHeader.decorateBackgroundWithBottomBorder} (or a function that returns such a number).\n * If omitted, the bottom border will be drawn proportionally: Lowest-order nested group gets a 1-pixel thick border, with each higher-order group getting a progressively thicker border.\n *\n * @property {function|gradientStop[]} [gradientStops]\n * List of {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasGradient/addColorStop|gradient stops} that define the gradient (or a function that returns such a list).\n * Required when group config's (or cell renderer's) `paintBackground` is set to {@link groupedHeader.decorateBackgroundWithLinearGradient}.\n */\n\nvar prototypeGroupedHeader = {\n    /**\n     * @summary The grouped header paint function.\n     * @desc This is the heart of the cell renderer.\n     *\n     * If you feel the urge to override this, you are on the wrong path! Write a new cell renderer instead.\n     * @implements paintFunction\n     * @default\n     * @memberOf GroupedHeader#\n     */\n    paint: paintHeaderGroups,\n\n    // Remaining are exclusive to `GroupedHeader` and do not override regular cell renderer members:\n\n    /**\n     * @summary Group header delimiter.\n     * @desc String used within header strings to concatenate group label(s), always ending with actual header.\n     * @type {string}\n     * @default\n     * @memberOf GroupedHeader#\n     */\n    delimiter: '|',\n\n    /**\n     * @summary An additional renderer for just the background.\n     * @desc This is called by the `paint` function to paint the background before it calls the superclass's paint function to paint the foreground.\n     * This will be overridden by similar definition in `groupConfig` for the current nesting level.\n     * @implements paintFunction\n     * @default\n     * @memberOf GroupedHeader#\n     */\n    paintBackground: decorateBackgroundWithBottomBorder,\n\n    /**\n     * Height of header when flat (when there are no grouped columns).\n     *\n     * If the value is a string that ends with a `%` char, it is applied as a factor to the font size to get row height.\n     * Otherwise it is assumed to be an integer row height.\n     * In either case, the value is clamped to a minimum of 125% of the font size.\n     * @type {string|number}\n     * @default\n     */\n    flatHeight: '250%',\n\n    /**\n     * Height of each nested group label within a grouped header.\n     *\n     * The total header height therefore is this amount multiplied by the header group with the deepest nesting level.\n     *\n     * If the value is a string that ends with a `%` char, it is applied as a factor to the font size to get row height.\n     * Otherwise it is assumed to be an integer row height.\n     * In either case, the value is clamped to a minimum of 125% of the font size.\n     * @type {string|number}\n     * @default\n     */\n    nestedHeight: '160%',\n\n    /**\n     * Controls whether or not to draw the vertical rule lines between the column headers proper (_i.e.,_ the bottom row, _e.g.,_ the \"leaf nodes\" in a pivot).\n     * Setting this to false will only draw vertical rule lines between group labels.\n     * @todo Unimplemented. (Hypergrid knows how to render this use case when vc[i].bottom set to top of bottom row -- but this plugin does not currently set it.)\n     * @type {boolean}\n     * @default\n     */\n    columnHeaderLines: true,\n\n    /**\n     * Include group label widths in calculation of column width \"autosizing.\" Otherwise just the column headers proper (_i.e.,_ the bottom row, _e.g.,_ the \"leaf nodes\" in a pivot) are considered and the group labels may be truncated.\n     *\n     * Note that this property is effective when grid property `config.headerTextWrapping` is falsy and only useful when grid property `config.columnAutosizing` is truthy.\n     * @type {boolean}\n     * @default\n     */\n    autosizeGroups: true,\n\n    /**\n     * @summary Grouped header configuration overrides.\n     * @desc This array is a list of {@link groupConfigObject} objects, one for each nesting level, each of which may contain:\n     * * An override for the background decorator\n     * * Properties of proprietary interest to the background decorator\n     * * Miscellaneous overrides for the cell renderer's `paint` function's regular `config` object properties (_e.g.,_ `color`)\n     *\n     * The properties contained in each `config` object pertain to the group labels and their background decorators only. They do not pertain to the actual column headers. Those appear below all the nested group headers and are rendered using the unaltered paint function's config object.\n     *\n     * You can list a separate object for each level of group header nesting, beginning with the highest-order group header.\n     * However, note that if there are fewer of these objects in the list than the maximum depth of nested group headers, the list wraps (repeats).\n     *\n     * The default is a single-element array.\n     * As a consequence of the wrapping feature described above, it therefore accommodates all levels of nested group headers.\n     * The default consists of:\n     * * `color` - A new color 50% lighter than `config.color` (the cell's \"foreground\" color).\n     * * `gradientStops` - A gradient, 0% at top to 35% at bottom, of the above derived color.\n     * @type {groupConfigObject[]}\n     * @default\n     * @memberOf GroupedHeader#\n     */\n    groupConfig: [{\n\n        halign: 'center',\n\n        thickness: 1, // used only by decorateBackgroundWithBottomBorder\n\n        gradientStops: function(gc, config) { // used only by decorateBackgroundWithLinearGradient\n            var bgcolor = this.backgroundColor || config.backgroundColor;\n            return [\n                [0, 'white'], // top\n                [1, this.backgroundColor || config.backgroundColor]  // bottom\n            ];\n        }\n\n    }]\n};\n\n/**\n * @summary Mix in the code necessary to support grouped column headers.\n * @desc Performs the following mix ins:\n * 1. Creates a new `GroupedHeader` cell renderer and registers it with the grid.\n * 2. Set all active header cells to use the GroupHeader cell renderer.\n * 3. Extend the behavior's {@link Behavior#setHeaders|setHeaders} method.\n * 4. Extend the behavior's {@link Behavior#isColumnReorderable} method, which tells the behavior not to allow dragging grouped columns.\n * 5. Sets the data model's {@link dataModel#groupHeaderDelimiter|groupHeaderDelimiter} property, which tells the data model to prepend the up and down sort arrows to the last item (actual column header) of the header string rather than the start of the header string (which is the highest-order group label).\n * @function\n * @param {Hypergrid} grid - Your instantiated grid object.\n * @param {object} options - Additions/overrides for the grid's singleton {@link GroupedHeader|GroupedHeader} instance.\n * @param {function|string} [options.CellRenderer='SimpleCell'] - Cell renderer superclass to extend from OR name of a registered cell renderer to extend from.\n * If omitted, uses the constructor of the cell renderer being used by the first currently active header cell.\n * @memberOf groupedHeader\n */\nfunction installPlugin(grid, options) {\n    options = options || {};\n\n    // 1. Creates a new renderer and adds it to the grid.\n    var CellRenderer = options.CellRenderer || 'SimpleCell';\n\n    if (typeof CellRenderer === 'string') {\n        CellRenderer = grid.cellRenderers.get(CellRenderer).constructor;\n    }\n\n    if (typeof CellRenderer !== 'function') {\n        throw new grid.HypergridError('Expected `options.CellRenderer` to be a constructor or a registered cell redenderer.');\n    }\n\n    /**\n     * This is the cell renderer.\n     * @constructor\n     */\n    var GroupedHeader = CellRenderer.extend(CLASS_NAME, prototypeGroupedHeader);\n\n    // Register the GroupedHeader cell renderer, which also instantiates it\n    var cellRenderer = grid.cellRenderers.add(GroupedHeader);\n\n    // autosize the final column group tree\n    grid.addEventListener('fin-grid-rendered', function() {\n        if (cellRenderer.tree) {\n            autosizeTree(grid.behavior, cellRenderer.tree);\n            grid.checkColumnAutosizing();\n        }\n    });\n\n    // Set instance variables from `options` object, overriding values in above prototype\n    Object.assign(cellRenderer, options);\n    delete cellRenderer.CellRenderer;\n\n    cellRenderer.visibleColumns = grid.renderer.visibleColumns;\n\n    // 2. Set all column headers to use the GroupedHeader cell renderer\n    grid.properties.columnHeaderRenderer = CLASS_NAME;\n\n    // 3. Extend the behavior's `setHeaders` method.\n    grid.behavior.setHeaders = setHeaders; // This override calls the superclass's implementation\n\n    // 4. Extend the behavior's `isColumnReorderable` method.\n    grid.behavior.isColumnReorderable = isColumnReorderable;\n\n    // 5. Set the data model's `groupHeaderDelimiter` property (for placement of sort direction indicator)\n    grid.behavior.dataModel.groupHeaderDelimiter = cellRenderer.delimiter;\n}\n\n/**\n * @summary Set the headers _and_ set the header row height.\n * @desc Convenience function to:\n * 1. Call the underlying {@link behaviors/JSON#setHeaders|setHeaders} method.\n * 2. Set the header row height based on the maximum group depth.\n * @this {Behavior}\n * @param {string[]|object} headers - The header labels. One of:\n * * _If an array:_ Must contain all headers in column order.\n * * _If a hash:_ May contain any headers, keyed by field name, in any order.\n * @memberOf groupedHeader\n */\nfunction setHeaders(headers) {\n    var originalMethodFromPrototype = Object.getPrototypeOf(this).setHeaders,\n        groupedHeaderCellRenderer = this.grid.cellRenderers.get(CLASS_NAME),\n        delimiter = groupedHeaderCellRenderer.delimiter,\n        levels = this.columns.reduce(function(max, column) {\n            return Math.max(column.header.split(delimiter).length, max);\n        }, 0),\n        headerRowHeight = getRowHeight(groupedHeaderCellRenderer, this.grid.properties, levels),\n        headerDataModel = this.grid.behavior.subgrids.lookup.header;\n\n    // 1. Call the original implementation to actually set the headers\n    originalMethodFromPrototype.call(this, headers);\n\n    // 2. Set the header row height based on the maximum group depth among all active columns.\n    this.grid.setRowHeight(0, headerRowHeight, headerDataModel);\n}\n\nvar REGEX_EXTRACT_PX_VALUE = /\\b(\\d+(\\.\\d+)?)px\\b/;\nfunction getRowHeight(groupedHeaderCellRenderer, gridProps, levels) {\n    var m = gridProps.columnHeaderFont.match(REGEX_EXTRACT_PX_VALUE),\n        fontHeight = m && m[1] || 4 / 5 * gridProps.defaultRowHeight;\n\n    return levels === 1\n        ? getHeight(groupedHeaderCellRenderer.flatHeight, fontHeight)\n        : getHeight(groupedHeaderCellRenderer.nestedHeight, fontHeight) * levels;\n}\n\nvar REGEX_EXTRACT_PER_CENTAGE = /^(\\d+(\\.\\d+)?)%$/;\nfunction getHeight(factor, multiplicand) {\n    var m = factor.match(REGEX_EXTRACT_PER_CENTAGE);\n    return m ? m[1] / 100 * multiplicand : factor;\n}\n\n/**\n * Prevent column moving when there are any grouped headers.\n * @returns {boolean}\n * @memberOf groupedHeader\n * @inner\n */\nfunction isColumnReorderable() {\n    var originalMethodFromPrototype = Object.getPrototypeOf(this).isColumnReorderable,\n        isReorderable = originalMethodFromPrototype.call(this),\n        groupedHeaderCellRenderer = this.grid.cellRenderers.get(CLASS_NAME),\n        delimiter = groupedHeaderCellRenderer.delimiter;\n\n    return (\n        isReorderable &&\n        !this.columns.find(function(column) { // but only if no grouped columns\n            return column.getCellProperty(0, 'renderer') === CLASS_NAME && // header cell using GroupedHeader\n                column.header.indexOf(delimiter) !== -1; // header is part of a group\n        })\n    );\n}\n\n/**\n * @summary This cell renderer's paint function.\n * @desc This function renders a grouped column header when both of the following are true:\n * * Cell is a header cell.\n * * Column's header string contains the `delimiter` string.\n * @type {function}\n * @memberOf GroupedHeader#\n */\n\n/**\n * @summary The {@link GroupedHeader|GroupedHeader} cell renderer's `paint` function.\n * @desc This function is called by the Hypergrid renderer on every grid render, once for each column header from left to right.\n * Should be set on (and only on) all header cells  regardless of whether or not the header is part of a column group.\n * (See {@link groupedHeader.setHeaders} which does this for you.)\n *\n * ### Column Autosizing\n * Autosizing is performed by the renderer as it measures the rendered with of cell content, including the header cells. The original implementation (<= `1.1.2`) only considered the column headers proper (_i.e.,_ the bottom row, _e.g.,_ the \"leaf nodes\" in a pivot) in calculating the column width, which had the potential to truncate lengthy group labels that exceeded the sum of the column widths.\n *\n * As of `1.2.0,` if the new plugin property `this.autosizeGroups` is truthy _and_ `config.headerTextWrapping` is falsy, columns will be autosized to prevent truncation of group labels. The algorithm to accomplish this is complicated. First we build a lists of max widths for each level of grouping and for the columns as well.\n *\n * We do and re-do the above on each successive column, just as we do and re-do the group label renderering, because we cannot tell what's coming up and therefore cannot tell for certain when a column group ends. The resulting widths are set for all the preceding columns in the group.\n *\n * @implements paintFunction\n * @memberOf groupedHeader\n */\nfunction paintHeaderGroups(gc, config) {\n    var paint = this.super.paint,\n        columnIndex = config.gridCell.x,\n        values = config.value.split(this.delimiter), // each group header including column header\n        groupCount = values.length, // group header levels above column header\n        rect = config.bounds,\n        bottom = rect.y + rect.height,\n        bounds = Object.assign({}, rect), // save bounds for final column header render and resetting\n        prevVisCol = this.visibleColumns.find(function(visCol) {\n            return visCol.columnIndex === columnIndex - 1;\n        });\n\n    // Always paint the group header background as we may be repainting it with increasing widths\n    config.prefillColor = null;\n\n    // height of each level is the same, 1/levels of total height\n    rect.height /= groupCount;\n\n    // first build a tree (this.tree) representing the group nesting so far\n    for (var g = 0, y = rect.y, node = this.tree, children; g < groupCount; g++, y += rect.height, children = node.children) {\n        var value = values[g];\n        var widen = false;\n        if (g === 0) {\n            if (\n                columnIndex === 0 ||\n                groupCount === 1 ||\n                this.groupCount !== groupCount ||\n                this.tree.value !== value\n            ) {\n                // if we're autosizing all group levels, walk previously built tree, adjusting column widths as needed\n                if (columnIndex > 0 && this.tree && this.autosizeGroups) {\n                    autosizeTree(config.grid.behavior, this.tree)\n                }\n\n                node = this.tree = {\n                    value: value,\n                    children: [],\n                    left: bounds.x,\n                    width: bounds.width\n                };\n                if (prevVisCol && !this.columnHeaderLines && groupCount === 1) {\n                    prevVisCol.top = bottom;\n                }\n            } else {\n                widen = true;\n            }\n        } else if ( // subgroup the same?\n            g < groupCount - 1 && // is this subgroup level not the leaf level?\n            (node = children[children.length - 1]) && // and did the previous column already create a subgroup at this level?\n            node.value === value // and does it have same label as this column's?\n        ) {\n            widen = true; // same label, so just widen it\n        } else /*if (g !== 0)*/ {\n            node = {\n                value: value,\n                children: [],\n                left: bounds.x,\n                width: bounds.width\n            };\n            children.push(node);\n        }\n\n        if (widen) {\n            node.width += config.gridLinesVWidth + bounds.width;\n            if (prevVisCol) {\n                prevVisCol.top = this.columnHeaderLines || g < groupCount - 2 ? y + rect.height : bottom;\n            }\n        }\n\n        if (g < groupCount - 1) {\n            // Always paint the group header background\n            config.prefillColor = null;\n        }\n    }\n\n    // walk down the right-most branch and render each level (re-rendering previously rendered group labels but wider this time)\n    for (g = 0, node = this.tree; g < groupCount; g++, rect.y += rect.height, node = node.children[node.children.length - 1]) {\n\n        rect.x = node.left;\n        rect.width = node.width;\n\n        var stash = {\n                isColumnHovered: config.isColumnHovered,\n                isSelected: config.isSelected\n            },\n            gcfg = this.groupConfig,\n            len = gcfg && gcfg.length,\n            isGroupLabel = g < groupCount - 1;\n\n        if (isGroupLabel) {\n            // Suppress hover and selection effects for group headers\n            config.isColumnHovered = config.isSelected = false;\n\n            if (len) {\n                gcfg = gcfg[g % len]; // wrap if not enough elements\n                Object.keys(gcfg).forEach(stasher, this);\n            }\n\n            var paintBackground = config.paintBackground || this.paintBackground;\n            if (paintBackground) {\n                if (typeof paintBackground !== 'function') {\n                    paintBackground = groupedHeader[paintBackground];\n                }\n                if (typeof paintBackground !== 'function') {\n                    throw 'Expected background paint function or name of registered background paint function.';\n                }\n                if (!paintBackground.overlay) {\n                    config.prefillColor = config.backgroundColor;\n                    paintBackground.call(this, gc, config);\n                }\n            }\n        }\n\n        config.value = node.value;\n        paint.call(this, gc, config);\n        node.minWidth = config.minWidth;\n        node.columnIndex = columnIndex;\n\n        if (isGroupLabel) {\n            if (paintBackground && paintBackground.overlay) {\n                paintBackground.call(this, gc, config);\n            }\n            Object.assign(config, stash);\n        }\n    }\n\n    this.groupCount = groupCount; // todo could go at bottom\n\n    // Restore to original shape for next render\n    Object.assign(rect, bounds);\n\n    function stasher(key) {\n        stash[key] = config[key];\n        var property = gcfg[key];\n        if (key !== 'paintBackground' && typeof property === 'function') {\n            property = property.call(this, gc, config);\n        }\n        config[key] = property;\n    }\n}\n\nfunction autosizeTree(behavior, tree) {\n    if (tree.children.length) {\n        // walk tree to (1) factor preferredWidth into leaf nodes AND (2) widen superior nodes to accommodate children\n        tree.minWidth = Math.max(tree.minWidth, walkSuperior(behavior, tree));\n\n        // walk tree to widen subordinate nodes to their parent's width\n        walkSubordinate(behavior, tree);\n    }\n}\n\nfunction walkSuperior(behavior, node) {\n    if (node.children.length) {\n        return node.children.reduce(function (sum, child) {\n            sum += child.minWidth = Math.max(child.minWidth, walkSuperior(behavior, child));\n            return sum;\n        }, 0);\n    } else {\n        return node.minWidth = Math.max(node.minWidth, behavior.getActiveColumn(node.columnIndex).properties.preferredWidth);\n    }\n}\n\nfunction walkSubordinate(behavior, node) {\n    var childrenWidth = node.children.reduce(function(sum, child) { return sum + child.minWidth; }, 0),\n        padding = (node.minWidth - childrenWidth) / node.children.length;\n\n    node.children.forEach(function(child) {\n        child.minWidth += padding;\n\n        if (child.children.length) {\n            walkSubordinate(behavior, child);\n        } else {\n            var column = behavior.getActiveColumn(child.columnIndex);\n            column.properties.preferredWidth = child.minWidth;\n        }\n    });\n}\n\nvar regexRGBA = /^rgba|^transparent$/;\n\n/**\n * @summary Draw vertical gradient behind group label.\n * @desc _Do not call this function directly._\n *\n * Supply a reference to this function in the options object (first plug-in parameter):\n * * {@link GroupedHeader#paintBackground options.paintBackground}\n * * One or more elements in a {@link GroupedHeader#groupConfig options.groupConfig} array\n *\n * For example:\n * ```js\n * myGrid.installPlugins([\n *     [groupedHeaderPlugin, { paintBackground: groupedHeaderPlugin.decorateBackgroundWithLinearGradient }]\n * ]);\n * ```\n *\n * @this {GroupHeader}\n * @param {CanvasRenderingContext2D} gc\n * @param {object} config - The `paint` method's `config` object.\n * @memberOf groupedHeader\n */\nfunction decorateBackgroundWithLinearGradient(gc, config) {\n    var isTransparent,\n        bounds = config.bounds,\n        grad = gc.createLinearGradient(bounds.x, bounds.y, bounds.x, bounds.y + bounds.height);\n\n    (config.gradientStops || this.gradientStops).forEach(function(stop) {\n        isTransparent = isTransparent || regexRGBA.test(stop);\n        grad.addColorStop.apply(grad, stop);\n    });\n\n    if (isTransparent) {\n        gc.clearRect(bounds.x, bounds.y, bounds.width, bounds.height);\n    }\n\n    gc.cache.fillStyle = grad;\n    gc.fillRect(bounds.x, bounds.y, bounds.width, bounds.height);\n}\n\n/**\n\n * @summary Draw underscore under group label.\n * @desc _Do not call this function directly._\n *\n * Supply a reference to this function in the options object (first plug-in parameter):\n * * {@link GroupedHeader#paintBackground options.paintBackground}\n * * One or more elements in a {@link GroupedHeader#groupConfig options.groupConfig} array\n *\n * For example:\n * ```js\n * myGrid.installPlugins([\n *     [groupedHeaderPlugin, { paintBackground: groupedHeaderPlugin.decorateBackgroundWithBottomBorder }]\n * ]);\n * ```\n *\n * Albeit: The above is actually the default setting for the paintBackground option.\n *\n * @this {GroupHeader}\n * @param {CanvasRenderingContext2D} gc\n * @param {object} config - The `paint` method's `config` object.\n * @memberOf groupedHeader\n */\nfunction decorateBackgroundWithBottomBorder(gc, config) {\n    var bounds = config.bounds,\n        thickness = config.thickness ||\n            this.groupCount - this.groupIndex; // when `thickness` undefined, higher-order groups get progressively thicker borders\n\n    gc.cache.fillStyle = config.gridLinesVColor;\n    gc.fillRect(bounds.x, bounds.y + bounds.height - thickness, bounds.width, thickness);\n}\n\ndecorateBackgroundWithBottomBorder.overlay = true;\n\nmodule.exports = groupedHeader = {\n    name: 'groupedHeader',\n    install: installPlugin,\n    decorateBackgroundWithBottomBorder: decorateBackgroundWithBottomBorder,\n    decorateBackgroundWithLinearGradient: decorateBackgroundWithLinearGradient\n};\n","module.exports = superScriptNumber\n\nvar SUPERSCRIPTS = {\n  '0': '',\n  '1': '',\n  '2': '',\n  '3': '',\n  '4': '',\n  '5': '',\n  '6': '',\n  '7': '',\n  '8': '',\n  '9': '',\n  '+': '',\n  '-': '',\n  'a': '',\n  'b': '',\n  'c': '',\n  'd': '',\n  'e': '',\n  'f': '',\n  'g': '',\n  'h': '',\n  'i': '',\n  'j': '',\n  'k': '',\n  'l': '',\n  'm': '',\n  'n': '',\n  'o': '',\n  'p': '',\n  'r': '',\n  's': '',\n  't': '',\n  'u': '',\n  'v': '',\n  'w': '',\n  'x': '',\n  'y': '',\n  'z': ''\n}\n\nfunction superScriptNumber(num, base) {\n  var numStr = num.toString(base)\n  if(numStr === 'NaN')       { return '' }\n  if(numStr === 'Infinity')  { return '' }\n  if(numStr === '-Infinity') { return '' }\n  return numStr.split('').map(function(c) {\n    var supc = SUPERSCRIPTS[c]\n    if(supc) {\n      return supc\n    }\n    return ''\n  }).join('')\n}","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\nvar max = Math.max;\nvar min = Math.min;\nvar floor = Math.floor;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d\\d?)/g;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative, reason) {\n  var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;\n  var REPLACE_KEEPS_$0 = reason.REPLACE_KEEPS_$0;\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return replacer !== undefined\n        ? replacer.call(searchValue, O, replaceValue)\n        : nativeReplace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      if (\n        (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE && REPLACE_KEEPS_$0) ||\n        (typeof replaceValue === 'string' && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1)\n      ) {\n        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        results.push(result);\n        if (!global) break;\n\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n\n  // https://tc39.github.io/ecma262/#sec-getsubstitution\n  function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {\n    var tailPos = position + matched.length;\n    var m = captures.length;\n    var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n    if (namedCaptures !== undefined) {\n      namedCaptures = toObject(namedCaptures);\n      symbols = SUBSTITUTION_SYMBOLS;\n    }\n    return nativeReplace.call(replacement, symbols, function (match, ch) {\n      var capture;\n      switch (ch.charAt(0)) {\n        case '$': return '$';\n        case '&': return matched;\n        case '`': return str.slice(0, position);\n        case \"'\": return str.slice(tailPos);\n        case '<':\n          capture = namedCaptures[ch.slice(1, -1)];\n          break;\n        default: // \\d\\d?\n          var n = +ch;\n          if (n === 0) return match;\n          if (n > m) {\n            var f = floor(n / 10);\n            if (f === 0) return match;\n            if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n            return match;\n          }\n          capture = captures[n - 1];\n      }\n      return capture === undefined ? '' : capture;\n    });\n  }\n});\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\n\nvar fails = require('./fails');\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.github.io/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.github.io/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n"],"sourceRoot":""}